import { r as ref, o as onServerPrefetch, w as watch, u as unref, c as computed, a as onBeforeUnmount, g as getCurrentInstance, i as inject, b as isRef, d as reactive, e as onUnmounted, n as nextTick, f as boot } from "./index.37ec3002.js";
var extendStatics = function(d, b) {
  extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
    d2.__proto__ = b2;
  } || function(d2, b2) {
    for (var p in b2)
      if (Object.prototype.hasOwnProperty.call(b2, p))
        d2[p] = b2[p];
  };
  return extendStatics(d, b);
};
function __extends(d, b) {
  if (typeof b !== "function" && b !== null)
    throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
  extendStatics(d, b);
  function __2() {
    this.constructor = d;
  }
  d.prototype = b === null ? Object.create(b) : (__2.prototype = b.prototype, new __2());
}
var __assign = function() {
  __assign = Object.assign || function __assign2(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];
      for (var p in s)
        if (Object.prototype.hasOwnProperty.call(s, p))
          t[p] = s[p];
    }
    return t;
  };
  return __assign.apply(this, arguments);
};
function __rest(s, e) {
  var t = {};
  for (var p in s)
    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
      t[p] = s[p];
  if (s != null && typeof Object.getOwnPropertySymbols === "function")
    for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
      if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
        t[p[i]] = s[p[i]];
    }
  return t;
}
function __awaiter(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
}
function __generator(thisArg, body) {
  var _ = { label: 0, sent: function() {
    if (t[0] & 1)
      throw t[1];
    return t[1];
  }, trys: [], ops: [] }, f, y, t, g;
  return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
    return this;
  }), g;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f)
      throw new TypeError("Generator is already executing.");
    while (g && (g = 0, op[0] && (_ = 0)), _)
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
          return t;
        if (y = 0, t)
          op = [op[0] & 2, t.value];
        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;
          case 4:
            _.label++;
            return { value: op[1], done: false };
          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;
          case 7:
            op = _.ops.pop();
            _.trys.pop();
            continue;
          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }
            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }
            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }
            if (t && _.label < t[2]) {
              _.label = t[2];
              _.ops.push(op);
              break;
            }
            if (t[2])
              _.ops.pop();
            _.trys.pop();
            continue;
        }
        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    if (op[0] & 5)
      throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
}
function __spreadArray(to, from, pack) {
  if (pack || arguments.length === 2)
    for (var i = 0, l = from.length, ar; i < l; i++) {
      if (ar || !(i in from)) {
        if (!ar)
          ar = Array.prototype.slice.call(from, 0, i);
        ar[i] = from[i];
      }
    }
  return to.concat(ar || Array.prototype.slice.call(from));
}
var genericMessage = "Invariant Violation";
var _a$2 = Object.setPrototypeOf, setPrototypeOf = _a$2 === void 0 ? function(obj, proto) {
  obj.__proto__ = proto;
  return obj;
} : _a$2;
var InvariantError = function(_super) {
  __extends(InvariantError2, _super);
  function InvariantError2(message) {
    if (message === void 0) {
      message = genericMessage;
    }
    var _this = _super.call(this, typeof message === "number" ? genericMessage + ": " + message + " (see https://github.com/apollographql/invariant-packages)" : message) || this;
    _this.framesToPop = 1;
    _this.name = genericMessage;
    setPrototypeOf(_this, InvariantError2.prototype);
    return _this;
  }
  return InvariantError2;
}(Error);
function invariant$1(condition, message) {
  if (!condition) {
    throw new InvariantError(message);
  }
}
var verbosityLevels = ["debug", "log", "warn", "error", "silent"];
var verbosityLevel = verbosityLevels.indexOf("log");
function wrapConsoleMethod(name) {
  return function() {
    if (verbosityLevels.indexOf(name) >= verbosityLevel) {
      var method = console[name] || console.log;
      return method.apply(console, arguments);
    }
  };
}
(function(invariant2) {
  invariant2.debug = wrapConsoleMethod("debug");
  invariant2.log = wrapConsoleMethod("log");
  invariant2.warn = wrapConsoleMethod("warn");
  invariant2.error = wrapConsoleMethod("error");
})(invariant$1 || (invariant$1 = {}));
function maybe$2(thunk) {
  try {
    return thunk();
  } catch (_a2) {
  }
}
var global$1 = maybe$2(function() {
  return globalThis;
}) || maybe$2(function() {
  return window;
}) || maybe$2(function() {
  return self;
}) || maybe$2(function() {
  return global;
}) || maybe$2(function() {
  return maybe$2.constructor("return this")();
});
var __ = "__";
var GLOBAL_KEY = [__, __].join("DEV");
function getDEV() {
  try {
    return Boolean(__DEV__);
  } catch (_a2) {
    Object.defineProperty(global$1, GLOBAL_KEY, {
      value: maybe$2(function() {
        return "production";
      }) !== "production",
      enumerable: false,
      configurable: true,
      writable: true
    });
    return global$1[GLOBAL_KEY];
  }
}
var DEV = getDEV();
function maybe$1(thunk) {
  try {
    return thunk();
  } catch (_) {
  }
}
var safeGlobal = maybe$1(function() {
  return globalThis;
}) || maybe$1(function() {
  return window;
}) || maybe$1(function() {
  return self;
}) || maybe$1(function() {
  return global;
}) || maybe$1(function() {
  return maybe$1.constructor("return this")();
});
var needToRemove = false;
function install() {
  if (safeGlobal && !maybe$1(function() {
    return "production";
  }) && !maybe$1(function() {
    return process;
  })) {
    Object.defineProperty(safeGlobal, "process", {
      value: {
        env: {
          NODE_ENV: "production"
        }
      },
      configurable: true,
      enumerable: false,
      writable: true
    });
    needToRemove = true;
  }
}
install();
function remove() {
  if (needToRemove) {
    delete safeGlobal.process;
    needToRemove = false;
  }
}
var SYMBOL_TO_STRING_TAG = typeof Symbol === "function" && Symbol.toStringTag != null ? Symbol.toStringTag : "@@toStringTag";
var Kind = Object.freeze({
  NAME: "Name",
  DOCUMENT: "Document",
  OPERATION_DEFINITION: "OperationDefinition",
  VARIABLE_DEFINITION: "VariableDefinition",
  SELECTION_SET: "SelectionSet",
  FIELD: "Field",
  ARGUMENT: "Argument",
  FRAGMENT_SPREAD: "FragmentSpread",
  INLINE_FRAGMENT: "InlineFragment",
  FRAGMENT_DEFINITION: "FragmentDefinition",
  VARIABLE: "Variable",
  INT: "IntValue",
  FLOAT: "FloatValue",
  STRING: "StringValue",
  BOOLEAN: "BooleanValue",
  NULL: "NullValue",
  ENUM: "EnumValue",
  LIST: "ListValue",
  OBJECT: "ObjectValue",
  OBJECT_FIELD: "ObjectField",
  DIRECTIVE: "Directive",
  NAMED_TYPE: "NamedType",
  LIST_TYPE: "ListType",
  NON_NULL_TYPE: "NonNullType",
  SCHEMA_DEFINITION: "SchemaDefinition",
  OPERATION_TYPE_DEFINITION: "OperationTypeDefinition",
  SCALAR_TYPE_DEFINITION: "ScalarTypeDefinition",
  OBJECT_TYPE_DEFINITION: "ObjectTypeDefinition",
  FIELD_DEFINITION: "FieldDefinition",
  INPUT_VALUE_DEFINITION: "InputValueDefinition",
  INTERFACE_TYPE_DEFINITION: "InterfaceTypeDefinition",
  UNION_TYPE_DEFINITION: "UnionTypeDefinition",
  ENUM_TYPE_DEFINITION: "EnumTypeDefinition",
  ENUM_VALUE_DEFINITION: "EnumValueDefinition",
  INPUT_OBJECT_TYPE_DEFINITION: "InputObjectTypeDefinition",
  DIRECTIVE_DEFINITION: "DirectiveDefinition",
  SCHEMA_EXTENSION: "SchemaExtension",
  SCALAR_TYPE_EXTENSION: "ScalarTypeExtension",
  OBJECT_TYPE_EXTENSION: "ObjectTypeExtension",
  INTERFACE_TYPE_EXTENSION: "InterfaceTypeExtension",
  UNION_TYPE_EXTENSION: "UnionTypeExtension",
  ENUM_TYPE_EXTENSION: "EnumTypeExtension",
  INPUT_OBJECT_TYPE_EXTENSION: "InputObjectTypeExtension"
});
function invariant(condition, message) {
  var booleanCondition = Boolean(condition);
  if (!booleanCondition) {
    throw new Error(message != null ? message : "Unexpected invariant triggered.");
  }
}
var nodejsCustomInspectSymbol = typeof Symbol === "function" && typeof Symbol.for === "function" ? Symbol.for("nodejs.util.inspect.custom") : void 0;
var nodejsCustomInspectSymbol$1 = nodejsCustomInspectSymbol;
function defineInspect(classObject) {
  var fn = classObject.prototype.toJSON;
  typeof fn === "function" || invariant(0);
  classObject.prototype.inspect = fn;
  if (nodejsCustomInspectSymbol$1) {
    classObject.prototype[nodejsCustomInspectSymbol$1] = fn;
  }
}
var Location = /* @__PURE__ */ function() {
  function Location2(startToken, endToken, source) {
    this.start = startToken.start;
    this.end = endToken.end;
    this.startToken = startToken;
    this.endToken = endToken;
    this.source = source;
  }
  var _proto = Location2.prototype;
  _proto.toJSON = function toJSON() {
    return {
      start: this.start,
      end: this.end
    };
  };
  return Location2;
}();
defineInspect(Location);
var Token = /* @__PURE__ */ function() {
  function Token2(kind, start, end, line, column, prev, value) {
    this.kind = kind;
    this.start = start;
    this.end = end;
    this.line = line;
    this.column = column;
    this.value = value;
    this.prev = prev;
    this.next = null;
  }
  var _proto2 = Token2.prototype;
  _proto2.toJSON = function toJSON() {
    return {
      kind: this.kind,
      value: this.value,
      line: this.line,
      column: this.column
    };
  };
  return Token2;
}();
defineInspect(Token);
function isNode(maybeNode) {
  return maybeNode != null && typeof maybeNode.kind === "string";
}
function _typeof(obj) {
  "@babel/helpers - typeof";
  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof2(obj2) {
      return typeof obj2;
    };
  } else {
    _typeof = function _typeof2(obj2) {
      return obj2 && typeof Symbol === "function" && obj2.constructor === Symbol && obj2 !== Symbol.prototype ? "symbol" : typeof obj2;
    };
  }
  return _typeof(obj);
}
var MAX_ARRAY_LENGTH = 10;
var MAX_RECURSIVE_DEPTH = 2;
function inspect(value) {
  return formatValue(value, []);
}
function formatValue(value, seenValues) {
  switch (_typeof(value)) {
    case "string":
      return JSON.stringify(value);
    case "function":
      return value.name ? "[function ".concat(value.name, "]") : "[function]";
    case "object":
      if (value === null) {
        return "null";
      }
      return formatObjectValue(value, seenValues);
    default:
      return String(value);
  }
}
function formatObjectValue(value, previouslySeenValues) {
  if (previouslySeenValues.indexOf(value) !== -1) {
    return "[Circular]";
  }
  var seenValues = [].concat(previouslySeenValues, [value]);
  var customInspectFn = getCustomFn(value);
  if (customInspectFn !== void 0) {
    var customValue = customInspectFn.call(value);
    if (customValue !== value) {
      return typeof customValue === "string" ? customValue : formatValue(customValue, seenValues);
    }
  } else if (Array.isArray(value)) {
    return formatArray(value, seenValues);
  }
  return formatObject(value, seenValues);
}
function formatObject(object, seenValues) {
  var keys = Object.keys(object);
  if (keys.length === 0) {
    return "{}";
  }
  if (seenValues.length > MAX_RECURSIVE_DEPTH) {
    return "[" + getObjectTag(object) + "]";
  }
  var properties = keys.map(function(key) {
    var value = formatValue(object[key], seenValues);
    return key + ": " + value;
  });
  return "{ " + properties.join(", ") + " }";
}
function formatArray(array, seenValues) {
  if (array.length === 0) {
    return "[]";
  }
  if (seenValues.length > MAX_RECURSIVE_DEPTH) {
    return "[Array]";
  }
  var len = Math.min(MAX_ARRAY_LENGTH, array.length);
  var remaining = array.length - len;
  var items = [];
  for (var i = 0; i < len; ++i) {
    items.push(formatValue(array[i], seenValues));
  }
  if (remaining === 1) {
    items.push("... 1 more item");
  } else if (remaining > 1) {
    items.push("... ".concat(remaining, " more items"));
  }
  return "[" + items.join(", ") + "]";
}
function getCustomFn(object) {
  var customInspectFn = object[String(nodejsCustomInspectSymbol$1)];
  if (typeof customInspectFn === "function") {
    return customInspectFn;
  }
  if (typeof object.inspect === "function") {
    return object.inspect;
  }
}
function getObjectTag(object) {
  var tag = Object.prototype.toString.call(object).replace(/^\[object /, "").replace(/]$/, "");
  if (tag === "Object" && typeof object.constructor === "function") {
    var name = object.constructor.name;
    if (typeof name === "string" && name !== "") {
      return name;
    }
  }
  return tag;
}
function devAssert(condition, message) {
  var booleanCondition = Boolean(condition);
  if (!booleanCondition) {
    throw new Error(message);
  }
}
var instanceOf = function instanceOf2(value, constructor) {
  return value instanceof constructor;
};
function _defineProperties$1(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}
function _createClass$1(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties$1(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties$1(Constructor, staticProps);
  return Constructor;
}
var Source = /* @__PURE__ */ function() {
  function Source2(body) {
    var name = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "GraphQL request";
    var locationOffset = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {
      line: 1,
      column: 1
    };
    typeof body === "string" || devAssert(0, "Body must be a string. Received: ".concat(inspect(body), "."));
    this.body = body;
    this.name = name;
    this.locationOffset = locationOffset;
    this.locationOffset.line > 0 || devAssert(0, "line in locationOffset is 1-indexed and must be positive.");
    this.locationOffset.column > 0 || devAssert(0, "column in locationOffset is 1-indexed and must be positive.");
  }
  _createClass$1(Source2, [{
    key: SYMBOL_TO_STRING_TAG,
    get: function get() {
      return "Source";
    }
  }]);
  return Source2;
}();
function isSource(source) {
  return instanceOf(source, Source);
}
function dedentBlockStringValue(rawString) {
  var lines = rawString.split(/\r\n|[\n\r]/g);
  var commonIndent = getBlockStringIndentation(rawString);
  if (commonIndent !== 0) {
    for (var i = 1; i < lines.length; i++) {
      lines[i] = lines[i].slice(commonIndent);
    }
  }
  var startLine = 0;
  while (startLine < lines.length && isBlank(lines[startLine])) {
    ++startLine;
  }
  var endLine = lines.length;
  while (endLine > startLine && isBlank(lines[endLine - 1])) {
    --endLine;
  }
  return lines.slice(startLine, endLine).join("\n");
}
function isBlank(str) {
  for (var i = 0; i < str.length; ++i) {
    if (str[i] !== " " && str[i] !== "	") {
      return false;
    }
  }
  return true;
}
function getBlockStringIndentation(value) {
  var _commonIndent;
  var isFirstLine = true;
  var isEmptyLine = true;
  var indent2 = 0;
  var commonIndent = null;
  for (var i = 0; i < value.length; ++i) {
    switch (value.charCodeAt(i)) {
      case 13:
        if (value.charCodeAt(i + 1) === 10) {
          ++i;
        }
      case 10:
        isFirstLine = false;
        isEmptyLine = true;
        indent2 = 0;
        break;
      case 9:
      case 32:
        ++indent2;
        break;
      default:
        if (isEmptyLine && !isFirstLine && (commonIndent === null || indent2 < commonIndent)) {
          commonIndent = indent2;
        }
        isEmptyLine = false;
    }
  }
  return (_commonIndent = commonIndent) !== null && _commonIndent !== void 0 ? _commonIndent : 0;
}
function printBlockString(value) {
  var indentation = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
  var preferMultipleLines = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
  var isSingleLine = value.indexOf("\n") === -1;
  var hasLeadingSpace = value[0] === " " || value[0] === "	";
  var hasTrailingQuote = value[value.length - 1] === '"';
  var hasTrailingSlash = value[value.length - 1] === "\\";
  var printAsMultipleLines = !isSingleLine || hasTrailingQuote || hasTrailingSlash || preferMultipleLines;
  var result = "";
  if (printAsMultipleLines && !(isSingleLine && hasLeadingSpace)) {
    result += "\n" + indentation;
  }
  result += indentation ? value.replace(/\n/g, "\n" + indentation) : value;
  if (printAsMultipleLines) {
    result += "\n";
  }
  return '"""' + result.replace(/"""/g, '\\"""') + '"""';
}
var QueryDocumentKeys = {
  Name: [],
  Document: ["definitions"],
  OperationDefinition: ["name", "variableDefinitions", "directives", "selectionSet"],
  VariableDefinition: ["variable", "type", "defaultValue", "directives"],
  Variable: ["name"],
  SelectionSet: ["selections"],
  Field: ["alias", "name", "arguments", "directives", "selectionSet"],
  Argument: ["name", "value"],
  FragmentSpread: ["name", "directives"],
  InlineFragment: ["typeCondition", "directives", "selectionSet"],
  FragmentDefinition: [
    "name",
    "variableDefinitions",
    "typeCondition",
    "directives",
    "selectionSet"
  ],
  IntValue: [],
  FloatValue: [],
  StringValue: [],
  BooleanValue: [],
  NullValue: [],
  EnumValue: [],
  ListValue: ["values"],
  ObjectValue: ["fields"],
  ObjectField: ["name", "value"],
  Directive: ["name", "arguments"],
  NamedType: ["name"],
  ListType: ["type"],
  NonNullType: ["type"],
  SchemaDefinition: ["description", "directives", "operationTypes"],
  OperationTypeDefinition: ["type"],
  ScalarTypeDefinition: ["description", "name", "directives"],
  ObjectTypeDefinition: ["description", "name", "interfaces", "directives", "fields"],
  FieldDefinition: ["description", "name", "arguments", "type", "directives"],
  InputValueDefinition: ["description", "name", "type", "defaultValue", "directives"],
  InterfaceTypeDefinition: ["description", "name", "interfaces", "directives", "fields"],
  UnionTypeDefinition: ["description", "name", "directives", "types"],
  EnumTypeDefinition: ["description", "name", "directives", "values"],
  EnumValueDefinition: ["description", "name", "directives"],
  InputObjectTypeDefinition: ["description", "name", "directives", "fields"],
  DirectiveDefinition: ["description", "name", "arguments", "locations"],
  SchemaExtension: ["directives", "operationTypes"],
  ScalarTypeExtension: ["name", "directives"],
  ObjectTypeExtension: ["name", "interfaces", "directives", "fields"],
  InterfaceTypeExtension: ["name", "interfaces", "directives", "fields"],
  UnionTypeExtension: ["name", "directives", "types"],
  EnumTypeExtension: ["name", "directives", "values"],
  InputObjectTypeExtension: ["name", "directives", "fields"]
};
var BREAK = Object.freeze({});
function visit(root2, visitor) {
  var visitorKeys = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : QueryDocumentKeys;
  var stack = void 0;
  var inArray = Array.isArray(root2);
  var keys = [root2];
  var index = -1;
  var edits = [];
  var node = void 0;
  var key = void 0;
  var parent = void 0;
  var path = [];
  var ancestors = [];
  var newRoot = root2;
  do {
    index++;
    var isLeaving = index === keys.length;
    var isEdited = isLeaving && edits.length !== 0;
    if (isLeaving) {
      key = ancestors.length === 0 ? void 0 : path[path.length - 1];
      node = parent;
      parent = ancestors.pop();
      if (isEdited) {
        if (inArray) {
          node = node.slice();
        } else {
          var clone = {};
          for (var _i2 = 0, _Object$keys2 = Object.keys(node); _i2 < _Object$keys2.length; _i2++) {
            var k = _Object$keys2[_i2];
            clone[k] = node[k];
          }
          node = clone;
        }
        var editOffset = 0;
        for (var ii = 0; ii < edits.length; ii++) {
          var editKey = edits[ii][0];
          var editValue = edits[ii][1];
          if (inArray) {
            editKey -= editOffset;
          }
          if (inArray && editValue === null) {
            node.splice(editKey, 1);
            editOffset++;
          } else {
            node[editKey] = editValue;
          }
        }
      }
      index = stack.index;
      keys = stack.keys;
      edits = stack.edits;
      inArray = stack.inArray;
      stack = stack.prev;
    } else {
      key = parent ? inArray ? index : keys[index] : void 0;
      node = parent ? parent[key] : newRoot;
      if (node === null || node === void 0) {
        continue;
      }
      if (parent) {
        path.push(key);
      }
    }
    var result = void 0;
    if (!Array.isArray(node)) {
      if (!isNode(node)) {
        throw new Error("Invalid AST Node: ".concat(inspect(node), "."));
      }
      var visitFn = getVisitFn(visitor, node.kind, isLeaving);
      if (visitFn) {
        result = visitFn.call(visitor, node, key, parent, path, ancestors);
        if (result === BREAK) {
          break;
        }
        if (result === false) {
          if (!isLeaving) {
            path.pop();
            continue;
          }
        } else if (result !== void 0) {
          edits.push([key, result]);
          if (!isLeaving) {
            if (isNode(result)) {
              node = result;
            } else {
              path.pop();
              continue;
            }
          }
        }
      }
    }
    if (result === void 0 && isEdited) {
      edits.push([key, node]);
    }
    if (isLeaving) {
      path.pop();
    } else {
      var _visitorKeys$node$kin;
      stack = {
        inArray,
        index,
        keys,
        edits,
        prev: stack
      };
      inArray = Array.isArray(node);
      keys = inArray ? node : (_visitorKeys$node$kin = visitorKeys[node.kind]) !== null && _visitorKeys$node$kin !== void 0 ? _visitorKeys$node$kin : [];
      index = -1;
      edits = [];
      if (parent) {
        ancestors.push(parent);
      }
      parent = node;
    }
  } while (stack !== void 0);
  if (edits.length !== 0) {
    newRoot = edits[edits.length - 1][1];
  }
  return newRoot;
}
function getVisitFn(visitor, kind, isLeaving) {
  var kindVisitor = visitor[kind];
  if (kindVisitor) {
    if (!isLeaving && typeof kindVisitor === "function") {
      return kindVisitor;
    }
    var kindSpecificVisitor = isLeaving ? kindVisitor.leave : kindVisitor.enter;
    if (typeof kindSpecificVisitor === "function") {
      return kindSpecificVisitor;
    }
  } else {
    var specificVisitor = isLeaving ? visitor.leave : visitor.enter;
    if (specificVisitor) {
      if (typeof specificVisitor === "function") {
        return specificVisitor;
      }
      var specificKindVisitor = specificVisitor[kind];
      if (typeof specificKindVisitor === "function") {
        return specificKindVisitor;
      }
    }
  }
}
function print(ast) {
  return visit(ast, {
    leave: printDocASTReducer
  });
}
var MAX_LINE_LENGTH = 80;
var printDocASTReducer = {
  Name: function Name(node) {
    return node.value;
  },
  Variable: function Variable(node) {
    return "$" + node.name;
  },
  Document: function Document(node) {
    return join(node.definitions, "\n\n") + "\n";
  },
  OperationDefinition: function OperationDefinition(node) {
    var op = node.operation;
    var name = node.name;
    var varDefs = wrap$1("(", join(node.variableDefinitions, ", "), ")");
    var directives = join(node.directives, " ");
    var selectionSet = node.selectionSet;
    return !name && !directives && !varDefs && op === "query" ? selectionSet : join([op, join([name, varDefs]), directives, selectionSet], " ");
  },
  VariableDefinition: function VariableDefinition(_ref) {
    var variable = _ref.variable, type = _ref.type, defaultValue = _ref.defaultValue, directives = _ref.directives;
    return variable + ": " + type + wrap$1(" = ", defaultValue) + wrap$1(" ", join(directives, " "));
  },
  SelectionSet: function SelectionSet(_ref2) {
    var selections = _ref2.selections;
    return block(selections);
  },
  Field: function Field(_ref3) {
    var alias = _ref3.alias, name = _ref3.name, args = _ref3.arguments, directives = _ref3.directives, selectionSet = _ref3.selectionSet;
    var prefix = wrap$1("", alias, ": ") + name;
    var argsLine = prefix + wrap$1("(", join(args, ", "), ")");
    if (argsLine.length > MAX_LINE_LENGTH) {
      argsLine = prefix + wrap$1("(\n", indent(join(args, "\n")), "\n)");
    }
    return join([argsLine, join(directives, " "), selectionSet], " ");
  },
  Argument: function Argument(_ref4) {
    var name = _ref4.name, value = _ref4.value;
    return name + ": " + value;
  },
  FragmentSpread: function FragmentSpread(_ref5) {
    var name = _ref5.name, directives = _ref5.directives;
    return "..." + name + wrap$1(" ", join(directives, " "));
  },
  InlineFragment: function InlineFragment(_ref6) {
    var typeCondition = _ref6.typeCondition, directives = _ref6.directives, selectionSet = _ref6.selectionSet;
    return join(["...", wrap$1("on ", typeCondition), join(directives, " "), selectionSet], " ");
  },
  FragmentDefinition: function FragmentDefinition(_ref7) {
    var name = _ref7.name, typeCondition = _ref7.typeCondition, variableDefinitions = _ref7.variableDefinitions, directives = _ref7.directives, selectionSet = _ref7.selectionSet;
    return "fragment ".concat(name).concat(wrap$1("(", join(variableDefinitions, ", "), ")"), " ") + "on ".concat(typeCondition, " ").concat(wrap$1("", join(directives, " "), " ")) + selectionSet;
  },
  IntValue: function IntValue(_ref8) {
    var value = _ref8.value;
    return value;
  },
  FloatValue: function FloatValue(_ref9) {
    var value = _ref9.value;
    return value;
  },
  StringValue: function StringValue(_ref10, key) {
    var value = _ref10.value, isBlockString = _ref10.block;
    return isBlockString ? printBlockString(value, key === "description" ? "" : "  ") : JSON.stringify(value);
  },
  BooleanValue: function BooleanValue(_ref11) {
    var value = _ref11.value;
    return value ? "true" : "false";
  },
  NullValue: function NullValue() {
    return "null";
  },
  EnumValue: function EnumValue(_ref12) {
    var value = _ref12.value;
    return value;
  },
  ListValue: function ListValue(_ref13) {
    var values = _ref13.values;
    return "[" + join(values, ", ") + "]";
  },
  ObjectValue: function ObjectValue(_ref14) {
    var fields = _ref14.fields;
    return "{" + join(fields, ", ") + "}";
  },
  ObjectField: function ObjectField(_ref15) {
    var name = _ref15.name, value = _ref15.value;
    return name + ": " + value;
  },
  Directive: function Directive(_ref16) {
    var name = _ref16.name, args = _ref16.arguments;
    return "@" + name + wrap$1("(", join(args, ", "), ")");
  },
  NamedType: function NamedType(_ref17) {
    var name = _ref17.name;
    return name;
  },
  ListType: function ListType(_ref18) {
    var type = _ref18.type;
    return "[" + type + "]";
  },
  NonNullType: function NonNullType(_ref19) {
    var type = _ref19.type;
    return type + "!";
  },
  SchemaDefinition: addDescription(function(_ref20) {
    var directives = _ref20.directives, operationTypes = _ref20.operationTypes;
    return join(["schema", join(directives, " "), block(operationTypes)], " ");
  }),
  OperationTypeDefinition: function OperationTypeDefinition(_ref21) {
    var operation = _ref21.operation, type = _ref21.type;
    return operation + ": " + type;
  },
  ScalarTypeDefinition: addDescription(function(_ref22) {
    var name = _ref22.name, directives = _ref22.directives;
    return join(["scalar", name, join(directives, " ")], " ");
  }),
  ObjectTypeDefinition: addDescription(function(_ref23) {
    var name = _ref23.name, interfaces = _ref23.interfaces, directives = _ref23.directives, fields = _ref23.fields;
    return join(["type", name, wrap$1("implements ", join(interfaces, " & ")), join(directives, " "), block(fields)], " ");
  }),
  FieldDefinition: addDescription(function(_ref24) {
    var name = _ref24.name, args = _ref24.arguments, type = _ref24.type, directives = _ref24.directives;
    return name + (hasMultilineItems(args) ? wrap$1("(\n", indent(join(args, "\n")), "\n)") : wrap$1("(", join(args, ", "), ")")) + ": " + type + wrap$1(" ", join(directives, " "));
  }),
  InputValueDefinition: addDescription(function(_ref25) {
    var name = _ref25.name, type = _ref25.type, defaultValue = _ref25.defaultValue, directives = _ref25.directives;
    return join([name + ": " + type, wrap$1("= ", defaultValue), join(directives, " ")], " ");
  }),
  InterfaceTypeDefinition: addDescription(function(_ref26) {
    var name = _ref26.name, interfaces = _ref26.interfaces, directives = _ref26.directives, fields = _ref26.fields;
    return join(["interface", name, wrap$1("implements ", join(interfaces, " & ")), join(directives, " "), block(fields)], " ");
  }),
  UnionTypeDefinition: addDescription(function(_ref27) {
    var name = _ref27.name, directives = _ref27.directives, types = _ref27.types;
    return join(["union", name, join(directives, " "), types && types.length !== 0 ? "= " + join(types, " | ") : ""], " ");
  }),
  EnumTypeDefinition: addDescription(function(_ref28) {
    var name = _ref28.name, directives = _ref28.directives, values = _ref28.values;
    return join(["enum", name, join(directives, " "), block(values)], " ");
  }),
  EnumValueDefinition: addDescription(function(_ref29) {
    var name = _ref29.name, directives = _ref29.directives;
    return join([name, join(directives, " ")], " ");
  }),
  InputObjectTypeDefinition: addDescription(function(_ref30) {
    var name = _ref30.name, directives = _ref30.directives, fields = _ref30.fields;
    return join(["input", name, join(directives, " "), block(fields)], " ");
  }),
  DirectiveDefinition: addDescription(function(_ref31) {
    var name = _ref31.name, args = _ref31.arguments, repeatable = _ref31.repeatable, locations = _ref31.locations;
    return "directive @" + name + (hasMultilineItems(args) ? wrap$1("(\n", indent(join(args, "\n")), "\n)") : wrap$1("(", join(args, ", "), ")")) + (repeatable ? " repeatable" : "") + " on " + join(locations, " | ");
  }),
  SchemaExtension: function SchemaExtension(_ref32) {
    var directives = _ref32.directives, operationTypes = _ref32.operationTypes;
    return join(["extend schema", join(directives, " "), block(operationTypes)], " ");
  },
  ScalarTypeExtension: function ScalarTypeExtension(_ref33) {
    var name = _ref33.name, directives = _ref33.directives;
    return join(["extend scalar", name, join(directives, " ")], " ");
  },
  ObjectTypeExtension: function ObjectTypeExtension(_ref34) {
    var name = _ref34.name, interfaces = _ref34.interfaces, directives = _ref34.directives, fields = _ref34.fields;
    return join(["extend type", name, wrap$1("implements ", join(interfaces, " & ")), join(directives, " "), block(fields)], " ");
  },
  InterfaceTypeExtension: function InterfaceTypeExtension(_ref35) {
    var name = _ref35.name, interfaces = _ref35.interfaces, directives = _ref35.directives, fields = _ref35.fields;
    return join(["extend interface", name, wrap$1("implements ", join(interfaces, " & ")), join(directives, " "), block(fields)], " ");
  },
  UnionTypeExtension: function UnionTypeExtension(_ref36) {
    var name = _ref36.name, directives = _ref36.directives, types = _ref36.types;
    return join(["extend union", name, join(directives, " "), types && types.length !== 0 ? "= " + join(types, " | ") : ""], " ");
  },
  EnumTypeExtension: function EnumTypeExtension(_ref37) {
    var name = _ref37.name, directives = _ref37.directives, values = _ref37.values;
    return join(["extend enum", name, join(directives, " "), block(values)], " ");
  },
  InputObjectTypeExtension: function InputObjectTypeExtension(_ref38) {
    var name = _ref38.name, directives = _ref38.directives, fields = _ref38.fields;
    return join(["extend input", name, join(directives, " "), block(fields)], " ");
  }
};
function addDescription(cb) {
  return function(node) {
    return join([node.description, cb(node)], "\n");
  };
}
function join(maybeArray) {
  var _maybeArray$filter$jo;
  var separator = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
  return (_maybeArray$filter$jo = maybeArray === null || maybeArray === void 0 ? void 0 : maybeArray.filter(function(x) {
    return x;
  }).join(separator)) !== null && _maybeArray$filter$jo !== void 0 ? _maybeArray$filter$jo : "";
}
function block(array) {
  return wrap$1("{\n", indent(join(array, "\n")), "\n}");
}
function wrap$1(start, maybeString) {
  var end = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "";
  return maybeString != null && maybeString !== "" ? start + maybeString + end : "";
}
function indent(str) {
  return wrap$1("  ", str.replace(/\n/g, "\n  "));
}
function isMultiline(str) {
  return str.indexOf("\n") !== -1;
}
function hasMultilineItems(maybeArray) {
  return maybeArray != null && maybeArray.some(isMultiline);
}
function isSelectionNode(node) {
  return node.kind === Kind.FIELD || node.kind === Kind.FRAGMENT_SPREAD || node.kind === Kind.INLINE_FRAGMENT;
}
function removeTemporaryGlobals() {
  return typeof Source === "function" ? remove() : remove();
}
function checkDEV() {
  __DEV__ ? invariant$1("boolean" === typeof DEV, DEV) : invariant$1("boolean" === typeof DEV, 39);
}
removeTemporaryGlobals();
checkDEV();
function shouldInclude(_a2, variables) {
  var directives = _a2.directives;
  if (!directives || !directives.length) {
    return true;
  }
  return getInclusionDirectives(directives).every(function(_a3) {
    var directive = _a3.directive, ifArgument = _a3.ifArgument;
    var evaledValue = false;
    if (ifArgument.value.kind === "Variable") {
      evaledValue = variables && variables[ifArgument.value.name.value];
      __DEV__ ? invariant$1(evaledValue !== void 0, "Invalid variable referenced in @".concat(directive.name.value, " directive.")) : invariant$1(evaledValue !== void 0, 40);
    } else {
      evaledValue = ifArgument.value.value;
    }
    return directive.name.value === "skip" ? !evaledValue : evaledValue;
  });
}
function hasDirectives(names, root2, all) {
  var nameSet = new Set(names);
  var uniqueCount = nameSet.size;
  visit(root2, {
    Directive: function(node) {
      if (nameSet.delete(node.name.value) && (!all || !nameSet.size)) {
        return BREAK;
      }
    }
  });
  return all ? !nameSet.size : nameSet.size < uniqueCount;
}
function hasClientExports(document) {
  return document && hasDirectives(["client", "export"], document, true);
}
function isInclusionDirective(_a2) {
  var value = _a2.name.value;
  return value === "skip" || value === "include";
}
function getInclusionDirectives(directives) {
  var result = [];
  if (directives && directives.length) {
    directives.forEach(function(directive) {
      if (!isInclusionDirective(directive))
        return;
      var directiveArguments = directive.arguments;
      var directiveName = directive.name.value;
      __DEV__ ? invariant$1(directiveArguments && directiveArguments.length === 1, "Incorrect number of arguments for the @".concat(directiveName, " directive.")) : invariant$1(directiveArguments && directiveArguments.length === 1, 41);
      var ifArgument = directiveArguments[0];
      __DEV__ ? invariant$1(ifArgument.name && ifArgument.name.value === "if", "Invalid argument for the @".concat(directiveName, " directive.")) : invariant$1(ifArgument.name && ifArgument.name.value === "if", 42);
      var ifValue = ifArgument.value;
      __DEV__ ? invariant$1(ifValue && (ifValue.kind === "Variable" || ifValue.kind === "BooleanValue"), "Argument for the @".concat(directiveName, " directive must be a variable or a boolean value.")) : invariant$1(ifValue && (ifValue.kind === "Variable" || ifValue.kind === "BooleanValue"), 43);
      result.push({ directive, ifArgument });
    });
  }
  return result;
}
function getFragmentQueryDocument(document, fragmentName) {
  var actualFragmentName = fragmentName;
  var fragments = [];
  document.definitions.forEach(function(definition) {
    if (definition.kind === "OperationDefinition") {
      throw __DEV__ ? new InvariantError("Found a ".concat(definition.operation, " operation").concat(definition.name ? " named '".concat(definition.name.value, "'") : "", ". ") + "No operations are allowed when using a fragment as a query. Only fragments are allowed.") : new InvariantError(44);
    }
    if (definition.kind === "FragmentDefinition") {
      fragments.push(definition);
    }
  });
  if (typeof actualFragmentName === "undefined") {
    __DEV__ ? invariant$1(fragments.length === 1, "Found ".concat(fragments.length, " fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")) : invariant$1(fragments.length === 1, 45);
    actualFragmentName = fragments[0].name.value;
  }
  var query = __assign(__assign({}, document), { definitions: __spreadArray([
    {
      kind: "OperationDefinition",
      operation: "query",
      selectionSet: {
        kind: "SelectionSet",
        selections: [
          {
            kind: "FragmentSpread",
            name: {
              kind: "Name",
              value: actualFragmentName
            }
          }
        ]
      }
    }
  ], document.definitions, true) });
  return query;
}
function createFragmentMap(fragments) {
  if (fragments === void 0) {
    fragments = [];
  }
  var symTable = {};
  fragments.forEach(function(fragment) {
    symTable[fragment.name.value] = fragment;
  });
  return symTable;
}
function getFragmentFromSelection(selection, fragmentMap) {
  switch (selection.kind) {
    case "InlineFragment":
      return selection;
    case "FragmentSpread": {
      var fragmentName = selection.name.value;
      if (typeof fragmentMap === "function") {
        return fragmentMap(fragmentName);
      }
      var fragment = fragmentMap && fragmentMap[fragmentName];
      __DEV__ ? invariant$1(fragment, "No fragment named ".concat(fragmentName)) : invariant$1(fragment, 46);
      return fragment || null;
    }
    default:
      return null;
  }
}
function isNonNullObject(obj) {
  return obj !== null && typeof obj === "object";
}
function makeReference(id) {
  return { __ref: String(id) };
}
function isReference(obj) {
  return Boolean(obj && typeof obj === "object" && typeof obj.__ref === "string");
}
function isDocumentNode(value) {
  return isNonNullObject(value) && value.kind === "Document" && Array.isArray(value.definitions);
}
function isStringValue(value) {
  return value.kind === "StringValue";
}
function isBooleanValue(value) {
  return value.kind === "BooleanValue";
}
function isIntValue(value) {
  return value.kind === "IntValue";
}
function isFloatValue(value) {
  return value.kind === "FloatValue";
}
function isVariable(value) {
  return value.kind === "Variable";
}
function isObjectValue(value) {
  return value.kind === "ObjectValue";
}
function isListValue(value) {
  return value.kind === "ListValue";
}
function isEnumValue(value) {
  return value.kind === "EnumValue";
}
function isNullValue(value) {
  return value.kind === "NullValue";
}
function valueToObjectRepresentation(argObj, name, value, variables) {
  if (isIntValue(value) || isFloatValue(value)) {
    argObj[name.value] = Number(value.value);
  } else if (isBooleanValue(value) || isStringValue(value)) {
    argObj[name.value] = value.value;
  } else if (isObjectValue(value)) {
    var nestedArgObj_1 = {};
    value.fields.map(function(obj) {
      return valueToObjectRepresentation(nestedArgObj_1, obj.name, obj.value, variables);
    });
    argObj[name.value] = nestedArgObj_1;
  } else if (isVariable(value)) {
    var variableValue = (variables || {})[value.name.value];
    argObj[name.value] = variableValue;
  } else if (isListValue(value)) {
    argObj[name.value] = value.values.map(function(listValue) {
      var nestedArgArrayObj = {};
      valueToObjectRepresentation(nestedArgArrayObj, name, listValue, variables);
      return nestedArgArrayObj[name.value];
    });
  } else if (isEnumValue(value)) {
    argObj[name.value] = value.value;
  } else if (isNullValue(value)) {
    argObj[name.value] = null;
  } else {
    throw __DEV__ ? new InvariantError('The inline argument "'.concat(name.value, '" of kind "').concat(value.kind, '"') + "is not supported. Use variables instead of inline arguments to overcome this limitation.") : new InvariantError(55);
  }
}
function storeKeyNameFromField(field, variables) {
  var directivesObj = null;
  if (field.directives) {
    directivesObj = {};
    field.directives.forEach(function(directive) {
      directivesObj[directive.name.value] = {};
      if (directive.arguments) {
        directive.arguments.forEach(function(_a2) {
          var name = _a2.name, value = _a2.value;
          return valueToObjectRepresentation(directivesObj[directive.name.value], name, value, variables);
        });
      }
    });
  }
  var argObj = null;
  if (field.arguments && field.arguments.length) {
    argObj = {};
    field.arguments.forEach(function(_a2) {
      var name = _a2.name, value = _a2.value;
      return valueToObjectRepresentation(argObj, name, value, variables);
    });
  }
  return getStoreKeyName(field.name.value, argObj, directivesObj);
}
var KNOWN_DIRECTIVES = [
  "connection",
  "include",
  "skip",
  "client",
  "rest",
  "export"
];
var getStoreKeyName = Object.assign(function(fieldName, args, directives) {
  if (args && directives && directives["connection"] && directives["connection"]["key"]) {
    if (directives["connection"]["filter"] && directives["connection"]["filter"].length > 0) {
      var filterKeys = directives["connection"]["filter"] ? directives["connection"]["filter"] : [];
      filterKeys.sort();
      var filteredArgs_1 = {};
      filterKeys.forEach(function(key) {
        filteredArgs_1[key] = args[key];
      });
      return "".concat(directives["connection"]["key"], "(").concat(stringify(filteredArgs_1), ")");
    } else {
      return directives["connection"]["key"];
    }
  }
  var completeFieldName = fieldName;
  if (args) {
    var stringifiedArgs = stringify(args);
    completeFieldName += "(".concat(stringifiedArgs, ")");
  }
  if (directives) {
    Object.keys(directives).forEach(function(key) {
      if (KNOWN_DIRECTIVES.indexOf(key) !== -1)
        return;
      if (directives[key] && Object.keys(directives[key]).length) {
        completeFieldName += "@".concat(key, "(").concat(stringify(directives[key]), ")");
      } else {
        completeFieldName += "@".concat(key);
      }
    });
  }
  return completeFieldName;
}, {
  setStringify: function(s) {
    var previous = stringify;
    stringify = s;
    return previous;
  }
});
var stringify = function defaultStringify(value) {
  return JSON.stringify(value, stringifyReplacer);
};
function stringifyReplacer(_key, value) {
  if (isNonNullObject(value) && !Array.isArray(value)) {
    value = Object.keys(value).sort().reduce(function(copy, key) {
      copy[key] = value[key];
      return copy;
    }, {});
  }
  return value;
}
function argumentsObjectFromField(field, variables) {
  if (field.arguments && field.arguments.length) {
    var argObj_1 = {};
    field.arguments.forEach(function(_a2) {
      var name = _a2.name, value = _a2.value;
      return valueToObjectRepresentation(argObj_1, name, value, variables);
    });
    return argObj_1;
  }
  return null;
}
function resultKeyNameFromField(field) {
  return field.alias ? field.alias.value : field.name.value;
}
function getTypenameFromResult(result, selectionSet, fragmentMap) {
  if (typeof result.__typename === "string") {
    return result.__typename;
  }
  for (var _i = 0, _a2 = selectionSet.selections; _i < _a2.length; _i++) {
    var selection = _a2[_i];
    if (isField(selection)) {
      if (selection.name.value === "__typename") {
        return result[resultKeyNameFromField(selection)];
      }
    } else {
      var typename = getTypenameFromResult(result, getFragmentFromSelection(selection, fragmentMap).selectionSet, fragmentMap);
      if (typeof typename === "string") {
        return typename;
      }
    }
  }
}
function isField(selection) {
  return selection.kind === "Field";
}
function isInlineFragment(selection) {
  return selection.kind === "InlineFragment";
}
function checkDocument(doc) {
  __DEV__ ? invariant$1(doc && doc.kind === "Document", 'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql') : invariant$1(doc && doc.kind === "Document", 47);
  var operations = doc.definitions.filter(function(d) {
    return d.kind !== "FragmentDefinition";
  }).map(function(definition) {
    if (definition.kind !== "OperationDefinition") {
      throw __DEV__ ? new InvariantError('Schema type definitions not allowed in queries. Found: "'.concat(definition.kind, '"')) : new InvariantError(48);
    }
    return definition;
  });
  __DEV__ ? invariant$1(operations.length <= 1, "Ambiguous GraphQL document: contains ".concat(operations.length, " operations")) : invariant$1(operations.length <= 1, 49);
  return doc;
}
function getOperationDefinition(doc) {
  checkDocument(doc);
  return doc.definitions.filter(function(definition) {
    return definition.kind === "OperationDefinition";
  })[0];
}
function getOperationName(doc) {
  return doc.definitions.filter(function(definition) {
    return definition.kind === "OperationDefinition" && !!definition.name;
  }).map(function(x) {
    return x.name.value;
  })[0] || null;
}
function getFragmentDefinitions(doc) {
  return doc.definitions.filter(function(definition) {
    return definition.kind === "FragmentDefinition";
  });
}
function getQueryDefinition(doc) {
  var queryDef = getOperationDefinition(doc);
  __DEV__ ? invariant$1(queryDef && queryDef.operation === "query", "Must contain a query definition.") : invariant$1(queryDef && queryDef.operation === "query", 50);
  return queryDef;
}
function getFragmentDefinition(doc) {
  __DEV__ ? invariant$1(doc.kind === "Document", 'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql') : invariant$1(doc.kind === "Document", 51);
  __DEV__ ? invariant$1(doc.definitions.length <= 1, "Fragment must have exactly one definition.") : invariant$1(doc.definitions.length <= 1, 52);
  var fragmentDef = doc.definitions[0];
  __DEV__ ? invariant$1(fragmentDef.kind === "FragmentDefinition", "Must be a fragment definition.") : invariant$1(fragmentDef.kind === "FragmentDefinition", 53);
  return fragmentDef;
}
function getMainDefinition(queryDoc) {
  checkDocument(queryDoc);
  var fragmentDefinition;
  for (var _i = 0, _a2 = queryDoc.definitions; _i < _a2.length; _i++) {
    var definition = _a2[_i];
    if (definition.kind === "OperationDefinition") {
      var operation = definition.operation;
      if (operation === "query" || operation === "mutation" || operation === "subscription") {
        return definition;
      }
    }
    if (definition.kind === "FragmentDefinition" && !fragmentDefinition) {
      fragmentDefinition = definition;
    }
  }
  if (fragmentDefinition) {
    return fragmentDefinition;
  }
  throw __DEV__ ? new InvariantError("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment.") : new InvariantError(54);
}
function getDefaultValues(definition) {
  var defaultValues = /* @__PURE__ */ Object.create(null);
  var defs = definition && definition.variableDefinitions;
  if (defs && defs.length) {
    defs.forEach(function(def) {
      if (def.defaultValue) {
        valueToObjectRepresentation(defaultValues, def.variable.name, def.defaultValue);
      }
    });
  }
  return defaultValues;
}
var isArray = Array.isArray;
function isNonEmptyArray(value) {
  return Array.isArray(value) && value.length > 0;
}
var TYPENAME_FIELD = {
  kind: Kind.FIELD,
  name: {
    kind: Kind.NAME,
    value: "__typename"
  }
};
function isEmpty(op, fragmentMap) {
  return !op || op.selectionSet.selections.every(function(selection) {
    return selection.kind === Kind.FRAGMENT_SPREAD && isEmpty(fragmentMap[selection.name.value], fragmentMap);
  });
}
function nullIfDocIsEmpty(doc) {
  return isEmpty(getOperationDefinition(doc) || getFragmentDefinition(doc), createFragmentMap(getFragmentDefinitions(doc))) ? null : doc;
}
function getDirectiveMatcher(directives) {
  var nameSet = /* @__PURE__ */ new Set();
  var tests = [];
  directives.forEach(function(directive) {
    if (directive.name) {
      nameSet.add(directive.name);
    } else if (directive.test) {
      tests.push(directive.test);
    }
  });
  return function(directive) {
    return nameSet.has(directive.name.value) || tests.some(function(test) {
      return test(directive);
    });
  };
}
function makeInUseGetterFunction(defaultKey) {
  var map = /* @__PURE__ */ new Map();
  return function inUseGetterFunction(key) {
    if (key === void 0) {
      key = defaultKey;
    }
    var inUse = map.get(key);
    if (!inUse) {
      map.set(key, inUse = {
        variables: /* @__PURE__ */ new Set(),
        fragmentSpreads: /* @__PURE__ */ new Set()
      });
    }
    return inUse;
  };
}
function removeDirectivesFromDocument(directives, doc) {
  var getInUseByOperationName = makeInUseGetterFunction("");
  var getInUseByFragmentName = makeInUseGetterFunction("");
  var getInUse = function(ancestors) {
    for (var p = 0, ancestor = void 0; p < ancestors.length && (ancestor = ancestors[p]); ++p) {
      if (isArray(ancestor))
        continue;
      if (ancestor.kind === Kind.OPERATION_DEFINITION) {
        return getInUseByOperationName(ancestor.name && ancestor.name.value);
      }
      if (ancestor.kind === Kind.FRAGMENT_DEFINITION) {
        return getInUseByFragmentName(ancestor.name.value);
      }
    }
    __DEV__ && invariant$1.error("Could not find operation or fragment");
    return null;
  };
  var operationCount = 0;
  for (var i = doc.definitions.length - 1; i >= 0; --i) {
    if (doc.definitions[i].kind === Kind.OPERATION_DEFINITION) {
      ++operationCount;
    }
  }
  var directiveMatcher = getDirectiveMatcher(directives);
  var hasRemoveDirective = directives.some(function(directive) {
    return directive.remove;
  });
  var shouldRemoveField = function(nodeDirectives) {
    return hasRemoveDirective && nodeDirectives && nodeDirectives.some(directiveMatcher);
  };
  var originalFragmentDefsByPath = /* @__PURE__ */ new Map();
  var firstVisitMadeChanges = false;
  var fieldOrInlineFragmentVisitor = {
    enter: function(node) {
      if (shouldRemoveField(node.directives)) {
        firstVisitMadeChanges = true;
        return null;
      }
    }
  };
  var docWithoutDirectiveSubtrees = visit(doc, {
    Field: fieldOrInlineFragmentVisitor,
    InlineFragment: fieldOrInlineFragmentVisitor,
    VariableDefinition: {
      enter: function() {
        return false;
      }
    },
    Variable: {
      enter: function(node, _key, _parent, _path, ancestors) {
        var inUse = getInUse(ancestors);
        if (inUse) {
          inUse.variables.add(node.name.value);
        }
      }
    },
    FragmentSpread: {
      enter: function(node, _key, _parent, _path, ancestors) {
        if (shouldRemoveField(node.directives)) {
          firstVisitMadeChanges = true;
          return null;
        }
        var inUse = getInUse(ancestors);
        if (inUse) {
          inUse.fragmentSpreads.add(node.name.value);
        }
      }
    },
    FragmentDefinition: {
      enter: function(node, _key, _parent, path) {
        originalFragmentDefsByPath.set(JSON.stringify(path), node);
      },
      leave: function(node, _key, _parent, path) {
        var originalNode = originalFragmentDefsByPath.get(JSON.stringify(path));
        if (node === originalNode) {
          return node;
        }
        if (operationCount > 0 && node.selectionSet.selections.every(function(selection) {
          return selection.kind === Kind.FIELD && selection.name.value === "__typename";
        })) {
          getInUseByFragmentName(node.name.value).removed = true;
          firstVisitMadeChanges = true;
          return null;
        }
      }
    },
    Directive: {
      leave: function(node) {
        if (directiveMatcher(node)) {
          firstVisitMadeChanges = true;
          return null;
        }
      }
    }
  });
  if (!firstVisitMadeChanges) {
    return doc;
  }
  var populateTransitiveVars = function(inUse) {
    if (!inUse.transitiveVars) {
      inUse.transitiveVars = new Set(inUse.variables);
      if (!inUse.removed) {
        inUse.fragmentSpreads.forEach(function(childFragmentName) {
          populateTransitiveVars(getInUseByFragmentName(childFragmentName)).transitiveVars.forEach(function(varName) {
            inUse.transitiveVars.add(varName);
          });
        });
      }
    }
    return inUse;
  };
  var allFragmentNamesUsed = /* @__PURE__ */ new Set();
  docWithoutDirectiveSubtrees.definitions.forEach(function(def) {
    if (def.kind === Kind.OPERATION_DEFINITION) {
      populateTransitiveVars(getInUseByOperationName(def.name && def.name.value)).fragmentSpreads.forEach(function(childFragmentName) {
        allFragmentNamesUsed.add(childFragmentName);
      });
    } else if (def.kind === Kind.FRAGMENT_DEFINITION && operationCount === 0 && !getInUseByFragmentName(def.name.value).removed) {
      allFragmentNamesUsed.add(def.name.value);
    }
  });
  allFragmentNamesUsed.forEach(function(fragmentName) {
    populateTransitiveVars(getInUseByFragmentName(fragmentName)).fragmentSpreads.forEach(function(childFragmentName) {
      allFragmentNamesUsed.add(childFragmentName);
    });
  });
  var fragmentWillBeRemoved = function(fragmentName) {
    return !!(!allFragmentNamesUsed.has(fragmentName) || getInUseByFragmentName(fragmentName).removed);
  };
  var enterVisitor = {
    enter: function(node) {
      if (fragmentWillBeRemoved(node.name.value)) {
        return null;
      }
    }
  };
  return nullIfDocIsEmpty(visit(docWithoutDirectiveSubtrees, {
    FragmentSpread: enterVisitor,
    FragmentDefinition: enterVisitor,
    OperationDefinition: {
      leave: function(node) {
        if (node.variableDefinitions) {
          var usedVariableNames_1 = populateTransitiveVars(getInUseByOperationName(node.name && node.name.value)).transitiveVars;
          if (usedVariableNames_1.size < node.variableDefinitions.length) {
            return __assign(__assign({}, node), { variableDefinitions: node.variableDefinitions.filter(function(varDef) {
              return usedVariableNames_1.has(varDef.variable.name.value);
            }) });
          }
        }
      }
    }
  }));
}
var addTypenameToDocument = Object.assign(function(doc) {
  return visit(doc, {
    SelectionSet: {
      enter: function(node, _key, parent) {
        if (parent && parent.kind === Kind.OPERATION_DEFINITION) {
          return;
        }
        var selections = node.selections;
        if (!selections) {
          return;
        }
        var skip = selections.some(function(selection) {
          return isField(selection) && (selection.name.value === "__typename" || selection.name.value.lastIndexOf("__", 0) === 0);
        });
        if (skip) {
          return;
        }
        var field = parent;
        if (isField(field) && field.directives && field.directives.some(function(d) {
          return d.name.value === "export";
        })) {
          return;
        }
        return __assign(__assign({}, node), { selections: __spreadArray(__spreadArray([], selections, true), [TYPENAME_FIELD], false) });
      }
    }
  });
}, {
  added: function(field) {
    return field === TYPENAME_FIELD;
  }
});
var connectionRemoveConfig = {
  test: function(directive) {
    var willRemove = directive.name.value === "connection";
    if (willRemove) {
      if (!directive.arguments || !directive.arguments.some(function(arg) {
        return arg.name.value === "key";
      })) {
        __DEV__ && invariant$1.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key.");
      }
    }
    return willRemove;
  }
};
function removeConnectionDirectiveFromDocument(doc) {
  return removeDirectivesFromDocument([connectionRemoveConfig], checkDocument(doc));
}
function buildQueryFromSelectionSet(document) {
  var definition = getMainDefinition(document);
  var definitionOperation = definition.operation;
  if (definitionOperation === "query") {
    return document;
  }
  var modifiedDoc = visit(document, {
    OperationDefinition: {
      enter: function(node) {
        return __assign(__assign({}, node), { operation: "query" });
      }
    }
  });
  return modifiedDoc;
}
function removeClientSetsFromDocument(document) {
  checkDocument(document);
  var modifiedDoc = removeDirectivesFromDocument([
    {
      test: function(directive) {
        return directive.name.value === "client";
      },
      remove: true
    }
  ], document);
  return modifiedDoc;
}
var hasOwnProperty$5 = Object.prototype.hasOwnProperty;
function mergeDeep() {
  var sources = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    sources[_i] = arguments[_i];
  }
  return mergeDeepArray(sources);
}
function mergeDeepArray(sources) {
  var target = sources[0] || {};
  var count = sources.length;
  if (count > 1) {
    var merger = new DeepMerger();
    for (var i = 1; i < count; ++i) {
      target = merger.merge(target, sources[i]);
    }
  }
  return target;
}
var defaultReconciler = function(target, source, property) {
  return this.merge(target[property], source[property]);
};
var DeepMerger = function() {
  function DeepMerger2(reconciler) {
    if (reconciler === void 0) {
      reconciler = defaultReconciler;
    }
    this.reconciler = reconciler;
    this.isObject = isNonNullObject;
    this.pastCopies = /* @__PURE__ */ new Set();
  }
  DeepMerger2.prototype.merge = function(target, source) {
    var _this = this;
    var context = [];
    for (var _i = 2; _i < arguments.length; _i++) {
      context[_i - 2] = arguments[_i];
    }
    if (isNonNullObject(source) && isNonNullObject(target)) {
      Object.keys(source).forEach(function(sourceKey) {
        if (hasOwnProperty$5.call(target, sourceKey)) {
          var targetValue = target[sourceKey];
          if (source[sourceKey] !== targetValue) {
            var result = _this.reconciler.apply(_this, __spreadArray([target, source, sourceKey], context, false));
            if (result !== targetValue) {
              target = _this.shallowCopyForMerge(target);
              target[sourceKey] = result;
            }
          }
        } else {
          target = _this.shallowCopyForMerge(target);
          target[sourceKey] = source[sourceKey];
        }
      });
      return target;
    }
    return source;
  };
  DeepMerger2.prototype.shallowCopyForMerge = function(value) {
    if (isNonNullObject(value)) {
      if (!this.pastCopies.has(value)) {
        if (Array.isArray(value)) {
          value = value.slice(0);
        } else {
          value = __assign({ __proto__: Object.getPrototypeOf(value) }, value);
        }
        this.pastCopies.add(value);
      }
    }
    return value;
  };
  return DeepMerger2;
}();
function _createForOfIteratorHelperLoose(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (it)
    return (it = it.call(o)).next.bind(it);
  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
    if (it)
      o = it;
    var i = 0;
    return function() {
      if (i >= o.length)
        return { done: true };
      return { done: false, value: o[i++] };
    };
  }
  throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray(o, minLen) {
  if (!o)
    return;
  if (typeof o === "string")
    return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor)
    n = o.constructor.name;
  if (n === "Map" || n === "Set")
    return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
    return _arrayLikeToArray(o, minLen);
}
function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }
  return arr2;
}
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}
function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
var hasSymbols = function() {
  return typeof Symbol === "function";
};
var hasSymbol = function(name) {
  return hasSymbols() && Boolean(Symbol[name]);
};
var getSymbol = function(name) {
  return hasSymbol(name) ? Symbol[name] : "@@" + name;
};
if (hasSymbols() && !hasSymbol("observable")) {
  Symbol.observable = Symbol("observable");
}
var SymbolIterator = getSymbol("iterator");
var SymbolObservable = getSymbol("observable");
var SymbolSpecies = getSymbol("species");
function getMethod(obj, key) {
  var value = obj[key];
  if (value == null)
    return void 0;
  if (typeof value !== "function")
    throw new TypeError(value + " is not a function");
  return value;
}
function getSpecies(obj) {
  var ctor = obj.constructor;
  if (ctor !== void 0) {
    ctor = ctor[SymbolSpecies];
    if (ctor === null) {
      ctor = void 0;
    }
  }
  return ctor !== void 0 ? ctor : Observable;
}
function isObservable(x) {
  return x instanceof Observable;
}
function hostReportError(e) {
  if (hostReportError.log) {
    hostReportError.log(e);
  } else {
    setTimeout(function() {
      throw e;
    });
  }
}
function enqueue(fn) {
  Promise.resolve().then(function() {
    try {
      fn();
    } catch (e) {
      hostReportError(e);
    }
  });
}
function cleanupSubscription(subscription) {
  var cleanup = subscription._cleanup;
  if (cleanup === void 0)
    return;
  subscription._cleanup = void 0;
  if (!cleanup) {
    return;
  }
  try {
    if (typeof cleanup === "function") {
      cleanup();
    } else {
      var unsubscribe = getMethod(cleanup, "unsubscribe");
      if (unsubscribe) {
        unsubscribe.call(cleanup);
      }
    }
  } catch (e) {
    hostReportError(e);
  }
}
function closeSubscription(subscription) {
  subscription._observer = void 0;
  subscription._queue = void 0;
  subscription._state = "closed";
}
function flushSubscription(subscription) {
  var queue = subscription._queue;
  if (!queue) {
    return;
  }
  subscription._queue = void 0;
  subscription._state = "ready";
  for (var i = 0; i < queue.length; ++i) {
    notifySubscription(subscription, queue[i].type, queue[i].value);
    if (subscription._state === "closed")
      break;
  }
}
function notifySubscription(subscription, type, value) {
  subscription._state = "running";
  var observer = subscription._observer;
  try {
    var m = getMethod(observer, type);
    switch (type) {
      case "next":
        if (m)
          m.call(observer, value);
        break;
      case "error":
        closeSubscription(subscription);
        if (m)
          m.call(observer, value);
        else
          throw value;
        break;
      case "complete":
        closeSubscription(subscription);
        if (m)
          m.call(observer);
        break;
    }
  } catch (e) {
    hostReportError(e);
  }
  if (subscription._state === "closed")
    cleanupSubscription(subscription);
  else if (subscription._state === "running")
    subscription._state = "ready";
}
function onNotify(subscription, type, value) {
  if (subscription._state === "closed")
    return;
  if (subscription._state === "buffering") {
    subscription._queue.push({
      type,
      value
    });
    return;
  }
  if (subscription._state !== "ready") {
    subscription._state = "buffering";
    subscription._queue = [{
      type,
      value
    }];
    enqueue(function() {
      return flushSubscription(subscription);
    });
    return;
  }
  notifySubscription(subscription, type, value);
}
var Subscription = /* @__PURE__ */ function() {
  function Subscription2(observer, subscriber) {
    this._cleanup = void 0;
    this._observer = observer;
    this._queue = void 0;
    this._state = "initializing";
    var subscriptionObserver = new SubscriptionObserver(this);
    try {
      this._cleanup = subscriber.call(void 0, subscriptionObserver);
    } catch (e) {
      subscriptionObserver.error(e);
    }
    if (this._state === "initializing")
      this._state = "ready";
  }
  var _proto = Subscription2.prototype;
  _proto.unsubscribe = function unsubscribe() {
    if (this._state !== "closed") {
      closeSubscription(this);
      cleanupSubscription(this);
    }
  };
  _createClass(Subscription2, [{
    key: "closed",
    get: function() {
      return this._state === "closed";
    }
  }]);
  return Subscription2;
}();
var SubscriptionObserver = /* @__PURE__ */ function() {
  function SubscriptionObserver2(subscription) {
    this._subscription = subscription;
  }
  var _proto2 = SubscriptionObserver2.prototype;
  _proto2.next = function next(value) {
    onNotify(this._subscription, "next", value);
  };
  _proto2.error = function error(value) {
    onNotify(this._subscription, "error", value);
  };
  _proto2.complete = function complete() {
    onNotify(this._subscription, "complete");
  };
  _createClass(SubscriptionObserver2, [{
    key: "closed",
    get: function() {
      return this._subscription._state === "closed";
    }
  }]);
  return SubscriptionObserver2;
}();
var Observable = /* @__PURE__ */ function() {
  function Observable2(subscriber) {
    if (!(this instanceof Observable2))
      throw new TypeError("Observable cannot be called as a function");
    if (typeof subscriber !== "function")
      throw new TypeError("Observable initializer must be a function");
    this._subscriber = subscriber;
  }
  var _proto3 = Observable2.prototype;
  _proto3.subscribe = function subscribe(observer) {
    if (typeof observer !== "object" || observer === null) {
      observer = {
        next: observer,
        error: arguments[1],
        complete: arguments[2]
      };
    }
    return new Subscription(observer, this._subscriber);
  };
  _proto3.forEach = function forEach2(fn) {
    var _this = this;
    return new Promise(function(resolve, reject) {
      if (typeof fn !== "function") {
        reject(new TypeError(fn + " is not a function"));
        return;
      }
      function done() {
        subscription.unsubscribe();
        resolve();
      }
      var subscription = _this.subscribe({
        next: function(value) {
          try {
            fn(value, done);
          } catch (e) {
            reject(e);
            subscription.unsubscribe();
          }
        },
        error: reject,
        complete: resolve
      });
    });
  };
  _proto3.map = function map(fn) {
    var _this2 = this;
    if (typeof fn !== "function")
      throw new TypeError(fn + " is not a function");
    var C = getSpecies(this);
    return new C(function(observer) {
      return _this2.subscribe({
        next: function(value) {
          try {
            value = fn(value);
          } catch (e) {
            return observer.error(e);
          }
          observer.next(value);
        },
        error: function(e) {
          observer.error(e);
        },
        complete: function() {
          observer.complete();
        }
      });
    });
  };
  _proto3.filter = function filter(fn) {
    var _this3 = this;
    if (typeof fn !== "function")
      throw new TypeError(fn + " is not a function");
    var C = getSpecies(this);
    return new C(function(observer) {
      return _this3.subscribe({
        next: function(value) {
          try {
            if (!fn(value))
              return;
          } catch (e) {
            return observer.error(e);
          }
          observer.next(value);
        },
        error: function(e) {
          observer.error(e);
        },
        complete: function() {
          observer.complete();
        }
      });
    });
  };
  _proto3.reduce = function reduce(fn) {
    var _this4 = this;
    if (typeof fn !== "function")
      throw new TypeError(fn + " is not a function");
    var C = getSpecies(this);
    var hasSeed = arguments.length > 1;
    var hasValue = false;
    var seed = arguments[1];
    var acc = seed;
    return new C(function(observer) {
      return _this4.subscribe({
        next: function(value) {
          var first = !hasValue;
          hasValue = true;
          if (!first || hasSeed) {
            try {
              acc = fn(acc, value);
            } catch (e) {
              return observer.error(e);
            }
          } else {
            acc = value;
          }
        },
        error: function(e) {
          observer.error(e);
        },
        complete: function() {
          if (!hasValue && !hasSeed)
            return observer.error(new TypeError("Cannot reduce an empty sequence"));
          observer.next(acc);
          observer.complete();
        }
      });
    });
  };
  _proto3.concat = function concat() {
    var _this5 = this;
    for (var _len = arguments.length, sources = new Array(_len), _key = 0; _key < _len; _key++) {
      sources[_key] = arguments[_key];
    }
    var C = getSpecies(this);
    return new C(function(observer) {
      var subscription;
      var index = 0;
      function startNext(next) {
        subscription = next.subscribe({
          next: function(v) {
            observer.next(v);
          },
          error: function(e) {
            observer.error(e);
          },
          complete: function() {
            if (index === sources.length) {
              subscription = void 0;
              observer.complete();
            } else {
              startNext(C.from(sources[index++]));
            }
          }
        });
      }
      startNext(_this5);
      return function() {
        if (subscription) {
          subscription.unsubscribe();
          subscription = void 0;
        }
      };
    });
  };
  _proto3.flatMap = function flatMap(fn) {
    var _this6 = this;
    if (typeof fn !== "function")
      throw new TypeError(fn + " is not a function");
    var C = getSpecies(this);
    return new C(function(observer) {
      var subscriptions = [];
      var outer = _this6.subscribe({
        next: function(value) {
          if (fn) {
            try {
              value = fn(value);
            } catch (e) {
              return observer.error(e);
            }
          }
          var inner = C.from(value).subscribe({
            next: function(value2) {
              observer.next(value2);
            },
            error: function(e) {
              observer.error(e);
            },
            complete: function() {
              var i = subscriptions.indexOf(inner);
              if (i >= 0)
                subscriptions.splice(i, 1);
              completeIfDone();
            }
          });
          subscriptions.push(inner);
        },
        error: function(e) {
          observer.error(e);
        },
        complete: function() {
          completeIfDone();
        }
      });
      function completeIfDone() {
        if (outer.closed && subscriptions.length === 0)
          observer.complete();
      }
      return function() {
        subscriptions.forEach(function(s) {
          return s.unsubscribe();
        });
        outer.unsubscribe();
      };
    });
  };
  _proto3[SymbolObservable] = function() {
    return this;
  };
  Observable2.from = function from(x) {
    var C = typeof this === "function" ? this : Observable2;
    if (x == null)
      throw new TypeError(x + " is not an object");
    var method = getMethod(x, SymbolObservable);
    if (method) {
      var observable = method.call(x);
      if (Object(observable) !== observable)
        throw new TypeError(observable + " is not an object");
      if (isObservable(observable) && observable.constructor === C)
        return observable;
      return new C(function(observer) {
        return observable.subscribe(observer);
      });
    }
    if (hasSymbol("iterator")) {
      method = getMethod(x, SymbolIterator);
      if (method) {
        return new C(function(observer) {
          enqueue(function() {
            if (observer.closed)
              return;
            for (var _iterator = _createForOfIteratorHelperLoose(method.call(x)), _step; !(_step = _iterator()).done; ) {
              var item = _step.value;
              observer.next(item);
              if (observer.closed)
                return;
            }
            observer.complete();
          });
        });
      }
    }
    if (Array.isArray(x)) {
      return new C(function(observer) {
        enqueue(function() {
          if (observer.closed)
            return;
          for (var i = 0; i < x.length; ++i) {
            observer.next(x[i]);
            if (observer.closed)
              return;
          }
          observer.complete();
        });
      });
    }
    throw new TypeError(x + " is not observable");
  };
  Observable2.of = function of() {
    for (var _len2 = arguments.length, items = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      items[_key2] = arguments[_key2];
    }
    var C = typeof this === "function" ? this : Observable2;
    return new C(function(observer) {
      enqueue(function() {
        if (observer.closed)
          return;
        for (var i = 0; i < items.length; ++i) {
          observer.next(items[i]);
          if (observer.closed)
            return;
        }
        observer.complete();
      });
    });
  };
  _createClass(Observable2, null, [{
    key: SymbolSpecies,
    get: function() {
      return this;
    }
  }]);
  return Observable2;
}();
if (hasSymbols()) {
  Object.defineProperty(Observable, Symbol("extensions"), {
    value: {
      symbol: SymbolObservable,
      hostReportError
    },
    configurable: true
  });
}
function symbolObservablePonyfill(root2) {
  var result;
  var Symbol2 = root2.Symbol;
  if (typeof Symbol2 === "function") {
    if (Symbol2.observable) {
      result = Symbol2.observable;
    } else {
      if (typeof Symbol2.for === "function") {
        result = Symbol2.for("https://github.com/benlesh/symbol-observable");
      } else {
        result = Symbol2("https://github.com/benlesh/symbol-observable");
      }
      try {
        Symbol2.observable = result;
      } catch (err) {
      }
    }
  } else {
    result = "@@observable";
  }
  return result;
}
var root;
if (typeof self !== "undefined") {
  root = self;
} else if (typeof window !== "undefined") {
  root = window;
} else if (typeof global !== "undefined") {
  root = global;
} else if (typeof module !== "undefined") {
  root = module;
} else {
  root = Function("return this")();
}
symbolObservablePonyfill(root);
var prototype = Observable.prototype;
var fakeObsSymbol = "@@observable";
if (!prototype[fakeObsSymbol]) {
  prototype[fakeObsSymbol] = function() {
    return this;
  };
}
var toString$1 = Object.prototype.toString;
function cloneDeep(value) {
  return cloneDeepHelper(value);
}
function cloneDeepHelper(val, seen) {
  switch (toString$1.call(val)) {
    case "[object Array]": {
      seen = seen || /* @__PURE__ */ new Map();
      if (seen.has(val))
        return seen.get(val);
      var copy_1 = val.slice(0);
      seen.set(val, copy_1);
      copy_1.forEach(function(child, i) {
        copy_1[i] = cloneDeepHelper(child, seen);
      });
      return copy_1;
    }
    case "[object Object]": {
      seen = seen || /* @__PURE__ */ new Map();
      if (seen.has(val))
        return seen.get(val);
      var copy_2 = Object.create(Object.getPrototypeOf(val));
      seen.set(val, copy_2);
      Object.keys(val).forEach(function(key) {
        copy_2[key] = cloneDeepHelper(val[key], seen);
      });
      return copy_2;
    }
    default:
      return val;
  }
}
function deepFreeze(value) {
  var workSet = /* @__PURE__ */ new Set([value]);
  workSet.forEach(function(obj) {
    if (isNonNullObject(obj) && shallowFreeze(obj) === obj) {
      Object.getOwnPropertyNames(obj).forEach(function(name) {
        if (isNonNullObject(obj[name]))
          workSet.add(obj[name]);
      });
    }
  });
  return value;
}
function shallowFreeze(obj) {
  if (__DEV__ && !Object.isFrozen(obj)) {
    try {
      Object.freeze(obj);
    } catch (e) {
      if (e instanceof TypeError)
        return null;
      throw e;
    }
  }
  return obj;
}
function maybeDeepFreeze(obj) {
  if (__DEV__) {
    deepFreeze(obj);
  }
  return obj;
}
function iterateObserversSafely(observers, method, argument) {
  var observersWithMethod = [];
  observers.forEach(function(obs) {
    return obs[method] && observersWithMethod.push(obs);
  });
  observersWithMethod.forEach(function(obs) {
    return obs[method](argument);
  });
}
function asyncMap(observable, mapFn, catchFn) {
  return new Observable(function(observer) {
    var next = observer.next, error = observer.error, complete = observer.complete;
    var activeCallbackCount = 0;
    var completed = false;
    var promiseQueue = {
      then: function(callback) {
        return new Promise(function(resolve) {
          return resolve(callback());
        });
      }
    };
    function makeCallback(examiner, delegate) {
      if (examiner) {
        return function(arg) {
          ++activeCallbackCount;
          var both = function() {
            return examiner(arg);
          };
          promiseQueue = promiseQueue.then(both, both).then(function(result) {
            --activeCallbackCount;
            next && next.call(observer, result);
            if (completed) {
              handler.complete();
            }
          }, function(error2) {
            --activeCallbackCount;
            throw error2;
          }).catch(function(caught) {
            error && error.call(observer, caught);
          });
        };
      } else {
        return function(arg) {
          return delegate && delegate.call(observer, arg);
        };
      }
    }
    var handler = {
      next: makeCallback(mapFn, next),
      error: makeCallback(catchFn, error),
      complete: function() {
        completed = true;
        if (!activeCallbackCount) {
          complete && complete.call(observer);
        }
      }
    };
    var sub = observable.subscribe(handler);
    return function() {
      return sub.unsubscribe();
    };
  });
}
var canUseWeakMap = typeof WeakMap === "function" && maybe$2(function() {
  return navigator.product;
}) !== "ReactNative";
var canUseWeakSet = typeof WeakSet === "function";
var canUseSymbol = typeof Symbol === "function" && typeof Symbol.for === "function";
var canUseAsyncIteratorSymbol = canUseSymbol && Symbol.asyncIterator;
typeof maybe$2(function() {
  return window.document.createElement;
}) === "function";
maybe$2(function() {
  return navigator.userAgent.indexOf("jsdom") >= 0;
}) || false;
function fixObservableSubclass(subclass) {
  function set(key) {
    Object.defineProperty(subclass, key, { value: Observable });
  }
  if (canUseSymbol && Symbol.species) {
    set(Symbol.species);
  }
  set("@@species");
  return subclass;
}
function isPromiseLike(value) {
  return value && typeof value.then === "function";
}
var Concast = function(_super) {
  __extends(Concast2, _super);
  function Concast2(sources) {
    var _this = _super.call(this, function(observer) {
      _this.addObserver(observer);
      return function() {
        return _this.removeObserver(observer);
      };
    }) || this;
    _this.observers = /* @__PURE__ */ new Set();
    _this.promise = new Promise(function(resolve, reject) {
      _this.resolve = resolve;
      _this.reject = reject;
    });
    _this.handlers = {
      next: function(result) {
        if (_this.sub !== null) {
          _this.latest = ["next", result];
          _this.notify("next", result);
          iterateObserversSafely(_this.observers, "next", result);
        }
      },
      error: function(error) {
        var sub = _this.sub;
        if (sub !== null) {
          if (sub)
            setTimeout(function() {
              return sub.unsubscribe();
            });
          _this.sub = null;
          _this.latest = ["error", error];
          _this.reject(error);
          _this.notify("error", error);
          iterateObserversSafely(_this.observers, "error", error);
        }
      },
      complete: function() {
        var _a2 = _this, sub = _a2.sub, _b = _a2.sources, sources2 = _b === void 0 ? [] : _b;
        if (sub !== null) {
          var value = sources2.shift();
          if (!value) {
            if (sub)
              setTimeout(function() {
                return sub.unsubscribe();
              });
            _this.sub = null;
            if (_this.latest && _this.latest[0] === "next") {
              _this.resolve(_this.latest[1]);
            } else {
              _this.resolve();
            }
            _this.notify("complete");
            iterateObserversSafely(_this.observers, "complete");
          } else if (isPromiseLike(value)) {
            value.then(function(obs) {
              return _this.sub = obs.subscribe(_this.handlers);
            });
          } else {
            _this.sub = value.subscribe(_this.handlers);
          }
        }
      }
    };
    _this.nextResultListeners = /* @__PURE__ */ new Set();
    _this.cancel = function(reason) {
      _this.reject(reason);
      _this.sources = [];
      _this.handlers.complete();
    };
    _this.promise.catch(function(_) {
    });
    if (typeof sources === "function") {
      sources = [new Observable(sources)];
    }
    if (isPromiseLike(sources)) {
      sources.then(function(iterable) {
        return _this.start(iterable);
      }, _this.handlers.error);
    } else {
      _this.start(sources);
    }
    return _this;
  }
  Concast2.prototype.start = function(sources) {
    if (this.sub !== void 0)
      return;
    this.sources = Array.from(sources);
    this.handlers.complete();
  };
  Concast2.prototype.deliverLastMessage = function(observer) {
    if (this.latest) {
      var nextOrError = this.latest[0];
      var method = observer[nextOrError];
      if (method) {
        method.call(observer, this.latest[1]);
      }
      if (this.sub === null && nextOrError === "next" && observer.complete) {
        observer.complete();
      }
    }
  };
  Concast2.prototype.addObserver = function(observer) {
    if (!this.observers.has(observer)) {
      this.deliverLastMessage(observer);
      this.observers.add(observer);
    }
  };
  Concast2.prototype.removeObserver = function(observer) {
    if (this.observers.delete(observer) && this.observers.size < 1) {
      this.handlers.complete();
    }
  };
  Concast2.prototype.notify = function(method, arg) {
    var nextResultListeners = this.nextResultListeners;
    if (nextResultListeners.size) {
      this.nextResultListeners = /* @__PURE__ */ new Set();
      nextResultListeners.forEach(function(listener) {
        return listener(method, arg);
      });
    }
  };
  Concast2.prototype.beforeNext = function(callback) {
    var called = false;
    this.nextResultListeners.add(function(method, arg) {
      if (!called) {
        called = true;
        callback(method, arg);
      }
    });
  };
  return Concast2;
}(Observable);
fixObservableSubclass(Concast);
function isExecutionPatchIncrementalResult(value) {
  return "incremental" in value;
}
function isExecutionPatchInitialResult(value) {
  return "hasNext" in value && "data" in value;
}
function isExecutionPatchResult(value) {
  return isExecutionPatchIncrementalResult(value) || isExecutionPatchInitialResult(value);
}
function isApolloPayloadResult(value) {
  return isNonNullObject(value) && "payload" in value;
}
function mergeIncrementalData(prevResult, result) {
  var mergedData = prevResult;
  var merger = new DeepMerger();
  if (isExecutionPatchIncrementalResult(result) && isNonEmptyArray(result.incremental)) {
    result.incremental.forEach(function(_a2) {
      var data = _a2.data, path = _a2.path;
      for (var i = path.length - 1; i >= 0; --i) {
        var key = path[i];
        var isNumericKey = !isNaN(+key);
        var parent_1 = isNumericKey ? [] : {};
        parent_1[key] = data;
        data = parent_1;
      }
      mergedData = merger.merge(mergedData, data);
    });
  }
  return mergedData;
}
function graphQLResultHasError(result) {
  var errors = getGraphQLErrorsFromResult(result);
  return isNonEmptyArray(errors);
}
function getGraphQLErrorsFromResult(result) {
  var graphQLErrors = isNonEmptyArray(result.errors) ? result.errors.slice(0) : [];
  if (isExecutionPatchIncrementalResult(result) && isNonEmptyArray(result.incremental)) {
    result.incremental.forEach(function(incrementalResult) {
      if (incrementalResult.errors) {
        graphQLErrors.push.apply(graphQLErrors, incrementalResult.errors);
      }
    });
  }
  return graphQLErrors;
}
function compact() {
  var objects = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    objects[_i] = arguments[_i];
  }
  var result = /* @__PURE__ */ Object.create(null);
  objects.forEach(function(obj) {
    if (!obj)
      return;
    Object.keys(obj).forEach(function(key) {
      var value = obj[key];
      if (value !== void 0) {
        result[key] = value;
      }
    });
  });
  return result;
}
var prefixCounts = /* @__PURE__ */ new Map();
function makeUniqueId(prefix) {
  var count = prefixCounts.get(prefix) || 1;
  prefixCounts.set(prefix, count + 1);
  return "".concat(prefix, ":").concat(count, ":").concat(Math.random().toString(36).slice(2));
}
function stringifyForDisplay(value) {
  var undefId = makeUniqueId("stringifyForDisplay");
  return JSON.stringify(value, function(key, value2) {
    return value2 === void 0 ? undefId : value2;
  }).split(JSON.stringify(undefId)).join("<undefined>");
}
function mergeOptions(defaults, options2) {
  return compact(defaults, options2, options2.variables && {
    variables: __assign(__assign({}, defaults && defaults.variables), options2.variables)
  });
}
function fromError(errorValue) {
  return new Observable(function(observer) {
    observer.error(errorValue);
  });
}
var throwServerError = function(response, result, message) {
  var error = new Error(message);
  error.name = "ServerError";
  error.response = response;
  error.statusCode = response.status;
  error.result = result;
  throw error;
};
function validateOperation(operation) {
  var OPERATION_FIELDS = [
    "query",
    "operationName",
    "variables",
    "extensions",
    "context"
  ];
  for (var _i = 0, _a2 = Object.keys(operation); _i < _a2.length; _i++) {
    var key = _a2[_i];
    if (OPERATION_FIELDS.indexOf(key) < 0) {
      throw __DEV__ ? new InvariantError("illegal argument: ".concat(key)) : new InvariantError(27);
    }
  }
  return operation;
}
function createOperation(starting, operation) {
  var context = __assign({}, starting);
  var setContext = function(next) {
    if (typeof next === "function") {
      context = __assign(__assign({}, context), next(context));
    } else {
      context = __assign(__assign({}, context), next);
    }
  };
  var getContext = function() {
    return __assign({}, context);
  };
  Object.defineProperty(operation, "setContext", {
    enumerable: false,
    value: setContext
  });
  Object.defineProperty(operation, "getContext", {
    enumerable: false,
    value: getContext
  });
  return operation;
}
function transformOperation(operation) {
  var transformedOperation = {
    variables: operation.variables || {},
    extensions: operation.extensions || {},
    operationName: operation.operationName,
    query: operation.query
  };
  if (!transformedOperation.operationName) {
    transformedOperation.operationName = typeof transformedOperation.query !== "string" ? getOperationName(transformedOperation.query) || void 0 : "";
  }
  return transformedOperation;
}
function passthrough(op, forward) {
  return forward ? forward(op) : Observable.of();
}
function toLink(handler) {
  return typeof handler === "function" ? new ApolloLink(handler) : handler;
}
function isTerminating(link2) {
  return link2.request.length <= 1;
}
var LinkError = function(_super) {
  __extends(LinkError2, _super);
  function LinkError2(message, link2) {
    var _this = _super.call(this, message) || this;
    _this.link = link2;
    return _this;
  }
  return LinkError2;
}(Error);
var ApolloLink = function() {
  function ApolloLink2(request) {
    if (request)
      this.request = request;
  }
  ApolloLink2.empty = function() {
    return new ApolloLink2(function() {
      return Observable.of();
    });
  };
  ApolloLink2.from = function(links) {
    if (links.length === 0)
      return ApolloLink2.empty();
    return links.map(toLink).reduce(function(x, y) {
      return x.concat(y);
    });
  };
  ApolloLink2.split = function(test, left, right) {
    var leftLink = toLink(left);
    var rightLink = toLink(right || new ApolloLink2(passthrough));
    if (isTerminating(leftLink) && isTerminating(rightLink)) {
      return new ApolloLink2(function(operation) {
        return test(operation) ? leftLink.request(operation) || Observable.of() : rightLink.request(operation) || Observable.of();
      });
    } else {
      return new ApolloLink2(function(operation, forward) {
        return test(operation) ? leftLink.request(operation, forward) || Observable.of() : rightLink.request(operation, forward) || Observable.of();
      });
    }
  };
  ApolloLink2.execute = function(link2, operation) {
    return link2.request(createOperation(operation.context, transformOperation(validateOperation(operation)))) || Observable.of();
  };
  ApolloLink2.concat = function(first, second) {
    var firstLink = toLink(first);
    if (isTerminating(firstLink)) {
      __DEV__ && invariant$1.warn(new LinkError("You are calling concat on a terminating link, which will have no effect", firstLink));
      return firstLink;
    }
    var nextLink = toLink(second);
    if (isTerminating(nextLink)) {
      return new ApolloLink2(function(operation) {
        return firstLink.request(operation, function(op) {
          return nextLink.request(op) || Observable.of();
        }) || Observable.of();
      });
    } else {
      return new ApolloLink2(function(operation, forward) {
        return firstLink.request(operation, function(op) {
          return nextLink.request(op, forward) || Observable.of();
        }) || Observable.of();
      });
    }
  };
  ApolloLink2.prototype.split = function(test, left, right) {
    return this.concat(ApolloLink2.split(test, left, right || new ApolloLink2(passthrough)));
  };
  ApolloLink2.prototype.concat = function(next) {
    return ApolloLink2.concat(this, next);
  };
  ApolloLink2.prototype.request = function(operation, forward) {
    throw __DEV__ ? new InvariantError("request is not implemented") : new InvariantError(22);
  };
  ApolloLink2.prototype.onError = function(error, observer) {
    if (observer && observer.error) {
      observer.error(error);
      return false;
    }
    throw error;
  };
  ApolloLink2.prototype.setOnError = function(fn) {
    this.onError = fn;
    return this;
  };
  return ApolloLink2;
}();
var split = ApolloLink.split;
var execute = ApolloLink.execute;
var version = "3.7.14";
function isNodeResponse(value) {
  return !!value.body;
}
function isReadableStream(value) {
  return !!value.getReader;
}
function isAsyncIterableIterator(value) {
  return !!(canUseAsyncIteratorSymbol && value[Symbol.asyncIterator]);
}
function isStreamableBlob(value) {
  return !!value.stream;
}
function isBlob(value) {
  return !!value.arrayBuffer;
}
function isNodeReadableStream(value) {
  return !!value.pipe;
}
function asyncIterator(source) {
  var _a2;
  var iterator = source[Symbol.asyncIterator]();
  return _a2 = {
    next: function() {
      return iterator.next();
    }
  }, _a2[Symbol.asyncIterator] = function() {
    return this;
  }, _a2;
}
function nodeStreamIterator(stream) {
  var cleanup = null;
  var error = null;
  var done = false;
  var data = [];
  var waiting = [];
  function onData(chunk) {
    if (error)
      return;
    if (waiting.length) {
      var shiftedArr = waiting.shift();
      if (Array.isArray(shiftedArr) && shiftedArr[0]) {
        return shiftedArr[0]({ value: chunk, done: false });
      }
    }
    data.push(chunk);
  }
  function onError(err) {
    error = err;
    var all = waiting.slice();
    all.forEach(function(pair) {
      pair[1](err);
    });
    !cleanup || cleanup();
  }
  function onEnd() {
    done = true;
    var all = waiting.slice();
    all.forEach(function(pair) {
      pair[0]({ value: void 0, done: true });
    });
    !cleanup || cleanup();
  }
  cleanup = function() {
    cleanup = null;
    stream.removeListener("data", onData);
    stream.removeListener("error", onError);
    stream.removeListener("end", onEnd);
    stream.removeListener("finish", onEnd);
    stream.removeListener("close", onEnd);
  };
  stream.on("data", onData);
  stream.on("error", onError);
  stream.on("end", onEnd);
  stream.on("finish", onEnd);
  stream.on("close", onEnd);
  function getNext() {
    return new Promise(function(resolve, reject) {
      if (error)
        return reject(error);
      if (data.length)
        return resolve({ value: data.shift(), done: false });
      if (done)
        return resolve({ value: void 0, done: true });
      waiting.push([resolve, reject]);
    });
  }
  var iterator = {
    next: function() {
      return getNext();
    }
  };
  if (canUseAsyncIteratorSymbol) {
    iterator[Symbol.asyncIterator] = function() {
      return this;
    };
  }
  return iterator;
}
function promiseIterator(promise) {
  var resolved = false;
  var iterator = {
    next: function() {
      if (resolved)
        return Promise.resolve({
          value: void 0,
          done: true
        });
      resolved = true;
      return new Promise(function(resolve, reject) {
        promise.then(function(value) {
          resolve({ value, done: false });
        }).catch(reject);
      });
    }
  };
  if (canUseAsyncIteratorSymbol) {
    iterator[Symbol.asyncIterator] = function() {
      return this;
    };
  }
  return iterator;
}
function readerIterator(reader) {
  var iterator = {
    next: function() {
      return reader.read();
    }
  };
  if (canUseAsyncIteratorSymbol) {
    iterator[Symbol.asyncIterator] = function() {
      return this;
    };
  }
  return iterator;
}
function responseIterator(response) {
  var body = response;
  if (isNodeResponse(response))
    body = response.body;
  if (isAsyncIterableIterator(body))
    return asyncIterator(body);
  if (isReadableStream(body))
    return readerIterator(body.getReader());
  if (isStreamableBlob(body)) {
    return readerIterator(body.stream().getReader());
  }
  if (isBlob(body))
    return promiseIterator(body.arrayBuffer());
  if (isNodeReadableStream(body))
    return nodeStreamIterator(body);
  throw new Error("Unknown body type for responseIterator. Please pass a streamable response.");
}
var PROTOCOL_ERRORS_SYMBOL = Symbol();
function graphQLResultHasProtocolErrors(result) {
  if (result.extensions) {
    return Array.isArray(result.extensions[PROTOCOL_ERRORS_SYMBOL]);
  }
  return false;
}
function isApolloError(err) {
  return err.hasOwnProperty("graphQLErrors");
}
var generateErrorMessage = function(err) {
  var errors = __spreadArray(__spreadArray(__spreadArray([], err.graphQLErrors, true), err.clientErrors, true), err.protocolErrors, true);
  if (err.networkError)
    errors.push(err.networkError);
  return errors.map(function(err2) {
    return isNonNullObject(err2) && err2.message || "Error message not found.";
  }).join("\n");
};
var ApolloError = function(_super) {
  __extends(ApolloError2, _super);
  function ApolloError2(_a2) {
    var graphQLErrors = _a2.graphQLErrors, protocolErrors = _a2.protocolErrors, clientErrors = _a2.clientErrors, networkError = _a2.networkError, errorMessage = _a2.errorMessage, extraInfo = _a2.extraInfo;
    var _this = _super.call(this, errorMessage) || this;
    _this.name = "ApolloError";
    _this.graphQLErrors = graphQLErrors || [];
    _this.protocolErrors = protocolErrors || [];
    _this.clientErrors = clientErrors || [];
    _this.networkError = networkError || null;
    _this.message = errorMessage || generateErrorMessage(_this);
    _this.extraInfo = extraInfo;
    _this.__proto__ = ApolloError2.prototype;
    return _this;
  }
  return ApolloError2;
}(Error);
var hasOwnProperty$4 = Object.prototype.hasOwnProperty;
function readMultipartBody(response, observer) {
  var _a2, _b, _c, _d, _e;
  return __awaiter(this, void 0, void 0, function() {
    var decoder, contentType, delimiter, boundaryVal, boundary, buffer, iterator, running, _f, value, done, chunk, bi, message, i, headers, contentType_1, body, result, next;
    var _g, _h;
    return __generator(this, function(_j) {
      switch (_j.label) {
        case 0:
          if (TextDecoder === void 0) {
            throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");
          }
          decoder = new TextDecoder("utf-8");
          contentType = (_a2 = response.headers) === null || _a2 === void 0 ? void 0 : _a2.get("content-type");
          delimiter = "boundary=";
          boundaryVal = (contentType === null || contentType === void 0 ? void 0 : contentType.includes(delimiter)) ? contentType === null || contentType === void 0 ? void 0 : contentType.substring((contentType === null || contentType === void 0 ? void 0 : contentType.indexOf(delimiter)) + delimiter.length).replace(/['"]/g, "").replace(/\;(.*)/gm, "").trim() : "-";
          boundary = "--".concat(boundaryVal);
          buffer = "";
          iterator = responseIterator(response);
          running = true;
          _j.label = 1;
        case 1:
          if (!running)
            return [3, 3];
          return [4, iterator.next()];
        case 2:
          _f = _j.sent(), value = _f.value, done = _f.done;
          chunk = typeof value === "string" ? value : decoder.decode(value);
          running = !done;
          buffer += chunk;
          bi = buffer.indexOf(boundary);
          while (bi > -1) {
            message = void 0;
            _g = [
              buffer.slice(0, bi),
              buffer.slice(bi + boundary.length)
            ], message = _g[0], buffer = _g[1];
            if (message.trim()) {
              i = message.indexOf("\r\n\r\n");
              headers = parseHeaders(message.slice(0, i));
              contentType_1 = headers["content-type"];
              if (contentType_1 && contentType_1.toLowerCase().indexOf("application/json") === -1) {
                throw new Error("Unsupported patch content type: application/json is required.");
              }
              body = message.slice(i);
              try {
                result = parseJsonBody(response, body.replace("\r\n", ""));
                if (Object.keys(result).length > 1 || "data" in result || "incremental" in result || "errors" in result || "payload" in result) {
                  if (isApolloPayloadResult(result)) {
                    next = {};
                    if ("payload" in result) {
                      next = __assign({}, result.payload);
                    }
                    if ("errors" in result) {
                      next = __assign(__assign({}, next), { extensions: __assign(__assign({}, "extensions" in next ? next.extensions : null), (_h = {}, _h[PROTOCOL_ERRORS_SYMBOL] = result.errors, _h)) });
                    }
                    (_b = observer.next) === null || _b === void 0 ? void 0 : _b.call(observer, next);
                  } else {
                    (_c = observer.next) === null || _c === void 0 ? void 0 : _c.call(observer, result);
                  }
                } else if (Object.keys(result).length === 1 && "hasNext" in result && !result.hasNext) {
                  (_d = observer.complete) === null || _d === void 0 ? void 0 : _d.call(observer);
                }
              } catch (err) {
                handleError(err, observer);
              }
            }
            bi = buffer.indexOf(boundary);
          }
          return [3, 1];
        case 3:
          (_e = observer.complete) === null || _e === void 0 ? void 0 : _e.call(observer);
          return [2];
      }
    });
  });
}
function parseHeaders(headerText) {
  var headersInit = {};
  headerText.split("\n").forEach(function(line) {
    var i = line.indexOf(":");
    if (i > -1) {
      var name_1 = line.slice(0, i).trim().toLowerCase();
      var value = line.slice(i + 1).trim();
      headersInit[name_1] = value;
    }
  });
  return headersInit;
}
function parseJsonBody(response, bodyText) {
  if (response.status >= 300) {
    var getResult = function() {
      try {
        return JSON.parse(bodyText);
      } catch (err) {
        return bodyText;
      }
    };
    throwServerError(response, getResult(), "Response not successful: Received status code ".concat(response.status));
  }
  try {
    return JSON.parse(bodyText);
  } catch (err) {
    var parseError = err;
    parseError.name = "ServerParseError";
    parseError.response = response;
    parseError.statusCode = response.status;
    parseError.bodyText = bodyText;
    throw parseError;
  }
}
function handleError(err, observer) {
  var _a2, _b;
  if (err.name === "AbortError")
    return;
  if (err.result && err.result.errors && err.result.data) {
    (_a2 = observer.next) === null || _a2 === void 0 ? void 0 : _a2.call(observer, err.result);
  }
  (_b = observer.error) === null || _b === void 0 ? void 0 : _b.call(observer, err);
}
function readJsonBody(response, operation, observer) {
  parseAndCheckHttpResponse(operation)(response).then(function(result) {
    var _a2, _b;
    (_a2 = observer.next) === null || _a2 === void 0 ? void 0 : _a2.call(observer, result);
    (_b = observer.complete) === null || _b === void 0 ? void 0 : _b.call(observer);
  }).catch(function(err) {
    return handleError(err, observer);
  });
}
function parseAndCheckHttpResponse(operations) {
  return function(response) {
    return response.text().then(function(bodyText) {
      return parseJsonBody(response, bodyText);
    }).then(function(result) {
      if (response.status >= 300) {
        throwServerError(response, result, "Response not successful: Received status code ".concat(response.status));
      }
      if (!Array.isArray(result) && !hasOwnProperty$4.call(result, "data") && !hasOwnProperty$4.call(result, "errors")) {
        throwServerError(response, result, "Server response was missing for query '".concat(Array.isArray(operations) ? operations.map(function(op) {
          return op.operationName;
        }) : operations.operationName, "'."));
      }
      return result;
    });
  };
}
var serializeFetchParameter = function(p, label) {
  var serialized;
  try {
    serialized = JSON.stringify(p);
  } catch (e) {
    var parseError = __DEV__ ? new InvariantError("Network request failed. ".concat(label, " is not serializable: ").concat(e.message)) : new InvariantError(24);
    parseError.parseError = e;
    throw parseError;
  }
  return serialized;
};
var defaultHttpOptions = {
  includeQuery: true,
  includeExtensions: false,
  preserveHeaderCase: false
};
var defaultHeaders = {
  accept: "*/*",
  "content-type": "application/json"
};
var defaultOptions = {
  method: "POST"
};
var fallbackHttpConfig = {
  http: defaultHttpOptions,
  headers: defaultHeaders,
  options: defaultOptions
};
var defaultPrinter = function(ast, printer) {
  return printer(ast);
};
function selectHttpOptionsAndBodyInternal(operation, printer) {
  var configs = [];
  for (var _i = 2; _i < arguments.length; _i++) {
    configs[_i - 2] = arguments[_i];
  }
  var options2 = {};
  var http = {};
  configs.forEach(function(config) {
    options2 = __assign(__assign(__assign({}, options2), config.options), { headers: __assign(__assign({}, options2.headers), config.headers) });
    if (config.credentials) {
      options2.credentials = config.credentials;
    }
    http = __assign(__assign({}, http), config.http);
  });
  if (options2.headers) {
    options2.headers = removeDuplicateHeaders(options2.headers, http.preserveHeaderCase);
  }
  var operationName = operation.operationName, extensions = operation.extensions, variables = operation.variables, query = operation.query;
  var body = { operationName, variables };
  if (http.includeExtensions)
    body.extensions = extensions;
  if (http.includeQuery)
    body.query = printer(query, print);
  return {
    options: options2,
    body
  };
}
function removeDuplicateHeaders(headers, preserveHeaderCase) {
  if (!preserveHeaderCase) {
    var normalizedHeaders_1 = /* @__PURE__ */ Object.create(null);
    Object.keys(Object(headers)).forEach(function(name) {
      normalizedHeaders_1[name.toLowerCase()] = headers[name];
    });
    return normalizedHeaders_1;
  }
  var headerData = /* @__PURE__ */ Object.create(null);
  Object.keys(Object(headers)).forEach(function(name) {
    headerData[name.toLowerCase()] = { originalName: name, value: headers[name] };
  });
  var normalizedHeaders = /* @__PURE__ */ Object.create(null);
  Object.keys(headerData).forEach(function(name) {
    normalizedHeaders[headerData[name].originalName] = headerData[name].value;
  });
  return normalizedHeaders;
}
var checkFetcher = function(fetcher) {
  if (!fetcher && typeof fetch === "undefined") {
    throw __DEV__ ? new InvariantError(`
"fetch" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:

import fetch from 'cross-fetch';
import { ApolloClient, HttpLink } from '@apollo/client';
const client = new ApolloClient({
  link: new HttpLink({ uri: '/graphql', fetch })
});
    `) : new InvariantError(23);
  }
};
var createSignalIfSupported = function() {
  if (typeof AbortController === "undefined")
    return { controller: false, signal: false };
  var controller = new AbortController();
  var signal = controller.signal;
  return { controller, signal };
};
var selectURI = function(operation, fallbackURI) {
  var context = operation.getContext();
  var contextURI = context.uri;
  if (contextURI) {
    return contextURI;
  } else if (typeof fallbackURI === "function") {
    return fallbackURI(operation);
  } else {
    return fallbackURI || "/graphql";
  }
};
function rewriteURIForGET(chosenURI, body) {
  var queryParams = [];
  var addQueryParam = function(key, value) {
    queryParams.push("".concat(key, "=").concat(encodeURIComponent(value)));
  };
  if ("query" in body) {
    addQueryParam("query", body.query);
  }
  if (body.operationName) {
    addQueryParam("operationName", body.operationName);
  }
  if (body.variables) {
    var serializedVariables = void 0;
    try {
      serializedVariables = serializeFetchParameter(body.variables, "Variables map");
    } catch (parseError) {
      return { parseError };
    }
    addQueryParam("variables", serializedVariables);
  }
  if (body.extensions) {
    var serializedExtensions = void 0;
    try {
      serializedExtensions = serializeFetchParameter(body.extensions, "Extensions map");
    } catch (parseError) {
      return { parseError };
    }
    addQueryParam("extensions", serializedExtensions);
  }
  var fragment = "", preFragment = chosenURI;
  var fragmentStart = chosenURI.indexOf("#");
  if (fragmentStart !== -1) {
    fragment = chosenURI.substr(fragmentStart);
    preFragment = chosenURI.substr(0, fragmentStart);
  }
  var queryParamsPrefix = preFragment.indexOf("?") === -1 ? "?" : "&";
  var newURI = preFragment + queryParamsPrefix + queryParams.join("&") + fragment;
  return { newURI };
}
var backupFetch = maybe$2(function() {
  return fetch;
});
var createHttpLink = function(linkOptions) {
  if (linkOptions === void 0) {
    linkOptions = {};
  }
  var _a2 = linkOptions.uri, uri2 = _a2 === void 0 ? "/graphql" : _a2, preferredFetch = linkOptions.fetch, _b = linkOptions.print, print2 = _b === void 0 ? defaultPrinter : _b, includeExtensions = linkOptions.includeExtensions, preserveHeaderCase = linkOptions.preserveHeaderCase, useGETForQueries = linkOptions.useGETForQueries, _c = linkOptions.includeUnusedVariables, includeUnusedVariables = _c === void 0 ? false : _c, requestOptions = __rest(linkOptions, ["uri", "fetch", "print", "includeExtensions", "preserveHeaderCase", "useGETForQueries", "includeUnusedVariables"]);
  if (__DEV__) {
    checkFetcher(preferredFetch || backupFetch);
  }
  var linkConfig = {
    http: { includeExtensions, preserveHeaderCase },
    options: requestOptions.fetchOptions,
    credentials: requestOptions.credentials,
    headers: requestOptions.headers
  };
  return new ApolloLink(function(operation) {
    var chosenURI = selectURI(operation, uri2);
    var context = operation.getContext();
    var clientAwarenessHeaders = {};
    if (context.clientAwareness) {
      var _a3 = context.clientAwareness, name_1 = _a3.name, version2 = _a3.version;
      if (name_1) {
        clientAwarenessHeaders["apollographql-client-name"] = name_1;
      }
      if (version2) {
        clientAwarenessHeaders["apollographql-client-version"] = version2;
      }
    }
    var contextHeaders = __assign(__assign({}, clientAwarenessHeaders), context.headers);
    var contextConfig = {
      http: context.http,
      options: context.fetchOptions,
      credentials: context.credentials,
      headers: contextHeaders
    };
    var _b2 = selectHttpOptionsAndBodyInternal(operation, print2, fallbackHttpConfig, linkConfig, contextConfig), options2 = _b2.options, body = _b2.body;
    if (body.variables && !includeUnusedVariables) {
      var unusedNames_1 = new Set(Object.keys(body.variables));
      visit(operation.query, {
        Variable: function(node, _key, parent) {
          if (parent && parent.kind !== "VariableDefinition") {
            unusedNames_1.delete(node.name.value);
          }
        }
      });
      if (unusedNames_1.size) {
        body.variables = __assign({}, body.variables);
        unusedNames_1.forEach(function(name) {
          delete body.variables[name];
        });
      }
    }
    var controller;
    if (!options2.signal) {
      var _c2 = createSignalIfSupported(), _controller = _c2.controller, signal = _c2.signal;
      controller = _controller;
      if (controller)
        options2.signal = signal;
    }
    var definitionIsMutation = function(d) {
      return d.kind === "OperationDefinition" && d.operation === "mutation";
    };
    var definitionIsSubscription = function(d) {
      return d.kind === "OperationDefinition" && d.operation === "subscription";
    };
    var isSubscription = definitionIsSubscription(getMainDefinition(operation.query));
    var hasDefer = hasDirectives(["defer"], operation.query);
    if (useGETForQueries && !operation.query.definitions.some(definitionIsMutation)) {
      options2.method = "GET";
    }
    if (hasDefer || isSubscription) {
      options2.headers = options2.headers || {};
      var acceptHeader = "multipart/mixed;";
      if (isSubscription && hasDefer) {
        __DEV__ && invariant$1.warn("Multipart-subscriptions do not support @defer");
      }
      if (isSubscription) {
        acceptHeader += "boundary=graphql;subscriptionSpec=1.0,application/json";
      } else if (hasDefer) {
        acceptHeader += "deferSpec=20220824,application/json";
      }
      options2.headers.accept = acceptHeader;
    }
    if (options2.method === "GET") {
      var _d = rewriteURIForGET(chosenURI, body), newURI = _d.newURI, parseError = _d.parseError;
      if (parseError) {
        return fromError(parseError);
      }
      chosenURI = newURI;
    } else {
      try {
        options2.body = serializeFetchParameter(body, "Payload");
      } catch (parseError2) {
        return fromError(parseError2);
      }
    }
    return new Observable(function(observer) {
      var currentFetch = preferredFetch || maybe$2(function() {
        return fetch;
      }) || backupFetch;
      currentFetch(chosenURI, options2).then(function(response) {
        var _a4;
        operation.setContext({ response });
        var ctype = (_a4 = response.headers) === null || _a4 === void 0 ? void 0 : _a4.get("content-type");
        if (ctype !== null && /^multipart\/mixed/i.test(ctype)) {
          return readMultipartBody(response, observer);
        } else {
          return readJsonBody(response, operation, observer);
        }
      }).catch(function(err) {
        return handleError(err, observer);
      });
      return function() {
        if (controller)
          controller.abort();
      };
    });
  });
};
var HttpLink = function(_super) {
  __extends(HttpLink2, _super);
  function HttpLink2(options2) {
    if (options2 === void 0) {
      options2 = {};
    }
    var _this = _super.call(this, createHttpLink(options2).request) || this;
    _this.options = options2;
    return _this;
  }
  return HttpLink2;
}(ApolloLink);
const { toString, hasOwnProperty: hasOwnProperty$3 } = Object.prototype;
const fnToStr = Function.prototype.toString;
const previousComparisons = /* @__PURE__ */ new Map();
function equal(a, b) {
  try {
    return check(a, b);
  } finally {
    previousComparisons.clear();
  }
}
function check(a, b) {
  if (a === b) {
    return true;
  }
  const aTag = toString.call(a);
  const bTag = toString.call(b);
  if (aTag !== bTag) {
    return false;
  }
  switch (aTag) {
    case "[object Array]":
      if (a.length !== b.length)
        return false;
    case "[object Object]": {
      if (previouslyCompared(a, b))
        return true;
      const aKeys = definedKeys(a);
      const bKeys = definedKeys(b);
      const keyCount = aKeys.length;
      if (keyCount !== bKeys.length)
        return false;
      for (let k = 0; k < keyCount; ++k) {
        if (!hasOwnProperty$3.call(b, aKeys[k])) {
          return false;
        }
      }
      for (let k = 0; k < keyCount; ++k) {
        const key = aKeys[k];
        if (!check(a[key], b[key])) {
          return false;
        }
      }
      return true;
    }
    case "[object Error]":
      return a.name === b.name && a.message === b.message;
    case "[object Number]":
      if (a !== a)
        return b !== b;
    case "[object Boolean]":
    case "[object Date]":
      return +a === +b;
    case "[object RegExp]":
    case "[object String]":
      return a == `${b}`;
    case "[object Map]":
    case "[object Set]": {
      if (a.size !== b.size)
        return false;
      if (previouslyCompared(a, b))
        return true;
      const aIterator = a.entries();
      const isMap = aTag === "[object Map]";
      while (true) {
        const info = aIterator.next();
        if (info.done)
          break;
        const [aKey, aValue] = info.value;
        if (!b.has(aKey)) {
          return false;
        }
        if (isMap && !check(aValue, b.get(aKey))) {
          return false;
        }
      }
      return true;
    }
    case "[object Uint16Array]":
    case "[object Uint8Array]":
    case "[object Uint32Array]":
    case "[object Int32Array]":
    case "[object Int8Array]":
    case "[object Int16Array]":
    case "[object ArrayBuffer]":
      a = new Uint8Array(a);
      b = new Uint8Array(b);
    case "[object DataView]": {
      let len = a.byteLength;
      if (len === b.byteLength) {
        while (len-- && a[len] === b[len]) {
        }
      }
      return len === -1;
    }
    case "[object AsyncFunction]":
    case "[object GeneratorFunction]":
    case "[object AsyncGeneratorFunction]":
    case "[object Function]": {
      const aCode = fnToStr.call(a);
      if (aCode !== fnToStr.call(b)) {
        return false;
      }
      return !endsWith(aCode, nativeCodeSuffix);
    }
  }
  return false;
}
function definedKeys(obj) {
  return Object.keys(obj).filter(isDefinedKey, obj);
}
function isDefinedKey(key) {
  return this[key] !== void 0;
}
const nativeCodeSuffix = "{ [native code] }";
function endsWith(full, suffix) {
  const fromIndex = full.length - suffix.length;
  return fromIndex >= 0 && full.indexOf(suffix, fromIndex) === fromIndex;
}
function previouslyCompared(a, b) {
  let bSet = previousComparisons.get(a);
  if (bSet) {
    if (bSet.has(b))
      return true;
  } else {
    previousComparisons.set(a, bSet = /* @__PURE__ */ new Set());
  }
  bSet.add(b);
  return false;
}
var defaultMakeData = function() {
  return /* @__PURE__ */ Object.create(null);
};
var _a$1 = Array.prototype, forEach = _a$1.forEach, slice = _a$1.slice;
var Trie = function() {
  function Trie2(weakness, makeData) {
    if (weakness === void 0) {
      weakness = true;
    }
    if (makeData === void 0) {
      makeData = defaultMakeData;
    }
    this.weakness = weakness;
    this.makeData = makeData;
  }
  Trie2.prototype.lookup = function() {
    var array = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      array[_i] = arguments[_i];
    }
    return this.lookupArray(array);
  };
  Trie2.prototype.lookupArray = function(array) {
    var node = this;
    forEach.call(array, function(key) {
      return node = node.getChildTrie(key);
    });
    return node.data || (node.data = this.makeData(slice.call(array)));
  };
  Trie2.prototype.getChildTrie = function(key) {
    var map = this.weakness && isObjRef(key) ? this.weak || (this.weak = /* @__PURE__ */ new WeakMap()) : this.strong || (this.strong = /* @__PURE__ */ new Map());
    var child = map.get(key);
    if (!child)
      map.set(key, child = new Trie2(this.weakness, this.makeData));
    return child;
  };
  return Trie2;
}();
function isObjRef(value) {
  switch (typeof value) {
    case "object":
      if (value === null)
        break;
    case "function":
      return true;
  }
  return false;
}
let currentContext = null;
const MISSING_VALUE = {};
let idCounter = 1;
const makeSlotClass = () => class Slot {
  constructor() {
    this.id = [
      "slot",
      idCounter++,
      Date.now(),
      Math.random().toString(36).slice(2)
    ].join(":");
  }
  hasValue() {
    for (let context = currentContext; context; context = context.parent) {
      if (this.id in context.slots) {
        const value = context.slots[this.id];
        if (value === MISSING_VALUE)
          break;
        if (context !== currentContext) {
          currentContext.slots[this.id] = value;
        }
        return true;
      }
    }
    if (currentContext) {
      currentContext.slots[this.id] = MISSING_VALUE;
    }
    return false;
  }
  getValue() {
    if (this.hasValue()) {
      return currentContext.slots[this.id];
    }
  }
  withValue(value, callback, args, thisArg) {
    const slots = {
      __proto__: null,
      [this.id]: value
    };
    const parent = currentContext;
    currentContext = { parent, slots };
    try {
      return callback.apply(thisArg, args);
    } finally {
      currentContext = parent;
    }
  }
  static bind(callback) {
    const context = currentContext;
    return function() {
      const saved = currentContext;
      try {
        currentContext = context;
        return callback.apply(this, arguments);
      } finally {
        currentContext = saved;
      }
    };
  }
  static noContext(callback, args, thisArg) {
    if (currentContext) {
      const saved = currentContext;
      try {
        currentContext = null;
        return callback.apply(thisArg, args);
      } finally {
        currentContext = saved;
      }
    } else {
      return callback.apply(thisArg, args);
    }
  }
};
function maybe(fn) {
  try {
    return fn();
  } catch (ignored) {
  }
}
const globalKey = "@wry/context:Slot";
const host = maybe(() => globalThis) || maybe(() => global) || /* @__PURE__ */ Object.create(null);
const globalHost = host;
const Slot = globalHost[globalKey] || Array[globalKey] || function(Slot2) {
  try {
    Object.defineProperty(globalHost, globalKey, {
      value: Slot2,
      enumerable: false,
      writable: false,
      configurable: true
    });
  } finally {
    return Slot2;
  }
}(makeSlotClass());
function defaultDispose() {
}
var Cache = function() {
  function Cache2(max, dispose) {
    if (max === void 0) {
      max = Infinity;
    }
    if (dispose === void 0) {
      dispose = defaultDispose;
    }
    this.max = max;
    this.dispose = dispose;
    this.map = /* @__PURE__ */ new Map();
    this.newest = null;
    this.oldest = null;
  }
  Cache2.prototype.has = function(key) {
    return this.map.has(key);
  };
  Cache2.prototype.get = function(key) {
    var node = this.getNode(key);
    return node && node.value;
  };
  Cache2.prototype.getNode = function(key) {
    var node = this.map.get(key);
    if (node && node !== this.newest) {
      var older = node.older, newer = node.newer;
      if (newer) {
        newer.older = older;
      }
      if (older) {
        older.newer = newer;
      }
      node.older = this.newest;
      node.older.newer = node;
      node.newer = null;
      this.newest = node;
      if (node === this.oldest) {
        this.oldest = newer;
      }
    }
    return node;
  };
  Cache2.prototype.set = function(key, value) {
    var node = this.getNode(key);
    if (node) {
      return node.value = value;
    }
    node = {
      key,
      value,
      newer: null,
      older: this.newest
    };
    if (this.newest) {
      this.newest.newer = node;
    }
    this.newest = node;
    this.oldest = this.oldest || node;
    this.map.set(key, node);
    return node.value;
  };
  Cache2.prototype.clean = function() {
    while (this.oldest && this.map.size > this.max) {
      this.delete(this.oldest.key);
    }
  };
  Cache2.prototype.delete = function(key) {
    var node = this.map.get(key);
    if (node) {
      if (node === this.newest) {
        this.newest = node.older;
      }
      if (node === this.oldest) {
        this.oldest = node.newer;
      }
      if (node.newer) {
        node.newer.older = node.older;
      }
      if (node.older) {
        node.older.newer = node.newer;
      }
      this.map.delete(key);
      this.dispose(node.value, key);
      return true;
    }
    return false;
  };
  return Cache2;
}();
var parentEntrySlot = new Slot();
var _a;
var hasOwnProperty$2 = Object.prototype.hasOwnProperty;
var toArray = (_a = Array.from, _a === void 0 ? function(collection) {
  var array = [];
  collection.forEach(function(item) {
    return array.push(item);
  });
  return array;
} : _a);
function maybeUnsubscribe(entryOrDep) {
  var unsubscribe = entryOrDep.unsubscribe;
  if (typeof unsubscribe === "function") {
    entryOrDep.unsubscribe = void 0;
    unsubscribe();
  }
}
var emptySetPool = [];
var POOL_TARGET_SIZE = 100;
function assert(condition, optionalMessage) {
  if (!condition) {
    throw new Error(optionalMessage || "assertion failure");
  }
}
function valueIs(a, b) {
  var len = a.length;
  return len > 0 && len === b.length && a[len - 1] === b[len - 1];
}
function valueGet(value) {
  switch (value.length) {
    case 0:
      throw new Error("unknown value");
    case 1:
      return value[0];
    case 2:
      throw value[1];
  }
}
function valueCopy(value) {
  return value.slice(0);
}
var Entry = function() {
  function Entry2(fn) {
    this.fn = fn;
    this.parents = /* @__PURE__ */ new Set();
    this.childValues = /* @__PURE__ */ new Map();
    this.dirtyChildren = null;
    this.dirty = true;
    this.recomputing = false;
    this.value = [];
    this.deps = null;
    ++Entry2.count;
  }
  Entry2.prototype.peek = function() {
    if (this.value.length === 1 && !mightBeDirty(this)) {
      rememberParent(this);
      return this.value[0];
    }
  };
  Entry2.prototype.recompute = function(args) {
    assert(!this.recomputing, "already recomputing");
    rememberParent(this);
    return mightBeDirty(this) ? reallyRecompute(this, args) : valueGet(this.value);
  };
  Entry2.prototype.setDirty = function() {
    if (this.dirty)
      return;
    this.dirty = true;
    this.value.length = 0;
    reportDirty(this);
    maybeUnsubscribe(this);
  };
  Entry2.prototype.dispose = function() {
    var _this = this;
    this.setDirty();
    forgetChildren(this);
    eachParent(this, function(parent, child) {
      parent.setDirty();
      forgetChild(parent, _this);
    });
  };
  Entry2.prototype.forget = function() {
    this.dispose();
  };
  Entry2.prototype.dependOn = function(dep2) {
    dep2.add(this);
    if (!this.deps) {
      this.deps = emptySetPool.pop() || /* @__PURE__ */ new Set();
    }
    this.deps.add(dep2);
  };
  Entry2.prototype.forgetDeps = function() {
    var _this = this;
    if (this.deps) {
      toArray(this.deps).forEach(function(dep2) {
        return dep2.delete(_this);
      });
      this.deps.clear();
      emptySetPool.push(this.deps);
      this.deps = null;
    }
  };
  Entry2.count = 0;
  return Entry2;
}();
function rememberParent(child) {
  var parent = parentEntrySlot.getValue();
  if (parent) {
    child.parents.add(parent);
    if (!parent.childValues.has(child)) {
      parent.childValues.set(child, []);
    }
    if (mightBeDirty(child)) {
      reportDirtyChild(parent, child);
    } else {
      reportCleanChild(parent, child);
    }
    return parent;
  }
}
function reallyRecompute(entry, args) {
  forgetChildren(entry);
  parentEntrySlot.withValue(entry, recomputeNewValue, [entry, args]);
  if (maybeSubscribe(entry, args)) {
    setClean(entry);
  }
  return valueGet(entry.value);
}
function recomputeNewValue(entry, args) {
  entry.recomputing = true;
  entry.value.length = 0;
  try {
    entry.value[0] = entry.fn.apply(null, args);
  } catch (e) {
    entry.value[1] = e;
  }
  entry.recomputing = false;
}
function mightBeDirty(entry) {
  return entry.dirty || !!(entry.dirtyChildren && entry.dirtyChildren.size);
}
function setClean(entry) {
  entry.dirty = false;
  if (mightBeDirty(entry)) {
    return;
  }
  reportClean(entry);
}
function reportDirty(child) {
  eachParent(child, reportDirtyChild);
}
function reportClean(child) {
  eachParent(child, reportCleanChild);
}
function eachParent(child, callback) {
  var parentCount = child.parents.size;
  if (parentCount) {
    var parents = toArray(child.parents);
    for (var i = 0; i < parentCount; ++i) {
      callback(parents[i], child);
    }
  }
}
function reportDirtyChild(parent, child) {
  assert(parent.childValues.has(child));
  assert(mightBeDirty(child));
  var parentWasClean = !mightBeDirty(parent);
  if (!parent.dirtyChildren) {
    parent.dirtyChildren = emptySetPool.pop() || /* @__PURE__ */ new Set();
  } else if (parent.dirtyChildren.has(child)) {
    return;
  }
  parent.dirtyChildren.add(child);
  if (parentWasClean) {
    reportDirty(parent);
  }
}
function reportCleanChild(parent, child) {
  assert(parent.childValues.has(child));
  assert(!mightBeDirty(child));
  var childValue = parent.childValues.get(child);
  if (childValue.length === 0) {
    parent.childValues.set(child, valueCopy(child.value));
  } else if (!valueIs(childValue, child.value)) {
    parent.setDirty();
  }
  removeDirtyChild(parent, child);
  if (mightBeDirty(parent)) {
    return;
  }
  reportClean(parent);
}
function removeDirtyChild(parent, child) {
  var dc = parent.dirtyChildren;
  if (dc) {
    dc.delete(child);
    if (dc.size === 0) {
      if (emptySetPool.length < POOL_TARGET_SIZE) {
        emptySetPool.push(dc);
      }
      parent.dirtyChildren = null;
    }
  }
}
function forgetChildren(parent) {
  if (parent.childValues.size > 0) {
    parent.childValues.forEach(function(_value, child) {
      forgetChild(parent, child);
    });
  }
  parent.forgetDeps();
  assert(parent.dirtyChildren === null);
}
function forgetChild(parent, child) {
  child.parents.delete(parent);
  parent.childValues.delete(child);
  removeDirtyChild(parent, child);
}
function maybeSubscribe(entry, args) {
  if (typeof entry.subscribe === "function") {
    try {
      maybeUnsubscribe(entry);
      entry.unsubscribe = entry.subscribe.apply(null, args);
    } catch (e) {
      entry.setDirty();
      return false;
    }
  }
  return true;
}
var EntryMethods = {
  setDirty: true,
  dispose: true,
  forget: true
};
function dep(options2) {
  var depsByKey = /* @__PURE__ */ new Map();
  var subscribe = options2 && options2.subscribe;
  function depend(key) {
    var parent = parentEntrySlot.getValue();
    if (parent) {
      var dep_1 = depsByKey.get(key);
      if (!dep_1) {
        depsByKey.set(key, dep_1 = /* @__PURE__ */ new Set());
      }
      parent.dependOn(dep_1);
      if (typeof subscribe === "function") {
        maybeUnsubscribe(dep_1);
        dep_1.unsubscribe = subscribe(key);
      }
    }
  }
  depend.dirty = function dirty(key, entryMethodName) {
    var dep2 = depsByKey.get(key);
    if (dep2) {
      var m_1 = entryMethodName && hasOwnProperty$2.call(EntryMethods, entryMethodName) ? entryMethodName : "setDirty";
      toArray(dep2).forEach(function(entry) {
        return entry[m_1]();
      });
      depsByKey.delete(key);
      maybeUnsubscribe(dep2);
    }
  };
  return depend;
}
function makeDefaultMakeCacheKeyFunction() {
  var keyTrie = new Trie(typeof WeakMap === "function");
  return function() {
    return keyTrie.lookupArray(arguments);
  };
}
makeDefaultMakeCacheKeyFunction();
var caches = /* @__PURE__ */ new Set();
function wrap(originalFunction, options2) {
  if (options2 === void 0) {
    options2 = /* @__PURE__ */ Object.create(null);
  }
  var cache = new Cache(options2.max || Math.pow(2, 16), function(entry) {
    return entry.dispose();
  });
  var keyArgs = options2.keyArgs;
  var makeCacheKey = options2.makeCacheKey || makeDefaultMakeCacheKeyFunction();
  var optimistic = function() {
    var key = makeCacheKey.apply(null, keyArgs ? keyArgs.apply(null, arguments) : arguments);
    if (key === void 0) {
      return originalFunction.apply(null, arguments);
    }
    var entry = cache.get(key);
    if (!entry) {
      cache.set(key, entry = new Entry(originalFunction));
      entry.subscribe = options2.subscribe;
      entry.forget = function() {
        return cache.delete(key);
      };
    }
    var value = entry.recompute(Array.prototype.slice.call(arguments));
    cache.set(key, entry);
    caches.add(cache);
    if (!parentEntrySlot.hasValue()) {
      caches.forEach(function(cache2) {
        return cache2.clean();
      });
      caches.clear();
    }
    return value;
  };
  Object.defineProperty(optimistic, "size", {
    get: function() {
      return cache["map"].size;
    },
    configurable: false,
    enumerable: false
  });
  function dirtyKey(key) {
    var entry = cache.get(key);
    if (entry) {
      entry.setDirty();
    }
  }
  optimistic.dirtyKey = dirtyKey;
  optimistic.dirty = function dirty() {
    dirtyKey(makeCacheKey.apply(null, arguments));
  };
  function peekKey(key) {
    var entry = cache.get(key);
    if (entry) {
      return entry.peek();
    }
  }
  optimistic.peekKey = peekKey;
  optimistic.peek = function peek() {
    return peekKey(makeCacheKey.apply(null, arguments));
  };
  function forgetKey(key) {
    return cache.delete(key);
  }
  optimistic.forgetKey = forgetKey;
  optimistic.forget = function forget() {
    return forgetKey(makeCacheKey.apply(null, arguments));
  };
  optimistic.makeCacheKey = makeCacheKey;
  optimistic.getKey = keyArgs ? function getKey() {
    return makeCacheKey.apply(null, keyArgs.apply(null, arguments));
  } : makeCacheKey;
  return Object.freeze(optimistic);
}
var ApolloCache = function() {
  function ApolloCache2() {
    this.getFragmentDoc = wrap(getFragmentQueryDocument);
  }
  ApolloCache2.prototype.batch = function(options2) {
    var _this = this;
    var optimisticId = typeof options2.optimistic === "string" ? options2.optimistic : options2.optimistic === false ? null : void 0;
    var updateResult;
    this.performTransaction(function() {
      return updateResult = options2.update(_this);
    }, optimisticId);
    return updateResult;
  };
  ApolloCache2.prototype.recordOptimisticTransaction = function(transaction, optimisticId) {
    this.performTransaction(transaction, optimisticId);
  };
  ApolloCache2.prototype.transformDocument = function(document) {
    return document;
  };
  ApolloCache2.prototype.transformForLink = function(document) {
    return document;
  };
  ApolloCache2.prototype.identify = function(object) {
    return;
  };
  ApolloCache2.prototype.gc = function() {
    return [];
  };
  ApolloCache2.prototype.modify = function(options2) {
    return false;
  };
  ApolloCache2.prototype.readQuery = function(options2, optimistic) {
    if (optimistic === void 0) {
      optimistic = !!options2.optimistic;
    }
    return this.read(__assign(__assign({}, options2), { rootId: options2.id || "ROOT_QUERY", optimistic }));
  };
  ApolloCache2.prototype.readFragment = function(options2, optimistic) {
    if (optimistic === void 0) {
      optimistic = !!options2.optimistic;
    }
    return this.read(__assign(__assign({}, options2), { query: this.getFragmentDoc(options2.fragment, options2.fragmentName), rootId: options2.id, optimistic }));
  };
  ApolloCache2.prototype.writeQuery = function(_a2) {
    var id = _a2.id, data = _a2.data, options2 = __rest(_a2, ["id", "data"]);
    return this.write(Object.assign(options2, {
      dataId: id || "ROOT_QUERY",
      result: data
    }));
  };
  ApolloCache2.prototype.writeFragment = function(_a2) {
    var id = _a2.id, data = _a2.data, fragment = _a2.fragment, fragmentName = _a2.fragmentName, options2 = __rest(_a2, ["id", "data", "fragment", "fragmentName"]);
    return this.write(Object.assign(options2, {
      query: this.getFragmentDoc(fragment, fragmentName),
      dataId: id,
      result: data
    }));
  };
  ApolloCache2.prototype.updateQuery = function(options2, update) {
    return this.batch({
      update: function(cache) {
        var value = cache.readQuery(options2);
        var data = update(value);
        if (data === void 0 || data === null)
          return value;
        cache.writeQuery(__assign(__assign({}, options2), { data }));
        return data;
      }
    });
  };
  ApolloCache2.prototype.updateFragment = function(options2, update) {
    return this.batch({
      update: function(cache) {
        var value = cache.readFragment(options2);
        var data = update(value);
        if (data === void 0 || data === null)
          return value;
        cache.writeFragment(__assign(__assign({}, options2), { data }));
        return data;
      }
    });
  };
  return ApolloCache2;
}();
var MissingFieldError = function(_super) {
  __extends(MissingFieldError2, _super);
  function MissingFieldError2(message, path, query, variables) {
    var _a2;
    var _this = _super.call(this, message) || this;
    _this.message = message;
    _this.path = path;
    _this.query = query;
    _this.variables = variables;
    if (Array.isArray(_this.path)) {
      _this.missing = _this.message;
      for (var i = _this.path.length - 1; i >= 0; --i) {
        _this.missing = (_a2 = {}, _a2[_this.path[i]] = _this.missing, _a2);
      }
    } else {
      _this.missing = _this.path;
    }
    _this.__proto__ = MissingFieldError2.prototype;
    return _this;
  }
  return MissingFieldError2;
}(Error);
var hasOwn = Object.prototype.hasOwnProperty;
function isNullish(value) {
  return value === null || value === void 0;
}
function defaultDataIdFromObject(_a2, context) {
  var __typename = _a2.__typename, id = _a2.id, _id = _a2._id;
  if (typeof __typename === "string") {
    if (context) {
      context.keyObject = !isNullish(id) ? { id } : !isNullish(_id) ? { _id } : void 0;
    }
    if (isNullish(id) && !isNullish(_id)) {
      id = _id;
    }
    if (!isNullish(id)) {
      return "".concat(__typename, ":").concat(typeof id === "number" || typeof id === "string" ? id : JSON.stringify(id));
    }
  }
}
var defaultConfig = {
  dataIdFromObject: defaultDataIdFromObject,
  addTypename: true,
  resultCaching: true,
  canonizeResults: false
};
function normalizeConfig(config) {
  return compact(defaultConfig, config);
}
function shouldCanonizeResults(config) {
  var value = config.canonizeResults;
  return value === void 0 ? defaultConfig.canonizeResults : value;
}
function getTypenameFromStoreObject(store, objectOrReference) {
  return isReference(objectOrReference) ? store.get(objectOrReference.__ref, "__typename") : objectOrReference && objectOrReference.__typename;
}
var TypeOrFieldNameRegExp = /^[_a-z][_0-9a-z]*/i;
function fieldNameFromStoreName(storeFieldName) {
  var match = storeFieldName.match(TypeOrFieldNameRegExp);
  return match ? match[0] : storeFieldName;
}
function selectionSetMatchesResult(selectionSet, result, variables) {
  if (isNonNullObject(result)) {
    return isArray(result) ? result.every(function(item) {
      return selectionSetMatchesResult(selectionSet, item, variables);
    }) : selectionSet.selections.every(function(field) {
      if (isField(field) && shouldInclude(field, variables)) {
        var key = resultKeyNameFromField(field);
        return hasOwn.call(result, key) && (!field.selectionSet || selectionSetMatchesResult(field.selectionSet, result[key], variables));
      }
      return true;
    });
  }
  return false;
}
function storeValueIsStoreObject(value) {
  return isNonNullObject(value) && !isReference(value) && !isArray(value);
}
function makeProcessedFieldsMerger() {
  return new DeepMerger();
}
function extractFragmentContext(document, fragments) {
  var fragmentMap = createFragmentMap(getFragmentDefinitions(document));
  return {
    fragmentMap,
    lookupFragment: function(name) {
      var def = fragmentMap[name];
      if (!def && fragments) {
        def = fragments.lookup(name);
      }
      return def || null;
    }
  };
}
var DELETE = /* @__PURE__ */ Object.create(null);
var delModifier = function() {
  return DELETE;
};
var INVALIDATE = /* @__PURE__ */ Object.create(null);
var EntityStore = function() {
  function EntityStore2(policies, group) {
    var _this = this;
    this.policies = policies;
    this.group = group;
    this.data = /* @__PURE__ */ Object.create(null);
    this.rootIds = /* @__PURE__ */ Object.create(null);
    this.refs = /* @__PURE__ */ Object.create(null);
    this.getFieldValue = function(objectOrReference, storeFieldName) {
      return maybeDeepFreeze(isReference(objectOrReference) ? _this.get(objectOrReference.__ref, storeFieldName) : objectOrReference && objectOrReference[storeFieldName]);
    };
    this.canRead = function(objOrRef) {
      return isReference(objOrRef) ? _this.has(objOrRef.__ref) : typeof objOrRef === "object";
    };
    this.toReference = function(objOrIdOrRef, mergeIntoStore) {
      if (typeof objOrIdOrRef === "string") {
        return makeReference(objOrIdOrRef);
      }
      if (isReference(objOrIdOrRef)) {
        return objOrIdOrRef;
      }
      var id = _this.policies.identify(objOrIdOrRef)[0];
      if (id) {
        var ref2 = makeReference(id);
        if (mergeIntoStore) {
          _this.merge(id, objOrIdOrRef);
        }
        return ref2;
      }
    };
  }
  EntityStore2.prototype.toObject = function() {
    return __assign({}, this.data);
  };
  EntityStore2.prototype.has = function(dataId) {
    return this.lookup(dataId, true) !== void 0;
  };
  EntityStore2.prototype.get = function(dataId, fieldName) {
    this.group.depend(dataId, fieldName);
    if (hasOwn.call(this.data, dataId)) {
      var storeObject = this.data[dataId];
      if (storeObject && hasOwn.call(storeObject, fieldName)) {
        return storeObject[fieldName];
      }
    }
    if (fieldName === "__typename" && hasOwn.call(this.policies.rootTypenamesById, dataId)) {
      return this.policies.rootTypenamesById[dataId];
    }
    if (this instanceof Layer) {
      return this.parent.get(dataId, fieldName);
    }
  };
  EntityStore2.prototype.lookup = function(dataId, dependOnExistence) {
    if (dependOnExistence)
      this.group.depend(dataId, "__exists");
    if (hasOwn.call(this.data, dataId)) {
      return this.data[dataId];
    }
    if (this instanceof Layer) {
      return this.parent.lookup(dataId, dependOnExistence);
    }
    if (this.policies.rootTypenamesById[dataId]) {
      return /* @__PURE__ */ Object.create(null);
    }
  };
  EntityStore2.prototype.merge = function(older, newer) {
    var _this = this;
    var dataId;
    if (isReference(older))
      older = older.__ref;
    if (isReference(newer))
      newer = newer.__ref;
    var existing = typeof older === "string" ? this.lookup(dataId = older) : older;
    var incoming = typeof newer === "string" ? this.lookup(dataId = newer) : newer;
    if (!incoming)
      return;
    __DEV__ ? invariant$1(typeof dataId === "string", "store.merge expects a string ID") : invariant$1(typeof dataId === "string", 1);
    var merged = new DeepMerger(storeObjectReconciler).merge(existing, incoming);
    this.data[dataId] = merged;
    if (merged !== existing) {
      delete this.refs[dataId];
      if (this.group.caching) {
        var fieldsToDirty_1 = /* @__PURE__ */ Object.create(null);
        if (!existing)
          fieldsToDirty_1.__exists = 1;
        Object.keys(incoming).forEach(function(storeFieldName) {
          if (!existing || existing[storeFieldName] !== merged[storeFieldName]) {
            fieldsToDirty_1[storeFieldName] = 1;
            var fieldName = fieldNameFromStoreName(storeFieldName);
            if (fieldName !== storeFieldName && !_this.policies.hasKeyArgs(merged.__typename, fieldName)) {
              fieldsToDirty_1[fieldName] = 1;
            }
            if (merged[storeFieldName] === void 0 && !(_this instanceof Layer)) {
              delete merged[storeFieldName];
            }
          }
        });
        if (fieldsToDirty_1.__typename && !(existing && existing.__typename) && this.policies.rootTypenamesById[dataId] === merged.__typename) {
          delete fieldsToDirty_1.__typename;
        }
        Object.keys(fieldsToDirty_1).forEach(function(fieldName) {
          return _this.group.dirty(dataId, fieldName);
        });
      }
    }
  };
  EntityStore2.prototype.modify = function(dataId, fields) {
    var _this = this;
    var storeObject = this.lookup(dataId);
    if (storeObject) {
      var changedFields_1 = /* @__PURE__ */ Object.create(null);
      var needToMerge_1 = false;
      var allDeleted_1 = true;
      var sharedDetails_1 = {
        DELETE,
        INVALIDATE,
        isReference,
        toReference: this.toReference,
        canRead: this.canRead,
        readField: function(fieldNameOrOptions, from) {
          return _this.policies.readField(typeof fieldNameOrOptions === "string" ? {
            fieldName: fieldNameOrOptions,
            from: from || makeReference(dataId)
          } : fieldNameOrOptions, { store: _this });
        }
      };
      Object.keys(storeObject).forEach(function(storeFieldName) {
        var fieldName = fieldNameFromStoreName(storeFieldName);
        var fieldValue = storeObject[storeFieldName];
        if (fieldValue === void 0)
          return;
        var modify = typeof fields === "function" ? fields : fields[storeFieldName] || fields[fieldName];
        if (modify) {
          var newValue = modify === delModifier ? DELETE : modify(maybeDeepFreeze(fieldValue), __assign(__assign({}, sharedDetails_1), { fieldName, storeFieldName, storage: _this.getStorage(dataId, storeFieldName) }));
          if (newValue === INVALIDATE) {
            _this.group.dirty(dataId, storeFieldName);
          } else {
            if (newValue === DELETE)
              newValue = void 0;
            if (newValue !== fieldValue) {
              changedFields_1[storeFieldName] = newValue;
              needToMerge_1 = true;
              fieldValue = newValue;
            }
          }
        }
        if (fieldValue !== void 0) {
          allDeleted_1 = false;
        }
      });
      if (needToMerge_1) {
        this.merge(dataId, changedFields_1);
        if (allDeleted_1) {
          if (this instanceof Layer) {
            this.data[dataId] = void 0;
          } else {
            delete this.data[dataId];
          }
          this.group.dirty(dataId, "__exists");
        }
        return true;
      }
    }
    return false;
  };
  EntityStore2.prototype.delete = function(dataId, fieldName, args) {
    var _a2;
    var storeObject = this.lookup(dataId);
    if (storeObject) {
      var typename = this.getFieldValue(storeObject, "__typename");
      var storeFieldName = fieldName && args ? this.policies.getStoreFieldName({ typename, fieldName, args }) : fieldName;
      return this.modify(dataId, storeFieldName ? (_a2 = {}, _a2[storeFieldName] = delModifier, _a2) : delModifier);
    }
    return false;
  };
  EntityStore2.prototype.evict = function(options2, limit) {
    var evicted = false;
    if (options2.id) {
      if (hasOwn.call(this.data, options2.id)) {
        evicted = this.delete(options2.id, options2.fieldName, options2.args);
      }
      if (this instanceof Layer && this !== limit) {
        evicted = this.parent.evict(options2, limit) || evicted;
      }
      if (options2.fieldName || evicted) {
        this.group.dirty(options2.id, options2.fieldName || "__exists");
      }
    }
    return evicted;
  };
  EntityStore2.prototype.clear = function() {
    this.replace(null);
  };
  EntityStore2.prototype.extract = function() {
    var _this = this;
    var obj = this.toObject();
    var extraRootIds = [];
    this.getRootIdSet().forEach(function(id) {
      if (!hasOwn.call(_this.policies.rootTypenamesById, id)) {
        extraRootIds.push(id);
      }
    });
    if (extraRootIds.length) {
      obj.__META = { extraRootIds: extraRootIds.sort() };
    }
    return obj;
  };
  EntityStore2.prototype.replace = function(newData) {
    var _this = this;
    Object.keys(this.data).forEach(function(dataId) {
      if (!(newData && hasOwn.call(newData, dataId))) {
        _this.delete(dataId);
      }
    });
    if (newData) {
      var __META = newData.__META, rest_1 = __rest(newData, ["__META"]);
      Object.keys(rest_1).forEach(function(dataId) {
        _this.merge(dataId, rest_1[dataId]);
      });
      if (__META) {
        __META.extraRootIds.forEach(this.retain, this);
      }
    }
  };
  EntityStore2.prototype.retain = function(rootId) {
    return this.rootIds[rootId] = (this.rootIds[rootId] || 0) + 1;
  };
  EntityStore2.prototype.release = function(rootId) {
    if (this.rootIds[rootId] > 0) {
      var count = --this.rootIds[rootId];
      if (!count)
        delete this.rootIds[rootId];
      return count;
    }
    return 0;
  };
  EntityStore2.prototype.getRootIdSet = function(ids) {
    if (ids === void 0) {
      ids = /* @__PURE__ */ new Set();
    }
    Object.keys(this.rootIds).forEach(ids.add, ids);
    if (this instanceof Layer) {
      this.parent.getRootIdSet(ids);
    } else {
      Object.keys(this.policies.rootTypenamesById).forEach(ids.add, ids);
    }
    return ids;
  };
  EntityStore2.prototype.gc = function() {
    var _this = this;
    var ids = this.getRootIdSet();
    var snapshot = this.toObject();
    ids.forEach(function(id) {
      if (hasOwn.call(snapshot, id)) {
        Object.keys(_this.findChildRefIds(id)).forEach(ids.add, ids);
        delete snapshot[id];
      }
    });
    var idsToRemove = Object.keys(snapshot);
    if (idsToRemove.length) {
      var root_1 = this;
      while (root_1 instanceof Layer)
        root_1 = root_1.parent;
      idsToRemove.forEach(function(id) {
        return root_1.delete(id);
      });
    }
    return idsToRemove;
  };
  EntityStore2.prototype.findChildRefIds = function(dataId) {
    if (!hasOwn.call(this.refs, dataId)) {
      var found_1 = this.refs[dataId] = /* @__PURE__ */ Object.create(null);
      var root2 = this.data[dataId];
      if (!root2)
        return found_1;
      var workSet_1 = /* @__PURE__ */ new Set([root2]);
      workSet_1.forEach(function(obj) {
        if (isReference(obj)) {
          found_1[obj.__ref] = true;
        }
        if (isNonNullObject(obj)) {
          Object.keys(obj).forEach(function(key) {
            var child = obj[key];
            if (isNonNullObject(child)) {
              workSet_1.add(child);
            }
          });
        }
      });
    }
    return this.refs[dataId];
  };
  EntityStore2.prototype.makeCacheKey = function() {
    return this.group.keyMaker.lookupArray(arguments);
  };
  return EntityStore2;
}();
var CacheGroup = function() {
  function CacheGroup2(caching, parent) {
    if (parent === void 0) {
      parent = null;
    }
    this.caching = caching;
    this.parent = parent;
    this.d = null;
    this.resetCaching();
  }
  CacheGroup2.prototype.resetCaching = function() {
    this.d = this.caching ? dep() : null;
    this.keyMaker = new Trie(canUseWeakMap);
  };
  CacheGroup2.prototype.depend = function(dataId, storeFieldName) {
    if (this.d) {
      this.d(makeDepKey(dataId, storeFieldName));
      var fieldName = fieldNameFromStoreName(storeFieldName);
      if (fieldName !== storeFieldName) {
        this.d(makeDepKey(dataId, fieldName));
      }
      if (this.parent) {
        this.parent.depend(dataId, storeFieldName);
      }
    }
  };
  CacheGroup2.prototype.dirty = function(dataId, storeFieldName) {
    if (this.d) {
      this.d.dirty(makeDepKey(dataId, storeFieldName), storeFieldName === "__exists" ? "forget" : "setDirty");
    }
  };
  return CacheGroup2;
}();
function makeDepKey(dataId, storeFieldName) {
  return storeFieldName + "#" + dataId;
}
function maybeDependOnExistenceOfEntity(store, entityId) {
  if (supportsResultCaching(store)) {
    store.group.depend(entityId, "__exists");
  }
}
(function(EntityStore2) {
  var Root = function(_super) {
    __extends(Root2, _super);
    function Root2(_a2) {
      var policies = _a2.policies, _b = _a2.resultCaching, resultCaching = _b === void 0 ? true : _b, seed = _a2.seed;
      var _this = _super.call(this, policies, new CacheGroup(resultCaching)) || this;
      _this.stump = new Stump(_this);
      _this.storageTrie = new Trie(canUseWeakMap);
      if (seed)
        _this.replace(seed);
      return _this;
    }
    Root2.prototype.addLayer = function(layerId, replay) {
      return this.stump.addLayer(layerId, replay);
    };
    Root2.prototype.removeLayer = function() {
      return this;
    };
    Root2.prototype.getStorage = function() {
      return this.storageTrie.lookupArray(arguments);
    };
    return Root2;
  }(EntityStore2);
  EntityStore2.Root = Root;
})(EntityStore || (EntityStore = {}));
var Layer = function(_super) {
  __extends(Layer2, _super);
  function Layer2(id, parent, replay, group) {
    var _this = _super.call(this, parent.policies, group) || this;
    _this.id = id;
    _this.parent = parent;
    _this.replay = replay;
    _this.group = group;
    replay(_this);
    return _this;
  }
  Layer2.prototype.addLayer = function(layerId, replay) {
    return new Layer2(layerId, this, replay, this.group);
  };
  Layer2.prototype.removeLayer = function(layerId) {
    var _this = this;
    var parent = this.parent.removeLayer(layerId);
    if (layerId === this.id) {
      if (this.group.caching) {
        Object.keys(this.data).forEach(function(dataId) {
          var ownStoreObject = _this.data[dataId];
          var parentStoreObject = parent["lookup"](dataId);
          if (!parentStoreObject) {
            _this.delete(dataId);
          } else if (!ownStoreObject) {
            _this.group.dirty(dataId, "__exists");
            Object.keys(parentStoreObject).forEach(function(storeFieldName) {
              _this.group.dirty(dataId, storeFieldName);
            });
          } else if (ownStoreObject !== parentStoreObject) {
            Object.keys(ownStoreObject).forEach(function(storeFieldName) {
              if (!equal(ownStoreObject[storeFieldName], parentStoreObject[storeFieldName])) {
                _this.group.dirty(dataId, storeFieldName);
              }
            });
          }
        });
      }
      return parent;
    }
    if (parent === this.parent)
      return this;
    return parent.addLayer(this.id, this.replay);
  };
  Layer2.prototype.toObject = function() {
    return __assign(__assign({}, this.parent.toObject()), this.data);
  };
  Layer2.prototype.findChildRefIds = function(dataId) {
    var fromParent = this.parent.findChildRefIds(dataId);
    return hasOwn.call(this.data, dataId) ? __assign(__assign({}, fromParent), _super.prototype.findChildRefIds.call(this, dataId)) : fromParent;
  };
  Layer2.prototype.getStorage = function() {
    var p = this.parent;
    while (p.parent)
      p = p.parent;
    return p.getStorage.apply(p, arguments);
  };
  return Layer2;
}(EntityStore);
var Stump = function(_super) {
  __extends(Stump2, _super);
  function Stump2(root2) {
    return _super.call(this, "EntityStore.Stump", root2, function() {
    }, new CacheGroup(root2.group.caching, root2.group)) || this;
  }
  Stump2.prototype.removeLayer = function() {
    return this;
  };
  Stump2.prototype.merge = function() {
    return this.parent.merge.apply(this.parent, arguments);
  };
  return Stump2;
}(Layer);
function storeObjectReconciler(existingObject, incomingObject, property) {
  var existingValue = existingObject[property];
  var incomingValue = incomingObject[property];
  return equal(existingValue, incomingValue) ? existingValue : incomingValue;
}
function supportsResultCaching(store) {
  return !!(store instanceof EntityStore && store.group.caching);
}
function shallowCopy(value) {
  if (isNonNullObject(value)) {
    return isArray(value) ? value.slice(0) : __assign({ __proto__: Object.getPrototypeOf(value) }, value);
  }
  return value;
}
var ObjectCanon = function() {
  function ObjectCanon2() {
    this.known = new (canUseWeakSet ? WeakSet : Set)();
    this.pool = new Trie(canUseWeakMap);
    this.passes = /* @__PURE__ */ new WeakMap();
    this.keysByJSON = /* @__PURE__ */ new Map();
    this.empty = this.admit({});
  }
  ObjectCanon2.prototype.isKnown = function(value) {
    return isNonNullObject(value) && this.known.has(value);
  };
  ObjectCanon2.prototype.pass = function(value) {
    if (isNonNullObject(value)) {
      var copy = shallowCopy(value);
      this.passes.set(copy, value);
      return copy;
    }
    return value;
  };
  ObjectCanon2.prototype.admit = function(value) {
    var _this = this;
    if (isNonNullObject(value)) {
      var original = this.passes.get(value);
      if (original)
        return original;
      var proto = Object.getPrototypeOf(value);
      switch (proto) {
        case Array.prototype: {
          if (this.known.has(value))
            return value;
          var array = value.map(this.admit, this);
          var node = this.pool.lookupArray(array);
          if (!node.array) {
            this.known.add(node.array = array);
            if (__DEV__) {
              Object.freeze(array);
            }
          }
          return node.array;
        }
        case null:
        case Object.prototype: {
          if (this.known.has(value))
            return value;
          var proto_1 = Object.getPrototypeOf(value);
          var array_1 = [proto_1];
          var keys = this.sortedKeys(value);
          array_1.push(keys.json);
          var firstValueIndex_1 = array_1.length;
          keys.sorted.forEach(function(key) {
            array_1.push(_this.admit(value[key]));
          });
          var node = this.pool.lookupArray(array_1);
          if (!node.object) {
            var obj_1 = node.object = Object.create(proto_1);
            this.known.add(obj_1);
            keys.sorted.forEach(function(key, i) {
              obj_1[key] = array_1[firstValueIndex_1 + i];
            });
            if (__DEV__) {
              Object.freeze(obj_1);
            }
          }
          return node.object;
        }
      }
    }
    return value;
  };
  ObjectCanon2.prototype.sortedKeys = function(obj) {
    var keys = Object.keys(obj);
    var node = this.pool.lookupArray(keys);
    if (!node.keys) {
      keys.sort();
      var json = JSON.stringify(keys);
      if (!(node.keys = this.keysByJSON.get(json))) {
        this.keysByJSON.set(json, node.keys = { sorted: keys, json });
      }
    }
    return node.keys;
  };
  return ObjectCanon2;
}();
var canonicalStringify = Object.assign(function(value) {
  if (isNonNullObject(value)) {
    if (stringifyCanon === void 0) {
      resetCanonicalStringify();
    }
    var canonical = stringifyCanon.admit(value);
    var json = stringifyCache.get(canonical);
    if (json === void 0) {
      stringifyCache.set(canonical, json = JSON.stringify(canonical));
    }
    return json;
  }
  return JSON.stringify(value);
}, {
  reset: resetCanonicalStringify
});
var stringifyCanon;
var stringifyCache;
function resetCanonicalStringify() {
  stringifyCanon = new ObjectCanon();
  stringifyCache = new (canUseWeakMap ? WeakMap : Map)();
}
function execSelectionSetKeyArgs(options2) {
  return [
    options2.selectionSet,
    options2.objectOrReference,
    options2.context,
    options2.context.canonizeResults
  ];
}
var StoreReader = function() {
  function StoreReader2(config) {
    var _this = this;
    this.knownResults = new (canUseWeakMap ? WeakMap : Map)();
    this.config = compact(config, {
      addTypename: config.addTypename !== false,
      canonizeResults: shouldCanonizeResults(config)
    });
    this.canon = config.canon || new ObjectCanon();
    this.executeSelectionSet = wrap(function(options2) {
      var _a2;
      var canonizeResults = options2.context.canonizeResults;
      var peekArgs = execSelectionSetKeyArgs(options2);
      peekArgs[3] = !canonizeResults;
      var other = (_a2 = _this.executeSelectionSet).peek.apply(_a2, peekArgs);
      if (other) {
        if (canonizeResults) {
          return __assign(__assign({}, other), { result: _this.canon.admit(other.result) });
        }
        return other;
      }
      maybeDependOnExistenceOfEntity(options2.context.store, options2.enclosingRef.__ref);
      return _this.execSelectionSetImpl(options2);
    }, {
      max: this.config.resultCacheMaxSize,
      keyArgs: execSelectionSetKeyArgs,
      makeCacheKey: function(selectionSet, parent, context, canonizeResults) {
        if (supportsResultCaching(context.store)) {
          return context.store.makeCacheKey(selectionSet, isReference(parent) ? parent.__ref : parent, context.varString, canonizeResults);
        }
      }
    });
    this.executeSubSelectedArray = wrap(function(options2) {
      maybeDependOnExistenceOfEntity(options2.context.store, options2.enclosingRef.__ref);
      return _this.execSubSelectedArrayImpl(options2);
    }, {
      max: this.config.resultCacheMaxSize,
      makeCacheKey: function(_a2) {
        var field = _a2.field, array = _a2.array, context = _a2.context;
        if (supportsResultCaching(context.store)) {
          return context.store.makeCacheKey(field, array, context.varString);
        }
      }
    });
  }
  StoreReader2.prototype.resetCanon = function() {
    this.canon = new ObjectCanon();
  };
  StoreReader2.prototype.diffQueryAgainstStore = function(_a2) {
    var store = _a2.store, query = _a2.query, _b = _a2.rootId, rootId = _b === void 0 ? "ROOT_QUERY" : _b, variables = _a2.variables, _c = _a2.returnPartialData, returnPartialData = _c === void 0 ? true : _c, _d = _a2.canonizeResults, canonizeResults = _d === void 0 ? this.config.canonizeResults : _d;
    var policies = this.config.cache.policies;
    variables = __assign(__assign({}, getDefaultValues(getQueryDefinition(query))), variables);
    var rootRef = makeReference(rootId);
    var execResult = this.executeSelectionSet({
      selectionSet: getMainDefinition(query).selectionSet,
      objectOrReference: rootRef,
      enclosingRef: rootRef,
      context: __assign({ store, query, policies, variables, varString: canonicalStringify(variables), canonizeResults }, extractFragmentContext(query, this.config.fragments))
    });
    var missing;
    if (execResult.missing) {
      missing = [new MissingFieldError(firstMissing(execResult.missing), execResult.missing, query, variables)];
      if (!returnPartialData) {
        throw missing[0];
      }
    }
    return {
      result: execResult.result,
      complete: !missing,
      missing
    };
  };
  StoreReader2.prototype.isFresh = function(result, parent, selectionSet, context) {
    if (supportsResultCaching(context.store) && this.knownResults.get(result) === selectionSet) {
      var latest = this.executeSelectionSet.peek(selectionSet, parent, context, this.canon.isKnown(result));
      if (latest && result === latest.result) {
        return true;
      }
    }
    return false;
  };
  StoreReader2.prototype.execSelectionSetImpl = function(_a2) {
    var _this = this;
    var selectionSet = _a2.selectionSet, objectOrReference = _a2.objectOrReference, enclosingRef = _a2.enclosingRef, context = _a2.context;
    if (isReference(objectOrReference) && !context.policies.rootTypenamesById[objectOrReference.__ref] && !context.store.has(objectOrReference.__ref)) {
      return {
        result: this.canon.empty,
        missing: "Dangling reference to missing ".concat(objectOrReference.__ref, " object")
      };
    }
    var variables = context.variables, policies = context.policies, store = context.store;
    var typename = store.getFieldValue(objectOrReference, "__typename");
    var objectsToMerge = [];
    var missing;
    var missingMerger = new DeepMerger();
    if (this.config.addTypename && typeof typename === "string" && !policies.rootIdsByTypename[typename]) {
      objectsToMerge.push({ __typename: typename });
    }
    function handleMissing(result2, resultName) {
      var _a3;
      if (result2.missing) {
        missing = missingMerger.merge(missing, (_a3 = {}, _a3[resultName] = result2.missing, _a3));
      }
      return result2.result;
    }
    var workSet = new Set(selectionSet.selections);
    workSet.forEach(function(selection) {
      var _a3, _b;
      if (!shouldInclude(selection, variables))
        return;
      if (isField(selection)) {
        var fieldValue = policies.readField({
          fieldName: selection.name.value,
          field: selection,
          variables: context.variables,
          from: objectOrReference
        }, context);
        var resultName = resultKeyNameFromField(selection);
        if (fieldValue === void 0) {
          if (!addTypenameToDocument.added(selection)) {
            missing = missingMerger.merge(missing, (_a3 = {}, _a3[resultName] = "Can't find field '".concat(selection.name.value, "' on ").concat(isReference(objectOrReference) ? objectOrReference.__ref + " object" : "object " + JSON.stringify(objectOrReference, null, 2)), _a3));
          }
        } else if (isArray(fieldValue)) {
          fieldValue = handleMissing(_this.executeSubSelectedArray({
            field: selection,
            array: fieldValue,
            enclosingRef,
            context
          }), resultName);
        } else if (!selection.selectionSet) {
          if (context.canonizeResults) {
            fieldValue = _this.canon.pass(fieldValue);
          }
        } else if (fieldValue != null) {
          fieldValue = handleMissing(_this.executeSelectionSet({
            selectionSet: selection.selectionSet,
            objectOrReference: fieldValue,
            enclosingRef: isReference(fieldValue) ? fieldValue : enclosingRef,
            context
          }), resultName);
        }
        if (fieldValue !== void 0) {
          objectsToMerge.push((_b = {}, _b[resultName] = fieldValue, _b));
        }
      } else {
        var fragment = getFragmentFromSelection(selection, context.lookupFragment);
        if (!fragment && selection.kind === Kind.FRAGMENT_SPREAD) {
          throw __DEV__ ? new InvariantError("No fragment named ".concat(selection.name.value)) : new InvariantError(5);
        }
        if (fragment && policies.fragmentMatches(fragment, typename)) {
          fragment.selectionSet.selections.forEach(workSet.add, workSet);
        }
      }
    });
    var result = mergeDeepArray(objectsToMerge);
    var finalResult = { result, missing };
    var frozen = context.canonizeResults ? this.canon.admit(finalResult) : maybeDeepFreeze(finalResult);
    if (frozen.result) {
      this.knownResults.set(frozen.result, selectionSet);
    }
    return frozen;
  };
  StoreReader2.prototype.execSubSelectedArrayImpl = function(_a2) {
    var _this = this;
    var field = _a2.field, array = _a2.array, enclosingRef = _a2.enclosingRef, context = _a2.context;
    var missing;
    var missingMerger = new DeepMerger();
    function handleMissing(childResult, i) {
      var _a3;
      if (childResult.missing) {
        missing = missingMerger.merge(missing, (_a3 = {}, _a3[i] = childResult.missing, _a3));
      }
      return childResult.result;
    }
    if (field.selectionSet) {
      array = array.filter(context.store.canRead);
    }
    array = array.map(function(item, i) {
      if (item === null) {
        return null;
      }
      if (isArray(item)) {
        return handleMissing(_this.executeSubSelectedArray({
          field,
          array: item,
          enclosingRef,
          context
        }), i);
      }
      if (field.selectionSet) {
        return handleMissing(_this.executeSelectionSet({
          selectionSet: field.selectionSet,
          objectOrReference: item,
          enclosingRef: isReference(item) ? item : enclosingRef,
          context
        }), i);
      }
      if (__DEV__) {
        assertSelectionSetForIdValue(context.store, field, item);
      }
      return item;
    });
    return {
      result: context.canonizeResults ? this.canon.admit(array) : array,
      missing
    };
  };
  return StoreReader2;
}();
function firstMissing(tree) {
  try {
    JSON.stringify(tree, function(_, value) {
      if (typeof value === "string")
        throw value;
      return value;
    });
  } catch (result) {
    return result;
  }
}
function assertSelectionSetForIdValue(store, field, fieldValue) {
  if (!field.selectionSet) {
    var workSet_1 = /* @__PURE__ */ new Set([fieldValue]);
    workSet_1.forEach(function(value) {
      if (isNonNullObject(value)) {
        __DEV__ ? invariant$1(!isReference(value), "Missing selection set for object of type ".concat(getTypenameFromStoreObject(store, value), " returned for query field ").concat(field.name.value)) : invariant$1(!isReference(value), 6);
        Object.values(value).forEach(workSet_1.add, workSet_1);
      }
    });
  }
}
var cacheSlot = new Slot();
var cacheInfoMap = /* @__PURE__ */ new WeakMap();
function getCacheInfo(cache) {
  var info = cacheInfoMap.get(cache);
  if (!info) {
    cacheInfoMap.set(cache, info = {
      vars: /* @__PURE__ */ new Set(),
      dep: dep()
    });
  }
  return info;
}
function forgetCache(cache) {
  getCacheInfo(cache).vars.forEach(function(rv) {
    return rv.forgetCache(cache);
  });
}
function recallCache(cache) {
  getCacheInfo(cache).vars.forEach(function(rv) {
    return rv.attachCache(cache);
  });
}
function makeVar(value) {
  var caches2 = /* @__PURE__ */ new Set();
  var listeners = /* @__PURE__ */ new Set();
  var rv = function(newValue) {
    if (arguments.length > 0) {
      if (value !== newValue) {
        value = newValue;
        caches2.forEach(function(cache2) {
          getCacheInfo(cache2).dep.dirty(rv);
          broadcast(cache2);
        });
        var oldListeners = Array.from(listeners);
        listeners.clear();
        oldListeners.forEach(function(listener) {
          return listener(value);
        });
      }
    } else {
      var cache = cacheSlot.getValue();
      if (cache) {
        attach(cache);
        getCacheInfo(cache).dep(rv);
      }
    }
    return value;
  };
  rv.onNextChange = function(listener) {
    listeners.add(listener);
    return function() {
      listeners.delete(listener);
    };
  };
  var attach = rv.attachCache = function(cache) {
    caches2.add(cache);
    getCacheInfo(cache).vars.add(rv);
    return rv;
  };
  rv.forgetCache = function(cache) {
    return caches2.delete(cache);
  };
  return rv;
}
function broadcast(cache) {
  if (cache.broadcastWatches) {
    cache.broadcastWatches();
  }
}
var specifierInfoCache = /* @__PURE__ */ Object.create(null);
function lookupSpecifierInfo(spec) {
  var cacheKey = JSON.stringify(spec);
  return specifierInfoCache[cacheKey] || (specifierInfoCache[cacheKey] = /* @__PURE__ */ Object.create(null));
}
function keyFieldsFnFromSpecifier(specifier) {
  var info = lookupSpecifierInfo(specifier);
  return info.keyFieldsFn || (info.keyFieldsFn = function(object, context) {
    var extract = function(from, key) {
      return context.readField(key, from);
    };
    var keyObject = context.keyObject = collectSpecifierPaths(specifier, function(schemaKeyPath) {
      var extracted = extractKeyPath(context.storeObject, schemaKeyPath, extract);
      if (extracted === void 0 && object !== context.storeObject && hasOwn.call(object, schemaKeyPath[0])) {
        extracted = extractKeyPath(object, schemaKeyPath, extractKey);
      }
      __DEV__ ? invariant$1(extracted !== void 0, "Missing field '".concat(schemaKeyPath.join("."), "' while extracting keyFields from ").concat(JSON.stringify(object))) : invariant$1(extracted !== void 0, 2);
      return extracted;
    });
    return "".concat(context.typename, ":").concat(JSON.stringify(keyObject));
  });
}
function keyArgsFnFromSpecifier(specifier) {
  var info = lookupSpecifierInfo(specifier);
  return info.keyArgsFn || (info.keyArgsFn = function(args, _a2) {
    var field = _a2.field, variables = _a2.variables, fieldName = _a2.fieldName;
    var collected = collectSpecifierPaths(specifier, function(keyPath) {
      var firstKey = keyPath[0];
      var firstChar = firstKey.charAt(0);
      if (firstChar === "@") {
        if (field && isNonEmptyArray(field.directives)) {
          var directiveName_1 = firstKey.slice(1);
          var d = field.directives.find(function(d2) {
            return d2.name.value === directiveName_1;
          });
          var directiveArgs = d && argumentsObjectFromField(d, variables);
          return directiveArgs && extractKeyPath(directiveArgs, keyPath.slice(1));
        }
        return;
      }
      if (firstChar === "$") {
        var variableName = firstKey.slice(1);
        if (variables && hasOwn.call(variables, variableName)) {
          var varKeyPath = keyPath.slice(0);
          varKeyPath[0] = variableName;
          return extractKeyPath(variables, varKeyPath);
        }
        return;
      }
      if (args) {
        return extractKeyPath(args, keyPath);
      }
    });
    var suffix = JSON.stringify(collected);
    if (args || suffix !== "{}") {
      fieldName += ":" + suffix;
    }
    return fieldName;
  });
}
function collectSpecifierPaths(specifier, extractor) {
  var merger = new DeepMerger();
  return getSpecifierPaths(specifier).reduce(function(collected, path) {
    var _a2;
    var toMerge = extractor(path);
    if (toMerge !== void 0) {
      for (var i = path.length - 1; i >= 0; --i) {
        toMerge = (_a2 = {}, _a2[path[i]] = toMerge, _a2);
      }
      collected = merger.merge(collected, toMerge);
    }
    return collected;
  }, /* @__PURE__ */ Object.create(null));
}
function getSpecifierPaths(spec) {
  var info = lookupSpecifierInfo(spec);
  if (!info.paths) {
    var paths_1 = info.paths = [];
    var currentPath_1 = [];
    spec.forEach(function(s, i) {
      if (isArray(s)) {
        getSpecifierPaths(s).forEach(function(p) {
          return paths_1.push(currentPath_1.concat(p));
        });
        currentPath_1.length = 0;
      } else {
        currentPath_1.push(s);
        if (!isArray(spec[i + 1])) {
          paths_1.push(currentPath_1.slice(0));
          currentPath_1.length = 0;
        }
      }
    });
  }
  return info.paths;
}
function extractKey(object, key) {
  return object[key];
}
function extractKeyPath(object, path, extract) {
  extract = extract || extractKey;
  return normalize(path.reduce(function reducer(obj, key) {
    return isArray(obj) ? obj.map(function(child) {
      return reducer(child, key);
    }) : obj && extract(obj, key);
  }, object));
}
function normalize(value) {
  if (isNonNullObject(value)) {
    if (isArray(value)) {
      return value.map(normalize);
    }
    return collectSpecifierPaths(Object.keys(value).sort(), function(path) {
      return extractKeyPath(value, path);
    });
  }
  return value;
}
getStoreKeyName.setStringify(canonicalStringify);
function argsFromFieldSpecifier(spec) {
  return spec.args !== void 0 ? spec.args : spec.field ? argumentsObjectFromField(spec.field, spec.variables) : null;
}
var nullKeyFieldsFn = function() {
  return void 0;
};
var simpleKeyArgsFn = function(_args, context) {
  return context.fieldName;
};
var mergeTrueFn = function(existing, incoming, _a2) {
  var mergeObjects = _a2.mergeObjects;
  return mergeObjects(existing, incoming);
};
var mergeFalseFn = function(_, incoming) {
  return incoming;
};
var Policies = function() {
  function Policies2(config) {
    this.config = config;
    this.typePolicies = /* @__PURE__ */ Object.create(null);
    this.toBeAdded = /* @__PURE__ */ Object.create(null);
    this.supertypeMap = /* @__PURE__ */ new Map();
    this.fuzzySubtypes = /* @__PURE__ */ new Map();
    this.rootIdsByTypename = /* @__PURE__ */ Object.create(null);
    this.rootTypenamesById = /* @__PURE__ */ Object.create(null);
    this.usingPossibleTypes = false;
    this.config = __assign({ dataIdFromObject: defaultDataIdFromObject }, config);
    this.cache = this.config.cache;
    this.setRootTypename("Query");
    this.setRootTypename("Mutation");
    this.setRootTypename("Subscription");
    if (config.possibleTypes) {
      this.addPossibleTypes(config.possibleTypes);
    }
    if (config.typePolicies) {
      this.addTypePolicies(config.typePolicies);
    }
  }
  Policies2.prototype.identify = function(object, partialContext) {
    var _a2;
    var policies = this;
    var typename = partialContext && (partialContext.typename || ((_a2 = partialContext.storeObject) === null || _a2 === void 0 ? void 0 : _a2.__typename)) || object.__typename;
    if (typename === this.rootTypenamesById.ROOT_QUERY) {
      return ["ROOT_QUERY"];
    }
    var storeObject = partialContext && partialContext.storeObject || object;
    var context = __assign(__assign({}, partialContext), { typename, storeObject, readField: partialContext && partialContext.readField || function() {
      var options2 = normalizeReadFieldOptions(arguments, storeObject);
      return policies.readField(options2, {
        store: policies.cache["data"],
        variables: options2.variables
      });
    } });
    var id;
    var policy = typename && this.getTypePolicy(typename);
    var keyFn = policy && policy.keyFn || this.config.dataIdFromObject;
    while (keyFn) {
      var specifierOrId = keyFn(object, context);
      if (isArray(specifierOrId)) {
        keyFn = keyFieldsFnFromSpecifier(specifierOrId);
      } else {
        id = specifierOrId;
        break;
      }
    }
    id = id ? String(id) : void 0;
    return context.keyObject ? [id, context.keyObject] : [id];
  };
  Policies2.prototype.addTypePolicies = function(typePolicies) {
    var _this = this;
    Object.keys(typePolicies).forEach(function(typename) {
      var _a2 = typePolicies[typename], queryType = _a2.queryType, mutationType = _a2.mutationType, subscriptionType = _a2.subscriptionType, incoming = __rest(_a2, ["queryType", "mutationType", "subscriptionType"]);
      if (queryType)
        _this.setRootTypename("Query", typename);
      if (mutationType)
        _this.setRootTypename("Mutation", typename);
      if (subscriptionType)
        _this.setRootTypename("Subscription", typename);
      if (hasOwn.call(_this.toBeAdded, typename)) {
        _this.toBeAdded[typename].push(incoming);
      } else {
        _this.toBeAdded[typename] = [incoming];
      }
    });
  };
  Policies2.prototype.updateTypePolicy = function(typename, incoming) {
    var _this = this;
    var existing = this.getTypePolicy(typename);
    var keyFields = incoming.keyFields, fields = incoming.fields;
    function setMerge(existing2, merge) {
      existing2.merge = typeof merge === "function" ? merge : merge === true ? mergeTrueFn : merge === false ? mergeFalseFn : existing2.merge;
    }
    setMerge(existing, incoming.merge);
    existing.keyFn = keyFields === false ? nullKeyFieldsFn : isArray(keyFields) ? keyFieldsFnFromSpecifier(keyFields) : typeof keyFields === "function" ? keyFields : existing.keyFn;
    if (fields) {
      Object.keys(fields).forEach(function(fieldName) {
        var existing2 = _this.getFieldPolicy(typename, fieldName, true);
        var incoming2 = fields[fieldName];
        if (typeof incoming2 === "function") {
          existing2.read = incoming2;
        } else {
          var keyArgs = incoming2.keyArgs, read = incoming2.read, merge = incoming2.merge;
          existing2.keyFn = keyArgs === false ? simpleKeyArgsFn : isArray(keyArgs) ? keyArgsFnFromSpecifier(keyArgs) : typeof keyArgs === "function" ? keyArgs : existing2.keyFn;
          if (typeof read === "function") {
            existing2.read = read;
          }
          setMerge(existing2, merge);
        }
        if (existing2.read && existing2.merge) {
          existing2.keyFn = existing2.keyFn || simpleKeyArgsFn;
        }
      });
    }
  };
  Policies2.prototype.setRootTypename = function(which, typename) {
    if (typename === void 0) {
      typename = which;
    }
    var rootId = "ROOT_" + which.toUpperCase();
    var old = this.rootTypenamesById[rootId];
    if (typename !== old) {
      __DEV__ ? invariant$1(!old || old === which, "Cannot change root ".concat(which, " __typename more than once")) : invariant$1(!old || old === which, 3);
      if (old)
        delete this.rootIdsByTypename[old];
      this.rootIdsByTypename[typename] = rootId;
      this.rootTypenamesById[rootId] = typename;
    }
  };
  Policies2.prototype.addPossibleTypes = function(possibleTypes) {
    var _this = this;
    this.usingPossibleTypes = true;
    Object.keys(possibleTypes).forEach(function(supertype) {
      _this.getSupertypeSet(supertype, true);
      possibleTypes[supertype].forEach(function(subtype) {
        _this.getSupertypeSet(subtype, true).add(supertype);
        var match = subtype.match(TypeOrFieldNameRegExp);
        if (!match || match[0] !== subtype) {
          _this.fuzzySubtypes.set(subtype, new RegExp(subtype));
        }
      });
    });
  };
  Policies2.prototype.getTypePolicy = function(typename) {
    var _this = this;
    if (!hasOwn.call(this.typePolicies, typename)) {
      var policy_1 = this.typePolicies[typename] = /* @__PURE__ */ Object.create(null);
      policy_1.fields = /* @__PURE__ */ Object.create(null);
      var supertypes = this.supertypeMap.get(typename);
      if (supertypes && supertypes.size) {
        supertypes.forEach(function(supertype) {
          var _a2 = _this.getTypePolicy(supertype), fields = _a2.fields, rest = __rest(_a2, ["fields"]);
          Object.assign(policy_1, rest);
          Object.assign(policy_1.fields, fields);
        });
      }
    }
    var inbox = this.toBeAdded[typename];
    if (inbox && inbox.length) {
      inbox.splice(0).forEach(function(policy) {
        _this.updateTypePolicy(typename, policy);
      });
    }
    return this.typePolicies[typename];
  };
  Policies2.prototype.getFieldPolicy = function(typename, fieldName, createIfMissing) {
    if (typename) {
      var fieldPolicies = this.getTypePolicy(typename).fields;
      return fieldPolicies[fieldName] || createIfMissing && (fieldPolicies[fieldName] = /* @__PURE__ */ Object.create(null));
    }
  };
  Policies2.prototype.getSupertypeSet = function(subtype, createIfMissing) {
    var supertypeSet = this.supertypeMap.get(subtype);
    if (!supertypeSet && createIfMissing) {
      this.supertypeMap.set(subtype, supertypeSet = /* @__PURE__ */ new Set());
    }
    return supertypeSet;
  };
  Policies2.prototype.fragmentMatches = function(fragment, typename, result, variables) {
    var _this = this;
    if (!fragment.typeCondition)
      return true;
    if (!typename)
      return false;
    var supertype = fragment.typeCondition.name.value;
    if (typename === supertype)
      return true;
    if (this.usingPossibleTypes && this.supertypeMap.has(supertype)) {
      var typenameSupertypeSet = this.getSupertypeSet(typename, true);
      var workQueue_1 = [typenameSupertypeSet];
      var maybeEnqueue_1 = function(subtype) {
        var supertypeSet2 = _this.getSupertypeSet(subtype, false);
        if (supertypeSet2 && supertypeSet2.size && workQueue_1.indexOf(supertypeSet2) < 0) {
          workQueue_1.push(supertypeSet2);
        }
      };
      var needToCheckFuzzySubtypes = !!(result && this.fuzzySubtypes.size);
      var checkingFuzzySubtypes = false;
      for (var i = 0; i < workQueue_1.length; ++i) {
        var supertypeSet = workQueue_1[i];
        if (supertypeSet.has(supertype)) {
          if (!typenameSupertypeSet.has(supertype)) {
            if (checkingFuzzySubtypes) {
              __DEV__ && invariant$1.warn("Inferring subtype ".concat(typename, " of supertype ").concat(supertype));
            }
            typenameSupertypeSet.add(supertype);
          }
          return true;
        }
        supertypeSet.forEach(maybeEnqueue_1);
        if (needToCheckFuzzySubtypes && i === workQueue_1.length - 1 && selectionSetMatchesResult(fragment.selectionSet, result, variables)) {
          needToCheckFuzzySubtypes = false;
          checkingFuzzySubtypes = true;
          this.fuzzySubtypes.forEach(function(regExp, fuzzyString) {
            var match = typename.match(regExp);
            if (match && match[0] === typename) {
              maybeEnqueue_1(fuzzyString);
            }
          });
        }
      }
    }
    return false;
  };
  Policies2.prototype.hasKeyArgs = function(typename, fieldName) {
    var policy = this.getFieldPolicy(typename, fieldName, false);
    return !!(policy && policy.keyFn);
  };
  Policies2.prototype.getStoreFieldName = function(fieldSpec) {
    var typename = fieldSpec.typename, fieldName = fieldSpec.fieldName;
    var policy = this.getFieldPolicy(typename, fieldName, false);
    var storeFieldName;
    var keyFn = policy && policy.keyFn;
    if (keyFn && typename) {
      var context = {
        typename,
        fieldName,
        field: fieldSpec.field || null,
        variables: fieldSpec.variables
      };
      var args = argsFromFieldSpecifier(fieldSpec);
      while (keyFn) {
        var specifierOrString = keyFn(args, context);
        if (isArray(specifierOrString)) {
          keyFn = keyArgsFnFromSpecifier(specifierOrString);
        } else {
          storeFieldName = specifierOrString || fieldName;
          break;
        }
      }
    }
    if (storeFieldName === void 0) {
      storeFieldName = fieldSpec.field ? storeKeyNameFromField(fieldSpec.field, fieldSpec.variables) : getStoreKeyName(fieldName, argsFromFieldSpecifier(fieldSpec));
    }
    if (storeFieldName === false) {
      return fieldName;
    }
    return fieldName === fieldNameFromStoreName(storeFieldName) ? storeFieldName : fieldName + ":" + storeFieldName;
  };
  Policies2.prototype.readField = function(options2, context) {
    var objectOrReference = options2.from;
    if (!objectOrReference)
      return;
    var nameOrField = options2.field || options2.fieldName;
    if (!nameOrField)
      return;
    if (options2.typename === void 0) {
      var typename = context.store.getFieldValue(objectOrReference, "__typename");
      if (typename)
        options2.typename = typename;
    }
    var storeFieldName = this.getStoreFieldName(options2);
    var fieldName = fieldNameFromStoreName(storeFieldName);
    var existing = context.store.getFieldValue(objectOrReference, storeFieldName);
    var policy = this.getFieldPolicy(options2.typename, fieldName, false);
    var read = policy && policy.read;
    if (read) {
      var readOptions = makeFieldFunctionOptions(this, objectOrReference, options2, context, context.store.getStorage(isReference(objectOrReference) ? objectOrReference.__ref : objectOrReference, storeFieldName));
      return cacheSlot.withValue(this.cache, read, [existing, readOptions]);
    }
    return existing;
  };
  Policies2.prototype.getReadFunction = function(typename, fieldName) {
    var policy = this.getFieldPolicy(typename, fieldName, false);
    return policy && policy.read;
  };
  Policies2.prototype.getMergeFunction = function(parentTypename, fieldName, childTypename) {
    var policy = this.getFieldPolicy(parentTypename, fieldName, false);
    var merge = policy && policy.merge;
    if (!merge && childTypename) {
      policy = this.getTypePolicy(childTypename);
      merge = policy && policy.merge;
    }
    return merge;
  };
  Policies2.prototype.runMergeFunction = function(existing, incoming, _a2, context, storage) {
    var field = _a2.field, typename = _a2.typename, merge = _a2.merge;
    if (merge === mergeTrueFn) {
      return makeMergeObjectsFunction(context.store)(existing, incoming);
    }
    if (merge === mergeFalseFn) {
      return incoming;
    }
    if (context.overwrite) {
      existing = void 0;
    }
    return merge(existing, incoming, makeFieldFunctionOptions(this, void 0, { typename, fieldName: field.name.value, field, variables: context.variables }, context, storage || /* @__PURE__ */ Object.create(null)));
  };
  return Policies2;
}();
function makeFieldFunctionOptions(policies, objectOrReference, fieldSpec, context, storage) {
  var storeFieldName = policies.getStoreFieldName(fieldSpec);
  var fieldName = fieldNameFromStoreName(storeFieldName);
  var variables = fieldSpec.variables || context.variables;
  var _a2 = context.store, toReference = _a2.toReference, canRead = _a2.canRead;
  return {
    args: argsFromFieldSpecifier(fieldSpec),
    field: fieldSpec.field || null,
    fieldName,
    storeFieldName,
    variables,
    isReference,
    toReference,
    storage,
    cache: policies.cache,
    canRead,
    readField: function() {
      return policies.readField(normalizeReadFieldOptions(arguments, objectOrReference, variables), context);
    },
    mergeObjects: makeMergeObjectsFunction(context.store)
  };
}
function normalizeReadFieldOptions(readFieldArgs, objectOrReference, variables) {
  var fieldNameOrOptions = readFieldArgs[0], from = readFieldArgs[1], argc = readFieldArgs.length;
  var options2;
  if (typeof fieldNameOrOptions === "string") {
    options2 = {
      fieldName: fieldNameOrOptions,
      from: argc > 1 ? from : objectOrReference
    };
  } else {
    options2 = __assign({}, fieldNameOrOptions);
    if (!hasOwn.call(options2, "from")) {
      options2.from = objectOrReference;
    }
  }
  if (__DEV__ && options2.from === void 0) {
    __DEV__ && invariant$1.warn("Undefined 'from' passed to readField with arguments ".concat(stringifyForDisplay(Array.from(readFieldArgs))));
  }
  if (void 0 === options2.variables) {
    options2.variables = variables;
  }
  return options2;
}
function makeMergeObjectsFunction(store) {
  return function mergeObjects(existing, incoming) {
    if (isArray(existing) || isArray(incoming)) {
      throw __DEV__ ? new InvariantError("Cannot automatically merge arrays") : new InvariantError(4);
    }
    if (isNonNullObject(existing) && isNonNullObject(incoming)) {
      var eType = store.getFieldValue(existing, "__typename");
      var iType = store.getFieldValue(incoming, "__typename");
      var typesDiffer = eType && iType && eType !== iType;
      if (typesDiffer) {
        return incoming;
      }
      if (isReference(existing) && storeValueIsStoreObject(incoming)) {
        store.merge(existing.__ref, incoming);
        return existing;
      }
      if (storeValueIsStoreObject(existing) && isReference(incoming)) {
        store.merge(existing, incoming.__ref);
        return incoming;
      }
      if (storeValueIsStoreObject(existing) && storeValueIsStoreObject(incoming)) {
        return __assign(__assign({}, existing), incoming);
      }
    }
    return incoming;
  };
}
function getContextFlavor(context, clientOnly, deferred) {
  var key = "".concat(clientOnly).concat(deferred);
  var flavored = context.flavors.get(key);
  if (!flavored) {
    context.flavors.set(key, flavored = context.clientOnly === clientOnly && context.deferred === deferred ? context : __assign(__assign({}, context), { clientOnly, deferred }));
  }
  return flavored;
}
var StoreWriter = function() {
  function StoreWriter2(cache, reader, fragments) {
    this.cache = cache;
    this.reader = reader;
    this.fragments = fragments;
  }
  StoreWriter2.prototype.writeToStore = function(store, _a2) {
    var _this = this;
    var query = _a2.query, result = _a2.result, dataId = _a2.dataId, variables = _a2.variables, overwrite = _a2.overwrite;
    var operationDefinition = getOperationDefinition(query);
    var merger = makeProcessedFieldsMerger();
    variables = __assign(__assign({}, getDefaultValues(operationDefinition)), variables);
    var context = __assign(__assign({ store, written: /* @__PURE__ */ Object.create(null), merge: function(existing, incoming) {
      return merger.merge(existing, incoming);
    }, variables, varString: canonicalStringify(variables) }, extractFragmentContext(query, this.fragments)), { overwrite: !!overwrite, incomingById: /* @__PURE__ */ new Map(), clientOnly: false, deferred: false, flavors: /* @__PURE__ */ new Map() });
    var ref2 = this.processSelectionSet({
      result: result || /* @__PURE__ */ Object.create(null),
      dataId,
      selectionSet: operationDefinition.selectionSet,
      mergeTree: { map: /* @__PURE__ */ new Map() },
      context
    });
    if (!isReference(ref2)) {
      throw __DEV__ ? new InvariantError("Could not identify object ".concat(JSON.stringify(result))) : new InvariantError(7);
    }
    context.incomingById.forEach(function(_a3, dataId2) {
      var storeObject = _a3.storeObject, mergeTree = _a3.mergeTree, fieldNodeSet = _a3.fieldNodeSet;
      var entityRef = makeReference(dataId2);
      if (mergeTree && mergeTree.map.size) {
        var applied = _this.applyMerges(mergeTree, entityRef, storeObject, context);
        if (isReference(applied)) {
          return;
        }
        storeObject = applied;
      }
      if (__DEV__ && !context.overwrite) {
        var fieldsWithSelectionSets_1 = /* @__PURE__ */ Object.create(null);
        fieldNodeSet.forEach(function(field) {
          if (field.selectionSet) {
            fieldsWithSelectionSets_1[field.name.value] = true;
          }
        });
        var hasSelectionSet_1 = function(storeFieldName) {
          return fieldsWithSelectionSets_1[fieldNameFromStoreName(storeFieldName)] === true;
        };
        var hasMergeFunction_1 = function(storeFieldName) {
          var childTree = mergeTree && mergeTree.map.get(storeFieldName);
          return Boolean(childTree && childTree.info && childTree.info.merge);
        };
        Object.keys(storeObject).forEach(function(storeFieldName) {
          if (hasSelectionSet_1(storeFieldName) && !hasMergeFunction_1(storeFieldName)) {
            warnAboutDataLoss(entityRef, storeObject, storeFieldName, context.store);
          }
        });
      }
      store.merge(dataId2, storeObject);
    });
    store.retain(ref2.__ref);
    return ref2;
  };
  StoreWriter2.prototype.processSelectionSet = function(_a2) {
    var _this = this;
    var dataId = _a2.dataId, result = _a2.result, selectionSet = _a2.selectionSet, context = _a2.context, mergeTree = _a2.mergeTree;
    var policies = this.cache.policies;
    var incoming = /* @__PURE__ */ Object.create(null);
    var typename = dataId && policies.rootTypenamesById[dataId] || getTypenameFromResult(result, selectionSet, context.fragmentMap) || dataId && context.store.get(dataId, "__typename");
    if ("string" === typeof typename) {
      incoming.__typename = typename;
    }
    var readField = function() {
      var options2 = normalizeReadFieldOptions(arguments, incoming, context.variables);
      if (isReference(options2.from)) {
        var info = context.incomingById.get(options2.from.__ref);
        if (info) {
          var result_1 = policies.readField(__assign(__assign({}, options2), { from: info.storeObject }), context);
          if (result_1 !== void 0) {
            return result_1;
          }
        }
      }
      return policies.readField(options2, context);
    };
    var fieldNodeSet = /* @__PURE__ */ new Set();
    this.flattenFields(selectionSet, result, context, typename).forEach(function(context2, field) {
      var _a3;
      var resultFieldKey = resultKeyNameFromField(field);
      var value = result[resultFieldKey];
      fieldNodeSet.add(field);
      if (value !== void 0) {
        var storeFieldName = policies.getStoreFieldName({
          typename,
          fieldName: field.name.value,
          field,
          variables: context2.variables
        });
        var childTree = getChildMergeTree(mergeTree, storeFieldName);
        var incomingValue = _this.processFieldValue(value, field, field.selectionSet ? getContextFlavor(context2, false, false) : context2, childTree);
        var childTypename = void 0;
        if (field.selectionSet && (isReference(incomingValue) || storeValueIsStoreObject(incomingValue))) {
          childTypename = readField("__typename", incomingValue);
        }
        var merge = policies.getMergeFunction(typename, field.name.value, childTypename);
        if (merge) {
          childTree.info = {
            field,
            typename,
            merge
          };
        } else {
          maybeRecycleChildMergeTree(mergeTree, storeFieldName);
        }
        incoming = context2.merge(incoming, (_a3 = {}, _a3[storeFieldName] = incomingValue, _a3));
      } else if (__DEV__ && !context2.clientOnly && !context2.deferred && !addTypenameToDocument.added(field) && !policies.getReadFunction(typename, field.name.value)) {
        __DEV__ && invariant$1.error("Missing field '".concat(resultKeyNameFromField(field), "' while writing result ").concat(JSON.stringify(result, null, 2)).substring(0, 1e3));
      }
    });
    try {
      var _b = policies.identify(result, {
        typename,
        selectionSet,
        fragmentMap: context.fragmentMap,
        storeObject: incoming,
        readField
      }), id = _b[0], keyObject = _b[1];
      dataId = dataId || id;
      if (keyObject) {
        incoming = context.merge(incoming, keyObject);
      }
    } catch (e) {
      if (!dataId)
        throw e;
    }
    if ("string" === typeof dataId) {
      var dataRef = makeReference(dataId);
      var sets = context.written[dataId] || (context.written[dataId] = []);
      if (sets.indexOf(selectionSet) >= 0)
        return dataRef;
      sets.push(selectionSet);
      if (this.reader && this.reader.isFresh(result, dataRef, selectionSet, context)) {
        return dataRef;
      }
      var previous_1 = context.incomingById.get(dataId);
      if (previous_1) {
        previous_1.storeObject = context.merge(previous_1.storeObject, incoming);
        previous_1.mergeTree = mergeMergeTrees(previous_1.mergeTree, mergeTree);
        fieldNodeSet.forEach(function(field) {
          return previous_1.fieldNodeSet.add(field);
        });
      } else {
        context.incomingById.set(dataId, {
          storeObject: incoming,
          mergeTree: mergeTreeIsEmpty(mergeTree) ? void 0 : mergeTree,
          fieldNodeSet
        });
      }
      return dataRef;
    }
    return incoming;
  };
  StoreWriter2.prototype.processFieldValue = function(value, field, context, mergeTree) {
    var _this = this;
    if (!field.selectionSet || value === null) {
      return __DEV__ ? cloneDeep(value) : value;
    }
    if (isArray(value)) {
      return value.map(function(item, i) {
        var value2 = _this.processFieldValue(item, field, context, getChildMergeTree(mergeTree, i));
        maybeRecycleChildMergeTree(mergeTree, i);
        return value2;
      });
    }
    return this.processSelectionSet({
      result: value,
      selectionSet: field.selectionSet,
      context,
      mergeTree
    });
  };
  StoreWriter2.prototype.flattenFields = function(selectionSet, result, context, typename) {
    if (typename === void 0) {
      typename = getTypenameFromResult(result, selectionSet, context.fragmentMap);
    }
    var fieldMap = /* @__PURE__ */ new Map();
    var policies = this.cache.policies;
    var limitingTrie = new Trie(false);
    (function flatten(selectionSet2, inheritedContext) {
      var visitedNode = limitingTrie.lookup(selectionSet2, inheritedContext.clientOnly, inheritedContext.deferred);
      if (visitedNode.visited)
        return;
      visitedNode.visited = true;
      selectionSet2.selections.forEach(function(selection) {
        if (!shouldInclude(selection, context.variables))
          return;
        var clientOnly = inheritedContext.clientOnly, deferred = inheritedContext.deferred;
        if (!(clientOnly && deferred) && isNonEmptyArray(selection.directives)) {
          selection.directives.forEach(function(dir) {
            var name = dir.name.value;
            if (name === "client")
              clientOnly = true;
            if (name === "defer") {
              var args = argumentsObjectFromField(dir, context.variables);
              if (!args || args.if !== false) {
                deferred = true;
              }
            }
          });
        }
        if (isField(selection)) {
          var existing = fieldMap.get(selection);
          if (existing) {
            clientOnly = clientOnly && existing.clientOnly;
            deferred = deferred && existing.deferred;
          }
          fieldMap.set(selection, getContextFlavor(context, clientOnly, deferred));
        } else {
          var fragment = getFragmentFromSelection(selection, context.lookupFragment);
          if (!fragment && selection.kind === Kind.FRAGMENT_SPREAD) {
            throw __DEV__ ? new InvariantError("No fragment named ".concat(selection.name.value)) : new InvariantError(8);
          }
          if (fragment && policies.fragmentMatches(fragment, typename, result, context.variables)) {
            flatten(fragment.selectionSet, getContextFlavor(context, clientOnly, deferred));
          }
        }
      });
    })(selectionSet, context);
    return fieldMap;
  };
  StoreWriter2.prototype.applyMerges = function(mergeTree, existing, incoming, context, getStorageArgs) {
    var _a2;
    var _this = this;
    if (mergeTree.map.size && !isReference(incoming)) {
      var e_1 = !isArray(incoming) && (isReference(existing) || storeValueIsStoreObject(existing)) ? existing : void 0;
      var i_1 = incoming;
      if (e_1 && !getStorageArgs) {
        getStorageArgs = [isReference(e_1) ? e_1.__ref : e_1];
      }
      var changedFields_1;
      var getValue_1 = function(from, name) {
        return isArray(from) ? typeof name === "number" ? from[name] : void 0 : context.store.getFieldValue(from, String(name));
      };
      mergeTree.map.forEach(function(childTree, storeFieldName) {
        var eVal = getValue_1(e_1, storeFieldName);
        var iVal = getValue_1(i_1, storeFieldName);
        if (void 0 === iVal)
          return;
        if (getStorageArgs) {
          getStorageArgs.push(storeFieldName);
        }
        var aVal = _this.applyMerges(childTree, eVal, iVal, context, getStorageArgs);
        if (aVal !== iVal) {
          changedFields_1 = changedFields_1 || /* @__PURE__ */ new Map();
          changedFields_1.set(storeFieldName, aVal);
        }
        if (getStorageArgs) {
          invariant$1(getStorageArgs.pop() === storeFieldName);
        }
      });
      if (changedFields_1) {
        incoming = isArray(i_1) ? i_1.slice(0) : __assign({}, i_1);
        changedFields_1.forEach(function(value, name) {
          incoming[name] = value;
        });
      }
    }
    if (mergeTree.info) {
      return this.cache.policies.runMergeFunction(existing, incoming, mergeTree.info, context, getStorageArgs && (_a2 = context.store).getStorage.apply(_a2, getStorageArgs));
    }
    return incoming;
  };
  return StoreWriter2;
}();
var emptyMergeTreePool = [];
function getChildMergeTree(_a2, name) {
  var map = _a2.map;
  if (!map.has(name)) {
    map.set(name, emptyMergeTreePool.pop() || { map: /* @__PURE__ */ new Map() });
  }
  return map.get(name);
}
function mergeMergeTrees(left, right) {
  if (left === right || !right || mergeTreeIsEmpty(right))
    return left;
  if (!left || mergeTreeIsEmpty(left))
    return right;
  var info = left.info && right.info ? __assign(__assign({}, left.info), right.info) : left.info || right.info;
  var needToMergeMaps = left.map.size && right.map.size;
  var map = needToMergeMaps ? /* @__PURE__ */ new Map() : left.map.size ? left.map : right.map;
  var merged = { info, map };
  if (needToMergeMaps) {
    var remainingRightKeys_1 = new Set(right.map.keys());
    left.map.forEach(function(leftTree, key) {
      merged.map.set(key, mergeMergeTrees(leftTree, right.map.get(key)));
      remainingRightKeys_1.delete(key);
    });
    remainingRightKeys_1.forEach(function(key) {
      merged.map.set(key, mergeMergeTrees(right.map.get(key), left.map.get(key)));
    });
  }
  return merged;
}
function mergeTreeIsEmpty(tree) {
  return !tree || !(tree.info || tree.map.size);
}
function maybeRecycleChildMergeTree(_a2, name) {
  var map = _a2.map;
  var childTree = map.get(name);
  if (childTree && mergeTreeIsEmpty(childTree)) {
    emptyMergeTreePool.push(childTree);
    map.delete(name);
  }
}
var warnings = /* @__PURE__ */ new Set();
function warnAboutDataLoss(existingRef, incomingObj, storeFieldName, store) {
  var getChild = function(objOrRef) {
    var child = store.getFieldValue(objOrRef, storeFieldName);
    return typeof child === "object" && child;
  };
  var existing = getChild(existingRef);
  if (!existing)
    return;
  var incoming = getChild(incomingObj);
  if (!incoming)
    return;
  if (isReference(existing))
    return;
  if (equal(existing, incoming))
    return;
  if (Object.keys(existing).every(function(key) {
    return store.getFieldValue(incoming, key) !== void 0;
  })) {
    return;
  }
  var parentType = store.getFieldValue(existingRef, "__typename") || store.getFieldValue(incomingObj, "__typename");
  var fieldName = fieldNameFromStoreName(storeFieldName);
  var typeDotName = "".concat(parentType, ".").concat(fieldName);
  if (warnings.has(typeDotName))
    return;
  warnings.add(typeDotName);
  var childTypenames = [];
  if (!isArray(existing) && !isArray(incoming)) {
    [existing, incoming].forEach(function(child) {
      var typename = store.getFieldValue(child, "__typename");
      if (typeof typename === "string" && !childTypenames.includes(typename)) {
        childTypenames.push(typename);
      }
    });
  }
  __DEV__ && invariant$1.warn("Cache data may be lost when replacing the ".concat(fieldName, " field of a ").concat(parentType, " object.\n\nTo address this problem (which is not a bug in Apollo Client), ").concat(childTypenames.length ? "either ensure all objects of type " + childTypenames.join(" and ") + " have an ID or a custom merge function, or " : "", "define a custom merge function for the ").concat(typeDotName, " field, so InMemoryCache can safely merge these objects:\n\n  existing: ").concat(JSON.stringify(existing).slice(0, 1e3), "\n  incoming: ").concat(JSON.stringify(incoming).slice(0, 1e3), "\n\nFor more information about these options, please refer to the documentation:\n\n  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers\n  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects\n"));
}
var InMemoryCache = function(_super) {
  __extends(InMemoryCache2, _super);
  function InMemoryCache2(config) {
    if (config === void 0) {
      config = {};
    }
    var _this = _super.call(this) || this;
    _this.watches = /* @__PURE__ */ new Set();
    _this.typenameDocumentCache = /* @__PURE__ */ new Map();
    _this.makeVar = makeVar;
    _this.txCount = 0;
    _this.config = normalizeConfig(config);
    _this.addTypename = !!_this.config.addTypename;
    _this.policies = new Policies({
      cache: _this,
      dataIdFromObject: _this.config.dataIdFromObject,
      possibleTypes: _this.config.possibleTypes,
      typePolicies: _this.config.typePolicies
    });
    _this.init();
    return _this;
  }
  InMemoryCache2.prototype.init = function() {
    var rootStore = this.data = new EntityStore.Root({
      policies: this.policies,
      resultCaching: this.config.resultCaching
    });
    this.optimisticData = rootStore.stump;
    this.resetResultCache();
  };
  InMemoryCache2.prototype.resetResultCache = function(resetResultIdentities) {
    var _this = this;
    var previousReader = this.storeReader;
    var fragments = this.config.fragments;
    this.storeWriter = new StoreWriter(this, this.storeReader = new StoreReader({
      cache: this,
      addTypename: this.addTypename,
      resultCacheMaxSize: this.config.resultCacheMaxSize,
      canonizeResults: shouldCanonizeResults(this.config),
      canon: resetResultIdentities ? void 0 : previousReader && previousReader.canon,
      fragments
    }), fragments);
    this.maybeBroadcastWatch = wrap(function(c, options2) {
      return _this.broadcastWatch(c, options2);
    }, {
      max: this.config.resultCacheMaxSize,
      makeCacheKey: function(c) {
        var store = c.optimistic ? _this.optimisticData : _this.data;
        if (supportsResultCaching(store)) {
          var optimistic = c.optimistic, id = c.id, variables = c.variables;
          return store.makeCacheKey(c.query, c.callback, canonicalStringify({ optimistic, id, variables }));
        }
      }
    });
    (/* @__PURE__ */ new Set([
      this.data.group,
      this.optimisticData.group
    ])).forEach(function(group) {
      return group.resetCaching();
    });
  };
  InMemoryCache2.prototype.restore = function(data) {
    this.init();
    if (data)
      this.data.replace(data);
    return this;
  };
  InMemoryCache2.prototype.extract = function(optimistic) {
    if (optimistic === void 0) {
      optimistic = false;
    }
    return (optimistic ? this.optimisticData : this.data).extract();
  };
  InMemoryCache2.prototype.read = function(options2) {
    var _a2 = options2.returnPartialData, returnPartialData = _a2 === void 0 ? false : _a2;
    try {
      return this.storeReader.diffQueryAgainstStore(__assign(__assign({}, options2), { store: options2.optimistic ? this.optimisticData : this.data, config: this.config, returnPartialData })).result || null;
    } catch (e) {
      if (e instanceof MissingFieldError) {
        return null;
      }
      throw e;
    }
  };
  InMemoryCache2.prototype.write = function(options2) {
    try {
      ++this.txCount;
      return this.storeWriter.writeToStore(this.data, options2);
    } finally {
      if (!--this.txCount && options2.broadcast !== false) {
        this.broadcastWatches();
      }
    }
  };
  InMemoryCache2.prototype.modify = function(options2) {
    if (hasOwn.call(options2, "id") && !options2.id) {
      return false;
    }
    var store = options2.optimistic ? this.optimisticData : this.data;
    try {
      ++this.txCount;
      return store.modify(options2.id || "ROOT_QUERY", options2.fields);
    } finally {
      if (!--this.txCount && options2.broadcast !== false) {
        this.broadcastWatches();
      }
    }
  };
  InMemoryCache2.prototype.diff = function(options2) {
    return this.storeReader.diffQueryAgainstStore(__assign(__assign({}, options2), { store: options2.optimistic ? this.optimisticData : this.data, rootId: options2.id || "ROOT_QUERY", config: this.config }));
  };
  InMemoryCache2.prototype.watch = function(watch2) {
    var _this = this;
    if (!this.watches.size) {
      recallCache(this);
    }
    this.watches.add(watch2);
    if (watch2.immediate) {
      this.maybeBroadcastWatch(watch2);
    }
    return function() {
      if (_this.watches.delete(watch2) && !_this.watches.size) {
        forgetCache(_this);
      }
      _this.maybeBroadcastWatch.forget(watch2);
    };
  };
  InMemoryCache2.prototype.gc = function(options2) {
    canonicalStringify.reset();
    var ids = this.optimisticData.gc();
    if (options2 && !this.txCount) {
      if (options2.resetResultCache) {
        this.resetResultCache(options2.resetResultIdentities);
      } else if (options2.resetResultIdentities) {
        this.storeReader.resetCanon();
      }
    }
    return ids;
  };
  InMemoryCache2.prototype.retain = function(rootId, optimistic) {
    return (optimistic ? this.optimisticData : this.data).retain(rootId);
  };
  InMemoryCache2.prototype.release = function(rootId, optimistic) {
    return (optimistic ? this.optimisticData : this.data).release(rootId);
  };
  InMemoryCache2.prototype.identify = function(object) {
    if (isReference(object))
      return object.__ref;
    try {
      return this.policies.identify(object)[0];
    } catch (e) {
      __DEV__ && invariant$1.warn(e);
    }
  };
  InMemoryCache2.prototype.evict = function(options2) {
    if (!options2.id) {
      if (hasOwn.call(options2, "id")) {
        return false;
      }
      options2 = __assign(__assign({}, options2), { id: "ROOT_QUERY" });
    }
    try {
      ++this.txCount;
      return this.optimisticData.evict(options2, this.data);
    } finally {
      if (!--this.txCount && options2.broadcast !== false) {
        this.broadcastWatches();
      }
    }
  };
  InMemoryCache2.prototype.reset = function(options2) {
    var _this = this;
    this.init();
    canonicalStringify.reset();
    if (options2 && options2.discardWatches) {
      this.watches.forEach(function(watch2) {
        return _this.maybeBroadcastWatch.forget(watch2);
      });
      this.watches.clear();
      forgetCache(this);
    } else {
      this.broadcastWatches();
    }
    return Promise.resolve();
  };
  InMemoryCache2.prototype.removeOptimistic = function(idToRemove) {
    var newOptimisticData = this.optimisticData.removeLayer(idToRemove);
    if (newOptimisticData !== this.optimisticData) {
      this.optimisticData = newOptimisticData;
      this.broadcastWatches();
    }
  };
  InMemoryCache2.prototype.batch = function(options2) {
    var _this = this;
    var update = options2.update, _a2 = options2.optimistic, optimistic = _a2 === void 0 ? true : _a2, removeOptimistic = options2.removeOptimistic, onWatchUpdated = options2.onWatchUpdated;
    var updateResult;
    var perform = function(layer) {
      var _a3 = _this, data = _a3.data, optimisticData = _a3.optimisticData;
      ++_this.txCount;
      if (layer) {
        _this.data = _this.optimisticData = layer;
      }
      try {
        return updateResult = update(_this);
      } finally {
        --_this.txCount;
        _this.data = data;
        _this.optimisticData = optimisticData;
      }
    };
    var alreadyDirty = /* @__PURE__ */ new Set();
    if (onWatchUpdated && !this.txCount) {
      this.broadcastWatches(__assign(__assign({}, options2), { onWatchUpdated: function(watch2) {
        alreadyDirty.add(watch2);
        return false;
      } }));
    }
    if (typeof optimistic === "string") {
      this.optimisticData = this.optimisticData.addLayer(optimistic, perform);
    } else if (optimistic === false) {
      perform(this.data);
    } else {
      perform();
    }
    if (typeof removeOptimistic === "string") {
      this.optimisticData = this.optimisticData.removeLayer(removeOptimistic);
    }
    if (onWatchUpdated && alreadyDirty.size) {
      this.broadcastWatches(__assign(__assign({}, options2), { onWatchUpdated: function(watch2, diff) {
        var result = onWatchUpdated.call(this, watch2, diff);
        if (result !== false) {
          alreadyDirty.delete(watch2);
        }
        return result;
      } }));
      if (alreadyDirty.size) {
        alreadyDirty.forEach(function(watch2) {
          return _this.maybeBroadcastWatch.dirty(watch2);
        });
      }
    } else {
      this.broadcastWatches(options2);
    }
    return updateResult;
  };
  InMemoryCache2.prototype.performTransaction = function(update, optimisticId) {
    return this.batch({
      update,
      optimistic: optimisticId || optimisticId !== null
    });
  };
  InMemoryCache2.prototype.transformDocument = function(document) {
    if (this.addTypename) {
      var result = this.typenameDocumentCache.get(document);
      if (!result) {
        result = addTypenameToDocument(document);
        this.typenameDocumentCache.set(document, result);
        this.typenameDocumentCache.set(result, result);
      }
      return result;
    }
    return document;
  };
  InMemoryCache2.prototype.transformForLink = function(document) {
    var fragments = this.config.fragments;
    return fragments ? fragments.transform(document) : document;
  };
  InMemoryCache2.prototype.broadcastWatches = function(options2) {
    var _this = this;
    if (!this.txCount) {
      this.watches.forEach(function(c) {
        return _this.maybeBroadcastWatch(c, options2);
      });
    }
  };
  InMemoryCache2.prototype.broadcastWatch = function(c, options2) {
    var lastDiff = c.lastDiff;
    var diff = this.diff(c);
    if (options2) {
      if (c.optimistic && typeof options2.optimistic === "string") {
        diff.fromOptimisticTransaction = true;
      }
      if (options2.onWatchUpdated && options2.onWatchUpdated.call(this, c, diff, lastDiff) === false) {
        return;
      }
    }
    if (!lastDiff || !equal(lastDiff.result, diff.result)) {
      c.callback(c.lastDiff = diff, lastDiff);
    }
  };
  return InMemoryCache2;
}(ApolloCache);
var NetworkStatus;
(function(NetworkStatus2) {
  NetworkStatus2[NetworkStatus2["loading"] = 1] = "loading";
  NetworkStatus2[NetworkStatus2["setVariables"] = 2] = "setVariables";
  NetworkStatus2[NetworkStatus2["fetchMore"] = 3] = "fetchMore";
  NetworkStatus2[NetworkStatus2["refetch"] = 4] = "refetch";
  NetworkStatus2[NetworkStatus2["poll"] = 6] = "poll";
  NetworkStatus2[NetworkStatus2["ready"] = 7] = "ready";
  NetworkStatus2[NetworkStatus2["error"] = 8] = "error";
})(NetworkStatus || (NetworkStatus = {}));
function isNetworkRequestInFlight(networkStatus) {
  return networkStatus ? networkStatus < 7 : false;
}
var assign = Object.assign, hasOwnProperty$1 = Object.hasOwnProperty;
var ObservableQuery = function(_super) {
  __extends(ObservableQuery2, _super);
  function ObservableQuery2(_a2) {
    var queryManager = _a2.queryManager, queryInfo = _a2.queryInfo, options2 = _a2.options;
    var _this = _super.call(this, function(observer) {
      try {
        var subObserver = observer._subscription._observer;
        if (subObserver && !subObserver.error) {
          subObserver.error = defaultSubscriptionObserverErrorCallback;
        }
      } catch (_a3) {
      }
      var first = !_this.observers.size;
      _this.observers.add(observer);
      var last = _this.last;
      if (last && last.error) {
        observer.error && observer.error(last.error);
      } else if (last && last.result) {
        observer.next && observer.next(last.result);
      }
      if (first) {
        _this.reobserve().catch(function() {
        });
      }
      return function() {
        if (_this.observers.delete(observer) && !_this.observers.size) {
          _this.tearDownQuery();
        }
      };
    }) || this;
    _this.observers = /* @__PURE__ */ new Set();
    _this.subscriptions = /* @__PURE__ */ new Set();
    _this.queryInfo = queryInfo;
    _this.queryManager = queryManager;
    _this.isTornDown = false;
    var _b = queryManager.defaultOptions.watchQuery, _c = _b === void 0 ? {} : _b, _d = _c.fetchPolicy, defaultFetchPolicy = _d === void 0 ? "cache-first" : _d;
    var _e = options2.fetchPolicy, fetchPolicy = _e === void 0 ? defaultFetchPolicy : _e, _f = options2.initialFetchPolicy, initialFetchPolicy = _f === void 0 ? fetchPolicy === "standby" ? defaultFetchPolicy : fetchPolicy : _f;
    _this.options = __assign(__assign({}, options2), { initialFetchPolicy, fetchPolicy });
    _this.queryId = queryInfo.queryId || queryManager.generateQueryId();
    var opDef = getOperationDefinition(_this.query);
    _this.queryName = opDef && opDef.name && opDef.name.value;
    return _this;
  }
  Object.defineProperty(ObservableQuery2.prototype, "query", {
    get: function() {
      return this.queryManager.transform(this.options.query).document;
    },
    enumerable: false,
    configurable: true
  });
  Object.defineProperty(ObservableQuery2.prototype, "variables", {
    get: function() {
      return this.options.variables;
    },
    enumerable: false,
    configurable: true
  });
  ObservableQuery2.prototype.result = function() {
    var _this = this;
    return new Promise(function(resolve, reject) {
      var observer = {
        next: function(result) {
          resolve(result);
          _this.observers.delete(observer);
          if (!_this.observers.size) {
            _this.queryManager.removeQuery(_this.queryId);
          }
          setTimeout(function() {
            subscription.unsubscribe();
          }, 0);
        },
        error: reject
      };
      var subscription = _this.subscribe(observer);
    });
  };
  ObservableQuery2.prototype.getCurrentResult = function(saveAsLastResult) {
    if (saveAsLastResult === void 0) {
      saveAsLastResult = true;
    }
    var lastResult = this.getLastResult(true);
    var networkStatus = this.queryInfo.networkStatus || lastResult && lastResult.networkStatus || NetworkStatus.ready;
    var result = __assign(__assign({}, lastResult), { loading: isNetworkRequestInFlight(networkStatus), networkStatus });
    var _a2 = this.options.fetchPolicy, fetchPolicy = _a2 === void 0 ? "cache-first" : _a2;
    if (fetchPolicy === "network-only" || fetchPolicy === "no-cache" || fetchPolicy === "standby" || this.queryManager.transform(this.options.query).hasForcedResolvers)
      ;
    else {
      var diff = this.queryInfo.getDiff();
      if (diff.complete || this.options.returnPartialData) {
        result.data = diff.result;
      }
      if (equal(result.data, {})) {
        result.data = void 0;
      }
      if (diff.complete) {
        delete result.partial;
        if (diff.complete && result.networkStatus === NetworkStatus.loading && (fetchPolicy === "cache-first" || fetchPolicy === "cache-only")) {
          result.networkStatus = NetworkStatus.ready;
          result.loading = false;
        }
      } else {
        result.partial = true;
      }
      if (__DEV__ && !diff.complete && !this.options.partialRefetch && !result.loading && !result.data && !result.error) {
        logMissingFieldErrors(diff.missing);
      }
    }
    if (saveAsLastResult) {
      this.updateLastResult(result);
    }
    return result;
  };
  ObservableQuery2.prototype.isDifferentFromLastResult = function(newResult, variables) {
    return !this.last || !equal(this.last.result, newResult) || variables && !equal(this.last.variables, variables);
  };
  ObservableQuery2.prototype.getLast = function(key, variablesMustMatch) {
    var last = this.last;
    if (last && last[key] && (!variablesMustMatch || equal(last.variables, this.variables))) {
      return last[key];
    }
  };
  ObservableQuery2.prototype.getLastResult = function(variablesMustMatch) {
    return this.getLast("result", variablesMustMatch);
  };
  ObservableQuery2.prototype.getLastError = function(variablesMustMatch) {
    return this.getLast("error", variablesMustMatch);
  };
  ObservableQuery2.prototype.resetLastResults = function() {
    delete this.last;
    this.isTornDown = false;
  };
  ObservableQuery2.prototype.resetQueryStoreErrors = function() {
    this.queryManager.resetErrors(this.queryId);
  };
  ObservableQuery2.prototype.refetch = function(variables) {
    var _a2;
    var reobserveOptions = {
      pollInterval: 0
    };
    var fetchPolicy = this.options.fetchPolicy;
    if (fetchPolicy === "cache-and-network") {
      reobserveOptions.fetchPolicy = fetchPolicy;
    } else if (fetchPolicy === "no-cache") {
      reobserveOptions.fetchPolicy = "no-cache";
    } else {
      reobserveOptions.fetchPolicy = "network-only";
    }
    if (__DEV__ && variables && hasOwnProperty$1.call(variables, "variables")) {
      var queryDef = getQueryDefinition(this.query);
      var vars = queryDef.variableDefinitions;
      if (!vars || !vars.some(function(v) {
        return v.variable.name.value === "variables";
      })) {
        __DEV__ && invariant$1.warn("Called refetch(".concat(JSON.stringify(variables), ") for query ").concat(((_a2 = queryDef.name) === null || _a2 === void 0 ? void 0 : _a2.value) || JSON.stringify(queryDef), ", which does not declare a $variables variable.\nDid you mean to call refetch(variables) instead of refetch({ variables })?"));
      }
    }
    if (variables && !equal(this.options.variables, variables)) {
      reobserveOptions.variables = this.options.variables = __assign(__assign({}, this.options.variables), variables);
    }
    this.queryInfo.resetLastWrite();
    return this.reobserve(reobserveOptions, NetworkStatus.refetch);
  };
  ObservableQuery2.prototype.fetchMore = function(fetchMoreOptions) {
    var _this = this;
    var combinedOptions = __assign(__assign({}, fetchMoreOptions.query ? fetchMoreOptions : __assign(__assign(__assign(__assign({}, this.options), { query: this.query }), fetchMoreOptions), { variables: __assign(__assign({}, this.options.variables), fetchMoreOptions.variables) })), { fetchPolicy: "no-cache" });
    var qid = this.queryManager.generateQueryId();
    var queryInfo = this.queryInfo;
    var originalNetworkStatus = queryInfo.networkStatus;
    queryInfo.networkStatus = NetworkStatus.fetchMore;
    if (combinedOptions.notifyOnNetworkStatusChange) {
      this.observe();
    }
    var updatedQuerySet = /* @__PURE__ */ new Set();
    return this.queryManager.fetchQuery(qid, combinedOptions, NetworkStatus.fetchMore).then(function(fetchMoreResult) {
      _this.queryManager.removeQuery(qid);
      if (queryInfo.networkStatus === NetworkStatus.fetchMore) {
        queryInfo.networkStatus = originalNetworkStatus;
      }
      _this.queryManager.cache.batch({
        update: function(cache) {
          var updateQuery = fetchMoreOptions.updateQuery;
          if (updateQuery) {
            cache.updateQuery({
              query: _this.query,
              variables: _this.variables,
              returnPartialData: true,
              optimistic: false
            }, function(previous) {
              return updateQuery(previous, {
                fetchMoreResult: fetchMoreResult.data,
                variables: combinedOptions.variables
              });
            });
          } else {
            cache.writeQuery({
              query: combinedOptions.query,
              variables: combinedOptions.variables,
              data: fetchMoreResult.data
            });
          }
        },
        onWatchUpdated: function(watch2) {
          updatedQuerySet.add(watch2.query);
        }
      });
      return fetchMoreResult;
    }).finally(function() {
      if (!updatedQuerySet.has(_this.query)) {
        reobserveCacheFirst(_this);
      }
    });
  };
  ObservableQuery2.prototype.subscribeToMore = function(options2) {
    var _this = this;
    var subscription = this.queryManager.startGraphQLSubscription({
      query: options2.document,
      variables: options2.variables,
      context: options2.context
    }).subscribe({
      next: function(subscriptionData) {
        var updateQuery = options2.updateQuery;
        if (updateQuery) {
          _this.updateQuery(function(previous, _a2) {
            var variables = _a2.variables;
            return updateQuery(previous, {
              subscriptionData,
              variables
            });
          });
        }
      },
      error: function(err) {
        if (options2.onError) {
          options2.onError(err);
          return;
        }
        __DEV__ && invariant$1.error("Unhandled GraphQL subscription error", err);
      }
    });
    this.subscriptions.add(subscription);
    return function() {
      if (_this.subscriptions.delete(subscription)) {
        subscription.unsubscribe();
      }
    };
  };
  ObservableQuery2.prototype.setOptions = function(newOptions) {
    return this.reobserve(newOptions);
  };
  ObservableQuery2.prototype.setVariables = function(variables) {
    if (equal(this.variables, variables)) {
      return this.observers.size ? this.result() : Promise.resolve();
    }
    this.options.variables = variables;
    if (!this.observers.size) {
      return Promise.resolve();
    }
    return this.reobserve({
      fetchPolicy: this.options.initialFetchPolicy,
      variables
    }, NetworkStatus.setVariables);
  };
  ObservableQuery2.prototype.updateQuery = function(mapFn) {
    var queryManager = this.queryManager;
    var result = queryManager.cache.diff({
      query: this.options.query,
      variables: this.variables,
      returnPartialData: true,
      optimistic: false
    }).result;
    var newResult = mapFn(result, {
      variables: this.variables
    });
    if (newResult) {
      queryManager.cache.writeQuery({
        query: this.options.query,
        data: newResult,
        variables: this.variables
      });
      queryManager.broadcastQueries();
    }
  };
  ObservableQuery2.prototype.startPolling = function(pollInterval) {
    this.options.pollInterval = pollInterval;
    this.updatePolling();
  };
  ObservableQuery2.prototype.stopPolling = function() {
    this.options.pollInterval = 0;
    this.updatePolling();
  };
  ObservableQuery2.prototype.applyNextFetchPolicy = function(reason, options2) {
    if (options2.nextFetchPolicy) {
      var _a2 = options2.fetchPolicy, fetchPolicy = _a2 === void 0 ? "cache-first" : _a2, _b = options2.initialFetchPolicy, initialFetchPolicy = _b === void 0 ? fetchPolicy : _b;
      if (fetchPolicy === "standby")
        ;
      else if (typeof options2.nextFetchPolicy === "function") {
        options2.fetchPolicy = options2.nextFetchPolicy(fetchPolicy, {
          reason,
          options: options2,
          observable: this,
          initialFetchPolicy
        });
      } else if (reason === "variables-changed") {
        options2.fetchPolicy = initialFetchPolicy;
      } else {
        options2.fetchPolicy = options2.nextFetchPolicy;
      }
    }
    return options2.fetchPolicy;
  };
  ObservableQuery2.prototype.fetch = function(options2, newNetworkStatus) {
    this.queryManager.setObservableQuery(this);
    return this.queryManager["fetchConcastWithInfo"](this.queryId, options2, newNetworkStatus);
  };
  ObservableQuery2.prototype.updatePolling = function() {
    var _this = this;
    if (this.queryManager.ssrMode) {
      return;
    }
    var _a2 = this, pollingInfo = _a2.pollingInfo, pollInterval = _a2.options.pollInterval;
    if (!pollInterval) {
      if (pollingInfo) {
        clearTimeout(pollingInfo.timeout);
        delete this.pollingInfo;
      }
      return;
    }
    if (pollingInfo && pollingInfo.interval === pollInterval) {
      return;
    }
    __DEV__ ? invariant$1(pollInterval, "Attempted to start a polling query without a polling interval.") : invariant$1(pollInterval, 13);
    var info = pollingInfo || (this.pollingInfo = {});
    info.interval = pollInterval;
    var maybeFetch = function() {
      if (_this.pollingInfo) {
        if (!isNetworkRequestInFlight(_this.queryInfo.networkStatus)) {
          _this.reobserve({
            fetchPolicy: _this.options.initialFetchPolicy === "no-cache" ? "no-cache" : "network-only"
          }, NetworkStatus.poll).then(poll, poll);
        } else {
          poll();
        }
      }
    };
    var poll = function() {
      var info2 = _this.pollingInfo;
      if (info2) {
        clearTimeout(info2.timeout);
        info2.timeout = setTimeout(maybeFetch, info2.interval);
      }
    };
    poll();
  };
  ObservableQuery2.prototype.updateLastResult = function(newResult, variables) {
    if (variables === void 0) {
      variables = this.variables;
    }
    this.last = __assign(__assign({}, this.last), { result: this.queryManager.assumeImmutableResults ? newResult : cloneDeep(newResult), variables });
    if (!isNonEmptyArray(newResult.errors)) {
      delete this.last.error;
    }
    return this.last;
  };
  ObservableQuery2.prototype.reobserveAsConcast = function(newOptions, newNetworkStatus) {
    var _this = this;
    this.isTornDown = false;
    var useDisposableConcast = newNetworkStatus === NetworkStatus.refetch || newNetworkStatus === NetworkStatus.fetchMore || newNetworkStatus === NetworkStatus.poll;
    var oldVariables = this.options.variables;
    var oldFetchPolicy = this.options.fetchPolicy;
    var mergedOptions = compact(this.options, newOptions || {});
    var options2 = useDisposableConcast ? mergedOptions : assign(this.options, mergedOptions);
    if (!useDisposableConcast) {
      this.updatePolling();
      if (newOptions && newOptions.variables && !equal(newOptions.variables, oldVariables) && options2.fetchPolicy !== "standby" && options2.fetchPolicy === oldFetchPolicy) {
        this.applyNextFetchPolicy("variables-changed", options2);
        if (newNetworkStatus === void 0) {
          newNetworkStatus = NetworkStatus.setVariables;
        }
      }
    }
    var variables = options2.variables && __assign({}, options2.variables);
    var _a2 = this.fetch(options2, newNetworkStatus), concast = _a2.concast, fromLink = _a2.fromLink;
    var observer = {
      next: function(result) {
        _this.reportResult(result, variables);
      },
      error: function(error) {
        _this.reportError(error, variables);
      }
    };
    if (!useDisposableConcast && fromLink) {
      if (this.concast && this.observer) {
        this.concast.removeObserver(this.observer);
      }
      this.concast = concast;
      this.observer = observer;
    }
    concast.addObserver(observer);
    return concast;
  };
  ObservableQuery2.prototype.reobserve = function(newOptions, newNetworkStatus) {
    return this.reobserveAsConcast(newOptions, newNetworkStatus).promise;
  };
  ObservableQuery2.prototype.observe = function() {
    this.reportResult(this.getCurrentResult(false), this.variables);
  };
  ObservableQuery2.prototype.reportResult = function(result, variables) {
    var lastError = this.getLastError();
    if (lastError || this.isDifferentFromLastResult(result, variables)) {
      if (lastError || !result.partial || this.options.returnPartialData) {
        this.updateLastResult(result, variables);
      }
      iterateObserversSafely(this.observers, "next", result);
    }
  };
  ObservableQuery2.prototype.reportError = function(error, variables) {
    var errorResult = __assign(__assign({}, this.getLastResult()), { error, errors: error.graphQLErrors, networkStatus: NetworkStatus.error, loading: false });
    this.updateLastResult(errorResult, variables);
    iterateObserversSafely(this.observers, "error", this.last.error = error);
  };
  ObservableQuery2.prototype.hasObservers = function() {
    return this.observers.size > 0;
  };
  ObservableQuery2.prototype.tearDownQuery = function() {
    if (this.isTornDown)
      return;
    if (this.concast && this.observer) {
      this.concast.removeObserver(this.observer);
      delete this.concast;
      delete this.observer;
    }
    this.stopPolling();
    this.subscriptions.forEach(function(sub) {
      return sub.unsubscribe();
    });
    this.subscriptions.clear();
    this.queryManager.stopQuery(this.queryId);
    this.observers.clear();
    this.isTornDown = true;
  };
  return ObservableQuery2;
}(Observable);
fixObservableSubclass(ObservableQuery);
function reobserveCacheFirst(obsQuery) {
  var _a2 = obsQuery.options, fetchPolicy = _a2.fetchPolicy, nextFetchPolicy = _a2.nextFetchPolicy;
  if (fetchPolicy === "cache-and-network" || fetchPolicy === "network-only") {
    return obsQuery.reobserve({
      fetchPolicy: "cache-first",
      nextFetchPolicy: function() {
        this.nextFetchPolicy = nextFetchPolicy;
        if (typeof nextFetchPolicy === "function") {
          return nextFetchPolicy.apply(this, arguments);
        }
        return fetchPolicy;
      }
    });
  }
  return obsQuery.reobserve();
}
function defaultSubscriptionObserverErrorCallback(error) {
  __DEV__ && invariant$1.error("Unhandled error", error.message, error.stack);
}
function logMissingFieldErrors(missing) {
  if (__DEV__ && missing) {
    __DEV__ && invariant$1.debug("Missing cache result fields: ".concat(JSON.stringify(missing)), missing);
  }
}
var LocalState = function() {
  function LocalState2(_a2) {
    var cache = _a2.cache, client = _a2.client, resolvers = _a2.resolvers, fragmentMatcher = _a2.fragmentMatcher;
    this.selectionsToResolveCache = /* @__PURE__ */ new WeakMap();
    this.cache = cache;
    if (client) {
      this.client = client;
    }
    if (resolvers) {
      this.addResolvers(resolvers);
    }
    if (fragmentMatcher) {
      this.setFragmentMatcher(fragmentMatcher);
    }
  }
  LocalState2.prototype.addResolvers = function(resolvers) {
    var _this = this;
    this.resolvers = this.resolvers || {};
    if (Array.isArray(resolvers)) {
      resolvers.forEach(function(resolverGroup) {
        _this.resolvers = mergeDeep(_this.resolvers, resolverGroup);
      });
    } else {
      this.resolvers = mergeDeep(this.resolvers, resolvers);
    }
  };
  LocalState2.prototype.setResolvers = function(resolvers) {
    this.resolvers = {};
    this.addResolvers(resolvers);
  };
  LocalState2.prototype.getResolvers = function() {
    return this.resolvers || {};
  };
  LocalState2.prototype.runResolvers = function(_a2) {
    var document = _a2.document, remoteResult = _a2.remoteResult, context = _a2.context, variables = _a2.variables, _b = _a2.onlyRunForcedResolvers, onlyRunForcedResolvers = _b === void 0 ? false : _b;
    return __awaiter(this, void 0, void 0, function() {
      return __generator(this, function(_c) {
        if (document) {
          return [2, this.resolveDocument(document, remoteResult.data, context, variables, this.fragmentMatcher, onlyRunForcedResolvers).then(function(localResult) {
            return __assign(__assign({}, remoteResult), { data: localResult.result });
          })];
        }
        return [2, remoteResult];
      });
    });
  };
  LocalState2.prototype.setFragmentMatcher = function(fragmentMatcher) {
    this.fragmentMatcher = fragmentMatcher;
  };
  LocalState2.prototype.getFragmentMatcher = function() {
    return this.fragmentMatcher;
  };
  LocalState2.prototype.clientQuery = function(document) {
    if (hasDirectives(["client"], document)) {
      if (this.resolvers) {
        return document;
      }
    }
    return null;
  };
  LocalState2.prototype.serverQuery = function(document) {
    return removeClientSetsFromDocument(document);
  };
  LocalState2.prototype.prepareContext = function(context) {
    var cache = this.cache;
    return __assign(__assign({}, context), { cache, getCacheKey: function(obj) {
      return cache.identify(obj);
    } });
  };
  LocalState2.prototype.addExportedVariables = function(document, variables, context) {
    if (variables === void 0) {
      variables = {};
    }
    if (context === void 0) {
      context = {};
    }
    return __awaiter(this, void 0, void 0, function() {
      return __generator(this, function(_a2) {
        if (document) {
          return [2, this.resolveDocument(document, this.buildRootValueFromCache(document, variables) || {}, this.prepareContext(context), variables).then(function(data) {
            return __assign(__assign({}, variables), data.exportedVariables);
          })];
        }
        return [2, __assign({}, variables)];
      });
    });
  };
  LocalState2.prototype.shouldForceResolvers = function(document) {
    var forceResolvers = false;
    visit(document, {
      Directive: {
        enter: function(node) {
          if (node.name.value === "client" && node.arguments) {
            forceResolvers = node.arguments.some(function(arg) {
              return arg.name.value === "always" && arg.value.kind === "BooleanValue" && arg.value.value === true;
            });
            if (forceResolvers) {
              return BREAK;
            }
          }
        }
      }
    });
    return forceResolvers;
  };
  LocalState2.prototype.buildRootValueFromCache = function(document, variables) {
    return this.cache.diff({
      query: buildQueryFromSelectionSet(document),
      variables,
      returnPartialData: true,
      optimistic: false
    }).result;
  };
  LocalState2.prototype.resolveDocument = function(document, rootValue, context, variables, fragmentMatcher, onlyRunForcedResolvers) {
    if (context === void 0) {
      context = {};
    }
    if (variables === void 0) {
      variables = {};
    }
    if (fragmentMatcher === void 0) {
      fragmentMatcher = function() {
        return true;
      };
    }
    if (onlyRunForcedResolvers === void 0) {
      onlyRunForcedResolvers = false;
    }
    return __awaiter(this, void 0, void 0, function() {
      var mainDefinition, fragments, fragmentMap, selectionsToResolve, definitionOperation, defaultOperationType, _a2, cache, client, execContext, isClientFieldDescendant;
      return __generator(this, function(_b) {
        mainDefinition = getMainDefinition(document);
        fragments = getFragmentDefinitions(document);
        fragmentMap = createFragmentMap(fragments);
        selectionsToResolve = this.collectSelectionsToResolve(mainDefinition, fragmentMap);
        definitionOperation = mainDefinition.operation;
        defaultOperationType = definitionOperation ? definitionOperation.charAt(0).toUpperCase() + definitionOperation.slice(1) : "Query";
        _a2 = this, cache = _a2.cache, client = _a2.client;
        execContext = {
          fragmentMap,
          context: __assign(__assign({}, context), { cache, client }),
          variables,
          fragmentMatcher,
          defaultOperationType,
          exportedVariables: {},
          selectionsToResolve,
          onlyRunForcedResolvers
        };
        isClientFieldDescendant = false;
        return [2, this.resolveSelectionSet(mainDefinition.selectionSet, isClientFieldDescendant, rootValue, execContext).then(function(result) {
          return {
            result,
            exportedVariables: execContext.exportedVariables
          };
        })];
      });
    });
  };
  LocalState2.prototype.resolveSelectionSet = function(selectionSet, isClientFieldDescendant, rootValue, execContext) {
    return __awaiter(this, void 0, void 0, function() {
      var fragmentMap, context, variables, resultsToMerge, execute2;
      var _this = this;
      return __generator(this, function(_a2) {
        fragmentMap = execContext.fragmentMap, context = execContext.context, variables = execContext.variables;
        resultsToMerge = [rootValue];
        execute2 = function(selection) {
          return __awaiter(_this, void 0, void 0, function() {
            var fragment, typeCondition;
            return __generator(this, function(_a3) {
              if (!isClientFieldDescendant && !execContext.selectionsToResolve.has(selection)) {
                return [2];
              }
              if (!shouldInclude(selection, variables)) {
                return [2];
              }
              if (isField(selection)) {
                return [2, this.resolveField(selection, isClientFieldDescendant, rootValue, execContext).then(function(fieldResult) {
                  var _a4;
                  if (typeof fieldResult !== "undefined") {
                    resultsToMerge.push((_a4 = {}, _a4[resultKeyNameFromField(selection)] = fieldResult, _a4));
                  }
                })];
              }
              if (isInlineFragment(selection)) {
                fragment = selection;
              } else {
                fragment = fragmentMap[selection.name.value];
                __DEV__ ? invariant$1(fragment, "No fragment named ".concat(selection.name.value)) : invariant$1(fragment, 11);
              }
              if (fragment && fragment.typeCondition) {
                typeCondition = fragment.typeCondition.name.value;
                if (execContext.fragmentMatcher(rootValue, typeCondition, context)) {
                  return [2, this.resolveSelectionSet(fragment.selectionSet, isClientFieldDescendant, rootValue, execContext).then(function(fragmentResult) {
                    resultsToMerge.push(fragmentResult);
                  })];
                }
              }
              return [2];
            });
          });
        };
        return [2, Promise.all(selectionSet.selections.map(execute2)).then(function() {
          return mergeDeepArray(resultsToMerge);
        })];
      });
    });
  };
  LocalState2.prototype.resolveField = function(field, isClientFieldDescendant, rootValue, execContext) {
    return __awaiter(this, void 0, void 0, function() {
      var variables, fieldName, aliasedFieldName, aliasUsed, defaultResult, resultPromise, resolverType, resolverMap, resolve;
      var _this = this;
      return __generator(this, function(_a2) {
        if (!rootValue) {
          return [2, null];
        }
        variables = execContext.variables;
        fieldName = field.name.value;
        aliasedFieldName = resultKeyNameFromField(field);
        aliasUsed = fieldName !== aliasedFieldName;
        defaultResult = rootValue[aliasedFieldName] || rootValue[fieldName];
        resultPromise = Promise.resolve(defaultResult);
        if (!execContext.onlyRunForcedResolvers || this.shouldForceResolvers(field)) {
          resolverType = rootValue.__typename || execContext.defaultOperationType;
          resolverMap = this.resolvers && this.resolvers[resolverType];
          if (resolverMap) {
            resolve = resolverMap[aliasUsed ? fieldName : aliasedFieldName];
            if (resolve) {
              resultPromise = Promise.resolve(cacheSlot.withValue(this.cache, resolve, [
                rootValue,
                argumentsObjectFromField(field, variables),
                execContext.context,
                { field, fragmentMap: execContext.fragmentMap }
              ]));
            }
          }
        }
        return [2, resultPromise.then(function(result) {
          var _a3, _b;
          if (result === void 0) {
            result = defaultResult;
          }
          if (field.directives) {
            field.directives.forEach(function(directive) {
              if (directive.name.value === "export" && directive.arguments) {
                directive.arguments.forEach(function(arg) {
                  if (arg.name.value === "as" && arg.value.kind === "StringValue") {
                    execContext.exportedVariables[arg.value.value] = result;
                  }
                });
              }
            });
          }
          if (!field.selectionSet) {
            return result;
          }
          if (result == null) {
            return result;
          }
          var isClientField = (_b = (_a3 = field.directives) === null || _a3 === void 0 ? void 0 : _a3.some(function(d) {
            return d.name.value === "client";
          })) !== null && _b !== void 0 ? _b : false;
          if (Array.isArray(result)) {
            return _this.resolveSubSelectedArray(field, isClientFieldDescendant || isClientField, result, execContext);
          }
          if (field.selectionSet) {
            return _this.resolveSelectionSet(field.selectionSet, isClientFieldDescendant || isClientField, result, execContext);
          }
        })];
      });
    });
  };
  LocalState2.prototype.resolveSubSelectedArray = function(field, isClientFieldDescendant, result, execContext) {
    var _this = this;
    return Promise.all(result.map(function(item) {
      if (item === null) {
        return null;
      }
      if (Array.isArray(item)) {
        return _this.resolveSubSelectedArray(field, isClientFieldDescendant, item, execContext);
      }
      if (field.selectionSet) {
        return _this.resolveSelectionSet(field.selectionSet, isClientFieldDescendant, item, execContext);
      }
    }));
  };
  LocalState2.prototype.collectSelectionsToResolve = function(mainDefinition, fragmentMap) {
    var isSingleASTNode = function(node) {
      return !Array.isArray(node);
    };
    var selectionsToResolveCache = this.selectionsToResolveCache;
    function collectByDefinition(definitionNode) {
      if (!selectionsToResolveCache.has(definitionNode)) {
        var matches_1 = /* @__PURE__ */ new Set();
        selectionsToResolveCache.set(definitionNode, matches_1);
        visit(definitionNode, {
          Directive: function(node, _, __2, ___, ancestors) {
            if (node.name.value === "client") {
              ancestors.forEach(function(node2) {
                if (isSingleASTNode(node2) && isSelectionNode(node2)) {
                  matches_1.add(node2);
                }
              });
            }
          },
          FragmentSpread: function(spread, _, __2, ___, ancestors) {
            var fragment = fragmentMap[spread.name.value];
            __DEV__ ? invariant$1(fragment, "No fragment named ".concat(spread.name.value)) : invariant$1(fragment, 12);
            var fragmentSelections = collectByDefinition(fragment);
            if (fragmentSelections.size > 0) {
              ancestors.forEach(function(node) {
                if (isSingleASTNode(node) && isSelectionNode(node)) {
                  matches_1.add(node);
                }
              });
              matches_1.add(spread);
              fragmentSelections.forEach(function(selection) {
                matches_1.add(selection);
              });
            }
          }
        });
      }
      return selectionsToResolveCache.get(definitionNode);
    }
    return collectByDefinition(mainDefinition);
  };
  return LocalState2;
}();
var destructiveMethodCounts = new (canUseWeakMap ? WeakMap : Map)();
function wrapDestructiveCacheMethod(cache, methodName) {
  var original = cache[methodName];
  if (typeof original === "function") {
    cache[methodName] = function() {
      destructiveMethodCounts.set(cache, (destructiveMethodCounts.get(cache) + 1) % 1e15);
      return original.apply(this, arguments);
    };
  }
}
function cancelNotifyTimeout(info) {
  if (info["notifyTimeout"]) {
    clearTimeout(info["notifyTimeout"]);
    info["notifyTimeout"] = void 0;
  }
}
var QueryInfo = function() {
  function QueryInfo2(queryManager, queryId) {
    if (queryId === void 0) {
      queryId = queryManager.generateQueryId();
    }
    this.queryId = queryId;
    this.listeners = /* @__PURE__ */ new Set();
    this.document = null;
    this.lastRequestId = 1;
    this.subscriptions = /* @__PURE__ */ new Set();
    this.stopped = false;
    this.dirty = false;
    this.observableQuery = null;
    var cache = this.cache = queryManager.cache;
    if (!destructiveMethodCounts.has(cache)) {
      destructiveMethodCounts.set(cache, 0);
      wrapDestructiveCacheMethod(cache, "evict");
      wrapDestructiveCacheMethod(cache, "modify");
      wrapDestructiveCacheMethod(cache, "reset");
    }
  }
  QueryInfo2.prototype.init = function(query) {
    var networkStatus = query.networkStatus || NetworkStatus.loading;
    if (this.variables && this.networkStatus !== NetworkStatus.loading && !equal(this.variables, query.variables)) {
      networkStatus = NetworkStatus.setVariables;
    }
    if (!equal(query.variables, this.variables)) {
      this.lastDiff = void 0;
    }
    Object.assign(this, {
      document: query.document,
      variables: query.variables,
      networkError: null,
      graphQLErrors: this.graphQLErrors || [],
      networkStatus
    });
    if (query.observableQuery) {
      this.setObservableQuery(query.observableQuery);
    }
    if (query.lastRequestId) {
      this.lastRequestId = query.lastRequestId;
    }
    return this;
  };
  QueryInfo2.prototype.reset = function() {
    cancelNotifyTimeout(this);
    this.dirty = false;
  };
  QueryInfo2.prototype.getDiff = function(variables) {
    if (variables === void 0) {
      variables = this.variables;
    }
    var options2 = this.getDiffOptions(variables);
    if (this.lastDiff && equal(options2, this.lastDiff.options)) {
      return this.lastDiff.diff;
    }
    this.updateWatch(this.variables = variables);
    var oq = this.observableQuery;
    if (oq && oq.options.fetchPolicy === "no-cache") {
      return { complete: false };
    }
    var diff = this.cache.diff(options2);
    this.updateLastDiff(diff, options2);
    return diff;
  };
  QueryInfo2.prototype.updateLastDiff = function(diff, options2) {
    this.lastDiff = diff ? {
      diff,
      options: options2 || this.getDiffOptions()
    } : void 0;
  };
  QueryInfo2.prototype.getDiffOptions = function(variables) {
    var _a2;
    if (variables === void 0) {
      variables = this.variables;
    }
    return {
      query: this.document,
      variables,
      returnPartialData: true,
      optimistic: true,
      canonizeResults: (_a2 = this.observableQuery) === null || _a2 === void 0 ? void 0 : _a2.options.canonizeResults
    };
  };
  QueryInfo2.prototype.setDiff = function(diff) {
    var _this = this;
    var oldDiff = this.lastDiff && this.lastDiff.diff;
    this.updateLastDiff(diff);
    if (!this.dirty && !equal(oldDiff && oldDiff.result, diff && diff.result)) {
      this.dirty = true;
      if (!this.notifyTimeout) {
        this.notifyTimeout = setTimeout(function() {
          return _this.notify();
        }, 0);
      }
    }
  };
  QueryInfo2.prototype.setObservableQuery = function(oq) {
    var _this = this;
    if (oq === this.observableQuery)
      return;
    if (this.oqListener) {
      this.listeners.delete(this.oqListener);
    }
    this.observableQuery = oq;
    if (oq) {
      oq["queryInfo"] = this;
      this.listeners.add(this.oqListener = function() {
        var diff = _this.getDiff();
        if (diff.fromOptimisticTransaction) {
          oq["observe"]();
        } else {
          reobserveCacheFirst(oq);
        }
      });
    } else {
      delete this.oqListener;
    }
  };
  QueryInfo2.prototype.notify = function() {
    var _this = this;
    cancelNotifyTimeout(this);
    if (this.shouldNotify()) {
      this.listeners.forEach(function(listener) {
        return listener(_this);
      });
    }
    this.dirty = false;
  };
  QueryInfo2.prototype.shouldNotify = function() {
    if (!this.dirty || !this.listeners.size) {
      return false;
    }
    if (isNetworkRequestInFlight(this.networkStatus) && this.observableQuery) {
      var fetchPolicy = this.observableQuery.options.fetchPolicy;
      if (fetchPolicy !== "cache-only" && fetchPolicy !== "cache-and-network") {
        return false;
      }
    }
    return true;
  };
  QueryInfo2.prototype.stop = function() {
    if (!this.stopped) {
      this.stopped = true;
      this.reset();
      this.cancel();
      this.cancel = QueryInfo2.prototype.cancel;
      this.subscriptions.forEach(function(sub) {
        return sub.unsubscribe();
      });
      var oq = this.observableQuery;
      if (oq)
        oq.stopPolling();
    }
  };
  QueryInfo2.prototype.cancel = function() {
  };
  QueryInfo2.prototype.updateWatch = function(variables) {
    var _this = this;
    if (variables === void 0) {
      variables = this.variables;
    }
    var oq = this.observableQuery;
    if (oq && oq.options.fetchPolicy === "no-cache") {
      return;
    }
    var watchOptions = __assign(__assign({}, this.getDiffOptions(variables)), { watcher: this, callback: function(diff) {
      return _this.setDiff(diff);
    } });
    if (!this.lastWatch || !equal(watchOptions, this.lastWatch)) {
      this.cancel();
      this.cancel = this.cache.watch(this.lastWatch = watchOptions);
    }
  };
  QueryInfo2.prototype.resetLastWrite = function() {
    this.lastWrite = void 0;
  };
  QueryInfo2.prototype.shouldWrite = function(result, variables) {
    var lastWrite = this.lastWrite;
    return !(lastWrite && lastWrite.dmCount === destructiveMethodCounts.get(this.cache) && equal(variables, lastWrite.variables) && equal(result.data, lastWrite.result.data));
  };
  QueryInfo2.prototype.markResult = function(result, document, options2, cacheWriteBehavior) {
    var _this = this;
    var merger = new DeepMerger();
    var graphQLErrors = isNonEmptyArray(result.errors) ? result.errors.slice(0) : [];
    this.reset();
    if ("incremental" in result && isNonEmptyArray(result.incremental)) {
      var mergedData = mergeIncrementalData(this.getDiff().result, result);
      result.data = mergedData;
    } else if ("hasNext" in result && result.hasNext) {
      var diff = this.getDiff();
      result.data = merger.merge(diff.result, result.data);
    }
    this.graphQLErrors = graphQLErrors;
    if (options2.fetchPolicy === "no-cache") {
      this.updateLastDiff({ result: result.data, complete: true }, this.getDiffOptions(options2.variables));
    } else if (cacheWriteBehavior !== 0) {
      if (shouldWriteResult(result, options2.errorPolicy)) {
        this.cache.performTransaction(function(cache) {
          if (_this.shouldWrite(result, options2.variables)) {
            cache.writeQuery({
              query: document,
              data: result.data,
              variables: options2.variables,
              overwrite: cacheWriteBehavior === 1
            });
            _this.lastWrite = {
              result,
              variables: options2.variables,
              dmCount: destructiveMethodCounts.get(_this.cache)
            };
          } else {
            if (_this.lastDiff && _this.lastDiff.diff.complete) {
              result.data = _this.lastDiff.diff.result;
              return;
            }
          }
          var diffOptions = _this.getDiffOptions(options2.variables);
          var diff2 = cache.diff(diffOptions);
          if (!_this.stopped) {
            _this.updateWatch(options2.variables);
          }
          _this.updateLastDiff(diff2, diffOptions);
          if (diff2.complete) {
            result.data = diff2.result;
          }
        });
      } else {
        this.lastWrite = void 0;
      }
    }
  };
  QueryInfo2.prototype.markReady = function() {
    this.networkError = null;
    return this.networkStatus = NetworkStatus.ready;
  };
  QueryInfo2.prototype.markError = function(error) {
    this.networkStatus = NetworkStatus.error;
    this.lastWrite = void 0;
    this.reset();
    if (error.graphQLErrors) {
      this.graphQLErrors = error.graphQLErrors;
    }
    if (error.networkError) {
      this.networkError = error.networkError;
    }
    return error;
  };
  return QueryInfo2;
}();
function shouldWriteResult(result, errorPolicy) {
  if (errorPolicy === void 0) {
    errorPolicy = "none";
  }
  var ignoreErrors = errorPolicy === "ignore" || errorPolicy === "all";
  var writeWithErrors = !graphQLResultHasError(result);
  if (!writeWithErrors && ignoreErrors && result.data) {
    writeWithErrors = true;
  }
  return writeWithErrors;
}
var hasOwnProperty = Object.prototype.hasOwnProperty;
var QueryManager = function() {
  function QueryManager2(_a2) {
    var cache = _a2.cache, link2 = _a2.link, defaultOptions2 = _a2.defaultOptions, _b = _a2.queryDeduplication, queryDeduplication = _b === void 0 ? false : _b, onBroadcast = _a2.onBroadcast, _c = _a2.ssrMode, ssrMode = _c === void 0 ? false : _c, _d = _a2.clientAwareness, clientAwareness = _d === void 0 ? {} : _d, localState = _a2.localState, assumeImmutableResults = _a2.assumeImmutableResults;
    this.clientAwareness = {};
    this.queries = /* @__PURE__ */ new Map();
    this.fetchCancelFns = /* @__PURE__ */ new Map();
    this.transformCache = new (canUseWeakMap ? WeakMap : Map)();
    this.queryIdCounter = 1;
    this.requestIdCounter = 1;
    this.mutationIdCounter = 1;
    this.inFlightLinkObservables = /* @__PURE__ */ new Map();
    this.cache = cache;
    this.link = link2;
    this.defaultOptions = defaultOptions2 || /* @__PURE__ */ Object.create(null);
    this.queryDeduplication = queryDeduplication;
    this.clientAwareness = clientAwareness;
    this.localState = localState || new LocalState({ cache });
    this.ssrMode = ssrMode;
    this.assumeImmutableResults = !!assumeImmutableResults;
    if (this.onBroadcast = onBroadcast) {
      this.mutationStore = /* @__PURE__ */ Object.create(null);
    }
  }
  QueryManager2.prototype.stop = function() {
    var _this = this;
    this.queries.forEach(function(_info, queryId) {
      _this.stopQueryNoBroadcast(queryId);
    });
    this.cancelPendingFetches(__DEV__ ? new InvariantError("QueryManager stopped while query was in flight") : new InvariantError(14));
  };
  QueryManager2.prototype.cancelPendingFetches = function(error) {
    this.fetchCancelFns.forEach(function(cancel) {
      return cancel(error);
    });
    this.fetchCancelFns.clear();
  };
  QueryManager2.prototype.mutate = function(_a2) {
    var _b, _c;
    var mutation = _a2.mutation, variables = _a2.variables, optimisticResponse = _a2.optimisticResponse, updateQueries = _a2.updateQueries, _d = _a2.refetchQueries, refetchQueries = _d === void 0 ? [] : _d, _e = _a2.awaitRefetchQueries, awaitRefetchQueries = _e === void 0 ? false : _e, updateWithProxyFn = _a2.update, onQueryUpdated = _a2.onQueryUpdated, _f = _a2.fetchPolicy, fetchPolicy = _f === void 0 ? ((_b = this.defaultOptions.mutate) === null || _b === void 0 ? void 0 : _b.fetchPolicy) || "network-only" : _f, _g = _a2.errorPolicy, errorPolicy = _g === void 0 ? ((_c = this.defaultOptions.mutate) === null || _c === void 0 ? void 0 : _c.errorPolicy) || "none" : _g, keepRootFields = _a2.keepRootFields, context = _a2.context;
    return __awaiter(this, void 0, void 0, function() {
      var mutationId, _h, document, hasClientExports2, mutationStoreValue, self2;
      return __generator(this, function(_j) {
        switch (_j.label) {
          case 0:
            __DEV__ ? invariant$1(mutation, "mutation option is required. You must specify your GraphQL document in the mutation option.") : invariant$1(mutation, 15);
            __DEV__ ? invariant$1(fetchPolicy === "network-only" || fetchPolicy === "no-cache", "Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write.") : invariant$1(fetchPolicy === "network-only" || fetchPolicy === "no-cache", 16);
            mutationId = this.generateMutationId();
            _h = this.transform(mutation), document = _h.document, hasClientExports2 = _h.hasClientExports;
            mutation = this.cache.transformForLink(document);
            variables = this.getVariables(mutation, variables);
            if (!hasClientExports2)
              return [3, 2];
            return [4, this.localState.addExportedVariables(mutation, variables, context)];
          case 1:
            variables = _j.sent();
            _j.label = 2;
          case 2:
            mutationStoreValue = this.mutationStore && (this.mutationStore[mutationId] = {
              mutation,
              variables,
              loading: true,
              error: null
            });
            if (optimisticResponse) {
              this.markMutationOptimistic(optimisticResponse, {
                mutationId,
                document: mutation,
                variables,
                fetchPolicy,
                errorPolicy,
                context,
                updateQueries,
                update: updateWithProxyFn,
                keepRootFields
              });
            }
            this.broadcastQueries();
            self2 = this;
            return [2, new Promise(function(resolve, reject) {
              return asyncMap(self2.getObservableFromLink(mutation, __assign(__assign({}, context), { optimisticResponse }), variables, false), function(result) {
                if (graphQLResultHasError(result) && errorPolicy === "none") {
                  throw new ApolloError({
                    graphQLErrors: getGraphQLErrorsFromResult(result)
                  });
                }
                if (mutationStoreValue) {
                  mutationStoreValue.loading = false;
                  mutationStoreValue.error = null;
                }
                var storeResult = __assign({}, result);
                if (typeof refetchQueries === "function") {
                  refetchQueries = refetchQueries(storeResult);
                }
                if (errorPolicy === "ignore" && graphQLResultHasError(storeResult)) {
                  delete storeResult.errors;
                }
                return self2.markMutationResult({
                  mutationId,
                  result: storeResult,
                  document: mutation,
                  variables,
                  fetchPolicy,
                  errorPolicy,
                  context,
                  update: updateWithProxyFn,
                  updateQueries,
                  awaitRefetchQueries,
                  refetchQueries,
                  removeOptimistic: optimisticResponse ? mutationId : void 0,
                  onQueryUpdated,
                  keepRootFields
                });
              }).subscribe({
                next: function(storeResult) {
                  self2.broadcastQueries();
                  if (!("hasNext" in storeResult) || storeResult.hasNext === false) {
                    resolve(storeResult);
                  }
                },
                error: function(err) {
                  if (mutationStoreValue) {
                    mutationStoreValue.loading = false;
                    mutationStoreValue.error = err;
                  }
                  if (optimisticResponse) {
                    self2.cache.removeOptimistic(mutationId);
                  }
                  self2.broadcastQueries();
                  reject(err instanceof ApolloError ? err : new ApolloError({
                    networkError: err
                  }));
                }
              });
            })];
        }
      });
    });
  };
  QueryManager2.prototype.markMutationResult = function(mutation, cache) {
    var _this = this;
    if (cache === void 0) {
      cache = this.cache;
    }
    var result = mutation.result;
    var cacheWrites = [];
    var skipCache = mutation.fetchPolicy === "no-cache";
    if (!skipCache && shouldWriteResult(result, mutation.errorPolicy)) {
      if (!isExecutionPatchIncrementalResult(result)) {
        cacheWrites.push({
          result: result.data,
          dataId: "ROOT_MUTATION",
          query: mutation.document,
          variables: mutation.variables
        });
      }
      if (isExecutionPatchIncrementalResult(result) && isNonEmptyArray(result.incremental)) {
        var diff = cache.diff({
          id: "ROOT_MUTATION",
          query: this.transform(mutation.document).asQuery,
          variables: mutation.variables,
          optimistic: false,
          returnPartialData: true
        });
        var mergedData = void 0;
        if (diff.result) {
          mergedData = mergeIncrementalData(diff.result, result);
        }
        if (typeof mergedData !== "undefined") {
          result.data = mergedData;
          cacheWrites.push({
            result: mergedData,
            dataId: "ROOT_MUTATION",
            query: mutation.document,
            variables: mutation.variables
          });
        }
      }
      var updateQueries_1 = mutation.updateQueries;
      if (updateQueries_1) {
        this.queries.forEach(function(_a2, queryId) {
          var observableQuery = _a2.observableQuery;
          var queryName = observableQuery && observableQuery.queryName;
          if (!queryName || !hasOwnProperty.call(updateQueries_1, queryName)) {
            return;
          }
          var updater = updateQueries_1[queryName];
          var _b = _this.queries.get(queryId), document = _b.document, variables = _b.variables;
          var _c = cache.diff({
            query: document,
            variables,
            returnPartialData: true,
            optimistic: false
          }), currentQueryResult = _c.result, complete = _c.complete;
          if (complete && currentQueryResult) {
            var nextQueryResult = updater(currentQueryResult, {
              mutationResult: result,
              queryName: document && getOperationName(document) || void 0,
              queryVariables: variables
            });
            if (nextQueryResult) {
              cacheWrites.push({
                result: nextQueryResult,
                dataId: "ROOT_QUERY",
                query: document,
                variables
              });
            }
          }
        });
      }
    }
    if (cacheWrites.length > 0 || mutation.refetchQueries || mutation.update || mutation.onQueryUpdated || mutation.removeOptimistic) {
      var results_1 = [];
      this.refetchQueries({
        updateCache: function(cache2) {
          if (!skipCache) {
            cacheWrites.forEach(function(write) {
              return cache2.write(write);
            });
          }
          var update = mutation.update;
          var isFinalResult = !isExecutionPatchResult(result) || isExecutionPatchIncrementalResult(result) && !result.hasNext;
          if (update) {
            if (!skipCache) {
              var diff2 = cache2.diff({
                id: "ROOT_MUTATION",
                query: _this.transform(mutation.document).asQuery,
                variables: mutation.variables,
                optimistic: false,
                returnPartialData: true
              });
              if (diff2.complete) {
                result = __assign(__assign({}, result), { data: diff2.result });
                if ("incremental" in result) {
                  delete result.incremental;
                }
                if ("hasNext" in result) {
                  delete result.hasNext;
                }
              }
            }
            if (isFinalResult) {
              update(cache2, result, {
                context: mutation.context,
                variables: mutation.variables
              });
            }
          }
          if (!skipCache && !mutation.keepRootFields && isFinalResult) {
            cache2.modify({
              id: "ROOT_MUTATION",
              fields: function(value, _a2) {
                var fieldName = _a2.fieldName, DELETE2 = _a2.DELETE;
                return fieldName === "__typename" ? value : DELETE2;
              }
            });
          }
        },
        include: mutation.refetchQueries,
        optimistic: false,
        removeOptimistic: mutation.removeOptimistic,
        onQueryUpdated: mutation.onQueryUpdated || null
      }).forEach(function(result2) {
        return results_1.push(result2);
      });
      if (mutation.awaitRefetchQueries || mutation.onQueryUpdated) {
        return Promise.all(results_1).then(function() {
          return result;
        });
      }
    }
    return Promise.resolve(result);
  };
  QueryManager2.prototype.markMutationOptimistic = function(optimisticResponse, mutation) {
    var _this = this;
    var data = typeof optimisticResponse === "function" ? optimisticResponse(mutation.variables) : optimisticResponse;
    return this.cache.recordOptimisticTransaction(function(cache) {
      try {
        _this.markMutationResult(__assign(__assign({}, mutation), { result: { data } }), cache);
      } catch (error) {
        __DEV__ && invariant$1.error(error);
      }
    }, mutation.mutationId);
  };
  QueryManager2.prototype.fetchQuery = function(queryId, options2, networkStatus) {
    return this.fetchQueryObservable(queryId, options2, networkStatus).promise;
  };
  QueryManager2.prototype.getQueryStore = function() {
    var store = /* @__PURE__ */ Object.create(null);
    this.queries.forEach(function(info, queryId) {
      store[queryId] = {
        variables: info.variables,
        networkStatus: info.networkStatus,
        networkError: info.networkError,
        graphQLErrors: info.graphQLErrors
      };
    });
    return store;
  };
  QueryManager2.prototype.resetErrors = function(queryId) {
    var queryInfo = this.queries.get(queryId);
    if (queryInfo) {
      queryInfo.networkError = void 0;
      queryInfo.graphQLErrors = [];
    }
  };
  QueryManager2.prototype.transform = function(document) {
    var transformCache = this.transformCache;
    if (!transformCache.has(document)) {
      var transformed = this.cache.transformDocument(document);
      var noConnection = removeConnectionDirectiveFromDocument(transformed);
      var clientQuery = this.localState.clientQuery(transformed);
      var serverQuery = noConnection && this.localState.serverQuery(noConnection);
      var cacheEntry_1 = {
        document: transformed,
        hasClientExports: hasClientExports(transformed),
        hasForcedResolvers: this.localState.shouldForceResolvers(transformed),
        clientQuery,
        serverQuery,
        defaultVars: getDefaultValues(getOperationDefinition(transformed)),
        asQuery: __assign(__assign({}, transformed), { definitions: transformed.definitions.map(function(def) {
          if (def.kind === "OperationDefinition" && def.operation !== "query") {
            return __assign(__assign({}, def), { operation: "query" });
          }
          return def;
        }) })
      };
      var add = function(doc) {
        if (doc && !transformCache.has(doc)) {
          transformCache.set(doc, cacheEntry_1);
        }
      };
      add(document);
      add(transformed);
      add(clientQuery);
      add(serverQuery);
    }
    return transformCache.get(document);
  };
  QueryManager2.prototype.getVariables = function(document, variables) {
    return __assign(__assign({}, this.transform(document).defaultVars), variables);
  };
  QueryManager2.prototype.watchQuery = function(options2) {
    options2 = __assign(__assign({}, options2), { variables: this.getVariables(options2.query, options2.variables) });
    if (typeof options2.notifyOnNetworkStatusChange === "undefined") {
      options2.notifyOnNetworkStatusChange = false;
    }
    var queryInfo = new QueryInfo(this);
    var observable = new ObservableQuery({
      queryManager: this,
      queryInfo,
      options: options2
    });
    this.queries.set(observable.queryId, queryInfo);
    queryInfo.init({
      document: observable.query,
      observableQuery: observable,
      variables: observable.variables
    });
    return observable;
  };
  QueryManager2.prototype.query = function(options2, queryId) {
    var _this = this;
    if (queryId === void 0) {
      queryId = this.generateQueryId();
    }
    __DEV__ ? invariant$1(options2.query, "query option is required. You must specify your GraphQL document in the query option.") : invariant$1(options2.query, 17);
    __DEV__ ? invariant$1(options2.query.kind === "Document", 'You must wrap the query string in a "gql" tag.') : invariant$1(options2.query.kind === "Document", 18);
    __DEV__ ? invariant$1(!options2.returnPartialData, "returnPartialData option only supported on watchQuery.") : invariant$1(!options2.returnPartialData, 19);
    __DEV__ ? invariant$1(!options2.pollInterval, "pollInterval option only supported on watchQuery.") : invariant$1(!options2.pollInterval, 20);
    return this.fetchQuery(queryId, options2).finally(function() {
      return _this.stopQuery(queryId);
    });
  };
  QueryManager2.prototype.generateQueryId = function() {
    return String(this.queryIdCounter++);
  };
  QueryManager2.prototype.generateRequestId = function() {
    return this.requestIdCounter++;
  };
  QueryManager2.prototype.generateMutationId = function() {
    return String(this.mutationIdCounter++);
  };
  QueryManager2.prototype.stopQueryInStore = function(queryId) {
    this.stopQueryInStoreNoBroadcast(queryId);
    this.broadcastQueries();
  };
  QueryManager2.prototype.stopQueryInStoreNoBroadcast = function(queryId) {
    var queryInfo = this.queries.get(queryId);
    if (queryInfo)
      queryInfo.stop();
  };
  QueryManager2.prototype.clearStore = function(options2) {
    if (options2 === void 0) {
      options2 = {
        discardWatches: true
      };
    }
    this.cancelPendingFetches(__DEV__ ? new InvariantError("Store reset while query was in flight (not completed in link chain)") : new InvariantError(21));
    this.queries.forEach(function(queryInfo) {
      if (queryInfo.observableQuery) {
        queryInfo.networkStatus = NetworkStatus.loading;
      } else {
        queryInfo.stop();
      }
    });
    if (this.mutationStore) {
      this.mutationStore = /* @__PURE__ */ Object.create(null);
    }
    return this.cache.reset(options2);
  };
  QueryManager2.prototype.getObservableQueries = function(include) {
    var _this = this;
    if (include === void 0) {
      include = "active";
    }
    var queries = /* @__PURE__ */ new Map();
    var queryNamesAndDocs = /* @__PURE__ */ new Map();
    var legacyQueryOptions = /* @__PURE__ */ new Set();
    if (Array.isArray(include)) {
      include.forEach(function(desc) {
        if (typeof desc === "string") {
          queryNamesAndDocs.set(desc, false);
        } else if (isDocumentNode(desc)) {
          queryNamesAndDocs.set(_this.transform(desc).document, false);
        } else if (isNonNullObject(desc) && desc.query) {
          legacyQueryOptions.add(desc);
        }
      });
    }
    this.queries.forEach(function(_a2, queryId) {
      var oq = _a2.observableQuery, document = _a2.document;
      if (oq) {
        if (include === "all") {
          queries.set(queryId, oq);
          return;
        }
        var queryName = oq.queryName, fetchPolicy = oq.options.fetchPolicy;
        if (fetchPolicy === "standby" || include === "active" && !oq.hasObservers()) {
          return;
        }
        if (include === "active" || queryName && queryNamesAndDocs.has(queryName) || document && queryNamesAndDocs.has(document)) {
          queries.set(queryId, oq);
          if (queryName)
            queryNamesAndDocs.set(queryName, true);
          if (document)
            queryNamesAndDocs.set(document, true);
        }
      }
    });
    if (legacyQueryOptions.size) {
      legacyQueryOptions.forEach(function(options2) {
        var queryId = makeUniqueId("legacyOneTimeQuery");
        var queryInfo = _this.getQuery(queryId).init({
          document: options2.query,
          variables: options2.variables
        });
        var oq = new ObservableQuery({
          queryManager: _this,
          queryInfo,
          options: __assign(__assign({}, options2), { fetchPolicy: "network-only" })
        });
        invariant$1(oq.queryId === queryId);
        queryInfo.setObservableQuery(oq);
        queries.set(queryId, oq);
      });
    }
    if (__DEV__ && queryNamesAndDocs.size) {
      queryNamesAndDocs.forEach(function(included, nameOrDoc) {
        if (!included) {
          __DEV__ && invariant$1.warn("Unknown query ".concat(typeof nameOrDoc === "string" ? "named " : "").concat(JSON.stringify(nameOrDoc, null, 2), " requested in refetchQueries options.include array"));
        }
      });
    }
    return queries;
  };
  QueryManager2.prototype.reFetchObservableQueries = function(includeStandby) {
    var _this = this;
    if (includeStandby === void 0) {
      includeStandby = false;
    }
    var observableQueryPromises = [];
    this.getObservableQueries(includeStandby ? "all" : "active").forEach(function(observableQuery, queryId) {
      var fetchPolicy = observableQuery.options.fetchPolicy;
      observableQuery.resetLastResults();
      if (includeStandby || fetchPolicy !== "standby" && fetchPolicy !== "cache-only") {
        observableQueryPromises.push(observableQuery.refetch());
      }
      _this.getQuery(queryId).setDiff(null);
    });
    this.broadcastQueries();
    return Promise.all(observableQueryPromises);
  };
  QueryManager2.prototype.setObservableQuery = function(observableQuery) {
    this.getQuery(observableQuery.queryId).setObservableQuery(observableQuery);
  };
  QueryManager2.prototype.startGraphQLSubscription = function(_a2) {
    var _this = this;
    var query = _a2.query, fetchPolicy = _a2.fetchPolicy, errorPolicy = _a2.errorPolicy, variables = _a2.variables, _b = _a2.context, context = _b === void 0 ? {} : _b;
    query = this.transform(query).document;
    variables = this.getVariables(query, variables);
    var makeObservable = function(variables2) {
      return _this.getObservableFromLink(query, context, variables2).map(function(result) {
        if (fetchPolicy !== "no-cache") {
          if (shouldWriteResult(result, errorPolicy)) {
            _this.cache.write({
              query,
              result: result.data,
              dataId: "ROOT_SUBSCRIPTION",
              variables: variables2
            });
          }
          _this.broadcastQueries();
        }
        var hasErrors = graphQLResultHasError(result);
        var hasProtocolErrors = graphQLResultHasProtocolErrors(result);
        if (hasErrors || hasProtocolErrors) {
          var errors = {};
          if (hasErrors) {
            errors.graphQLErrors = result.errors;
          }
          if (hasProtocolErrors) {
            errors.protocolErrors = result.extensions[PROTOCOL_ERRORS_SYMBOL];
          }
          throw new ApolloError(errors);
        }
        return result;
      });
    };
    if (this.transform(query).hasClientExports) {
      var observablePromise_1 = this.localState.addExportedVariables(query, variables, context).then(makeObservable);
      return new Observable(function(observer) {
        var sub = null;
        observablePromise_1.then(function(observable) {
          return sub = observable.subscribe(observer);
        }, observer.error);
        return function() {
          return sub && sub.unsubscribe();
        };
      });
    }
    return makeObservable(variables);
  };
  QueryManager2.prototype.stopQuery = function(queryId) {
    this.stopQueryNoBroadcast(queryId);
    this.broadcastQueries();
  };
  QueryManager2.prototype.stopQueryNoBroadcast = function(queryId) {
    this.stopQueryInStoreNoBroadcast(queryId);
    this.removeQuery(queryId);
  };
  QueryManager2.prototype.removeQuery = function(queryId) {
    this.fetchCancelFns.delete(queryId);
    if (this.queries.has(queryId)) {
      this.getQuery(queryId).stop();
      this.queries.delete(queryId);
    }
  };
  QueryManager2.prototype.broadcastQueries = function() {
    if (this.onBroadcast)
      this.onBroadcast();
    this.queries.forEach(function(info) {
      return info.notify();
    });
  };
  QueryManager2.prototype.getLocalState = function() {
    return this.localState;
  };
  QueryManager2.prototype.getObservableFromLink = function(query, context, variables, deduplication) {
    var _this = this;
    var _a2;
    if (deduplication === void 0) {
      deduplication = (_a2 = context === null || context === void 0 ? void 0 : context.queryDeduplication) !== null && _a2 !== void 0 ? _a2 : this.queryDeduplication;
    }
    var observable;
    var serverQuery = this.transform(query).serverQuery;
    if (serverQuery) {
      var _b = this, inFlightLinkObservables_1 = _b.inFlightLinkObservables, link2 = _b.link;
      var operation = {
        query: serverQuery,
        variables,
        operationName: getOperationName(serverQuery) || void 0,
        context: this.prepareContext(__assign(__assign({}, context), { forceFetch: !deduplication }))
      };
      context = operation.context;
      if (deduplication) {
        var byVariables_1 = inFlightLinkObservables_1.get(serverQuery) || /* @__PURE__ */ new Map();
        inFlightLinkObservables_1.set(serverQuery, byVariables_1);
        var varJson_1 = canonicalStringify(variables);
        observable = byVariables_1.get(varJson_1);
        if (!observable) {
          var concast = new Concast([
            execute(link2, operation)
          ]);
          byVariables_1.set(varJson_1, observable = concast);
          concast.beforeNext(function() {
            if (byVariables_1.delete(varJson_1) && byVariables_1.size < 1) {
              inFlightLinkObservables_1.delete(serverQuery);
            }
          });
        }
      } else {
        observable = new Concast([
          execute(link2, operation)
        ]);
      }
    } else {
      observable = new Concast([
        Observable.of({ data: {} })
      ]);
      context = this.prepareContext(context);
    }
    var clientQuery = this.transform(query).clientQuery;
    if (clientQuery) {
      observable = asyncMap(observable, function(result) {
        return _this.localState.runResolvers({
          document: clientQuery,
          remoteResult: result,
          context,
          variables
        });
      });
    }
    return observable;
  };
  QueryManager2.prototype.getResultsFromLink = function(queryInfo, cacheWriteBehavior, options2) {
    var requestId = queryInfo.lastRequestId = this.generateRequestId();
    var linkDocument = this.cache.transformForLink(this.transform(queryInfo.document).document);
    return asyncMap(this.getObservableFromLink(linkDocument, options2.context, options2.variables), function(result) {
      var graphQLErrors = getGraphQLErrorsFromResult(result);
      var hasErrors = graphQLErrors.length > 0;
      if (requestId >= queryInfo.lastRequestId) {
        if (hasErrors && options2.errorPolicy === "none") {
          throw queryInfo.markError(new ApolloError({
            graphQLErrors
          }));
        }
        queryInfo.markResult(result, linkDocument, options2, cacheWriteBehavior);
        queryInfo.markReady();
      }
      var aqr = {
        data: result.data,
        loading: false,
        networkStatus: NetworkStatus.ready
      };
      if (hasErrors && options2.errorPolicy !== "ignore") {
        aqr.errors = graphQLErrors;
        aqr.networkStatus = NetworkStatus.error;
      }
      return aqr;
    }, function(networkError) {
      var error = isApolloError(networkError) ? networkError : new ApolloError({ networkError });
      if (requestId >= queryInfo.lastRequestId) {
        queryInfo.markError(error);
      }
      throw error;
    });
  };
  QueryManager2.prototype.fetchQueryObservable = function(queryId, options2, networkStatus) {
    return this.fetchConcastWithInfo(queryId, options2, networkStatus).concast;
  };
  QueryManager2.prototype.fetchConcastWithInfo = function(queryId, options2, networkStatus) {
    var _this = this;
    if (networkStatus === void 0) {
      networkStatus = NetworkStatus.loading;
    }
    var query = this.transform(options2.query).document;
    var variables = this.getVariables(query, options2.variables);
    var queryInfo = this.getQuery(queryId);
    var defaults = this.defaultOptions.watchQuery;
    var _a2 = options2.fetchPolicy, fetchPolicy = _a2 === void 0 ? defaults && defaults.fetchPolicy || "cache-first" : _a2, _b = options2.errorPolicy, errorPolicy = _b === void 0 ? defaults && defaults.errorPolicy || "none" : _b, _c = options2.returnPartialData, returnPartialData = _c === void 0 ? false : _c, _d = options2.notifyOnNetworkStatusChange, notifyOnNetworkStatusChange = _d === void 0 ? false : _d, _e = options2.context, context = _e === void 0 ? {} : _e;
    var normalized = Object.assign({}, options2, {
      query,
      variables,
      fetchPolicy,
      errorPolicy,
      returnPartialData,
      notifyOnNetworkStatusChange,
      context
    });
    var fromVariables = function(variables2) {
      normalized.variables = variables2;
      var sourcesWithInfo2 = _this.fetchQueryByPolicy(queryInfo, normalized, networkStatus);
      if (normalized.fetchPolicy !== "standby" && sourcesWithInfo2.sources.length > 0 && queryInfo.observableQuery) {
        queryInfo.observableQuery["applyNextFetchPolicy"]("after-fetch", options2);
      }
      return sourcesWithInfo2;
    };
    var cleanupCancelFn = function() {
      return _this.fetchCancelFns.delete(queryId);
    };
    this.fetchCancelFns.set(queryId, function(reason) {
      cleanupCancelFn();
      setTimeout(function() {
        return concast.cancel(reason);
      });
    });
    var concast, containsDataFromLink;
    if (this.transform(normalized.query).hasClientExports) {
      concast = new Concast(this.localState.addExportedVariables(normalized.query, normalized.variables, normalized.context).then(fromVariables).then(function(sourcesWithInfo2) {
        return sourcesWithInfo2.sources;
      }));
      containsDataFromLink = true;
    } else {
      var sourcesWithInfo = fromVariables(normalized.variables);
      containsDataFromLink = sourcesWithInfo.fromLink;
      concast = new Concast(sourcesWithInfo.sources);
    }
    concast.promise.then(cleanupCancelFn, cleanupCancelFn);
    return {
      concast,
      fromLink: containsDataFromLink
    };
  };
  QueryManager2.prototype.refetchQueries = function(_a2) {
    var _this = this;
    var updateCache = _a2.updateCache, include = _a2.include, _b = _a2.optimistic, optimistic = _b === void 0 ? false : _b, _c = _a2.removeOptimistic, removeOptimistic = _c === void 0 ? optimistic ? makeUniqueId("refetchQueries") : void 0 : _c, onQueryUpdated = _a2.onQueryUpdated;
    var includedQueriesById = /* @__PURE__ */ new Map();
    if (include) {
      this.getObservableQueries(include).forEach(function(oq, queryId) {
        includedQueriesById.set(queryId, {
          oq,
          lastDiff: _this.getQuery(queryId).getDiff()
        });
      });
    }
    var results = /* @__PURE__ */ new Map();
    if (updateCache) {
      this.cache.batch({
        update: updateCache,
        optimistic: optimistic && removeOptimistic || false,
        removeOptimistic,
        onWatchUpdated: function(watch2, diff, lastDiff) {
          var oq = watch2.watcher instanceof QueryInfo && watch2.watcher.observableQuery;
          if (oq) {
            if (onQueryUpdated) {
              includedQueriesById.delete(oq.queryId);
              var result = onQueryUpdated(oq, diff, lastDiff);
              if (result === true) {
                result = oq.refetch();
              }
              if (result !== false) {
                results.set(oq, result);
              }
              return result;
            }
            if (onQueryUpdated !== null) {
              includedQueriesById.set(oq.queryId, { oq, lastDiff, diff });
            }
          }
        }
      });
    }
    if (includedQueriesById.size) {
      includedQueriesById.forEach(function(_a3, queryId) {
        var oq = _a3.oq, lastDiff = _a3.lastDiff, diff = _a3.diff;
        var result;
        if (onQueryUpdated) {
          if (!diff) {
            var info = oq["queryInfo"];
            info.reset();
            diff = info.getDiff();
          }
          result = onQueryUpdated(oq, diff, lastDiff);
        }
        if (!onQueryUpdated || result === true) {
          result = oq.refetch();
        }
        if (result !== false) {
          results.set(oq, result);
        }
        if (queryId.indexOf("legacyOneTimeQuery") >= 0) {
          _this.stopQueryNoBroadcast(queryId);
        }
      });
    }
    if (removeOptimistic) {
      this.cache.removeOptimistic(removeOptimistic);
    }
    return results;
  };
  QueryManager2.prototype.fetchQueryByPolicy = function(queryInfo, _a2, networkStatus) {
    var _this = this;
    var query = _a2.query, variables = _a2.variables, fetchPolicy = _a2.fetchPolicy, refetchWritePolicy = _a2.refetchWritePolicy, errorPolicy = _a2.errorPolicy, returnPartialData = _a2.returnPartialData, context = _a2.context, notifyOnNetworkStatusChange = _a2.notifyOnNetworkStatusChange;
    var oldNetworkStatus = queryInfo.networkStatus;
    queryInfo.init({
      document: this.transform(query).document,
      variables,
      networkStatus
    });
    var readCache = function() {
      return queryInfo.getDiff(variables);
    };
    var resultsFromCache = function(diff2, networkStatus2) {
      if (networkStatus2 === void 0) {
        networkStatus2 = queryInfo.networkStatus || NetworkStatus.loading;
      }
      var data = diff2.result;
      if (__DEV__ && !returnPartialData && !equal(data, {})) {
        logMissingFieldErrors(diff2.missing);
      }
      var fromData = function(data2) {
        return Observable.of(__assign({ data: data2, loading: isNetworkRequestInFlight(networkStatus2), networkStatus: networkStatus2 }, diff2.complete ? null : { partial: true }));
      };
      if (data && _this.transform(query).hasForcedResolvers) {
        return _this.localState.runResolvers({
          document: query,
          remoteResult: { data },
          context,
          variables,
          onlyRunForcedResolvers: true
        }).then(function(resolved) {
          return fromData(resolved.data || void 0);
        });
      }
      if (errorPolicy === "none" && networkStatus2 === NetworkStatus.refetch && Array.isArray(diff2.missing)) {
        return fromData(void 0);
      }
      return fromData(data);
    };
    var cacheWriteBehavior = fetchPolicy === "no-cache" ? 0 : networkStatus === NetworkStatus.refetch && refetchWritePolicy !== "merge" ? 1 : 2;
    var resultsFromLink = function() {
      return _this.getResultsFromLink(queryInfo, cacheWriteBehavior, {
        variables,
        context,
        fetchPolicy,
        errorPolicy
      });
    };
    var shouldNotify = notifyOnNetworkStatusChange && typeof oldNetworkStatus === "number" && oldNetworkStatus !== networkStatus && isNetworkRequestInFlight(networkStatus);
    switch (fetchPolicy) {
      default:
      case "cache-first": {
        var diff = readCache();
        if (diff.complete) {
          return { fromLink: false, sources: [resultsFromCache(diff, queryInfo.markReady())] };
        }
        if (returnPartialData || shouldNotify) {
          return { fromLink: true, sources: [resultsFromCache(diff), resultsFromLink()] };
        }
        return { fromLink: true, sources: [resultsFromLink()] };
      }
      case "cache-and-network": {
        var diff = readCache();
        if (diff.complete || returnPartialData || shouldNotify) {
          return { fromLink: true, sources: [resultsFromCache(diff), resultsFromLink()] };
        }
        return { fromLink: true, sources: [resultsFromLink()] };
      }
      case "cache-only":
        return { fromLink: false, sources: [resultsFromCache(readCache(), queryInfo.markReady())] };
      case "network-only":
        if (shouldNotify) {
          return { fromLink: true, sources: [resultsFromCache(readCache()), resultsFromLink()] };
        }
        return { fromLink: true, sources: [resultsFromLink()] };
      case "no-cache":
        if (shouldNotify) {
          return {
            fromLink: true,
            sources: [
              resultsFromCache(queryInfo.getDiff()),
              resultsFromLink()
            ]
          };
        }
        return { fromLink: true, sources: [resultsFromLink()] };
      case "standby":
        return { fromLink: false, sources: [] };
    }
  };
  QueryManager2.prototype.getQuery = function(queryId) {
    if (queryId && !this.queries.has(queryId)) {
      this.queries.set(queryId, new QueryInfo(this, queryId));
    }
    return this.queries.get(queryId);
  };
  QueryManager2.prototype.prepareContext = function(context) {
    if (context === void 0) {
      context = {};
    }
    var newContext = this.localState.prepareContext(context);
    return __assign(__assign({}, newContext), { clientAwareness: this.clientAwareness });
  };
  return QueryManager2;
}();
var hasSuggestedDevtools = false;
var ApolloClient = function() {
  function ApolloClient2(options2) {
    var _this = this;
    this.resetStoreCallbacks = [];
    this.clearStoreCallbacks = [];
    var uri2 = options2.uri, credentials = options2.credentials, headers = options2.headers, cache = options2.cache, _a2 = options2.ssrMode, ssrMode = _a2 === void 0 ? false : _a2, _b = options2.ssrForceFetchDelay, ssrForceFetchDelay = _b === void 0 ? 0 : _b, _c = options2.connectToDevTools, connectToDevTools = _c === void 0 ? typeof window === "object" && !window.__APOLLO_CLIENT__ && __DEV__ : _c, _d = options2.queryDeduplication, queryDeduplication = _d === void 0 ? true : _d, defaultOptions2 = options2.defaultOptions, _e = options2.assumeImmutableResults, assumeImmutableResults = _e === void 0 ? false : _e, resolvers = options2.resolvers, typeDefs = options2.typeDefs, fragmentMatcher = options2.fragmentMatcher, clientAwarenessName = options2.name, clientAwarenessVersion = options2.version;
    var link2 = options2.link;
    if (!link2) {
      link2 = uri2 ? new HttpLink({ uri: uri2, credentials, headers }) : ApolloLink.empty();
    }
    if (!cache) {
      throw __DEV__ ? new InvariantError("To initialize Apollo Client, you must specify a 'cache' property in the options object. \nFor more information, please visit: https://go.apollo.dev/c/docs") : new InvariantError(9);
    }
    this.link = link2;
    this.cache = cache;
    this.disableNetworkFetches = ssrMode || ssrForceFetchDelay > 0;
    this.queryDeduplication = queryDeduplication;
    this.defaultOptions = defaultOptions2 || /* @__PURE__ */ Object.create(null);
    this.typeDefs = typeDefs;
    if (ssrForceFetchDelay) {
      setTimeout(function() {
        return _this.disableNetworkFetches = false;
      }, ssrForceFetchDelay);
    }
    this.watchQuery = this.watchQuery.bind(this);
    this.query = this.query.bind(this);
    this.mutate = this.mutate.bind(this);
    this.resetStore = this.resetStore.bind(this);
    this.reFetchObservableQueries = this.reFetchObservableQueries.bind(this);
    if (connectToDevTools && typeof window === "object") {
      window.__APOLLO_CLIENT__ = this;
    }
    if (!hasSuggestedDevtools && connectToDevTools && __DEV__) {
      hasSuggestedDevtools = true;
      if (typeof window !== "undefined" && window.document && window.top === window.self && !window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__) {
        var nav = window.navigator;
        var ua = nav && nav.userAgent;
        var url = void 0;
        if (typeof ua === "string") {
          if (ua.indexOf("Chrome/") > -1) {
            url = "https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm";
          } else if (ua.indexOf("Firefox/") > -1) {
            url = "https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/";
          }
        }
        if (url) {
          __DEV__ && invariant$1.log("Download the Apollo DevTools for a better development experience: " + url);
        }
      }
    }
    this.version = version;
    this.localState = new LocalState({
      cache,
      client: this,
      resolvers,
      fragmentMatcher
    });
    this.queryManager = new QueryManager({
      cache: this.cache,
      link: this.link,
      defaultOptions: this.defaultOptions,
      queryDeduplication,
      ssrMode,
      clientAwareness: {
        name: clientAwarenessName,
        version: clientAwarenessVersion
      },
      localState: this.localState,
      assumeImmutableResults,
      onBroadcast: connectToDevTools ? function() {
        if (_this.devToolsHookCb) {
          _this.devToolsHookCb({
            action: {},
            state: {
              queries: _this.queryManager.getQueryStore(),
              mutations: _this.queryManager.mutationStore || {}
            },
            dataWithOptimisticResults: _this.cache.extract(true)
          });
        }
      } : void 0
    });
  }
  ApolloClient2.prototype.stop = function() {
    this.queryManager.stop();
  };
  ApolloClient2.prototype.watchQuery = function(options2) {
    if (this.defaultOptions.watchQuery) {
      options2 = mergeOptions(this.defaultOptions.watchQuery, options2);
    }
    if (this.disableNetworkFetches && (options2.fetchPolicy === "network-only" || options2.fetchPolicy === "cache-and-network")) {
      options2 = __assign(__assign({}, options2), { fetchPolicy: "cache-first" });
    }
    return this.queryManager.watchQuery(options2);
  };
  ApolloClient2.prototype.query = function(options2) {
    if (this.defaultOptions.query) {
      options2 = mergeOptions(this.defaultOptions.query, options2);
    }
    __DEV__ ? invariant$1(options2.fetchPolicy !== "cache-and-network", "The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only.") : invariant$1(options2.fetchPolicy !== "cache-and-network", 10);
    if (this.disableNetworkFetches && options2.fetchPolicy === "network-only") {
      options2 = __assign(__assign({}, options2), { fetchPolicy: "cache-first" });
    }
    return this.queryManager.query(options2);
  };
  ApolloClient2.prototype.mutate = function(options2) {
    if (this.defaultOptions.mutate) {
      options2 = mergeOptions(this.defaultOptions.mutate, options2);
    }
    return this.queryManager.mutate(options2);
  };
  ApolloClient2.prototype.subscribe = function(options2) {
    return this.queryManager.startGraphQLSubscription(options2);
  };
  ApolloClient2.prototype.readQuery = function(options2, optimistic) {
    if (optimistic === void 0) {
      optimistic = false;
    }
    return this.cache.readQuery(options2, optimistic);
  };
  ApolloClient2.prototype.readFragment = function(options2, optimistic) {
    if (optimistic === void 0) {
      optimistic = false;
    }
    return this.cache.readFragment(options2, optimistic);
  };
  ApolloClient2.prototype.writeQuery = function(options2) {
    var ref2 = this.cache.writeQuery(options2);
    if (options2.broadcast !== false) {
      this.queryManager.broadcastQueries();
    }
    return ref2;
  };
  ApolloClient2.prototype.writeFragment = function(options2) {
    var ref2 = this.cache.writeFragment(options2);
    if (options2.broadcast !== false) {
      this.queryManager.broadcastQueries();
    }
    return ref2;
  };
  ApolloClient2.prototype.__actionHookForDevTools = function(cb) {
    this.devToolsHookCb = cb;
  };
  ApolloClient2.prototype.__requestRaw = function(payload) {
    return execute(this.link, payload);
  };
  ApolloClient2.prototype.resetStore = function() {
    var _this = this;
    return Promise.resolve().then(function() {
      return _this.queryManager.clearStore({
        discardWatches: false
      });
    }).then(function() {
      return Promise.all(_this.resetStoreCallbacks.map(function(fn) {
        return fn();
      }));
    }).then(function() {
      return _this.reFetchObservableQueries();
    });
  };
  ApolloClient2.prototype.clearStore = function() {
    var _this = this;
    return Promise.resolve().then(function() {
      return _this.queryManager.clearStore({
        discardWatches: true
      });
    }).then(function() {
      return Promise.all(_this.clearStoreCallbacks.map(function(fn) {
        return fn();
      }));
    });
  };
  ApolloClient2.prototype.onResetStore = function(cb) {
    var _this = this;
    this.resetStoreCallbacks.push(cb);
    return function() {
      _this.resetStoreCallbacks = _this.resetStoreCallbacks.filter(function(c) {
        return c !== cb;
      });
    };
  };
  ApolloClient2.prototype.onClearStore = function(cb) {
    var _this = this;
    this.clearStoreCallbacks.push(cb);
    return function() {
      _this.clearStoreCallbacks = _this.clearStoreCallbacks.filter(function(c) {
        return c !== cb;
      });
    };
  };
  ApolloClient2.prototype.reFetchObservableQueries = function(includeStandby) {
    return this.queryManager.reFetchObservableQueries(includeStandby);
  };
  ApolloClient2.prototype.refetchQueries = function(options2) {
    var map = this.queryManager.refetchQueries(options2);
    var queries = [];
    var results = [];
    map.forEach(function(result2, obsQuery) {
      queries.push(obsQuery);
      results.push(result2);
    });
    var result = Promise.all(results);
    result.queries = queries;
    result.results = results;
    result.catch(function(error) {
      __DEV__ && invariant$1.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(error));
    });
    return result;
  };
  ApolloClient2.prototype.getObservableQueries = function(include) {
    if (include === void 0) {
      include = "active";
    }
    return this.queryManager.getObservableQueries(include);
  };
  ApolloClient2.prototype.extract = function(optimistic) {
    return this.cache.extract(optimistic);
  };
  ApolloClient2.prototype.restore = function(serializedState) {
    return this.cache.restore(serializedState);
  };
  ApolloClient2.prototype.addResolvers = function(resolvers) {
    this.localState.addResolvers(resolvers);
  };
  ApolloClient2.prototype.setResolvers = function(resolvers) {
    this.localState.setResolvers(resolvers);
  };
  ApolloClient2.prototype.getResolvers = function() {
    return this.localState.getResolvers();
  };
  ApolloClient2.prototype.setLocalStateFragmentMatcher = function(fragmentMatcher) {
    this.localState.setFragmentMatcher(fragmentMatcher);
  };
  ApolloClient2.prototype.setLink = function(newLink) {
    this.link = this.queryManager.link = newLink;
  };
  return ApolloClient2;
}();
function throttle(delay, noTrailing, callback, debounceMode) {
  var timeoutID;
  var cancelled = false;
  var lastExec = 0;
  function clearExistingTimeout() {
    if (timeoutID) {
      clearTimeout(timeoutID);
    }
  }
  function cancel() {
    clearExistingTimeout();
    cancelled = true;
  }
  if (typeof noTrailing !== "boolean") {
    debounceMode = callback;
    callback = noTrailing;
    noTrailing = void 0;
  }
  function wrapper() {
    for (var _len = arguments.length, arguments_ = new Array(_len), _key = 0; _key < _len; _key++) {
      arguments_[_key] = arguments[_key];
    }
    var self2 = this;
    var elapsed = Date.now() - lastExec;
    if (cancelled) {
      return;
    }
    function exec() {
      lastExec = Date.now();
      callback.apply(self2, arguments_);
    }
    function clear() {
      timeoutID = void 0;
    }
    if (debounceMode && !timeoutID) {
      exec();
    }
    clearExistingTimeout();
    if (debounceMode === void 0 && elapsed > delay) {
      exec();
    } else if (noTrailing !== true) {
      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === void 0 ? delay - elapsed : delay);
    }
  }
  wrapper.cancel = cancel;
  return wrapper;
}
function debounce(delay, atBegin, callback) {
  return callback === void 0 ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);
}
var DefaultApolloClient = Symbol("default-apollo-client");
var ApolloClients = Symbol("apollo-clients");
function resolveDefaultClient(providedApolloClients, providedApolloClient) {
  const resolvedClient = providedApolloClients ? providedApolloClients.default : providedApolloClient != null ? providedApolloClient : void 0;
  return resolvedClient;
}
function resolveClientWithId(providedApolloClients, clientId) {
  if (!providedApolloClients) {
    throw new Error(`No apolloClients injection found, tried to resolve '${clientId}' clientId`);
  }
  return providedApolloClients[clientId];
}
function useApolloClient(clientId) {
  let resolveImpl;
  const savedCurrentClients = currentApolloClients;
  if (!getCurrentInstance()) {
    resolveImpl = (id) => {
      if (id) {
        return resolveClientWithId(savedCurrentClients, id);
      }
      return resolveDefaultClient(savedCurrentClients, savedCurrentClients.default);
    };
  } else {
    const providedApolloClients = inject(ApolloClients, null);
    const providedApolloClient = inject(DefaultApolloClient, null);
    resolveImpl = (id) => {
      if (id) {
        const client2 = resolveClientWithId(providedApolloClients, id);
        if (client2) {
          return client2;
        }
        return resolveClientWithId(savedCurrentClients, id);
      }
      const client = resolveDefaultClient(providedApolloClients, providedApolloClient);
      if (client) {
        return client;
      }
      return resolveDefaultClient(savedCurrentClients, savedCurrentClients.default);
    };
  }
  function resolveClient(id = clientId) {
    const client = resolveImpl(id);
    if (!client) {
      throw new Error(`Apollo client with id ${id != null ? id : "default"} not found. Use provideApolloClient() if you are outside of a component setup.`);
    }
    return client;
  }
  return {
    resolveClient,
    get client() {
      return resolveClient();
    }
  };
}
var currentApolloClients = {};
function paramToRef(param) {
  if (isRef(param)) {
    return param;
  } else if (typeof param === "function") {
    return computed(param);
  } else {
    return ref(param);
  }
}
function paramToReactive(param) {
  if (isRef(param)) {
    return param;
  } else if (typeof param === "function") {
    return computed(param);
  } else if (param) {
    return reactive(param);
  } else {
    return param;
  }
}
function useEventHook() {
  const fns = [];
  function on(fn) {
    fns.push(fn);
    return {
      off: () => off(fn)
    };
  }
  function off(fn) {
    const index = fns.indexOf(fn);
    if (index !== -1) {
      fns.splice(index, 1);
    }
  }
  function trigger(param) {
    for (const fn of fns) {
      fn(param);
    }
  }
  function getCount() {
    return fns.length;
  }
  return {
    on,
    off,
    trigger,
    getCount
  };
}
function getAppTracking() {
  var _a2, _b, _c;
  const vm = getCurrentInstance();
  const root2 = (_c = (_a2 = vm == null ? void 0 : vm.$root) != null ? _a2 : vm == null ? void 0 : vm.root) != null ? _c : (_b = vm == null ? void 0 : vm.proxy) == null ? void 0 : _b.$root;
  if (!root2) {
    throw new Error("Instance $root not found");
  }
  let appTracking;
  if (!root2._apolloAppTracking) {
    appTracking = root2._apolloAppTracking = {
      queries: ref(0),
      mutations: ref(0),
      subscriptions: ref(0),
      components: /* @__PURE__ */ new Map()
    };
  } else {
    appTracking = root2._apolloAppTracking;
  }
  return {
    appTracking
  };
}
function getCurrentTracking() {
  const vm = getCurrentInstance();
  if (!vm) {
    throw new Error("getCurrentTracking must be used during a component setup");
  }
  const { appTracking } = getAppTracking();
  let tracking;
  if (!appTracking.components.has(vm)) {
    appTracking.components.set(vm, tracking = {
      queries: ref(0),
      mutations: ref(0),
      subscriptions: ref(0)
    });
    onUnmounted(() => {
      appTracking.components.delete(vm);
    });
  } else {
    tracking = appTracking.components.get(vm);
  }
  return {
    appTracking,
    tracking
  };
}
function track(loading, type) {
  const { appTracking, tracking } = getCurrentTracking();
  watch(loading, (value, oldValue) => {
    if (oldValue != null && value !== oldValue) {
      const mod = value ? 1 : -1;
      tracking[type].value += mod;
      appTracking[type].value += mod;
    }
  }, {
    immediate: true
  });
  onBeforeUnmount(() => {
    if (loading.value) {
      tracking[type].value--;
      appTracking[type].value--;
    }
  });
}
function trackQuery(loading) {
  track(loading, "queries");
}
function toApolloError(error) {
  if (!(error instanceof Error)) {
    return new ApolloError({
      networkError: Object.assign(new Error(), { originalError: error }),
      errorMessage: String(error)
    });
  }
  if (isApolloError(error)) {
    return error;
  }
  return new ApolloError({ networkError: error, errorMessage: error.message });
}
function resultErrorsToApolloError(errors) {
  return new ApolloError({
    graphQLErrors: errors,
    errorMessage: `GraphQL response contains errors: ${errors.map((e) => e.message).join(" | ")}`
  });
}
var isServer = typeof window === "undefined";
function useQuery(document, variables, options2) {
  return useQueryImpl(document, variables, options2);
}
function useQueryImpl(document, variables, options2 = {}, lazy = false) {
  var _a2;
  const vm = getCurrentInstance();
  const currentOptions = ref();
  const documentRef = paramToRef(document);
  const variablesRef = paramToRef(variables);
  const optionsRef = paramToReactive(options2);
  const result = ref();
  const resultEvent = useEventHook();
  const error = ref(null);
  const errorEvent = useEventHook();
  const loading = ref(false);
  vm && trackQuery(loading);
  const networkStatus = ref();
  let firstResolve;
  let firstReject;
  vm && ((_a2 = onServerPrefetch) == null ? void 0 : _a2(() => {
    var _a22;
    if (!isEnabled.value || isServer && ((_a22 = currentOptions.value) == null ? void 0 : _a22.prefetch) === false)
      return;
    return new Promise((resolve, reject) => {
      firstResolve = () => {
        resolve();
        firstResolve = void 0;
        firstReject = void 0;
      };
      firstReject = (apolloError) => {
        reject(apolloError);
        firstResolve = void 0;
        firstReject = void 0;
      };
    }).finally(stop);
  }));
  const { resolveClient } = useApolloClient();
  const query = ref();
  let observer;
  let started = false;
  let ignoreNextResult = false;
  function start() {
    var _a22, _b, _c, _d, _e;
    if (started || !isEnabled.value || isServer && ((_a22 = currentOptions.value) == null ? void 0 : _a22.prefetch) === false) {
      if (firstResolve)
        firstResolve();
      return;
    }
    started = true;
    error.value = null;
    loading.value = true;
    const client = resolveClient((_b = currentOptions.value) == null ? void 0 : _b.clientId);
    query.value = client.watchQuery({
      query: currentDocument,
      variables: currentVariables,
      ...currentOptions.value,
      ...isServer && ((_c = currentOptions.value) == null ? void 0 : _c.fetchPolicy) !== "no-cache" ? {
        fetchPolicy: "network-only"
      } : {}
    });
    startQuerySubscription();
    if (!isServer && (((_d = currentOptions.value) == null ? void 0 : _d.fetchPolicy) !== "no-cache" || currentOptions.value.notifyOnNetworkStatusChange)) {
      const currentResult = query.value.getCurrentResult(false);
      if (!currentResult.loading || currentResult.partial || ((_e = currentOptions.value) == null ? void 0 : _e.notifyOnNetworkStatusChange)) {
        onNextResult(currentResult);
        ignoreNextResult = !currentResult.loading;
      } else if (currentResult.error) {
        onError(currentResult.error);
        ignoreNextResult = true;
      }
    }
    if (!isServer) {
      for (const item of subscribeToMoreItems) {
        addSubscribeToMore(item);
      }
    }
  }
  function startQuerySubscription() {
    if (observer && !observer.closed)
      return;
    if (!query.value)
      return;
    ignoreNextResult = false;
    observer = query.value.subscribe({
      next: onNextResult,
      error: onError
    });
  }
  function onNextResult(queryResult) {
    var _a22;
    if (ignoreNextResult) {
      ignoreNextResult = false;
      return;
    }
    error.value = null;
    processNextResult(queryResult);
    if (!queryResult.error && ((_a22 = queryResult.errors) == null ? void 0 : _a22.length)) {
      processError(resultErrorsToApolloError(queryResult.errors));
    }
    if (firstResolve) {
      firstResolve();
      stop();
    }
  }
  function processNextResult(queryResult) {
    result.value = queryResult.data && Object.keys(queryResult.data).length === 0 ? void 0 : queryResult.data;
    loading.value = queryResult.loading;
    networkStatus.value = queryResult.networkStatus;
    resultEvent.trigger(queryResult);
  }
  function onError(queryError) {
    var _a22, _b, _c, _d;
    if (ignoreNextResult) {
      ignoreNextResult = false;
      return;
    }
    const apolloError = toApolloError(queryError);
    const client = resolveClient((_a22 = currentOptions.value) == null ? void 0 : _a22.clientId);
    const errorPolicy = ((_b = currentOptions.value) == null ? void 0 : _b.errorPolicy) || ((_d = (_c = client.defaultOptions) == null ? void 0 : _c.watchQuery) == null ? void 0 : _d.errorPolicy);
    if (errorPolicy && errorPolicy !== "none") {
      processNextResult(query.value.getCurrentResult());
    }
    processError(apolloError);
    if (firstReject) {
      firstReject(apolloError);
      stop();
    }
    resubscribeToQuery();
  }
  function processError(apolloError) {
    error.value = apolloError;
    loading.value = false;
    networkStatus.value = 8;
    errorEvent.trigger(apolloError);
  }
  function resubscribeToQuery() {
    if (!query.value)
      return;
    const lastError = query.value.getLastError();
    const lastResult = query.value.getLastResult();
    query.value.resetLastResults();
    startQuerySubscription();
    Object.assign(query.value, { lastError, lastResult });
  }
  let onStopHandlers = [];
  function stop() {
    if (firstResolve)
      firstResolve();
    if (!started)
      return;
    started = false;
    loading.value = false;
    onStopHandlers.forEach((handler) => handler());
    onStopHandlers = [];
    if (query.value) {
      query.value.stopPolling();
      query.value = null;
    }
    if (observer) {
      observer.unsubscribe();
      observer = void 0;
    }
  }
  let restarting = false;
  function baseRestart() {
    if (!started || restarting)
      return;
    restarting = true;
    nextTick(() => {
      if (started) {
        stop();
        start();
      }
      restarting = false;
    });
  }
  let debouncedRestart;
  let isRestartDebounceSetup = false;
  function updateRestartFn() {
    var _a22, _b;
    if (!currentOptions.value) {
      debouncedRestart = baseRestart;
    } else {
      if ((_a22 = currentOptions.value) == null ? void 0 : _a22.throttle) {
        debouncedRestart = throttle(currentOptions.value.throttle, baseRestart);
      } else if ((_b = currentOptions.value) == null ? void 0 : _b.debounce) {
        debouncedRestart = debounce(currentOptions.value.debounce, baseRestart);
      } else {
        debouncedRestart = baseRestart;
      }
      isRestartDebounceSetup = true;
    }
  }
  function restart() {
    if (!isRestartDebounceSetup)
      updateRestartFn();
    debouncedRestart();
  }
  let currentDocument;
  watch(documentRef, (value) => {
    currentDocument = value;
    restart();
  }, {
    immediate: true
  });
  let currentVariables;
  let currentVariablesSerialized;
  watch(variablesRef, (value, oldValue) => {
    const serialized = JSON.stringify(value);
    if (serialized !== currentVariablesSerialized) {
      currentVariables = value;
      restart();
    }
    currentVariablesSerialized = serialized;
  }, {
    deep: true,
    immediate: true
  });
  watch(() => unref(optionsRef), (value) => {
    if (currentOptions.value && (currentOptions.value.throttle !== value.throttle || currentOptions.value.debounce !== value.debounce)) {
      updateRestartFn();
    }
    currentOptions.value = value;
    restart();
  }, {
    deep: true,
    immediate: true
  });
  function refetch(variables2 = void 0) {
    if (query.value) {
      if (variables2) {
        currentVariables = variables2;
      }
      error.value = null;
      loading.value = true;
      return query.value.refetch(variables2).then((refetchResult) => {
        var _a22;
        const currentResult = (_a22 = query.value) == null ? void 0 : _a22.getCurrentResult();
        currentResult && processNextResult(currentResult);
        return refetchResult;
      });
    }
  }
  function fetchMore(options22) {
    if (query.value) {
      error.value = null;
      loading.value = true;
      return query.value.fetchMore(options22).then((fetchMoreResult) => {
        var _a22;
        const currentResult = (_a22 = query.value) == null ? void 0 : _a22.getCurrentResult();
        currentResult && processNextResult(currentResult);
        return fetchMoreResult;
      });
    }
  }
  const subscribeToMoreItems = [];
  function subscribeToMore(options22) {
    if (isServer)
      return;
    const optionsRef2 = paramToRef(options22);
    watch(optionsRef2, (value, oldValue, onCleanup) => {
      const index = subscribeToMoreItems.findIndex((item2) => item2.options === oldValue);
      if (index !== -1) {
        subscribeToMoreItems.splice(index, 1);
      }
      const item = {
        options: value,
        unsubscribeFns: []
      };
      subscribeToMoreItems.push(item);
      addSubscribeToMore(item);
      onCleanup(() => {
        item.unsubscribeFns.forEach((fn) => fn());
        item.unsubscribeFns = [];
      });
    }, {
      immediate: true
    });
  }
  function addSubscribeToMore(item) {
    if (!started)
      return;
    if (!query.value) {
      throw new Error("Query is not defined");
    }
    const unsubscribe = query.value.subscribeToMore(item.options);
    onStopHandlers.push(unsubscribe);
    item.unsubscribeFns.push(unsubscribe);
  }
  const forceDisabled = ref(lazy);
  const enabledOption = computed(() => !currentOptions.value || currentOptions.value.enabled == null || currentOptions.value.enabled);
  const isEnabled = computed(() => enabledOption.value && !forceDisabled.value);
  watch(isEnabled, (value) => {
    if (value) {
      start();
    } else {
      stop();
    }
  }, {
    immediate: true
  });
  vm && onBeforeUnmount(() => {
    stop();
    subscribeToMoreItems.length = 0;
  });
  return {
    result,
    loading,
    networkStatus,
    error,
    start,
    stop,
    restart,
    forceDisabled,
    document: documentRef,
    variables: variablesRef,
    options: optionsRef,
    query,
    refetch,
    fetchMore,
    subscribeToMore,
    onResult: resultEvent.on,
    onError: errorEvent.on
  };
}
function isLikeCloseEvent$1(val) {
  return isNonNullObject(val) && "code" in val && "reason" in val;
}
function isLikeErrorEvent(err) {
  var _a2;
  return isNonNullObject(err) && ((_a2 = err.target) === null || _a2 === void 0 ? void 0 : _a2.readyState) === WebSocket.CLOSED;
}
var GraphQLWsLink = function(_super) {
  __extends(GraphQLWsLink2, _super);
  function GraphQLWsLink2(client) {
    var _this = _super.call(this) || this;
    _this.client = client;
    return _this;
  }
  GraphQLWsLink2.prototype.request = function(operation) {
    var _this = this;
    return new Observable(function(observer) {
      return _this.client.subscribe(__assign(__assign({}, operation), { query: print(operation.query) }), {
        next: observer.next.bind(observer),
        complete: observer.complete.bind(observer),
        error: function(err) {
          if (err instanceof Error) {
            return observer.error(err);
          }
          var likeClose = isLikeCloseEvent$1(err);
          if (likeClose || isLikeErrorEvent(err)) {
            return observer.error(new Error("Socket closed".concat(likeClose ? " with event ".concat(err.code) : "").concat(likeClose ? " ".concat(err.reason) : "")));
          }
          return observer.error(new ApolloError({
            graphQLErrors: Array.isArray(err) ? err : [err]
          }));
        }
      });
    });
  };
  return GraphQLWsLink2;
}(ApolloLink);
function extendedTypeof(val) {
  if (val === null) {
    return "null";
  }
  if (Array.isArray(val)) {
    return "array";
  }
  return typeof val;
}
function isObject(val) {
  return extendedTypeof(val) === "object";
}
function areGraphQLErrors(obj) {
  return Array.isArray(obj) && obj.length > 0 && obj.every((ob) => "message" in ob);
}
function limitCloseReason(reason, whenTooLong) {
  return reason.length < 124 ? reason : whenTooLong;
}
const GRAPHQL_TRANSPORT_WS_PROTOCOL = "graphql-transport-ws";
var CloseCode;
(function(CloseCode2) {
  CloseCode2[CloseCode2["InternalServerError"] = 4500] = "InternalServerError";
  CloseCode2[CloseCode2["InternalClientError"] = 4005] = "InternalClientError";
  CloseCode2[CloseCode2["BadRequest"] = 4400] = "BadRequest";
  CloseCode2[CloseCode2["BadResponse"] = 4004] = "BadResponse";
  CloseCode2[CloseCode2["Unauthorized"] = 4401] = "Unauthorized";
  CloseCode2[CloseCode2["Forbidden"] = 4403] = "Forbidden";
  CloseCode2[CloseCode2["SubprotocolNotAcceptable"] = 4406] = "SubprotocolNotAcceptable";
  CloseCode2[CloseCode2["ConnectionInitialisationTimeout"] = 4408] = "ConnectionInitialisationTimeout";
  CloseCode2[CloseCode2["ConnectionAcknowledgementTimeout"] = 4504] = "ConnectionAcknowledgementTimeout";
  CloseCode2[CloseCode2["SubscriberAlreadyExists"] = 4409] = "SubscriberAlreadyExists";
  CloseCode2[CloseCode2["TooManyInitialisationRequests"] = 4429] = "TooManyInitialisationRequests";
})(CloseCode || (CloseCode = {}));
var MessageType;
(function(MessageType2) {
  MessageType2["ConnectionInit"] = "connection_init";
  MessageType2["ConnectionAck"] = "connection_ack";
  MessageType2["Ping"] = "ping";
  MessageType2["Pong"] = "pong";
  MessageType2["Subscribe"] = "subscribe";
  MessageType2["Next"] = "next";
  MessageType2["Error"] = "error";
  MessageType2["Complete"] = "complete";
})(MessageType || (MessageType = {}));
function validateMessage(val) {
  if (!isObject(val)) {
    throw new Error(`Message is expected to be an object, but got ${extendedTypeof(val)}`);
  }
  if (!val.type) {
    throw new Error(`Message is missing the 'type' property`);
  }
  if (typeof val.type !== "string") {
    throw new Error(`Message is expects the 'type' property to be a string, but got ${extendedTypeof(val.type)}`);
  }
  switch (val.type) {
    case MessageType.ConnectionInit:
    case MessageType.ConnectionAck:
    case MessageType.Ping:
    case MessageType.Pong: {
      if (val.payload != null && !isObject(val.payload)) {
        throw new Error(`"${val.type}" message expects the 'payload' property to be an object or nullish or missing, but got "${val.payload}"`);
      }
      break;
    }
    case MessageType.Subscribe: {
      if (typeof val.id !== "string") {
        throw new Error(`"${val.type}" message expects the 'id' property to be a string, but got ${extendedTypeof(val.id)}`);
      }
      if (!val.id) {
        throw new Error(`"${val.type}" message requires a non-empty 'id' property`);
      }
      if (!isObject(val.payload)) {
        throw new Error(`"${val.type}" message expects the 'payload' property to be an object, but got ${extendedTypeof(val.payload)}`);
      }
      if (typeof val.payload.query !== "string") {
        throw new Error(`"${val.type}" message payload expects the 'query' property to be a string, but got ${extendedTypeof(val.payload.query)}`);
      }
      if (val.payload.variables != null && !isObject(val.payload.variables)) {
        throw new Error(`"${val.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${extendedTypeof(val.payload.variables)}`);
      }
      if (val.payload.operationName != null && extendedTypeof(val.payload.operationName) !== "string") {
        throw new Error(`"${val.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${extendedTypeof(val.payload.operationName)}`);
      }
      if (val.payload.extensions != null && !isObject(val.payload.extensions)) {
        throw new Error(`"${val.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${extendedTypeof(val.payload.extensions)}`);
      }
      break;
    }
    case MessageType.Next: {
      if (typeof val.id !== "string") {
        throw new Error(`"${val.type}" message expects the 'id' property to be a string, but got ${extendedTypeof(val.id)}`);
      }
      if (!val.id) {
        throw new Error(`"${val.type}" message requires a non-empty 'id' property`);
      }
      if (!isObject(val.payload)) {
        throw new Error(`"${val.type}" message expects the 'payload' property to be an object, but got ${extendedTypeof(val.payload)}`);
      }
      break;
    }
    case MessageType.Error: {
      if (typeof val.id !== "string") {
        throw new Error(`"${val.type}" message expects the 'id' property to be a string, but got ${extendedTypeof(val.id)}`);
      }
      if (!val.id) {
        throw new Error(`"${val.type}" message requires a non-empty 'id' property`);
      }
      if (!areGraphQLErrors(val.payload)) {
        throw new Error(`"${val.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(val.payload)}`);
      }
      break;
    }
    case MessageType.Complete: {
      if (typeof val.id !== "string") {
        throw new Error(`"${val.type}" message expects the 'id' property to be a string, but got ${extendedTypeof(val.id)}`);
      }
      if (!val.id) {
        throw new Error(`"${val.type}" message requires a non-empty 'id' property`);
      }
      break;
    }
    default:
      throw new Error(`Invalid message 'type' property "${val.type}"`);
  }
  return val;
}
function parseMessage(data, reviver) {
  return validateMessage(typeof data === "string" ? JSON.parse(data, reviver) : data);
}
function stringifyMessage(msg, replacer) {
  validateMessage(msg);
  return JSON.stringify(msg, replacer);
}
function createClient(options2) {
  const {
    url,
    connectionParams,
    lazy = true,
    onNonLazyError = console.error,
    lazyCloseTimeout: lazyCloseTimeoutMs = 0,
    keepAlive = 0,
    disablePong,
    connectionAckWaitTimeout = 0,
    retryAttempts = 5,
    retryWait = async function randomisedExponentialBackoff(retries2) {
      let retryDelay = 1e3;
      for (let i = 0; i < retries2; i++) {
        retryDelay *= 2;
      }
      await new Promise((resolve) => setTimeout(resolve, retryDelay + Math.floor(Math.random() * (3e3 - 300) + 300)));
    },
    shouldRetry = isLikeCloseEvent,
    isFatalConnectionProblem,
    on,
    webSocketImpl,
    generateID = function generateUUID() {
      return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
        const r = Math.random() * 16 | 0, v = c == "x" ? r : r & 3 | 8;
        return v.toString(16);
      });
    },
    jsonMessageReplacer: replacer,
    jsonMessageReviver: reviver
  } = options2;
  let ws;
  if (webSocketImpl) {
    if (!isWebSocket(webSocketImpl)) {
      throw new Error("Invalid WebSocket implementation provided");
    }
    ws = webSocketImpl;
  } else if (typeof WebSocket !== "undefined") {
    ws = WebSocket;
  } else if (typeof global !== "undefined") {
    ws = global.WebSocket || global.MozWebSocket;
  } else if (typeof window !== "undefined") {
    ws = window.WebSocket || window.MozWebSocket;
  }
  if (!ws)
    throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");
  const WebSocketImpl = ws;
  const emitter = (() => {
    const message = (() => {
      const listeners2 = {};
      return {
        on(id, listener) {
          listeners2[id] = listener;
          return () => {
            delete listeners2[id];
          };
        },
        emit(message2) {
          var _a2;
          if ("id" in message2)
            (_a2 = listeners2[message2.id]) === null || _a2 === void 0 ? void 0 : _a2.call(listeners2, message2);
        }
      };
    })();
    const listeners = {
      connecting: (on === null || on === void 0 ? void 0 : on.connecting) ? [on.connecting] : [],
      opened: (on === null || on === void 0 ? void 0 : on.opened) ? [on.opened] : [],
      connected: (on === null || on === void 0 ? void 0 : on.connected) ? [on.connected] : [],
      ping: (on === null || on === void 0 ? void 0 : on.ping) ? [on.ping] : [],
      pong: (on === null || on === void 0 ? void 0 : on.pong) ? [on.pong] : [],
      message: (on === null || on === void 0 ? void 0 : on.message) ? [message.emit, on.message] : [message.emit],
      closed: (on === null || on === void 0 ? void 0 : on.closed) ? [on.closed] : [],
      error: (on === null || on === void 0 ? void 0 : on.error) ? [on.error] : []
    };
    return {
      onMessage: message.on,
      on(event, listener) {
        const l = listeners[event];
        l.push(listener);
        return () => {
          l.splice(l.indexOf(listener), 1);
        };
      },
      emit(event, ...args) {
        for (const listener of [...listeners[event]]) {
          listener(...args);
        }
      }
    };
  })();
  function errorOrClosed(cb) {
    const listening = [
      emitter.on("error", (err) => {
        listening.forEach((unlisten) => unlisten());
        cb(err);
      }),
      emitter.on("closed", (event) => {
        listening.forEach((unlisten) => unlisten());
        cb(event);
      })
    ];
  }
  let connecting, locks = 0, lazyCloseTimeout, retrying = false, retries = 0, disposed = false;
  async function connect() {
    clearTimeout(lazyCloseTimeout);
    const [socket, throwOnClose] = await (connecting !== null && connecting !== void 0 ? connecting : connecting = new Promise((connected, denied) => (async () => {
      if (retrying) {
        await retryWait(retries);
        if (!locks) {
          connecting = void 0;
          return denied({ code: 1e3, reason: "All Subscriptions Gone" });
        }
        retries++;
      }
      emitter.emit("connecting");
      const socket2 = new WebSocketImpl(typeof url === "function" ? await url() : url, GRAPHQL_TRANSPORT_WS_PROTOCOL);
      let connectionAckTimeout, queuedPing;
      function enqueuePing() {
        if (isFinite(keepAlive) && keepAlive > 0) {
          clearTimeout(queuedPing);
          queuedPing = setTimeout(() => {
            if (socket2.readyState === WebSocketImpl.OPEN) {
              socket2.send(stringifyMessage({ type: MessageType.Ping }));
              emitter.emit("ping", false, void 0);
            }
          }, keepAlive);
        }
      }
      errorOrClosed((errOrEvent) => {
        connecting = void 0;
        clearTimeout(connectionAckTimeout);
        clearTimeout(queuedPing);
        denied(errOrEvent);
        if (isLikeCloseEvent(errOrEvent) && errOrEvent.code === 4499) {
          socket2.close(4499, "Terminated");
          socket2.onerror = null;
          socket2.onclose = null;
        }
      });
      socket2.onerror = (err) => emitter.emit("error", err);
      socket2.onclose = (event) => emitter.emit("closed", event);
      socket2.onopen = async () => {
        try {
          emitter.emit("opened", socket2);
          const payload = typeof connectionParams === "function" ? await connectionParams() : connectionParams;
          if (socket2.readyState !== WebSocketImpl.OPEN)
            return;
          socket2.send(stringifyMessage(payload ? {
            type: MessageType.ConnectionInit,
            payload
          } : {
            type: MessageType.ConnectionInit
          }, replacer));
          if (isFinite(connectionAckWaitTimeout) && connectionAckWaitTimeout > 0) {
            connectionAckTimeout = setTimeout(() => {
              socket2.close(CloseCode.ConnectionAcknowledgementTimeout, "Connection acknowledgement timeout");
            }, connectionAckWaitTimeout);
          }
          enqueuePing();
        } catch (err) {
          emitter.emit("error", err);
          socket2.close(CloseCode.InternalClientError, limitCloseReason(err instanceof Error ? err.message : new Error(err).message, "Internal client error"));
        }
      };
      let acknowledged = false;
      socket2.onmessage = ({ data }) => {
        try {
          const message = parseMessage(data, reviver);
          emitter.emit("message", message);
          if (message.type === "ping" || message.type === "pong") {
            emitter.emit(message.type, true, message.payload);
            if (message.type === "pong") {
              enqueuePing();
            } else if (!disablePong) {
              socket2.send(stringifyMessage(message.payload ? {
                type: MessageType.Pong,
                payload: message.payload
              } : {
                type: MessageType.Pong
              }));
              emitter.emit("pong", false, message.payload);
            }
            return;
          }
          if (acknowledged)
            return;
          if (message.type !== MessageType.ConnectionAck)
            throw new Error(`First message cannot be of type ${message.type}`);
          clearTimeout(connectionAckTimeout);
          acknowledged = true;
          emitter.emit("connected", socket2, message.payload);
          retrying = false;
          retries = 0;
          connected([
            socket2,
            new Promise((_, reject) => errorOrClosed(reject))
          ]);
        } catch (err) {
          socket2.onmessage = null;
          emitter.emit("error", err);
          socket2.close(CloseCode.BadResponse, limitCloseReason(err instanceof Error ? err.message : new Error(err).message, "Bad response"));
        }
      };
    })()));
    if (socket.readyState === WebSocketImpl.CLOSING)
      await throwOnClose;
    let release = () => {
    };
    const released = new Promise((resolve) => release = resolve);
    return [
      socket,
      release,
      Promise.race([
        released.then(() => {
          if (!locks) {
            const complete = () => socket.close(1e3, "Normal Closure");
            if (isFinite(lazyCloseTimeoutMs) && lazyCloseTimeoutMs > 0) {
              lazyCloseTimeout = setTimeout(() => {
                if (socket.readyState === WebSocketImpl.OPEN)
                  complete();
              }, lazyCloseTimeoutMs);
            } else {
              complete();
            }
          }
        }),
        throwOnClose
      ])
    ];
  }
  function shouldRetryConnectOrThrow(errOrCloseEvent) {
    if (isLikeCloseEvent(errOrCloseEvent) && (isFatalInternalCloseCode(errOrCloseEvent.code) || [
      CloseCode.InternalServerError,
      CloseCode.InternalClientError,
      CloseCode.BadRequest,
      CloseCode.BadResponse,
      CloseCode.Unauthorized,
      CloseCode.SubprotocolNotAcceptable,
      CloseCode.SubscriberAlreadyExists,
      CloseCode.TooManyInitialisationRequests
    ].includes(errOrCloseEvent.code)))
      throw errOrCloseEvent;
    if (disposed)
      return false;
    if (isLikeCloseEvent(errOrCloseEvent) && errOrCloseEvent.code === 1e3)
      return locks > 0;
    if (!retryAttempts || retries >= retryAttempts)
      throw errOrCloseEvent;
    if (!shouldRetry(errOrCloseEvent))
      throw errOrCloseEvent;
    if (isFatalConnectionProblem === null || isFatalConnectionProblem === void 0 ? void 0 : isFatalConnectionProblem(errOrCloseEvent))
      throw errOrCloseEvent;
    return retrying = true;
  }
  if (!lazy) {
    (async () => {
      locks++;
      for (; ; ) {
        try {
          const [, , throwOnClose] = await connect();
          await throwOnClose;
        } catch (errOrCloseEvent) {
          try {
            if (!shouldRetryConnectOrThrow(errOrCloseEvent))
              return;
          } catch (errOrCloseEvent2) {
            return onNonLazyError === null || onNonLazyError === void 0 ? void 0 : onNonLazyError(errOrCloseEvent2);
          }
        }
      }
    })();
  }
  return {
    on: emitter.on,
    subscribe(payload, sink) {
      const id = generateID(payload);
      let done = false, errored = false, releaser = () => {
        locks--;
        done = true;
      };
      (async () => {
        locks++;
        for (; ; ) {
          try {
            const [socket, release, waitForReleaseOrThrowOnClose] = await connect();
            if (done)
              return release();
            const unlisten = emitter.onMessage(id, (message) => {
              switch (message.type) {
                case MessageType.Next: {
                  sink.next(message.payload);
                  return;
                }
                case MessageType.Error: {
                  errored = true, done = true;
                  sink.error(message.payload);
                  releaser();
                  return;
                }
                case MessageType.Complete: {
                  done = true;
                  releaser();
                  return;
                }
              }
            });
            socket.send(stringifyMessage({
              id,
              type: MessageType.Subscribe,
              payload
            }, replacer));
            releaser = () => {
              if (!done && socket.readyState === WebSocketImpl.OPEN)
                socket.send(stringifyMessage({
                  id,
                  type: MessageType.Complete
                }, replacer));
              locks--;
              done = true;
              release();
            };
            await waitForReleaseOrThrowOnClose.finally(unlisten);
            return;
          } catch (errOrCloseEvent) {
            if (!shouldRetryConnectOrThrow(errOrCloseEvent))
              return;
          }
        }
      })().then(() => {
        if (!errored)
          sink.complete();
      }).catch((err) => {
        sink.error(err);
      });
      return () => {
        if (!done)
          releaser();
      };
    },
    async dispose() {
      disposed = true;
      if (connecting) {
        const [socket] = await connecting;
        socket.close(1e3, "Normal Closure");
      }
    },
    terminate() {
      if (connecting) {
        emitter.emit("closed", {
          code: 4499,
          reason: "Terminated",
          wasClean: false
        });
      }
    }
  };
}
function isLikeCloseEvent(val) {
  return isObject(val) && "code" in val && "reason" in val;
}
function isFatalInternalCloseCode(code) {
  if ([
    1e3,
    1001,
    1006,
    1005,
    1012,
    1013,
    1013
  ].includes(code))
    return false;
  return code >= 1e3 && code <= 1999;
}
function isWebSocket(val) {
  return typeof val === "function" && "constructor" in val && "CLOSED" in val && "CLOSING" in val && "CONNECTING" in val && "OPEN" in val;
}
const HOST = "192.168.0.119";
const wsLink = new GraphQLWsLink(
  createClient({
    url: {}.WS_URI || `ws://${HOST}:9000/graphql`
  })
);
const uri = `http://${HOST}:9000/graphql`;
console.log(uri);
const httpLink = new createHttpLink({
  uri
});
const link = split(
  ({ query }) => {
    const definition = getMainDefinition(query);
    return definition.kind === "OperationDefinition" && definition.operation === "subscription";
  },
  wsLink,
  httpLink
);
function getClientOptions(options2) {
  return Object.assign(
    {
      link,
      cache: new InMemoryCache(),
      connectToDevTools: true
    }
  );
}
const options = getClientOptions();
const apolloClient = new ApolloClient(options);
var apollo = boot(
  ({ app }) => {
    const apolloClients = {
      default: apolloClient
    };
    app.provide(ApolloClients, apolloClients);
  }
);
var apollo$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": apollo,
  apolloClient
}, Symbol.toStringTag, { value: "Module" }));
export { Kind as K, Location as L, SYMBOL_TO_STRING_TAG as S, Token as T, __assign as _, Source as a, apolloClient as b, apollo$1 as c, dedentBlockStringValue as d, isSource as i, useQuery as u };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBvbGxvLjk2ZGYyMTdlLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzLWludmFyaWFudC9saWIvaW52YXJpYW50LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9nbG9iYWxzL21heWJlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9nbG9iYWxzL2dsb2JhbC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvZ2xvYmFscy9ERVYuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtaW52YXJpYW50L3Byb2Nlc3MvaW5kZXguanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9wb2x5ZmlsbHMvc3ltYm9scy5tanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS9raW5kcy5tanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9qc3V0aWxzL2ludmFyaWFudC5tanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9qc3V0aWxzL25vZGVqc0N1c3RvbUluc3BlY3RTeW1ib2wubWpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvanN1dGlscy9kZWZpbmVJbnNwZWN0Lm1qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9ncmFwaHFsL2xhbmd1YWdlL2FzdC5tanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9qc3V0aWxzL2luc3BlY3QubWpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvanN1dGlscy9kZXZBc3NlcnQubWpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvanN1dGlscy9pbnN0YW5jZU9mLm1qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9ncmFwaHFsL2xhbmd1YWdlL3NvdXJjZS5tanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS9ibG9ja1N0cmluZy5tanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS92aXNpdG9yLm1qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9ncmFwaHFsL2xhbmd1YWdlL3ByaW50ZXIubWpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvcHJlZGljYXRlcy5tanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2dsb2JhbHMvZml4LWdyYXBocWwuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2dsb2JhbHMvaW5kZXguanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2dyYXBocWwvZGlyZWN0aXZlcy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvZ3JhcGhxbC9mcmFnbWVudHMuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2NvbW1vbi9vYmplY3RzLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9ncmFwaHFsL3N0b3JlVXRpbHMuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2dyYXBocWwvZ2V0RnJvbUFTVC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvY29tbW9uL2FycmF5cy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvZ3JhcGhxbC90cmFuc2Zvcm0uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2NvbW1vbi9tZXJnZURlZXAuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvemVuLW9ic2VydmFibGUtdHMvbW9kdWxlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N5bWJvbC1vYnNlcnZhYmxlL2VzL3BvbnlmaWxsLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N5bWJvbC1vYnNlcnZhYmxlL2VzL2luZGV4LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9vYnNlcnZhYmxlcy9PYnNlcnZhYmxlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9jb21tb24vY2xvbmVEZWVwLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9jb21tb24vbWF5YmVEZWVwRnJlZXplLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9vYnNlcnZhYmxlcy9pdGVyYXRpb24uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL29ic2VydmFibGVzL2FzeW5jTWFwLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9jb21tb24vY2FuVXNlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9vYnNlcnZhYmxlcy9zdWJjbGFzc2luZy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvb2JzZXJ2YWJsZXMvQ29uY2FzdC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvY29tbW9uL2luY3JlbWVudGFsUmVzdWx0LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9jb21tb24vZXJyb3JIYW5kbGluZy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvY29tbW9uL2NvbXBhY3QuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2NvbW1vbi9tYWtlVW5pcXVlSWQuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2NvbW1vbi9zdHJpbmdpZnlGb3JEaXNwbGF5LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9jb21tb24vbWVyZ2VPcHRpb25zLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvdXRpbHMvZnJvbUVycm9yLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvdXRpbHMvdGhyb3dTZXJ2ZXJFcnJvci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9saW5rL3V0aWxzL3ZhbGlkYXRlT3BlcmF0aW9uLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvdXRpbHMvY3JlYXRlT3BlcmF0aW9uLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvdXRpbHMvdHJhbnNmb3JtT3BlcmF0aW9uLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvY29yZS9BcG9sbG9MaW5rLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvY29yZS9zcGxpdC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9saW5rL2NvcmUvZXhlY3V0ZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC92ZXJzaW9uLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9jb21tb24vcmVzcG9uc2VJdGVyYXRvci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9saW5rL2h0dHAvaXRlcmF0b3JzL2FzeW5jLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvaHR0cC9pdGVyYXRvcnMvbm9kZVN0cmVhbS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9saW5rL2h0dHAvaXRlcmF0b3JzL3Byb21pc2UuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL2l0ZXJhdG9ycy9yZWFkZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL3Jlc3BvbnNlSXRlcmF0b3IuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvZXJyb3JzL2luZGV4LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvaHR0cC9wYXJzZUFuZENoZWNrSHR0cFJlc3BvbnNlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvaHR0cC9zZXJpYWxpemVGZXRjaFBhcmFtZXRlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9saW5rL2h0dHAvc2VsZWN0SHR0cE9wdGlvbnNBbmRCb2R5LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvaHR0cC9jaGVja0ZldGNoZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL2NyZWF0ZVNpZ25hbElmU3VwcG9ydGVkLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvaHR0cC9zZWxlY3RVUkkuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL3Jld3JpdGVVUklGb3JHRVQuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL2NyZWF0ZUh0dHBMaW5rLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvaHR0cC9IdHRwTGluay5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ad3J5L2VxdWFsaXR5L2xpYi9pbmRleC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ad3J5L3RyaWUvbGliL3RyaWUuZXNtLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B3cnkvY29udGV4dC9saWIvc2xvdC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcHRpbWlzbS9saWIvYnVuZGxlLmVzbS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jYWNoZS9jb3JlL2NhY2hlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NhY2hlL2NvcmUvdHlwZXMvY29tbW9uLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NhY2hlL2lubWVtb3J5L2hlbHBlcnMuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvY2FjaGUvaW5tZW1vcnkvZW50aXR5U3RvcmUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvY2FjaGUvaW5tZW1vcnkvb2JqZWN0LWNhbm9uLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NhY2hlL2lubWVtb3J5L3JlYWRGcm9tU3RvcmUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvY2FjaGUvaW5tZW1vcnkvcmVhY3RpdmVWYXJzLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NhY2hlL2lubWVtb3J5L2tleS1leHRyYWN0b3IuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvY2FjaGUvaW5tZW1vcnkvcG9saWNpZXMuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvY2FjaGUvaW5tZW1vcnkvd3JpdGVUb1N0b3JlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NhY2hlL2lubWVtb3J5L2luTWVtb3J5Q2FjaGUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvY29yZS9uZXR3b3JrU3RhdHVzLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NvcmUvT2JzZXJ2YWJsZVF1ZXJ5LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NvcmUvTG9jYWxTdGF0ZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jb3JlL1F1ZXJ5SW5mby5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jb3JlL1F1ZXJ5TWFuYWdlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jb3JlL0Fwb2xsb0NsaWVudC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy90aHJvdHRsZS1kZWJvdW5jZS9lc20vaW5kZXguanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9hcG9sbG8tY29tcG9zYWJsZS9kaXN0L2luZGV4LmVzbS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9saW5rL3N1YnNjcmlwdGlvbnMvaW5kZXguanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC13cy9saWIvdXRpbHMubWpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwtd3MvbGliL2NvbW1vbi5tanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC13cy9saWIvY2xpZW50Lm1qcyIsIi4uLy4uLy4uL3NyYy9hcG9sbG8vaW5kZXguanMiLCIuLi8uLi8uLi9zcmMvYm9vdC9hcG9sbG8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2VzRGVjb3JhdGUoY3RvciwgZGVzY3JpcHRvckluLCBkZWNvcmF0b3JzLCBjb250ZXh0SW4sIGluaXRpYWxpemVycywgZXh0cmFJbml0aWFsaXplcnMpIHtcclxuICAgIGZ1bmN0aW9uIGFjY2VwdChmKSB7IGlmIChmICE9PSB2b2lkIDAgJiYgdHlwZW9mIGYgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZ1bmN0aW9uIGV4cGVjdGVkXCIpOyByZXR1cm4gZjsgfVxyXG4gICAgdmFyIGtpbmQgPSBjb250ZXh0SW4ua2luZCwga2V5ID0ga2luZCA9PT0gXCJnZXR0ZXJcIiA/IFwiZ2V0XCIgOiBraW5kID09PSBcInNldHRlclwiID8gXCJzZXRcIiA6IFwidmFsdWVcIjtcclxuICAgIHZhciB0YXJnZXQgPSAhZGVzY3JpcHRvckluICYmIGN0b3IgPyBjb250ZXh0SW5bXCJzdGF0aWNcIl0gPyBjdG9yIDogY3Rvci5wcm90b3R5cGUgOiBudWxsO1xyXG4gICAgdmFyIGRlc2NyaXB0b3IgPSBkZXNjcmlwdG9ySW4gfHwgKHRhcmdldCA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBjb250ZXh0SW4ubmFtZSkgOiB7fSk7XHJcbiAgICB2YXIgXywgZG9uZSA9IGZhbHNlO1xyXG4gICAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICB2YXIgY29udGV4dCA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluKSBjb250ZXh0W3BdID0gcCA9PT0gXCJhY2Nlc3NcIiA/IHt9IDogY29udGV4dEluW3BdO1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluLmFjY2VzcykgY29udGV4dC5hY2Nlc3NbcF0gPSBjb250ZXh0SW4uYWNjZXNzW3BdO1xyXG4gICAgICAgIGNvbnRleHQuYWRkSW5pdGlhbGl6ZXIgPSBmdW5jdGlvbiAoZikgeyBpZiAoZG9uZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgaW5pdGlhbGl6ZXJzIGFmdGVyIGRlY29yYXRpb24gaGFzIGNvbXBsZXRlZFwiKTsgZXh0cmFJbml0aWFsaXplcnMucHVzaChhY2NlcHQoZiB8fCBudWxsKSk7IH07XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9ICgwLCBkZWNvcmF0b3JzW2ldKShraW5kID09PSBcImFjY2Vzc29yXCIgPyB7IGdldDogZGVzY3JpcHRvci5nZXQsIHNldDogZGVzY3JpcHRvci5zZXQgfSA6IGRlc2NyaXB0b3Jba2V5XSwgY29udGV4dCk7XHJcbiAgICAgICAgaWYgKGtpbmQgPT09IFwiYWNjZXNzb3JcIikge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHR5cGVvZiByZXN1bHQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5nZXQpKSBkZXNjcmlwdG9yLmdldCA9IF87XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5zZXQpKSBkZXNjcmlwdG9yLnNldCA9IF87XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5pbml0KSkgaW5pdGlhbGl6ZXJzLnB1c2goXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKF8gPSBhY2NlcHQocmVzdWx0KSkge1xyXG4gICAgICAgICAgICBpZiAoa2luZCA9PT0gXCJmaWVsZFwiKSBpbml0aWFsaXplcnMucHVzaChfKTtcclxuICAgICAgICAgICAgZWxzZSBkZXNjcmlwdG9yW2tleV0gPSBfO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0YXJnZXQpIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGNvbnRleHRJbi5uYW1lLCBkZXNjcmlwdG9yKTtcclxuICAgIGRvbmUgPSB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcnVuSW5pdGlhbGl6ZXJzKHRoaXNBcmcsIGluaXRpYWxpemVycywgdmFsdWUpIHtcclxuICAgIHZhciB1c2VWYWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0aWFsaXplcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YWx1ZSA9IHVzZVZhbHVlID8gaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZywgdmFsdWUpIDogaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXNlVmFsdWUgPyB2YWx1ZSA6IHZvaWQgMDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Byb3BLZXkoeCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB4ID09PSBcInN5bWJvbFwiID8geCA6IFwiXCIuY29uY2F0KHgpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc2V0RnVuY3Rpb25OYW1lKGYsIG5hbWUsIHByZWZpeCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN5bWJvbFwiKSBuYW1lID0gbmFtZS5kZXNjcmlwdGlvbiA/IFwiW1wiLmNvbmNhdChuYW1lLmRlc2NyaXB0aW9uLCBcIl1cIikgOiBcIlwiO1xyXG4gICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCBcIm5hbWVcIiwgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiBwcmVmaXggPyBcIlwiLmNvbmNhdChwcmVmaXgsIFwiIFwiLCBuYW1lKSA6IG5hbWUgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XHJcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xyXG4gICAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgcCkpIF9fY3JlYXRlQmluZGluZyhvLCBtLCBwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBmYWxzZSB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRJbihzdGF0ZSwgcmVjZWl2ZXIpIHtcclxuICAgIGlmIChyZWNlaXZlciA9PT0gbnVsbCB8fCAodHlwZW9mIHJlY2VpdmVyICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiByZWNlaXZlciAhPT0gXCJmdW5jdGlvblwiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB1c2UgJ2luJyBvcGVyYXRvciBvbiBub24tb2JqZWN0XCIpO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgPT09IHN0YXRlIDogc3RhdGUuaGFzKHJlY2VpdmVyKTtcclxufVxyXG4iLCJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbnZhciBnZW5lcmljTWVzc2FnZSA9IFwiSW52YXJpYW50IFZpb2xhdGlvblwiO1xudmFyIF9hID0gT2JqZWN0LnNldFByb3RvdHlwZU9mLCBzZXRQcm90b3R5cGVPZiA9IF9hID09PSB2b2lkIDAgPyBmdW5jdGlvbiAob2JqLCBwcm90bykge1xuICAgIG9iai5fX3Byb3RvX18gPSBwcm90bztcbiAgICByZXR1cm4gb2JqO1xufSA6IF9hO1xudmFyIEludmFyaWFudEVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbnZhcmlhbnRFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBJbnZhcmlhbnRFcnJvcihtZXNzYWdlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGdlbmVyaWNNZXNzYWdlOyB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGVvZiBtZXNzYWdlID09PSBcIm51bWJlclwiXG4gICAgICAgICAgICA/IGdlbmVyaWNNZXNzYWdlICsgXCI6IFwiICsgbWVzc2FnZSArIFwiIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2Fwb2xsb2dyYXBocWwvaW52YXJpYW50LXBhY2thZ2VzKVwiXG4gICAgICAgICAgICA6IG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmZyYW1lc1RvUG9wID0gMTtcbiAgICAgICAgX3RoaXMubmFtZSA9IGdlbmVyaWNNZXNzYWdlO1xuICAgICAgICBzZXRQcm90b3R5cGVPZihfdGhpcywgSW52YXJpYW50RXJyb3IucHJvdG90eXBlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gSW52YXJpYW50RXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnQgeyBJbnZhcmlhbnRFcnJvciB9O1xuZXhwb3J0IGZ1bmN0aW9uIGludmFyaWFudChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgICBpZiAoIWNvbmRpdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgSW52YXJpYW50RXJyb3IobWVzc2FnZSk7XG4gICAgfVxufVxudmFyIHZlcmJvc2l0eUxldmVscyA9IFtcImRlYnVnXCIsIFwibG9nXCIsIFwid2FyblwiLCBcImVycm9yXCIsIFwic2lsZW50XCJdO1xudmFyIHZlcmJvc2l0eUxldmVsID0gdmVyYm9zaXR5TGV2ZWxzLmluZGV4T2YoXCJsb2dcIik7XG5mdW5jdGlvbiB3cmFwQ29uc29sZU1ldGhvZChuYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZlcmJvc2l0eUxldmVscy5pbmRleE9mKG5hbWUpID49IHZlcmJvc2l0eUxldmVsKSB7XG4gICAgICAgICAgICAvLyBEZWZhdWx0IHRvIGNvbnNvbGUubG9nIGlmIHRoaXMgaG9zdCBlbnZpcm9ubWVudCBoYXBwZW5zIG5vdCB0byBwcm92aWRlXG4gICAgICAgICAgICAvLyBhbGwgdGhlIGNvbnNvbGUuKiBtZXRob2RzIHdlIG5lZWQuXG4gICAgICAgICAgICB2YXIgbWV0aG9kID0gY29uc29sZVtuYW1lXSB8fCBjb25zb2xlLmxvZztcbiAgICAgICAgICAgIHJldHVybiBtZXRob2QuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH07XG59XG4oZnVuY3Rpb24gKGludmFyaWFudCkge1xuICAgIGludmFyaWFudC5kZWJ1ZyA9IHdyYXBDb25zb2xlTWV0aG9kKFwiZGVidWdcIik7XG4gICAgaW52YXJpYW50LmxvZyA9IHdyYXBDb25zb2xlTWV0aG9kKFwibG9nXCIpO1xuICAgIGludmFyaWFudC53YXJuID0gd3JhcENvbnNvbGVNZXRob2QoXCJ3YXJuXCIpO1xuICAgIGludmFyaWFudC5lcnJvciA9IHdyYXBDb25zb2xlTWV0aG9kKFwiZXJyb3JcIik7XG59KShpbnZhcmlhbnQgfHwgKGludmFyaWFudCA9IHt9KSk7XG5leHBvcnQgZnVuY3Rpb24gc2V0VmVyYm9zaXR5KGxldmVsKSB7XG4gICAgdmFyIG9sZCA9IHZlcmJvc2l0eUxldmVsc1t2ZXJib3NpdHlMZXZlbF07XG4gICAgdmVyYm9zaXR5TGV2ZWwgPSBNYXRoLm1heCgwLCB2ZXJib3NpdHlMZXZlbHMuaW5kZXhPZihsZXZlbCkpO1xuICAgIHJldHVybiBvbGQ7XG59XG5leHBvcnQgZGVmYXVsdCBpbnZhcmlhbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnZhcmlhbnQuanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIG1heWJlKHRodW5rKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHRodW5rKCk7XG4gICAgfVxuICAgIGNhdGNoIChfYSkgeyB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXliZS5qcy5tYXAiLCJpbXBvcnQgeyBtYXliZSB9IGZyb20gXCIuL21heWJlLmpzXCI7XG5leHBvcnQgZGVmYXVsdCAobWF5YmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2xvYmFsVGhpczsgfSkgfHxcbiAgICBtYXliZShmdW5jdGlvbiAoKSB7IHJldHVybiB3aW5kb3c7IH0pIHx8XG4gICAgbWF5YmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZjsgfSkgfHxcbiAgICBtYXliZShmdW5jdGlvbiAoKSB7IHJldHVybiBnbG9iYWw7IH0pIHx8IG1heWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1heWJlLmNvbnN0cnVjdG9yKFwicmV0dXJuIHRoaXNcIikoKTsgfSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2xvYmFsLmpzLm1hcCIsImltcG9ydCBnbG9iYWwgZnJvbSBcIi4vZ2xvYmFsLmpzXCI7XG5pbXBvcnQgeyBtYXliZSB9IGZyb20gXCIuL21heWJlLmpzXCI7XG52YXIgX18gPSBcIl9fXCI7XG52YXIgR0xPQkFMX0tFWSA9IFtfXywgX19dLmpvaW4oXCJERVZcIik7XG5mdW5jdGlvbiBnZXRERVYoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oX19ERVZfXyk7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCBHTE9CQUxfS0VZLCB7XG4gICAgICAgICAgICB2YWx1ZTogbWF5YmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9FTlY7IH0pICE9PSBcInByb2R1Y3Rpb25cIixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZ2xvYmFsW0dMT0JBTF9LRVldO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IGdldERFVigpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9REVWLmpzLm1hcCIsImZ1bmN0aW9uIG1heWJlKHRodW5rKSB7XG4gIHRyeSB7IHJldHVybiB0aHVuaygpIH0gY2F0Y2ggKF8pIHt9XG59XG5cbnZhciBzYWZlR2xvYmFsID0gKFxuICBtYXliZShmdW5jdGlvbigpIHsgcmV0dXJuIGdsb2JhbFRoaXMgfSkgfHxcbiAgbWF5YmUoZnVuY3Rpb24oKSB7IHJldHVybiB3aW5kb3cgfSkgfHxcbiAgbWF5YmUoZnVuY3Rpb24oKSB7IHJldHVybiBzZWxmIH0pIHx8XG4gIG1heWJlKGZ1bmN0aW9uKCkgeyByZXR1cm4gZ2xvYmFsIH0pIHx8XG4gIC8vIFdlIGRvbid0IGV4cGVjdCB0aGUgRnVuY3Rpb24gY29uc3RydWN0b3IgZXZlciB0byBiZSBpbnZva2VkIGF0IHJ1bnRpbWUsIGFzXG4gIC8vIGxvbmcgYXMgYXQgbGVhc3Qgb25lIG9mIGdsb2JhbFRoaXMsIHdpbmRvdywgc2VsZiwgb3IgZ2xvYmFsIGlzIGRlZmluZWQsIHNvXG4gIC8vIHdlIGFyZSB1bmRlciBubyBvYmxpZ2F0aW9uIHRvIG1ha2UgaXQgZWFzeSBmb3Igc3RhdGljIGFuYWx5c2lzIHRvb2xzIHRvXG4gIC8vIGRldGVjdCBzeW50YWN0aWMgdXNhZ2Ugb2YgdGhlIEZ1bmN0aW9uIGNvbnN0cnVjdG9yLiBJZiB5b3UgdGhpbmsgeW91IGNhblxuICAvLyBpbXByb3ZlIHlvdXIgc3RhdGljIGFuYWx5c2lzIHRvIGRldGVjdCB0aGlzIG9iZnVzY2F0aW9uLCB0aGluayBhZ2Fpbi4gVGhpc1xuICAvLyBpcyBhbiBhcm1zIHJhY2UgeW91IGNhbm5vdCB3aW4sIGF0IGxlYXN0IG5vdCBpbiBKYXZhU2NyaXB0LlxuICBtYXliZShmdW5jdGlvbigpIHsgcmV0dXJuIG1heWJlLmNvbnN0cnVjdG9yKFwicmV0dXJuIHRoaXNcIikoKSB9KVxuKTtcblxudmFyIG5lZWRUb1JlbW92ZSA9IGZhbHNlO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCgpIHtcbiAgaWYgKHNhZmVHbG9iYWwgJiZcbiAgICAgICFtYXliZShmdW5jdGlvbigpIHsgcmV0dXJuIHByb2Nlc3MuZW52Lk5PREVfRU5WIH0pICYmXG4gICAgICAhbWF5YmUoZnVuY3Rpb24oKSB7IHJldHVybiBwcm9jZXNzIH0pKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNhZmVHbG9iYWwsIFwicHJvY2Vzc1wiLCB7XG4gICAgICB2YWx1ZToge1xuICAgICAgICBlbnY6IHtcbiAgICAgICAgICAvLyBUaGlzIGRlZmF1bHQgbmVlZHMgdG8gYmUgXCJwcm9kdWN0aW9uXCIgaW5zdGVhZCBvZiBcImRldmVsb3BtZW50XCIsIHRvXG4gICAgICAgICAgLy8gYXZvaWQgdGhlIHByb2JsZW0gaHR0cHM6Ly9naXRodWIuY29tL2dyYXBocWwvZ3JhcGhxbC1qcy9wdWxsLzI4OTRcbiAgICAgICAgICAvLyB3aWxsIGV2ZW50dWFsbHkgc29sdmUsIG9uY2UgbWVyZ2VkIGFuZCByZWxlYXNlZC5cbiAgICAgICAgICBOT0RFX0VOVjogXCJwcm9kdWN0aW9uXCIsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgLy8gTGV0IGFueW9uZSBlbHNlIGNoYW5nZSBnbG9iYWwucHJvY2VzcyBhcyB0aGV5IHNlZSBmaXQsIGJ1dCBoaWRlIGl0IGZyb21cbiAgICAgIC8vIE9iamVjdC5rZXlzKGdsb2JhbCkgZW51bWVyYXRpb24uXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIH0pO1xuICAgIG5lZWRUb1JlbW92ZSA9IHRydWU7XG4gIH1cbn1cblxuLy8gQ2FsbCBpbnN0YWxsKCkgYXQgbGVhc3Qgb25jZSwgd2hlbiB0aGlzIG1vZHVsZSBpcyBpbXBvcnRlZC5cbmluc3RhbGwoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgaWYgKG5lZWRUb1JlbW92ZSkge1xuICAgIGRlbGV0ZSBzYWZlR2xvYmFsLnByb2Nlc3M7XG4gICAgbmVlZFRvUmVtb3ZlID0gZmFsc2U7XG4gIH1cbn1cbiIsIi8vIEluIEVTMjAxNSAob3IgYSBwb2x5ZmlsbGVkKSBlbnZpcm9ubWVudCwgdGhpcyB3aWxsIGJlIFN5bWJvbC5pdGVyYXRvclxuLy8gaXN0YW5idWwgaWdub3JlIG5leHQgKFNlZTogJ2h0dHBzOi8vZ2l0aHViLmNvbS9ncmFwaHFsL2dyYXBocWwtanMvaXNzdWVzLzIzMTcnKVxuZXhwb3J0IHZhciBTWU1CT0xfSVRFUkFUT1IgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5pdGVyYXRvciAhPSBudWxsID8gU3ltYm9sLml0ZXJhdG9yIDogJ0BAaXRlcmF0b3InOyAvLyBJbiBFUzIwMTcgKG9yIGEgcG9seWZpbGxlZCkgZW52aXJvbm1lbnQsIHRoaXMgd2lsbCBiZSBTeW1ib2wuYXN5bmNJdGVyYXRvclxuLy8gaXN0YW5idWwgaWdub3JlIG5leHQgKFNlZTogJ2h0dHBzOi8vZ2l0aHViLmNvbS9ncmFwaHFsL2dyYXBocWwtanMvaXNzdWVzLzIzMTcnKVxuXG5leHBvcnQgdmFyIFNZTUJPTF9BU1lOQ19JVEVSQVRPUiA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLmFzeW5jSXRlcmF0b3IgIT0gbnVsbCA/IFN5bWJvbC5hc3luY0l0ZXJhdG9yIDogJ0BAYXN5bmNJdGVyYXRvcic7IC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0IChTZWU6ICdodHRwczovL2dpdGh1Yi5jb20vZ3JhcGhxbC9ncmFwaHFsLWpzL2lzc3Vlcy8yMzE3JylcblxuZXhwb3J0IHZhciBTWU1CT0xfVE9fU1RSSU5HX1RBRyA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLnRvU3RyaW5nVGFnICE9IG51bGwgPyBTeW1ib2wudG9TdHJpbmdUYWcgOiAnQEB0b1N0cmluZ1RhZyc7XG4iLCIvKipcbiAqIFRoZSBzZXQgb2YgYWxsb3dlZCBraW5kIHZhbHVlcyBmb3IgQVNUIG5vZGVzLlxuICovXG5leHBvcnQgdmFyIEtpbmQgPSBPYmplY3QuZnJlZXplKHtcbiAgLy8gTmFtZVxuICBOQU1FOiAnTmFtZScsXG4gIC8vIERvY3VtZW50XG4gIERPQ1VNRU5UOiAnRG9jdW1lbnQnLFxuICBPUEVSQVRJT05fREVGSU5JVElPTjogJ09wZXJhdGlvbkRlZmluaXRpb24nLFxuICBWQVJJQUJMRV9ERUZJTklUSU9OOiAnVmFyaWFibGVEZWZpbml0aW9uJyxcbiAgU0VMRUNUSU9OX1NFVDogJ1NlbGVjdGlvblNldCcsXG4gIEZJRUxEOiAnRmllbGQnLFxuICBBUkdVTUVOVDogJ0FyZ3VtZW50JyxcbiAgLy8gRnJhZ21lbnRzXG4gIEZSQUdNRU5UX1NQUkVBRDogJ0ZyYWdtZW50U3ByZWFkJyxcbiAgSU5MSU5FX0ZSQUdNRU5UOiAnSW5saW5lRnJhZ21lbnQnLFxuICBGUkFHTUVOVF9ERUZJTklUSU9OOiAnRnJhZ21lbnREZWZpbml0aW9uJyxcbiAgLy8gVmFsdWVzXG4gIFZBUklBQkxFOiAnVmFyaWFibGUnLFxuICBJTlQ6ICdJbnRWYWx1ZScsXG4gIEZMT0FUOiAnRmxvYXRWYWx1ZScsXG4gIFNUUklORzogJ1N0cmluZ1ZhbHVlJyxcbiAgQk9PTEVBTjogJ0Jvb2xlYW5WYWx1ZScsXG4gIE5VTEw6ICdOdWxsVmFsdWUnLFxuICBFTlVNOiAnRW51bVZhbHVlJyxcbiAgTElTVDogJ0xpc3RWYWx1ZScsXG4gIE9CSkVDVDogJ09iamVjdFZhbHVlJyxcbiAgT0JKRUNUX0ZJRUxEOiAnT2JqZWN0RmllbGQnLFxuICAvLyBEaXJlY3RpdmVzXG4gIERJUkVDVElWRTogJ0RpcmVjdGl2ZScsXG4gIC8vIFR5cGVzXG4gIE5BTUVEX1RZUEU6ICdOYW1lZFR5cGUnLFxuICBMSVNUX1RZUEU6ICdMaXN0VHlwZScsXG4gIE5PTl9OVUxMX1RZUEU6ICdOb25OdWxsVHlwZScsXG4gIC8vIFR5cGUgU3lzdGVtIERlZmluaXRpb25zXG4gIFNDSEVNQV9ERUZJTklUSU9OOiAnU2NoZW1hRGVmaW5pdGlvbicsXG4gIE9QRVJBVElPTl9UWVBFX0RFRklOSVRJT046ICdPcGVyYXRpb25UeXBlRGVmaW5pdGlvbicsXG4gIC8vIFR5cGUgRGVmaW5pdGlvbnNcbiAgU0NBTEFSX1RZUEVfREVGSU5JVElPTjogJ1NjYWxhclR5cGVEZWZpbml0aW9uJyxcbiAgT0JKRUNUX1RZUEVfREVGSU5JVElPTjogJ09iamVjdFR5cGVEZWZpbml0aW9uJyxcbiAgRklFTERfREVGSU5JVElPTjogJ0ZpZWxkRGVmaW5pdGlvbicsXG4gIElOUFVUX1ZBTFVFX0RFRklOSVRJT046ICdJbnB1dFZhbHVlRGVmaW5pdGlvbicsXG4gIElOVEVSRkFDRV9UWVBFX0RFRklOSVRJT046ICdJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbicsXG4gIFVOSU9OX1RZUEVfREVGSU5JVElPTjogJ1VuaW9uVHlwZURlZmluaXRpb24nLFxuICBFTlVNX1RZUEVfREVGSU5JVElPTjogJ0VudW1UeXBlRGVmaW5pdGlvbicsXG4gIEVOVU1fVkFMVUVfREVGSU5JVElPTjogJ0VudW1WYWx1ZURlZmluaXRpb24nLFxuICBJTlBVVF9PQkpFQ1RfVFlQRV9ERUZJTklUSU9OOiAnSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbicsXG4gIC8vIERpcmVjdGl2ZSBEZWZpbml0aW9uc1xuICBESVJFQ1RJVkVfREVGSU5JVElPTjogJ0RpcmVjdGl2ZURlZmluaXRpb24nLFxuICAvLyBUeXBlIFN5c3RlbSBFeHRlbnNpb25zXG4gIFNDSEVNQV9FWFRFTlNJT046ICdTY2hlbWFFeHRlbnNpb24nLFxuICAvLyBUeXBlIEV4dGVuc2lvbnNcbiAgU0NBTEFSX1RZUEVfRVhURU5TSU9OOiAnU2NhbGFyVHlwZUV4dGVuc2lvbicsXG4gIE9CSkVDVF9UWVBFX0VYVEVOU0lPTjogJ09iamVjdFR5cGVFeHRlbnNpb24nLFxuICBJTlRFUkZBQ0VfVFlQRV9FWFRFTlNJT046ICdJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uJyxcbiAgVU5JT05fVFlQRV9FWFRFTlNJT046ICdVbmlvblR5cGVFeHRlbnNpb24nLFxuICBFTlVNX1RZUEVfRVhURU5TSU9OOiAnRW51bVR5cGVFeHRlbnNpb24nLFxuICBJTlBVVF9PQkpFQ1RfVFlQRV9FWFRFTlNJT046ICdJbnB1dE9iamVjdFR5cGVFeHRlbnNpb24nXG59KTtcbi8qKlxuICogVGhlIGVudW0gdHlwZSByZXByZXNlbnRpbmcgdGhlIHBvc3NpYmxlIGtpbmQgdmFsdWVzIG9mIEFTVCBub2Rlcy5cbiAqL1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW52YXJpYW50KGNvbmRpdGlvbiwgbWVzc2FnZSkge1xuICB2YXIgYm9vbGVhbkNvbmRpdGlvbiA9IEJvb2xlYW4oY29uZGl0aW9uKTsgLy8gaXN0YW5idWwgaWdub3JlIGVsc2UgKFNlZSB0cmFuc2Zvcm1hdGlvbiBkb25lIGluICcuL3Jlc291cmNlcy9pbmxpbmVJbnZhcmlhbnQuanMnKVxuXG4gIGlmICghYm9vbGVhbkNvbmRpdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlICE9IG51bGwgPyBtZXNzYWdlIDogJ1VuZXhwZWN0ZWQgaW52YXJpYW50IHRyaWdnZXJlZC4nKTtcbiAgfVxufVxuIiwiLy8gaXN0YW5idWwgaWdub3JlIG5leHQgKFNlZTogJ2h0dHBzOi8vZ2l0aHViLmNvbS9ncmFwaHFsL2dyYXBocWwtanMvaXNzdWVzLzIzMTcnKVxudmFyIG5vZGVqc0N1c3RvbUluc3BlY3RTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBTeW1ib2wuZm9yID09PSAnZnVuY3Rpb24nID8gU3ltYm9sLmZvcignbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKSA6IHVuZGVmaW5lZDtcbmV4cG9ydCBkZWZhdWx0IG5vZGVqc0N1c3RvbUluc3BlY3RTeW1ib2w7XG4iLCJpbXBvcnQgaW52YXJpYW50IGZyb20gXCIuL2ludmFyaWFudC5tanNcIjtcbmltcG9ydCBub2RlanNDdXN0b21JbnNwZWN0U3ltYm9sIGZyb20gXCIuL25vZGVqc0N1c3RvbUluc3BlY3RTeW1ib2wubWpzXCI7XG4vKipcbiAqIFRoZSBgZGVmaW5lSW5zcGVjdCgpYCBmdW5jdGlvbiBkZWZpbmVzIGBpbnNwZWN0KClgIHByb3RvdHlwZSBtZXRob2QgYXMgYWxpYXMgb2YgYHRvSlNPTmBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWZpbmVJbnNwZWN0KGNsYXNzT2JqZWN0KSB7XG4gIHZhciBmbiA9IGNsYXNzT2JqZWN0LnByb3RvdHlwZS50b0pTT047XG4gIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyB8fCBpbnZhcmlhbnQoMCk7XG4gIGNsYXNzT2JqZWN0LnByb3RvdHlwZS5pbnNwZWN0ID0gZm47IC8vIGlzdGFuYnVsIGlnbm9yZSBlbHNlIChTZWU6ICdodHRwczovL2dpdGh1Yi5jb20vZ3JhcGhxbC9ncmFwaHFsLWpzL2lzc3Vlcy8yMzE3JylcblxuICBpZiAobm9kZWpzQ3VzdG9tSW5zcGVjdFN5bWJvbCkge1xuICAgIGNsYXNzT2JqZWN0LnByb3RvdHlwZVtub2RlanNDdXN0b21JbnNwZWN0U3ltYm9sXSA9IGZuO1xuICB9XG59XG4iLCJpbXBvcnQgZGVmaW5lSW5zcGVjdCBmcm9tIFwiLi4vanN1dGlscy9kZWZpbmVJbnNwZWN0Lm1qc1wiO1xuXG4vKipcbiAqIENvbnRhaW5zIGEgcmFuZ2Ugb2YgVVRGLTggY2hhcmFjdGVyIG9mZnNldHMgYW5kIHRva2VuIHJlZmVyZW5jZXMgdGhhdFxuICogaWRlbnRpZnkgdGhlIHJlZ2lvbiBvZiB0aGUgc291cmNlIGZyb20gd2hpY2ggdGhlIEFTVCBkZXJpdmVkLlxuICovXG5leHBvcnQgdmFyIExvY2F0aW9uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIFRoZSBjaGFyYWN0ZXIgb2Zmc2V0IGF0IHdoaWNoIHRoaXMgTm9kZSBiZWdpbnMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY2hhcmFjdGVyIG9mZnNldCBhdCB3aGljaCB0aGlzIE5vZGUgZW5kcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBUb2tlbiBhdCB3aGljaCB0aGlzIE5vZGUgYmVnaW5zLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIFRva2VuIGF0IHdoaWNoIHRoaXMgTm9kZSBlbmRzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIFNvdXJjZSBkb2N1bWVudCB0aGUgQVNUIHJlcHJlc2VudHMuXG4gICAqL1xuICBmdW5jdGlvbiBMb2NhdGlvbihzdGFydFRva2VuLCBlbmRUb2tlbiwgc291cmNlKSB7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0VG9rZW4uc3RhcnQ7XG4gICAgdGhpcy5lbmQgPSBlbmRUb2tlbi5lbmQ7XG4gICAgdGhpcy5zdGFydFRva2VuID0gc3RhcnRUb2tlbjtcbiAgICB0aGlzLmVuZFRva2VuID0gZW5kVG9rZW47XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gTG9jYXRpb24ucHJvdG90eXBlO1xuXG4gIF9wcm90by50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0OiB0aGlzLnN0YXJ0LFxuICAgICAgZW5kOiB0aGlzLmVuZFxuICAgIH07XG4gIH07XG5cbiAgcmV0dXJuIExvY2F0aW9uO1xufSgpOyAvLyBQcmludCBhIHNpbXBsaWZpZWQgZm9ybSB3aGVuIGFwcGVhcmluZyBpbiBgaW5zcGVjdGAgYW5kIGB1dGlsLmluc3BlY3RgLlxuXG5kZWZpbmVJbnNwZWN0KExvY2F0aW9uKTtcbi8qKlxuICogUmVwcmVzZW50cyBhIHJhbmdlIG9mIGNoYXJhY3RlcnMgcmVwcmVzZW50ZWQgYnkgYSBsZXhpY2FsIHRva2VuXG4gKiB3aXRoaW4gYSBTb3VyY2UuXG4gKi9cblxuZXhwb3J0IHZhciBUb2tlbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBUaGUga2luZCBvZiBUb2tlbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBjaGFyYWN0ZXIgb2Zmc2V0IGF0IHdoaWNoIHRoaXMgTm9kZSBiZWdpbnMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY2hhcmFjdGVyIG9mZnNldCBhdCB3aGljaCB0aGlzIE5vZGUgZW5kcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSAxLWluZGV4ZWQgbGluZSBudW1iZXIgb24gd2hpY2ggdGhpcyBUb2tlbiBhcHBlYXJzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIDEtaW5kZXhlZCBjb2x1bW4gbnVtYmVyIGF0IHdoaWNoIHRoaXMgVG9rZW4gYmVnaW5zLlxuICAgKi9cblxuICAvKipcbiAgICogRm9yIG5vbi1wdW5jdHVhdGlvbiB0b2tlbnMsIHJlcHJlc2VudHMgdGhlIGludGVycHJldGVkIHZhbHVlIG9mIHRoZSB0b2tlbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRva2VucyBleGlzdCBhcyBub2RlcyBpbiBhIGRvdWJsZS1saW5rZWQtbGlzdCBhbW9uZ3N0IGFsbCB0b2tlbnNcbiAgICogaW5jbHVkaW5nIGlnbm9yZWQgdG9rZW5zLiA8U09GPiBpcyBhbHdheXMgdGhlIGZpcnN0IG5vZGUgYW5kIDxFT0Y+XG4gICAqIHRoZSBsYXN0LlxuICAgKi9cbiAgZnVuY3Rpb24gVG9rZW4oa2luZCwgc3RhcnQsIGVuZCwgbGluZSwgY29sdW1uLCBwcmV2LCB2YWx1ZSkge1xuICAgIHRoaXMua2luZCA9IGtpbmQ7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuZW5kID0gZW5kO1xuICAgIHRoaXMubGluZSA9IGxpbmU7XG4gICAgdGhpcy5jb2x1bW4gPSBjb2x1bW47XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMucHJldiA9IHByZXY7XG4gICAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgfVxuXG4gIHZhciBfcHJvdG8yID0gVG9rZW4ucHJvdG90eXBlO1xuXG4gIF9wcm90bzIudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBraW5kOiB0aGlzLmtpbmQsXG4gICAgICB2YWx1ZTogdGhpcy52YWx1ZSxcbiAgICAgIGxpbmU6IHRoaXMubGluZSxcbiAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW5cbiAgICB9O1xuICB9O1xuXG4gIHJldHVybiBUb2tlbjtcbn0oKTsgLy8gUHJpbnQgYSBzaW1wbGlmaWVkIGZvcm0gd2hlbiBhcHBlYXJpbmcgaW4gYGluc3BlY3RgIGFuZCBgdXRpbC5pbnNwZWN0YC5cblxuZGVmaW5lSW5zcGVjdChUb2tlbik7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpc05vZGUobWF5YmVOb2RlKSB7XG4gIHJldHVybiBtYXliZU5vZGUgIT0gbnVsbCAmJiB0eXBlb2YgbWF5YmVOb2RlLmtpbmQgPT09ICdzdHJpbmcnO1xufVxuLyoqXG4gKiBUaGUgbGlzdCBvZiBhbGwgcG9zc2libGUgQVNUIG5vZGUgdHlwZXMuXG4gKi9cbiIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuLyogZXNsaW50LWRpc2FibGUgZmxvd3R5cGUvbm8td2Vhay10eXBlcyAqL1xuaW1wb3J0IG5vZGVqc0N1c3RvbUluc3BlY3RTeW1ib2wgZnJvbSBcIi4vbm9kZWpzQ3VzdG9tSW5zcGVjdFN5bWJvbC5tanNcIjtcbnZhciBNQVhfQVJSQVlfTEVOR1RIID0gMTA7XG52YXIgTUFYX1JFQ1VSU0lWRV9ERVBUSCA9IDI7XG4vKipcbiAqIFVzZWQgdG8gcHJpbnQgdmFsdWVzIGluIGVycm9yIG1lc3NhZ2VzLlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluc3BlY3QodmFsdWUpIHtcbiAgcmV0dXJuIGZvcm1hdFZhbHVlKHZhbHVlLCBbXSk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbHVlLCBzZWVuVmFsdWVzKSB7XG4gIHN3aXRjaCAoX3R5cGVvZih2YWx1ZSkpIHtcbiAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcblxuICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgIHJldHVybiB2YWx1ZS5uYW1lID8gXCJbZnVuY3Rpb24gXCIuY29uY2F0KHZhbHVlLm5hbWUsIFwiXVwiKSA6ICdbZnVuY3Rpb25dJztcblxuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuICdudWxsJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZvcm1hdE9iamVjdFZhbHVlKHZhbHVlLCBzZWVuVmFsdWVzKTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmb3JtYXRPYmplY3RWYWx1ZSh2YWx1ZSwgcHJldmlvdXNseVNlZW5WYWx1ZXMpIHtcbiAgaWYgKHByZXZpb3VzbHlTZWVuVmFsdWVzLmluZGV4T2YodmFsdWUpICE9PSAtMSkge1xuICAgIHJldHVybiAnW0NpcmN1bGFyXSc7XG4gIH1cblxuICB2YXIgc2VlblZhbHVlcyA9IFtdLmNvbmNhdChwcmV2aW91c2x5U2VlblZhbHVlcywgW3ZhbHVlXSk7XG4gIHZhciBjdXN0b21JbnNwZWN0Rm4gPSBnZXRDdXN0b21Gbih2YWx1ZSk7XG5cbiAgaWYgKGN1c3RvbUluc3BlY3RGbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIGN1c3RvbVZhbHVlID0gY3VzdG9tSW5zcGVjdEZuLmNhbGwodmFsdWUpOyAvLyBjaGVjayBmb3IgaW5maW5pdGUgcmVjdXJzaW9uXG5cbiAgICBpZiAoY3VzdG9tVmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGN1c3RvbVZhbHVlID09PSAnc3RyaW5nJyA/IGN1c3RvbVZhbHVlIDogZm9ybWF0VmFsdWUoY3VzdG9tVmFsdWUsIHNlZW5WYWx1ZXMpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiBmb3JtYXRBcnJheSh2YWx1ZSwgc2VlblZhbHVlcyk7XG4gIH1cblxuICByZXR1cm4gZm9ybWF0T2JqZWN0KHZhbHVlLCBzZWVuVmFsdWVzKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0T2JqZWN0KG9iamVjdCwgc2VlblZhbHVlcykge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICd7fSc7XG4gIH1cblxuICBpZiAoc2VlblZhbHVlcy5sZW5ndGggPiBNQVhfUkVDVVJTSVZFX0RFUFRIKSB7XG4gICAgcmV0dXJuICdbJyArIGdldE9iamVjdFRhZyhvYmplY3QpICsgJ10nO1xuICB9XG5cbiAgdmFyIHByb3BlcnRpZXMgPSBrZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIHZhbHVlID0gZm9ybWF0VmFsdWUob2JqZWN0W2tleV0sIHNlZW5WYWx1ZXMpO1xuICAgIHJldHVybiBrZXkgKyAnOiAnICsgdmFsdWU7XG4gIH0pO1xuICByZXR1cm4gJ3sgJyArIHByb3BlcnRpZXMuam9pbignLCAnKSArICcgfSc7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEFycmF5KGFycmF5LCBzZWVuVmFsdWVzKSB7XG4gIGlmIChhcnJheS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJ1tdJztcbiAgfVxuXG4gIGlmIChzZWVuVmFsdWVzLmxlbmd0aCA+IE1BWF9SRUNVUlNJVkVfREVQVEgpIHtcbiAgICByZXR1cm4gJ1tBcnJheV0nO1xuICB9XG5cbiAgdmFyIGxlbiA9IE1hdGgubWluKE1BWF9BUlJBWV9MRU5HVEgsIGFycmF5Lmxlbmd0aCk7XG4gIHZhciByZW1haW5pbmcgPSBhcnJheS5sZW5ndGggLSBsZW47XG4gIHZhciBpdGVtcyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpdGVtcy5wdXNoKGZvcm1hdFZhbHVlKGFycmF5W2ldLCBzZWVuVmFsdWVzKSk7XG4gIH1cblxuICBpZiAocmVtYWluaW5nID09PSAxKSB7XG4gICAgaXRlbXMucHVzaCgnLi4uIDEgbW9yZSBpdGVtJyk7XG4gIH0gZWxzZSBpZiAocmVtYWluaW5nID4gMSkge1xuICAgIGl0ZW1zLnB1c2goXCIuLi4gXCIuY29uY2F0KHJlbWFpbmluZywgXCIgbW9yZSBpdGVtc1wiKSk7XG4gIH1cblxuICByZXR1cm4gJ1snICsgaXRlbXMuam9pbignLCAnKSArICddJztcbn1cblxuZnVuY3Rpb24gZ2V0Q3VzdG9tRm4ob2JqZWN0KSB7XG4gIHZhciBjdXN0b21JbnNwZWN0Rm4gPSBvYmplY3RbU3RyaW5nKG5vZGVqc0N1c3RvbUluc3BlY3RTeW1ib2wpXTtcblxuICBpZiAodHlwZW9mIGN1c3RvbUluc3BlY3RGbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBjdXN0b21JbnNwZWN0Rm47XG4gIH1cblxuICBpZiAodHlwZW9mIG9iamVjdC5pbnNwZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIG9iamVjdC5pbnNwZWN0O1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldE9iamVjdFRhZyhvYmplY3QpIHtcbiAgdmFyIHRhZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpLnJlcGxhY2UoL15cXFtvYmplY3QgLywgJycpLnJlcGxhY2UoL10kLywgJycpO1xuXG4gIGlmICh0YWcgPT09ICdPYmplY3QnICYmIHR5cGVvZiBvYmplY3QuY29uc3RydWN0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgbmFtZSA9IG9iamVjdC5jb25zdHJ1Y3Rvci5uYW1lO1xuXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyAmJiBuYW1lICE9PSAnJykge1xuICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhZztcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRldkFzc2VydChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgdmFyIGJvb2xlYW5Db25kaXRpb24gPSBCb29sZWFuKGNvbmRpdGlvbik7IC8vIGlzdGFuYnVsIGlnbm9yZSBlbHNlIChTZWUgdHJhbnNmb3JtYXRpb24gZG9uZSBpbiAnLi9yZXNvdXJjZXMvaW5saW5lSW52YXJpYW50LmpzJylcblxuICBpZiAoIWJvb2xlYW5Db25kaXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIH1cbn1cbiIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuaW1wb3J0IGluc3BlY3QgZnJvbSBcIi4vaW5zcGVjdC5tanNcIjtcbi8qKlxuICogQSByZXBsYWNlbWVudCBmb3IgaW5zdGFuY2VvZiB3aGljaCBpbmNsdWRlcyBhbiBlcnJvciB3YXJuaW5nIHdoZW4gbXVsdGktcmVhbG1cbiAqIGNvbnN0cnVjdG9ycyBhcmUgZGV0ZWN0ZWQuXG4gKi9cblxuLy8gU2VlOiBodHRwczovL2V4cHJlc3Nqcy5jb20vZW4vYWR2YW5jZWQvYmVzdC1wcmFjdGljZS1wZXJmb3JtYW5jZS5odG1sI3NldC1ub2RlX2Vudi10by1wcm9kdWN0aW9uXG4vLyBTZWU6IGh0dHBzOi8vd2VicGFjay5qcy5vcmcvZ3VpZGVzL3Byb2R1Y3Rpb24vXG5leHBvcnQgZGVmYXVsdCBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gLy8gaXN0YW5idWwgaWdub3JlIG5leHQgKFNlZTogJ2h0dHBzOi8vZ2l0aHViLmNvbS9ncmFwaHFsL2dyYXBocWwtanMvaXNzdWVzLzIzMTcnKVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNoYWRvd1xuZnVuY3Rpb24gaW5zdGFuY2VPZih2YWx1ZSwgY29uc3RydWN0b3IpIHtcbiAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgY29uc3RydWN0b3I7XG59IDogLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNoYWRvd1xuZnVuY3Rpb24gaW5zdGFuY2VPZih2YWx1ZSwgY29uc3RydWN0b3IpIHtcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgY29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmIChfdHlwZW9mKHZhbHVlKSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICB2YXIgX3ZhbHVlJGNvbnN0cnVjdG9yO1xuXG4gICAgdmFyIGNsYXNzTmFtZSA9IGNvbnN0cnVjdG9yLnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddO1xuICAgIHZhciB2YWx1ZUNsYXNzTmFtZSA9IC8vIFdlIHN0aWxsIG5lZWQgdG8gc3VwcG9ydCBjb25zdHJ1Y3RvcidzIG5hbWUgdG8gZGV0ZWN0IGNvbmZsaWN0cyB3aXRoIG9sZGVyIHZlcnNpb25zIG9mIHRoaXMgbGlicmFyeS5cbiAgICBTeW1ib2wudG9TdHJpbmdUYWcgaW4gdmFsdWUgPyB2YWx1ZVtTeW1ib2wudG9TdHJpbmdUYWddIDogKF92YWx1ZSRjb25zdHJ1Y3RvciA9IHZhbHVlLmNvbnN0cnVjdG9yKSA9PT0gbnVsbCB8fCBfdmFsdWUkY29uc3RydWN0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZSRjb25zdHJ1Y3Rvci5uYW1lO1xuXG4gICAgaWYgKGNsYXNzTmFtZSA9PT0gdmFsdWVDbGFzc05hbWUpIHtcbiAgICAgIHZhciBzdHJpbmdpZmllZFZhbHVlID0gaW5zcGVjdCh2YWx1ZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgdXNlIFwiLmNvbmNhdChjbGFzc05hbWUsIFwiIFxcXCJcIikuY29uY2F0KHN0cmluZ2lmaWVkVmFsdWUsIFwiXFxcIiBmcm9tIGFub3RoZXIgbW9kdWxlIG9yIHJlYWxtLlxcblxcbkVuc3VyZSB0aGF0IHRoZXJlIGlzIG9ubHkgb25lIGluc3RhbmNlIG9mIFxcXCJncmFwaHFsXFxcIiBpbiB0aGUgbm9kZV9tb2R1bGVzXFxuZGlyZWN0b3J5LiBJZiBkaWZmZXJlbnQgdmVyc2lvbnMgb2YgXFxcImdyYXBocWxcXFwiIGFyZSB0aGUgZGVwZW5kZW5jaWVzIG9mIG90aGVyXFxucmVsaWVkIG9uIG1vZHVsZXMsIHVzZSBcXFwicmVzb2x1dGlvbnNcXFwiIHRvIGVuc3VyZSBvbmx5IG9uZSB2ZXJzaW9uIGlzIGluc3RhbGxlZC5cXG5cXG5odHRwczovL3lhcm5wa2cuY29tL2VuL2RvY3Mvc2VsZWN0aXZlLXZlcnNpb24tcmVzb2x1dGlvbnNcXG5cXG5EdXBsaWNhdGUgXFxcImdyYXBocWxcXFwiIG1vZHVsZXMgY2Fubm90IGJlIHVzZWQgYXQgdGhlIHNhbWUgdGltZSBzaW5jZSBkaWZmZXJlbnRcXG52ZXJzaW9ucyBtYXkgaGF2ZSBkaWZmZXJlbnQgY2FwYWJpbGl0aWVzIGFuZCBiZWhhdmlvci4gVGhlIGRhdGEgZnJvbSBvbmVcXG52ZXJzaW9uIHVzZWQgaW4gdGhlIGZ1bmN0aW9uIGZyb20gYW5vdGhlciBjb3VsZCBwcm9kdWNlIGNvbmZ1c2luZyBhbmRcXG5zcHVyaW91cyByZXN1bHRzLlwiKSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufTtcbiIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuaW1wb3J0IHsgU1lNQk9MX1RPX1NUUklOR19UQUcgfSBmcm9tIFwiLi4vcG9seWZpbGxzL3N5bWJvbHMubWpzXCI7XG5pbXBvcnQgaW5zcGVjdCBmcm9tIFwiLi4vanN1dGlscy9pbnNwZWN0Lm1qc1wiO1xuaW1wb3J0IGRldkFzc2VydCBmcm9tIFwiLi4vanN1dGlscy9kZXZBc3NlcnQubWpzXCI7XG5pbXBvcnQgaW5zdGFuY2VPZiBmcm9tIFwiLi4vanN1dGlscy9pbnN0YW5jZU9mLm1qc1wiO1xuXG4vKipcbiAqIEEgcmVwcmVzZW50YXRpb24gb2Ygc291cmNlIGlucHV0IHRvIEdyYXBoUUwuIFRoZSBgbmFtZWAgYW5kIGBsb2NhdGlvbk9mZnNldGAgcGFyYW1ldGVycyBhcmVcbiAqIG9wdGlvbmFsLCBidXQgdGhleSBhcmUgdXNlZnVsIGZvciBjbGllbnRzIHdobyBzdG9yZSBHcmFwaFFMIGRvY3VtZW50cyBpbiBzb3VyY2UgZmlsZXMuXG4gKiBGb3IgZXhhbXBsZSwgaWYgdGhlIEdyYXBoUUwgaW5wdXQgc3RhcnRzIGF0IGxpbmUgNDAgaW4gYSBmaWxlIG5hbWVkIGBGb28uZ3JhcGhxbGAsIGl0IG1pZ2h0XG4gKiBiZSB1c2VmdWwgZm9yIGBuYW1lYCB0byBiZSBgXCJGb28uZ3JhcGhxbFwiYCBhbmQgbG9jYXRpb24gdG8gYmUgYHsgbGluZTogNDAsIGNvbHVtbjogMSB9YC5cbiAqIFRoZSBgbGluZWAgYW5kIGBjb2x1bW5gIHByb3BlcnRpZXMgaW4gYGxvY2F0aW9uT2Zmc2V0YCBhcmUgMS1pbmRleGVkLlxuICovXG5leHBvcnQgdmFyIFNvdXJjZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFNvdXJjZShib2R5KSB7XG4gICAgdmFyIG5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdHcmFwaFFMIHJlcXVlc3QnO1xuICAgIHZhciBsb2NhdGlvbk9mZnNldCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge1xuICAgICAgbGluZTogMSxcbiAgICAgIGNvbHVtbjogMVxuICAgIH07XG4gICAgdHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnIHx8IGRldkFzc2VydCgwLCBcIkJvZHkgbXVzdCBiZSBhIHN0cmluZy4gUmVjZWl2ZWQ6IFwiLmNvbmNhdChpbnNwZWN0KGJvZHkpLCBcIi5cIikpO1xuICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmxvY2F0aW9uT2Zmc2V0ID0gbG9jYXRpb25PZmZzZXQ7XG4gICAgdGhpcy5sb2NhdGlvbk9mZnNldC5saW5lID4gMCB8fCBkZXZBc3NlcnQoMCwgJ2xpbmUgaW4gbG9jYXRpb25PZmZzZXQgaXMgMS1pbmRleGVkIGFuZCBtdXN0IGJlIHBvc2l0aXZlLicpO1xuICAgIHRoaXMubG9jYXRpb25PZmZzZXQuY29sdW1uID4gMCB8fCBkZXZBc3NlcnQoMCwgJ2NvbHVtbiBpbiBsb2NhdGlvbk9mZnNldCBpcyAxLWluZGV4ZWQgYW5kIG11c3QgYmUgcG9zaXRpdmUuJyk7XG4gIH0gLy8gJEZsb3dGaXhNZVt1bnN1cHBvcnRlZC1zeW50YXhdIEZsb3cgZG9lc24ndCBzdXBwb3J0IGNvbXB1dGVkIHByb3BlcnRpZXMgeWV0XG5cblxuICBfY3JlYXRlQ2xhc3MoU291cmNlLCBbe1xuICAgIGtleTogU1lNQk9MX1RPX1NUUklOR19UQUcsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gJ1NvdXJjZSc7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFNvdXJjZTtcbn0oKTtcbi8qKlxuICogVGVzdCBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYSBTb3VyY2Ugb2JqZWN0LlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBmdW5jdGlvbiBpc1NvdXJjZShzb3VyY2UpIHtcbiAgcmV0dXJuIGluc3RhbmNlT2Yoc291cmNlLCBTb3VyY2UpO1xufVxuIiwiLyoqXG4gKiBQcm9kdWNlcyB0aGUgdmFsdWUgb2YgYSBibG9jayBzdHJpbmcgZnJvbSBpdHMgcGFyc2VkIHJhdyB2YWx1ZSwgc2ltaWxhciB0b1xuICogQ29mZmVlU2NyaXB0J3MgYmxvY2sgc3RyaW5nLCBQeXRob24ncyBkb2NzdHJpbmcgdHJpbSBvciBSdWJ5J3Mgc3RyaXBfaGVyZWRvYy5cbiAqXG4gKiBUaGlzIGltcGxlbWVudHMgdGhlIEdyYXBoUUwgc3BlYydzIEJsb2NrU3RyaW5nVmFsdWUoKSBzdGF0aWMgYWxnb3JpdGhtLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVkZW50QmxvY2tTdHJpbmdWYWx1ZShyYXdTdHJpbmcpIHtcbiAgLy8gRXhwYW5kIGEgYmxvY2sgc3RyaW5nJ3MgcmF3IHZhbHVlIGludG8gaW5kZXBlbmRlbnQgbGluZXMuXG4gIHZhciBsaW5lcyA9IHJhd1N0cmluZy5zcGxpdCgvXFxyXFxufFtcXG5cXHJdL2cpOyAvLyBSZW1vdmUgY29tbW9uIGluZGVudGF0aW9uIGZyb20gYWxsIGxpbmVzIGJ1dCBmaXJzdC5cblxuICB2YXIgY29tbW9uSW5kZW50ID0gZ2V0QmxvY2tTdHJpbmdJbmRlbnRhdGlvbihyYXdTdHJpbmcpO1xuXG4gIGlmIChjb21tb25JbmRlbnQgIT09IDApIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsaW5lc1tpXSA9IGxpbmVzW2ldLnNsaWNlKGNvbW1vbkluZGVudCk7XG4gICAgfVxuICB9IC8vIFJlbW92ZSBsZWFkaW5nIGFuZCB0cmFpbGluZyBibGFuayBsaW5lcy5cblxuXG4gIHZhciBzdGFydExpbmUgPSAwO1xuXG4gIHdoaWxlIChzdGFydExpbmUgPCBsaW5lcy5sZW5ndGggJiYgaXNCbGFuayhsaW5lc1tzdGFydExpbmVdKSkge1xuICAgICsrc3RhcnRMaW5lO1xuICB9XG5cbiAgdmFyIGVuZExpbmUgPSBsaW5lcy5sZW5ndGg7XG5cbiAgd2hpbGUgKGVuZExpbmUgPiBzdGFydExpbmUgJiYgaXNCbGFuayhsaW5lc1tlbmRMaW5lIC0gMV0pKSB7XG4gICAgLS1lbmRMaW5lO1xuICB9IC8vIFJldHVybiBhIHN0cmluZyBvZiB0aGUgbGluZXMgam9pbmVkIHdpdGggVSswMDBBLlxuXG5cbiAgcmV0dXJuIGxpbmVzLnNsaWNlKHN0YXJ0TGluZSwgZW5kTGluZSkuam9pbignXFxuJyk7XG59XG5cbmZ1bmN0aW9uIGlzQmxhbmsoc3RyKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKHN0cltpXSAhPT0gJyAnICYmIHN0cltpXSAhPT0gJ1xcdCcpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cblxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QmxvY2tTdHJpbmdJbmRlbnRhdGlvbih2YWx1ZSkge1xuICB2YXIgX2NvbW1vbkluZGVudDtcblxuICB2YXIgaXNGaXJzdExpbmUgPSB0cnVlO1xuICB2YXIgaXNFbXB0eUxpbmUgPSB0cnVlO1xuICB2YXIgaW5kZW50ID0gMDtcbiAgdmFyIGNvbW1vbkluZGVudCA9IG51bGw7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7ICsraSkge1xuICAgIHN3aXRjaCAodmFsdWUuY2hhckNvZGVBdChpKSkge1xuICAgICAgY2FzZSAxMzpcbiAgICAgICAgLy8gIFxcclxuICAgICAgICBpZiAodmFsdWUuY2hhckNvZGVBdChpICsgMSkgPT09IDEwKSB7XG4gICAgICAgICAgKytpOyAvLyBza2lwIFxcclxcbiBhcyBvbmUgc3ltYm9sXG4gICAgICAgIH1cblxuICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuXG4gICAgICBjYXNlIDEwOlxuICAgICAgICAvLyAgXFxuXG4gICAgICAgIGlzRmlyc3RMaW5lID0gZmFsc2U7XG4gICAgICAgIGlzRW1wdHlMaW5lID0gdHJ1ZTtcbiAgICAgICAgaW5kZW50ID0gMDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgOTogLy8gICBcXHRcblxuICAgICAgY2FzZSAzMjpcbiAgICAgICAgLy8gIDxzcGFjZT5cbiAgICAgICAgKytpbmRlbnQ7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoaXNFbXB0eUxpbmUgJiYgIWlzRmlyc3RMaW5lICYmIChjb21tb25JbmRlbnQgPT09IG51bGwgfHwgaW5kZW50IDwgY29tbW9uSW5kZW50KSkge1xuICAgICAgICAgIGNvbW1vbkluZGVudCA9IGluZGVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlzRW1wdHlMaW5lID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChfY29tbW9uSW5kZW50ID0gY29tbW9uSW5kZW50KSAhPT0gbnVsbCAmJiBfY29tbW9uSW5kZW50ICE9PSB2b2lkIDAgPyBfY29tbW9uSW5kZW50IDogMDtcbn1cbi8qKlxuICogUHJpbnQgYSBibG9jayBzdHJpbmcgaW4gdGhlIGluZGVudGVkIGJsb2NrIGZvcm0gYnkgYWRkaW5nIGEgbGVhZGluZyBhbmRcbiAqIHRyYWlsaW5nIGJsYW5rIGxpbmUuIEhvd2V2ZXIsIGlmIGEgYmxvY2sgc3RyaW5nIHN0YXJ0cyB3aXRoIHdoaXRlc3BhY2UgYW5kIGlzXG4gKiBhIHNpbmdsZS1saW5lLCBhZGRpbmcgYSBsZWFkaW5nIGJsYW5rIGxpbmUgd291bGQgc3RyaXAgdGhhdCB3aGl0ZXNwYWNlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwcmludEJsb2NrU3RyaW5nKHZhbHVlKSB7XG4gIHZhciBpbmRlbnRhdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG4gIHZhciBwcmVmZXJNdWx0aXBsZUxpbmVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTtcbiAgdmFyIGlzU2luZ2xlTGluZSA9IHZhbHVlLmluZGV4T2YoJ1xcbicpID09PSAtMTtcbiAgdmFyIGhhc0xlYWRpbmdTcGFjZSA9IHZhbHVlWzBdID09PSAnICcgfHwgdmFsdWVbMF0gPT09ICdcXHQnO1xuICB2YXIgaGFzVHJhaWxpbmdRdW90ZSA9IHZhbHVlW3ZhbHVlLmxlbmd0aCAtIDFdID09PSAnXCInO1xuICB2YXIgaGFzVHJhaWxpbmdTbGFzaCA9IHZhbHVlW3ZhbHVlLmxlbmd0aCAtIDFdID09PSAnXFxcXCc7XG4gIHZhciBwcmludEFzTXVsdGlwbGVMaW5lcyA9ICFpc1NpbmdsZUxpbmUgfHwgaGFzVHJhaWxpbmdRdW90ZSB8fCBoYXNUcmFpbGluZ1NsYXNoIHx8IHByZWZlck11bHRpcGxlTGluZXM7XG4gIHZhciByZXN1bHQgPSAnJzsgLy8gRm9ybWF0IGEgbXVsdGktbGluZSBibG9jayBxdW90ZSB0byBhY2NvdW50IGZvciBsZWFkaW5nIHNwYWNlLlxuXG4gIGlmIChwcmludEFzTXVsdGlwbGVMaW5lcyAmJiAhKGlzU2luZ2xlTGluZSAmJiBoYXNMZWFkaW5nU3BhY2UpKSB7XG4gICAgcmVzdWx0ICs9ICdcXG4nICsgaW5kZW50YXRpb247XG4gIH1cblxuICByZXN1bHQgKz0gaW5kZW50YXRpb24gPyB2YWx1ZS5yZXBsYWNlKC9cXG4vZywgJ1xcbicgKyBpbmRlbnRhdGlvbikgOiB2YWx1ZTtcblxuICBpZiAocHJpbnRBc011bHRpcGxlTGluZXMpIHtcbiAgICByZXN1bHQgKz0gJ1xcbic7XG4gIH1cblxuICByZXR1cm4gJ1wiXCJcIicgKyByZXN1bHQucmVwbGFjZSgvXCJcIlwiL2csICdcXFxcXCJcIlwiJykgKyAnXCJcIlwiJztcbn1cbiIsImltcG9ydCBpbnNwZWN0IGZyb20gXCIuLi9qc3V0aWxzL2luc3BlY3QubWpzXCI7XG5pbXBvcnQgeyBpc05vZGUgfSBmcm9tIFwiLi9hc3QubWpzXCI7XG4vKipcbiAqIEEgdmlzaXRvciBpcyBwcm92aWRlZCB0byB2aXNpdCwgaXQgY29udGFpbnMgdGhlIGNvbGxlY3Rpb24gb2ZcbiAqIHJlbGV2YW50IGZ1bmN0aW9ucyB0byBiZSBjYWxsZWQgZHVyaW5nIHRoZSB2aXNpdG9yJ3MgdHJhdmVyc2FsLlxuICovXG5cbmV4cG9ydCB2YXIgUXVlcnlEb2N1bWVudEtleXMgPSB7XG4gIE5hbWU6IFtdLFxuICBEb2N1bWVudDogWydkZWZpbml0aW9ucyddLFxuICBPcGVyYXRpb25EZWZpbml0aW9uOiBbJ25hbWUnLCAndmFyaWFibGVEZWZpbml0aW9ucycsICdkaXJlY3RpdmVzJywgJ3NlbGVjdGlvblNldCddLFxuICBWYXJpYWJsZURlZmluaXRpb246IFsndmFyaWFibGUnLCAndHlwZScsICdkZWZhdWx0VmFsdWUnLCAnZGlyZWN0aXZlcyddLFxuICBWYXJpYWJsZTogWyduYW1lJ10sXG4gIFNlbGVjdGlvblNldDogWydzZWxlY3Rpb25zJ10sXG4gIEZpZWxkOiBbJ2FsaWFzJywgJ25hbWUnLCAnYXJndW1lbnRzJywgJ2RpcmVjdGl2ZXMnLCAnc2VsZWN0aW9uU2V0J10sXG4gIEFyZ3VtZW50OiBbJ25hbWUnLCAndmFsdWUnXSxcbiAgRnJhZ21lbnRTcHJlYWQ6IFsnbmFtZScsICdkaXJlY3RpdmVzJ10sXG4gIElubGluZUZyYWdtZW50OiBbJ3R5cGVDb25kaXRpb24nLCAnZGlyZWN0aXZlcycsICdzZWxlY3Rpb25TZXQnXSxcbiAgRnJhZ21lbnREZWZpbml0aW9uOiBbJ25hbWUnLCAvLyBOb3RlOiBmcmFnbWVudCB2YXJpYWJsZSBkZWZpbml0aW9ucyBhcmUgZXhwZXJpbWVudGFsIGFuZCBtYXkgYmUgY2hhbmdlZFxuICAvLyBvciByZW1vdmVkIGluIHRoZSBmdXR1cmUuXG4gICd2YXJpYWJsZURlZmluaXRpb25zJywgJ3R5cGVDb25kaXRpb24nLCAnZGlyZWN0aXZlcycsICdzZWxlY3Rpb25TZXQnXSxcbiAgSW50VmFsdWU6IFtdLFxuICBGbG9hdFZhbHVlOiBbXSxcbiAgU3RyaW5nVmFsdWU6IFtdLFxuICBCb29sZWFuVmFsdWU6IFtdLFxuICBOdWxsVmFsdWU6IFtdLFxuICBFbnVtVmFsdWU6IFtdLFxuICBMaXN0VmFsdWU6IFsndmFsdWVzJ10sXG4gIE9iamVjdFZhbHVlOiBbJ2ZpZWxkcyddLFxuICBPYmplY3RGaWVsZDogWyduYW1lJywgJ3ZhbHVlJ10sXG4gIERpcmVjdGl2ZTogWyduYW1lJywgJ2FyZ3VtZW50cyddLFxuICBOYW1lZFR5cGU6IFsnbmFtZSddLFxuICBMaXN0VHlwZTogWyd0eXBlJ10sXG4gIE5vbk51bGxUeXBlOiBbJ3R5cGUnXSxcbiAgU2NoZW1hRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICdkaXJlY3RpdmVzJywgJ29wZXJhdGlvblR5cGVzJ10sXG4gIE9wZXJhdGlvblR5cGVEZWZpbml0aW9uOiBbJ3R5cGUnXSxcbiAgU2NhbGFyVHlwZURlZmluaXRpb246IFsnZGVzY3JpcHRpb24nLCAnbmFtZScsICdkaXJlY3RpdmVzJ10sXG4gIE9iamVjdFR5cGVEZWZpbml0aW9uOiBbJ2Rlc2NyaXB0aW9uJywgJ25hbWUnLCAnaW50ZXJmYWNlcycsICdkaXJlY3RpdmVzJywgJ2ZpZWxkcyddLFxuICBGaWVsZERlZmluaXRpb246IFsnZGVzY3JpcHRpb24nLCAnbmFtZScsICdhcmd1bWVudHMnLCAndHlwZScsICdkaXJlY3RpdmVzJ10sXG4gIElucHV0VmFsdWVEZWZpbml0aW9uOiBbJ2Rlc2NyaXB0aW9uJywgJ25hbWUnLCAndHlwZScsICdkZWZhdWx0VmFsdWUnLCAnZGlyZWN0aXZlcyddLFxuICBJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ2ludGVyZmFjZXMnLCAnZGlyZWN0aXZlcycsICdmaWVsZHMnXSxcbiAgVW5pb25UeXBlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ2RpcmVjdGl2ZXMnLCAndHlwZXMnXSxcbiAgRW51bVR5cGVEZWZpbml0aW9uOiBbJ2Rlc2NyaXB0aW9uJywgJ25hbWUnLCAnZGlyZWN0aXZlcycsICd2YWx1ZXMnXSxcbiAgRW51bVZhbHVlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ2RpcmVjdGl2ZXMnXSxcbiAgSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ2RpcmVjdGl2ZXMnLCAnZmllbGRzJ10sXG4gIERpcmVjdGl2ZURlZmluaXRpb246IFsnZGVzY3JpcHRpb24nLCAnbmFtZScsICdhcmd1bWVudHMnLCAnbG9jYXRpb25zJ10sXG4gIFNjaGVtYUV4dGVuc2lvbjogWydkaXJlY3RpdmVzJywgJ29wZXJhdGlvblR5cGVzJ10sXG4gIFNjYWxhclR5cGVFeHRlbnNpb246IFsnbmFtZScsICdkaXJlY3RpdmVzJ10sXG4gIE9iamVjdFR5cGVFeHRlbnNpb246IFsnbmFtZScsICdpbnRlcmZhY2VzJywgJ2RpcmVjdGl2ZXMnLCAnZmllbGRzJ10sXG4gIEludGVyZmFjZVR5cGVFeHRlbnNpb246IFsnbmFtZScsICdpbnRlcmZhY2VzJywgJ2RpcmVjdGl2ZXMnLCAnZmllbGRzJ10sXG4gIFVuaW9uVHlwZUV4dGVuc2lvbjogWyduYW1lJywgJ2RpcmVjdGl2ZXMnLCAndHlwZXMnXSxcbiAgRW51bVR5cGVFeHRlbnNpb246IFsnbmFtZScsICdkaXJlY3RpdmVzJywgJ3ZhbHVlcyddLFxuICBJbnB1dE9iamVjdFR5cGVFeHRlbnNpb246IFsnbmFtZScsICdkaXJlY3RpdmVzJywgJ2ZpZWxkcyddXG59O1xuZXhwb3J0IHZhciBCUkVBSyA9IE9iamVjdC5mcmVlemUoe30pO1xuLyoqXG4gKiB2aXNpdCgpIHdpbGwgd2FsayB0aHJvdWdoIGFuIEFTVCB1c2luZyBhIGRlcHRoLWZpcnN0IHRyYXZlcnNhbCwgY2FsbGluZ1xuICogdGhlIHZpc2l0b3IncyBlbnRlciBmdW5jdGlvbiBhdCBlYWNoIG5vZGUgaW4gdGhlIHRyYXZlcnNhbCwgYW5kIGNhbGxpbmcgdGhlXG4gKiBsZWF2ZSBmdW5jdGlvbiBhZnRlciB2aXNpdGluZyB0aGF0IG5vZGUgYW5kIGFsbCBvZiBpdHMgY2hpbGQgbm9kZXMuXG4gKlxuICogQnkgcmV0dXJuaW5nIGRpZmZlcmVudCB2YWx1ZXMgZnJvbSB0aGUgZW50ZXIgYW5kIGxlYXZlIGZ1bmN0aW9ucywgdGhlXG4gKiBiZWhhdmlvciBvZiB0aGUgdmlzaXRvciBjYW4gYmUgYWx0ZXJlZCwgaW5jbHVkaW5nIHNraXBwaW5nIG92ZXIgYSBzdWItdHJlZSBvZlxuICogdGhlIEFTVCAoYnkgcmV0dXJuaW5nIGZhbHNlKSwgZWRpdGluZyB0aGUgQVNUIGJ5IHJldHVybmluZyBhIHZhbHVlIG9yIG51bGxcbiAqIHRvIHJlbW92ZSB0aGUgdmFsdWUsIG9yIHRvIHN0b3AgdGhlIHdob2xlIHRyYXZlcnNhbCBieSByZXR1cm5pbmcgQlJFQUsuXG4gKlxuICogV2hlbiB1c2luZyB2aXNpdCgpIHRvIGVkaXQgYW4gQVNULCB0aGUgb3JpZ2luYWwgQVNUIHdpbGwgbm90IGJlIG1vZGlmaWVkLCBhbmRcbiAqIGEgbmV3IHZlcnNpb24gb2YgdGhlIEFTVCB3aXRoIHRoZSBjaGFuZ2VzIGFwcGxpZWQgd2lsbCBiZSByZXR1cm5lZCBmcm9tIHRoZVxuICogdmlzaXQgZnVuY3Rpb24uXG4gKlxuICogICAgIGNvbnN0IGVkaXRlZEFTVCA9IHZpc2l0KGFzdCwge1xuICogICAgICAgZW50ZXIobm9kZSwga2V5LCBwYXJlbnQsIHBhdGgsIGFuY2VzdG9ycykge1xuICogICAgICAgICAvLyBAcmV0dXJuXG4gKiAgICAgICAgIC8vICAgdW5kZWZpbmVkOiBubyBhY3Rpb25cbiAqICAgICAgICAgLy8gICBmYWxzZTogc2tpcCB2aXNpdGluZyB0aGlzIG5vZGVcbiAqICAgICAgICAgLy8gICB2aXNpdG9yLkJSRUFLOiBzdG9wIHZpc2l0aW5nIGFsdG9nZXRoZXJcbiAqICAgICAgICAgLy8gICBudWxsOiBkZWxldGUgdGhpcyBub2RlXG4gKiAgICAgICAgIC8vICAgYW55IHZhbHVlOiByZXBsYWNlIHRoaXMgbm9kZSB3aXRoIHRoZSByZXR1cm5lZCB2YWx1ZVxuICogICAgICAgfSxcbiAqICAgICAgIGxlYXZlKG5vZGUsIGtleSwgcGFyZW50LCBwYXRoLCBhbmNlc3RvcnMpIHtcbiAqICAgICAgICAgLy8gQHJldHVyblxuICogICAgICAgICAvLyAgIHVuZGVmaW5lZDogbm8gYWN0aW9uXG4gKiAgICAgICAgIC8vICAgZmFsc2U6IG5vIGFjdGlvblxuICogICAgICAgICAvLyAgIHZpc2l0b3IuQlJFQUs6IHN0b3AgdmlzaXRpbmcgYWx0b2dldGhlclxuICogICAgICAgICAvLyAgIG51bGw6IGRlbGV0ZSB0aGlzIG5vZGVcbiAqICAgICAgICAgLy8gICBhbnkgdmFsdWU6IHJlcGxhY2UgdGhpcyBub2RlIHdpdGggdGhlIHJldHVybmVkIHZhbHVlXG4gKiAgICAgICB9XG4gKiAgICAgfSk7XG4gKlxuICogQWx0ZXJuYXRpdmVseSB0byBwcm92aWRpbmcgZW50ZXIoKSBhbmQgbGVhdmUoKSBmdW5jdGlvbnMsIGEgdmlzaXRvciBjYW5cbiAqIGluc3RlYWQgcHJvdmlkZSBmdW5jdGlvbnMgbmFtZWQgdGhlIHNhbWUgYXMgdGhlIGtpbmRzIG9mIEFTVCBub2Rlcywgb3JcbiAqIGVudGVyL2xlYXZlIHZpc2l0b3JzIGF0IGEgbmFtZWQga2V5LCBsZWFkaW5nIHRvIGZvdXIgcGVybXV0YXRpb25zIG9mIHRoZVxuICogdmlzaXRvciBBUEk6XG4gKlxuICogMSkgTmFtZWQgdmlzaXRvcnMgdHJpZ2dlcmVkIHdoZW4gZW50ZXJpbmcgYSBub2RlIG9mIGEgc3BlY2lmaWMga2luZC5cbiAqXG4gKiAgICAgdmlzaXQoYXN0LCB7XG4gKiAgICAgICBLaW5kKG5vZGUpIHtcbiAqICAgICAgICAgLy8gZW50ZXIgdGhlIFwiS2luZFwiIG5vZGVcbiAqICAgICAgIH1cbiAqICAgICB9KVxuICpcbiAqIDIpIE5hbWVkIHZpc2l0b3JzIHRoYXQgdHJpZ2dlciB1cG9uIGVudGVyaW5nIGFuZCBsZWF2aW5nIGEgbm9kZSBvZlxuICogICAgYSBzcGVjaWZpYyBraW5kLlxuICpcbiAqICAgICB2aXNpdChhc3QsIHtcbiAqICAgICAgIEtpbmQ6IHtcbiAqICAgICAgICAgZW50ZXIobm9kZSkge1xuICogICAgICAgICAgIC8vIGVudGVyIHRoZSBcIktpbmRcIiBub2RlXG4gKiAgICAgICAgIH1cbiAqICAgICAgICAgbGVhdmUobm9kZSkge1xuICogICAgICAgICAgIC8vIGxlYXZlIHRoZSBcIktpbmRcIiBub2RlXG4gKiAgICAgICAgIH1cbiAqICAgICAgIH1cbiAqICAgICB9KVxuICpcbiAqIDMpIEdlbmVyaWMgdmlzaXRvcnMgdGhhdCB0cmlnZ2VyIHVwb24gZW50ZXJpbmcgYW5kIGxlYXZpbmcgYW55IG5vZGUuXG4gKlxuICogICAgIHZpc2l0KGFzdCwge1xuICogICAgICAgZW50ZXIobm9kZSkge1xuICogICAgICAgICAvLyBlbnRlciBhbnkgbm9kZVxuICogICAgICAgfSxcbiAqICAgICAgIGxlYXZlKG5vZGUpIHtcbiAqICAgICAgICAgLy8gbGVhdmUgYW55IG5vZGVcbiAqICAgICAgIH1cbiAqICAgICB9KVxuICpcbiAqIDQpIFBhcmFsbGVsIHZpc2l0b3JzIGZvciBlbnRlcmluZyBhbmQgbGVhdmluZyBub2RlcyBvZiBhIHNwZWNpZmljIGtpbmQuXG4gKlxuICogICAgIHZpc2l0KGFzdCwge1xuICogICAgICAgZW50ZXI6IHtcbiAqICAgICAgICAgS2luZChub2RlKSB7XG4gKiAgICAgICAgICAgLy8gZW50ZXIgdGhlIFwiS2luZFwiIG5vZGVcbiAqICAgICAgICAgfVxuICogICAgICAgfSxcbiAqICAgICAgIGxlYXZlOiB7XG4gKiAgICAgICAgIEtpbmQobm9kZSkge1xuICogICAgICAgICAgIC8vIGxlYXZlIHRoZSBcIktpbmRcIiBub2RlXG4gKiAgICAgICAgIH1cbiAqICAgICAgIH1cbiAqICAgICB9KVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB2aXNpdChyb290LCB2aXNpdG9yKSB7XG4gIHZhciB2aXNpdG9yS2V5cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogUXVlcnlEb2N1bWVudEtleXM7XG5cbiAgLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYtaW5pdCAqL1xuICB2YXIgc3RhY2sgPSB1bmRlZmluZWQ7XG4gIHZhciBpbkFycmF5ID0gQXJyYXkuaXNBcnJheShyb290KTtcbiAgdmFyIGtleXMgPSBbcm9vdF07XG4gIHZhciBpbmRleCA9IC0xO1xuICB2YXIgZWRpdHMgPSBbXTtcbiAgdmFyIG5vZGUgPSB1bmRlZmluZWQ7XG4gIHZhciBrZXkgPSB1bmRlZmluZWQ7XG4gIHZhciBwYXJlbnQgPSB1bmRlZmluZWQ7XG4gIHZhciBwYXRoID0gW107XG4gIHZhciBhbmNlc3RvcnMgPSBbXTtcbiAgdmFyIG5ld1Jvb3QgPSByb290O1xuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVuZGVmLWluaXQgKi9cblxuICBkbyB7XG4gICAgaW5kZXgrKztcbiAgICB2YXIgaXNMZWF2aW5nID0gaW5kZXggPT09IGtleXMubGVuZ3RoO1xuICAgIHZhciBpc0VkaXRlZCA9IGlzTGVhdmluZyAmJiBlZGl0cy5sZW5ndGggIT09IDA7XG5cbiAgICBpZiAoaXNMZWF2aW5nKSB7XG4gICAgICBrZXkgPSBhbmNlc3RvcnMubGVuZ3RoID09PSAwID8gdW5kZWZpbmVkIDogcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICAgIHBhcmVudCA9IGFuY2VzdG9ycy5wb3AoKTtcblxuICAgICAgaWYgKGlzRWRpdGVkKSB7XG4gICAgICAgIGlmIChpbkFycmF5KSB7XG4gICAgICAgICAgbm9kZSA9IG5vZGUuc2xpY2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgY2xvbmUgPSB7fTtcblxuICAgICAgICAgIGZvciAodmFyIF9pMiA9IDAsIF9PYmplY3Qka2V5czIgPSBPYmplY3Qua2V5cyhub2RlKTsgX2kyIDwgX09iamVjdCRrZXlzMi5sZW5ndGg7IF9pMisrKSB7XG4gICAgICAgICAgICB2YXIgayA9IF9PYmplY3Qka2V5czJbX2kyXTtcbiAgICAgICAgICAgIGNsb25lW2tdID0gbm9kZVtrXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBub2RlID0gY2xvbmU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZWRpdE9mZnNldCA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGVkaXRzLmxlbmd0aDsgaWkrKykge1xuICAgICAgICAgIHZhciBlZGl0S2V5ID0gZWRpdHNbaWldWzBdO1xuICAgICAgICAgIHZhciBlZGl0VmFsdWUgPSBlZGl0c1tpaV1bMV07XG5cbiAgICAgICAgICBpZiAoaW5BcnJheSkge1xuICAgICAgICAgICAgZWRpdEtleSAtPSBlZGl0T2Zmc2V0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpbkFycmF5ICYmIGVkaXRWYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbm9kZS5zcGxpY2UoZWRpdEtleSwgMSk7XG4gICAgICAgICAgICBlZGl0T2Zmc2V0Kys7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vZGVbZWRpdEtleV0gPSBlZGl0VmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGluZGV4ID0gc3RhY2suaW5kZXg7XG4gICAgICBrZXlzID0gc3RhY2sua2V5cztcbiAgICAgIGVkaXRzID0gc3RhY2suZWRpdHM7XG4gICAgICBpbkFycmF5ID0gc3RhY2suaW5BcnJheTtcbiAgICAgIHN0YWNrID0gc3RhY2sucHJldjtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5ID0gcGFyZW50ID8gaW5BcnJheSA/IGluZGV4IDoga2V5c1tpbmRleF0gOiB1bmRlZmluZWQ7XG4gICAgICBub2RlID0gcGFyZW50ID8gcGFyZW50W2tleV0gOiBuZXdSb290O1xuXG4gICAgICBpZiAobm9kZSA9PT0gbnVsbCB8fCBub2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgcGF0aC5wdXNoKGtleSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHJlc3VsdCA9IHZvaWQgMDtcblxuICAgIGlmICghQXJyYXkuaXNBcnJheShub2RlKSkge1xuICAgICAgaWYgKCFpc05vZGUobm9kZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBBU1QgTm9kZTogXCIuY29uY2F0KGluc3BlY3Qobm9kZSksIFwiLlwiKSk7XG4gICAgICB9XG5cbiAgICAgIHZhciB2aXNpdEZuID0gZ2V0VmlzaXRGbih2aXNpdG9yLCBub2RlLmtpbmQsIGlzTGVhdmluZyk7XG5cbiAgICAgIGlmICh2aXNpdEZuKSB7XG4gICAgICAgIHJlc3VsdCA9IHZpc2l0Rm4uY2FsbCh2aXNpdG9yLCBub2RlLCBrZXksIHBhcmVudCwgcGF0aCwgYW5jZXN0b3JzKTtcblxuICAgICAgICBpZiAocmVzdWx0ID09PSBCUkVBSykge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBpZiAoIWlzTGVhdmluZykge1xuICAgICAgICAgICAgcGF0aC5wb3AoKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGVkaXRzLnB1c2goW2tleSwgcmVzdWx0XSk7XG5cbiAgICAgICAgICBpZiAoIWlzTGVhdmluZykge1xuICAgICAgICAgICAgaWYgKGlzTm9kZShyZXN1bHQpKSB7XG4gICAgICAgICAgICAgIG5vZGUgPSByZXN1bHQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwYXRoLnBvcCgpO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQgJiYgaXNFZGl0ZWQpIHtcbiAgICAgIGVkaXRzLnB1c2goW2tleSwgbm9kZV0pO1xuICAgIH1cblxuICAgIGlmIChpc0xlYXZpbmcpIHtcbiAgICAgIHBhdGgucG9wKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBfdmlzaXRvcktleXMkbm9kZSRraW47XG5cbiAgICAgIHN0YWNrID0ge1xuICAgICAgICBpbkFycmF5OiBpbkFycmF5LFxuICAgICAgICBpbmRleDogaW5kZXgsXG4gICAgICAgIGtleXM6IGtleXMsXG4gICAgICAgIGVkaXRzOiBlZGl0cyxcbiAgICAgICAgcHJldjogc3RhY2tcbiAgICAgIH07XG4gICAgICBpbkFycmF5ID0gQXJyYXkuaXNBcnJheShub2RlKTtcbiAgICAgIGtleXMgPSBpbkFycmF5ID8gbm9kZSA6IChfdmlzaXRvcktleXMkbm9kZSRraW4gPSB2aXNpdG9yS2V5c1tub2RlLmtpbmRdKSAhPT0gbnVsbCAmJiBfdmlzaXRvcktleXMkbm9kZSRraW4gIT09IHZvaWQgMCA/IF92aXNpdG9yS2V5cyRub2RlJGtpbiA6IFtdO1xuICAgICAgaW5kZXggPSAtMTtcbiAgICAgIGVkaXRzID0gW107XG5cbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgYW5jZXN0b3JzLnB1c2gocGFyZW50KTtcbiAgICAgIH1cblxuICAgICAgcGFyZW50ID0gbm9kZTtcbiAgICB9XG4gIH0gd2hpbGUgKHN0YWNrICE9PSB1bmRlZmluZWQpO1xuXG4gIGlmIChlZGl0cy5sZW5ndGggIT09IDApIHtcbiAgICBuZXdSb290ID0gZWRpdHNbZWRpdHMubGVuZ3RoIC0gMV1bMV07XG4gIH1cblxuICByZXR1cm4gbmV3Um9vdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2aXNpdG9yIGluc3RhbmNlIHdoaWNoIGRlbGVnYXRlcyB0byBtYW55IHZpc2l0b3JzIHRvIHJ1biBpblxuICogcGFyYWxsZWwuIEVhY2ggdmlzaXRvciB3aWxsIGJlIHZpc2l0ZWQgZm9yIGVhY2ggbm9kZSBiZWZvcmUgbW92aW5nIG9uLlxuICpcbiAqIElmIGEgcHJpb3IgdmlzaXRvciBlZGl0cyBhIG5vZGUsIG5vIGZvbGxvd2luZyB2aXNpdG9ycyB3aWxsIHNlZSB0aGF0IG5vZGUuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHZpc2l0SW5QYXJhbGxlbCh2aXNpdG9ycykge1xuICB2YXIgc2tpcHBpbmcgPSBuZXcgQXJyYXkodmlzaXRvcnMubGVuZ3RoKTtcbiAgcmV0dXJuIHtcbiAgICBlbnRlcjogZnVuY3Rpb24gZW50ZXIobm9kZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aXNpdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2tpcHBpbmdbaV0gPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBmbiA9IGdldFZpc2l0Rm4odmlzaXRvcnNbaV0sIG5vZGUua2luZCxcbiAgICAgICAgICAvKiBpc0xlYXZpbmcgKi9cbiAgICAgICAgICBmYWxzZSk7XG5cbiAgICAgICAgICBpZiAoZm4pIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBmbi5hcHBseSh2aXNpdG9yc1tpXSwgYXJndW1lbnRzKTtcblxuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgc2tpcHBpbmdbaV0gPSBub2RlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IEJSRUFLKSB7XG4gICAgICAgICAgICAgIHNraXBwaW5nW2ldID0gQlJFQUs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBsZWF2ZTogZnVuY3Rpb24gbGVhdmUobm9kZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aXNpdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2tpcHBpbmdbaV0gPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBmbiA9IGdldFZpc2l0Rm4odmlzaXRvcnNbaV0sIG5vZGUua2luZCxcbiAgICAgICAgICAvKiBpc0xlYXZpbmcgKi9cbiAgICAgICAgICB0cnVlKTtcblxuICAgICAgICAgIGlmIChmbikge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZuLmFwcGx5KHZpc2l0b3JzW2ldLCBhcmd1bWVudHMpO1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBCUkVBSykge1xuICAgICAgICAgICAgICBza2lwcGluZ1tpXSA9IEJSRUFLO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCAmJiByZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHNraXBwaW5nW2ldID09PSBub2RlKSB7XG4gICAgICAgICAgc2tpcHBpbmdbaV0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuLyoqXG4gKiBHaXZlbiBhIHZpc2l0b3IgaW5zdGFuY2UsIGlmIGl0IGlzIGxlYXZpbmcgb3Igbm90LCBhbmQgYSBub2RlIGtpbmQsIHJldHVyblxuICogdGhlIGZ1bmN0aW9uIHRoZSB2aXNpdG9yIHJ1bnRpbWUgc2hvdWxkIGNhbGwuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFZpc2l0Rm4odmlzaXRvciwga2luZCwgaXNMZWF2aW5nKSB7XG4gIHZhciBraW5kVmlzaXRvciA9IHZpc2l0b3Jba2luZF07XG5cbiAgaWYgKGtpbmRWaXNpdG9yKSB7XG4gICAgaWYgKCFpc0xlYXZpbmcgJiYgdHlwZW9mIGtpbmRWaXNpdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyB7IEtpbmQoKSB7fSB9XG4gICAgICByZXR1cm4ga2luZFZpc2l0b3I7XG4gICAgfVxuXG4gICAgdmFyIGtpbmRTcGVjaWZpY1Zpc2l0b3IgPSBpc0xlYXZpbmcgPyBraW5kVmlzaXRvci5sZWF2ZSA6IGtpbmRWaXNpdG9yLmVudGVyO1xuXG4gICAgaWYgKHR5cGVvZiBraW5kU3BlY2lmaWNWaXNpdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyB7IEtpbmQ6IHsgZW50ZXIoKSB7fSwgbGVhdmUoKSB7fSB9IH1cbiAgICAgIHJldHVybiBraW5kU3BlY2lmaWNWaXNpdG9yO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgc3BlY2lmaWNWaXNpdG9yID0gaXNMZWF2aW5nID8gdmlzaXRvci5sZWF2ZSA6IHZpc2l0b3IuZW50ZXI7XG5cbiAgICBpZiAoc3BlY2lmaWNWaXNpdG9yKSB7XG4gICAgICBpZiAodHlwZW9mIHNwZWNpZmljVmlzaXRvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyB7IGVudGVyKCkge30sIGxlYXZlKCkge30gfVxuICAgICAgICByZXR1cm4gc3BlY2lmaWNWaXNpdG9yO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3BlY2lmaWNLaW5kVmlzaXRvciA9IHNwZWNpZmljVmlzaXRvcltraW5kXTtcblxuICAgICAgaWYgKHR5cGVvZiBzcGVjaWZpY0tpbmRWaXNpdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIHsgZW50ZXI6IHsgS2luZCgpIHt9IH0sIGxlYXZlOiB7IEtpbmQoKSB7fSB9IH1cbiAgICAgICAgcmV0dXJuIHNwZWNpZmljS2luZFZpc2l0b3I7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyB2aXNpdCB9IGZyb20gXCIuL3Zpc2l0b3IubWpzXCI7XG5pbXBvcnQgeyBwcmludEJsb2NrU3RyaW5nIH0gZnJvbSBcIi4vYmxvY2tTdHJpbmcubWpzXCI7XG4vKipcbiAqIENvbnZlcnRzIGFuIEFTVCBpbnRvIGEgc3RyaW5nLCB1c2luZyBvbmUgc2V0IG9mIHJlYXNvbmFibGVcbiAqIGZvcm1hdHRpbmcgcnVsZXMuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHByaW50KGFzdCkge1xuICByZXR1cm4gdmlzaXQoYXN0LCB7XG4gICAgbGVhdmU6IHByaW50RG9jQVNUUmVkdWNlclxuICB9KTtcbn1cbnZhciBNQVhfTElORV9MRU5HVEggPSA4MDsgLy8gVE9ETzogcHJvdmlkZSBiZXR0ZXIgdHlwZSBjb3ZlcmFnZSBpbiBmdXR1cmVcblxudmFyIHByaW50RG9jQVNUUmVkdWNlciA9IHtcbiAgTmFtZTogZnVuY3Rpb24gTmFtZShub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUudmFsdWU7XG4gIH0sXG4gIFZhcmlhYmxlOiBmdW5jdGlvbiBWYXJpYWJsZShub2RlKSB7XG4gICAgcmV0dXJuICckJyArIG5vZGUubmFtZTtcbiAgfSxcbiAgLy8gRG9jdW1lbnRcbiAgRG9jdW1lbnQ6IGZ1bmN0aW9uIERvY3VtZW50KG5vZGUpIHtcbiAgICByZXR1cm4gam9pbihub2RlLmRlZmluaXRpb25zLCAnXFxuXFxuJykgKyAnXFxuJztcbiAgfSxcbiAgT3BlcmF0aW9uRGVmaW5pdGlvbjogZnVuY3Rpb24gT3BlcmF0aW9uRGVmaW5pdGlvbihub2RlKSB7XG4gICAgdmFyIG9wID0gbm9kZS5vcGVyYXRpb247XG4gICAgdmFyIG5hbWUgPSBub2RlLm5hbWU7XG4gICAgdmFyIHZhckRlZnMgPSB3cmFwKCcoJywgam9pbihub2RlLnZhcmlhYmxlRGVmaW5pdGlvbnMsICcsICcpLCAnKScpO1xuICAgIHZhciBkaXJlY3RpdmVzID0gam9pbihub2RlLmRpcmVjdGl2ZXMsICcgJyk7XG4gICAgdmFyIHNlbGVjdGlvblNldCA9IG5vZGUuc2VsZWN0aW9uU2V0OyAvLyBBbm9ueW1vdXMgcXVlcmllcyB3aXRoIG5vIGRpcmVjdGl2ZXMgb3IgdmFyaWFibGUgZGVmaW5pdGlvbnMgY2FuIHVzZVxuICAgIC8vIHRoZSBxdWVyeSBzaG9ydCBmb3JtLlxuXG4gICAgcmV0dXJuICFuYW1lICYmICFkaXJlY3RpdmVzICYmICF2YXJEZWZzICYmIG9wID09PSAncXVlcnknID8gc2VsZWN0aW9uU2V0IDogam9pbihbb3AsIGpvaW4oW25hbWUsIHZhckRlZnNdKSwgZGlyZWN0aXZlcywgc2VsZWN0aW9uU2V0XSwgJyAnKTtcbiAgfSxcbiAgVmFyaWFibGVEZWZpbml0aW9uOiBmdW5jdGlvbiBWYXJpYWJsZURlZmluaXRpb24oX3JlZikge1xuICAgIHZhciB2YXJpYWJsZSA9IF9yZWYudmFyaWFibGUsXG4gICAgICAgIHR5cGUgPSBfcmVmLnR5cGUsXG4gICAgICAgIGRlZmF1bHRWYWx1ZSA9IF9yZWYuZGVmYXVsdFZhbHVlLFxuICAgICAgICBkaXJlY3RpdmVzID0gX3JlZi5kaXJlY3RpdmVzO1xuICAgIHJldHVybiB2YXJpYWJsZSArICc6ICcgKyB0eXBlICsgd3JhcCgnID0gJywgZGVmYXVsdFZhbHVlKSArIHdyYXAoJyAnLCBqb2luKGRpcmVjdGl2ZXMsICcgJykpO1xuICB9LFxuICBTZWxlY3Rpb25TZXQ6IGZ1bmN0aW9uIFNlbGVjdGlvblNldChfcmVmMikge1xuICAgIHZhciBzZWxlY3Rpb25zID0gX3JlZjIuc2VsZWN0aW9ucztcbiAgICByZXR1cm4gYmxvY2soc2VsZWN0aW9ucyk7XG4gIH0sXG4gIEZpZWxkOiBmdW5jdGlvbiBGaWVsZChfcmVmMykge1xuICAgIHZhciBhbGlhcyA9IF9yZWYzLmFsaWFzLFxuICAgICAgICBuYW1lID0gX3JlZjMubmFtZSxcbiAgICAgICAgYXJncyA9IF9yZWYzLmFyZ3VtZW50cyxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWYzLmRpcmVjdGl2ZXMsXG4gICAgICAgIHNlbGVjdGlvblNldCA9IF9yZWYzLnNlbGVjdGlvblNldDtcbiAgICB2YXIgcHJlZml4ID0gd3JhcCgnJywgYWxpYXMsICc6ICcpICsgbmFtZTtcbiAgICB2YXIgYXJnc0xpbmUgPSBwcmVmaXggKyB3cmFwKCcoJywgam9pbihhcmdzLCAnLCAnKSwgJyknKTtcblxuICAgIGlmIChhcmdzTGluZS5sZW5ndGggPiBNQVhfTElORV9MRU5HVEgpIHtcbiAgICAgIGFyZ3NMaW5lID0gcHJlZml4ICsgd3JhcCgnKFxcbicsIGluZGVudChqb2luKGFyZ3MsICdcXG4nKSksICdcXG4pJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGpvaW4oW2FyZ3NMaW5lLCBqb2luKGRpcmVjdGl2ZXMsICcgJyksIHNlbGVjdGlvblNldF0sICcgJyk7XG4gIH0sXG4gIEFyZ3VtZW50OiBmdW5jdGlvbiBBcmd1bWVudChfcmVmNCkge1xuICAgIHZhciBuYW1lID0gX3JlZjQubmFtZSxcbiAgICAgICAgdmFsdWUgPSBfcmVmNC52YWx1ZTtcbiAgICByZXR1cm4gbmFtZSArICc6ICcgKyB2YWx1ZTtcbiAgfSxcbiAgLy8gRnJhZ21lbnRzXG4gIEZyYWdtZW50U3ByZWFkOiBmdW5jdGlvbiBGcmFnbWVudFNwcmVhZChfcmVmNSkge1xuICAgIHZhciBuYW1lID0gX3JlZjUubmFtZSxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWY1LmRpcmVjdGl2ZXM7XG4gICAgcmV0dXJuICcuLi4nICsgbmFtZSArIHdyYXAoJyAnLCBqb2luKGRpcmVjdGl2ZXMsICcgJykpO1xuICB9LFxuICBJbmxpbmVGcmFnbWVudDogZnVuY3Rpb24gSW5saW5lRnJhZ21lbnQoX3JlZjYpIHtcbiAgICB2YXIgdHlwZUNvbmRpdGlvbiA9IF9yZWY2LnR5cGVDb25kaXRpb24sXG4gICAgICAgIGRpcmVjdGl2ZXMgPSBfcmVmNi5kaXJlY3RpdmVzLFxuICAgICAgICBzZWxlY3Rpb25TZXQgPSBfcmVmNi5zZWxlY3Rpb25TZXQ7XG4gICAgcmV0dXJuIGpvaW4oWycuLi4nLCB3cmFwKCdvbiAnLCB0eXBlQ29uZGl0aW9uKSwgam9pbihkaXJlY3RpdmVzLCAnICcpLCBzZWxlY3Rpb25TZXRdLCAnICcpO1xuICB9LFxuICBGcmFnbWVudERlZmluaXRpb246IGZ1bmN0aW9uIEZyYWdtZW50RGVmaW5pdGlvbihfcmVmNykge1xuICAgIHZhciBuYW1lID0gX3JlZjcubmFtZSxcbiAgICAgICAgdHlwZUNvbmRpdGlvbiA9IF9yZWY3LnR5cGVDb25kaXRpb24sXG4gICAgICAgIHZhcmlhYmxlRGVmaW5pdGlvbnMgPSBfcmVmNy52YXJpYWJsZURlZmluaXRpb25zLFxuICAgICAgICBkaXJlY3RpdmVzID0gX3JlZjcuZGlyZWN0aXZlcyxcbiAgICAgICAgc2VsZWN0aW9uU2V0ID0gX3JlZjcuc2VsZWN0aW9uU2V0O1xuICAgIHJldHVybiAoLy8gTm90ZTogZnJhZ21lbnQgdmFyaWFibGUgZGVmaW5pdGlvbnMgYXJlIGV4cGVyaW1lbnRhbCBhbmQgbWF5IGJlIGNoYW5nZWRcbiAgICAgIC8vIG9yIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZS5cbiAgICAgIFwiZnJhZ21lbnQgXCIuY29uY2F0KG5hbWUpLmNvbmNhdCh3cmFwKCcoJywgam9pbih2YXJpYWJsZURlZmluaXRpb25zLCAnLCAnKSwgJyknKSwgXCIgXCIpICsgXCJvbiBcIi5jb25jYXQodHlwZUNvbmRpdGlvbiwgXCIgXCIpLmNvbmNhdCh3cmFwKCcnLCBqb2luKGRpcmVjdGl2ZXMsICcgJyksICcgJykpICsgc2VsZWN0aW9uU2V0XG4gICAgKTtcbiAgfSxcbiAgLy8gVmFsdWVcbiAgSW50VmFsdWU6IGZ1bmN0aW9uIEludFZhbHVlKF9yZWY4KSB7XG4gICAgdmFyIHZhbHVlID0gX3JlZjgudmFsdWU7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICBGbG9hdFZhbHVlOiBmdW5jdGlvbiBGbG9hdFZhbHVlKF9yZWY5KSB7XG4gICAgdmFyIHZhbHVlID0gX3JlZjkudmFsdWU7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICBTdHJpbmdWYWx1ZTogZnVuY3Rpb24gU3RyaW5nVmFsdWUoX3JlZjEwLCBrZXkpIHtcbiAgICB2YXIgdmFsdWUgPSBfcmVmMTAudmFsdWUsXG4gICAgICAgIGlzQmxvY2tTdHJpbmcgPSBfcmVmMTAuYmxvY2s7XG4gICAgcmV0dXJuIGlzQmxvY2tTdHJpbmcgPyBwcmludEJsb2NrU3RyaW5nKHZhbHVlLCBrZXkgPT09ICdkZXNjcmlwdGlvbicgPyAnJyA6ICcgICcpIDogSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICB9LFxuICBCb29sZWFuVmFsdWU6IGZ1bmN0aW9uIEJvb2xlYW5WYWx1ZShfcmVmMTEpIHtcbiAgICB2YXIgdmFsdWUgPSBfcmVmMTEudmFsdWU7XG4gICAgcmV0dXJuIHZhbHVlID8gJ3RydWUnIDogJ2ZhbHNlJztcbiAgfSxcbiAgTnVsbFZhbHVlOiBmdW5jdGlvbiBOdWxsVmFsdWUoKSB7XG4gICAgcmV0dXJuICdudWxsJztcbiAgfSxcbiAgRW51bVZhbHVlOiBmdW5jdGlvbiBFbnVtVmFsdWUoX3JlZjEyKSB7XG4gICAgdmFyIHZhbHVlID0gX3JlZjEyLnZhbHVlO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcbiAgTGlzdFZhbHVlOiBmdW5jdGlvbiBMaXN0VmFsdWUoX3JlZjEzKSB7XG4gICAgdmFyIHZhbHVlcyA9IF9yZWYxMy52YWx1ZXM7XG4gICAgcmV0dXJuICdbJyArIGpvaW4odmFsdWVzLCAnLCAnKSArICddJztcbiAgfSxcbiAgT2JqZWN0VmFsdWU6IGZ1bmN0aW9uIE9iamVjdFZhbHVlKF9yZWYxNCkge1xuICAgIHZhciBmaWVsZHMgPSBfcmVmMTQuZmllbGRzO1xuICAgIHJldHVybiAneycgKyBqb2luKGZpZWxkcywgJywgJykgKyAnfSc7XG4gIH0sXG4gIE9iamVjdEZpZWxkOiBmdW5jdGlvbiBPYmplY3RGaWVsZChfcmVmMTUpIHtcbiAgICB2YXIgbmFtZSA9IF9yZWYxNS5uYW1lLFxuICAgICAgICB2YWx1ZSA9IF9yZWYxNS52YWx1ZTtcbiAgICByZXR1cm4gbmFtZSArICc6ICcgKyB2YWx1ZTtcbiAgfSxcbiAgLy8gRGlyZWN0aXZlXG4gIERpcmVjdGl2ZTogZnVuY3Rpb24gRGlyZWN0aXZlKF9yZWYxNikge1xuICAgIHZhciBuYW1lID0gX3JlZjE2Lm5hbWUsXG4gICAgICAgIGFyZ3MgPSBfcmVmMTYuYXJndW1lbnRzO1xuICAgIHJldHVybiAnQCcgKyBuYW1lICsgd3JhcCgnKCcsIGpvaW4oYXJncywgJywgJyksICcpJyk7XG4gIH0sXG4gIC8vIFR5cGVcbiAgTmFtZWRUeXBlOiBmdW5jdGlvbiBOYW1lZFR5cGUoX3JlZjE3KSB7XG4gICAgdmFyIG5hbWUgPSBfcmVmMTcubmFtZTtcbiAgICByZXR1cm4gbmFtZTtcbiAgfSxcbiAgTGlzdFR5cGU6IGZ1bmN0aW9uIExpc3RUeXBlKF9yZWYxOCkge1xuICAgIHZhciB0eXBlID0gX3JlZjE4LnR5cGU7XG4gICAgcmV0dXJuICdbJyArIHR5cGUgKyAnXSc7XG4gIH0sXG4gIE5vbk51bGxUeXBlOiBmdW5jdGlvbiBOb25OdWxsVHlwZShfcmVmMTkpIHtcbiAgICB2YXIgdHlwZSA9IF9yZWYxOS50eXBlO1xuICAgIHJldHVybiB0eXBlICsgJyEnO1xuICB9LFxuICAvLyBUeXBlIFN5c3RlbSBEZWZpbml0aW9uc1xuICBTY2hlbWFEZWZpbml0aW9uOiBhZGREZXNjcmlwdGlvbihmdW5jdGlvbiAoX3JlZjIwKSB7XG4gICAgdmFyIGRpcmVjdGl2ZXMgPSBfcmVmMjAuZGlyZWN0aXZlcyxcbiAgICAgICAgb3BlcmF0aW9uVHlwZXMgPSBfcmVmMjAub3BlcmF0aW9uVHlwZXM7XG4gICAgcmV0dXJuIGpvaW4oWydzY2hlbWEnLCBqb2luKGRpcmVjdGl2ZXMsICcgJyksIGJsb2NrKG9wZXJhdGlvblR5cGVzKV0sICcgJyk7XG4gIH0pLFxuICBPcGVyYXRpb25UeXBlRGVmaW5pdGlvbjogZnVuY3Rpb24gT3BlcmF0aW9uVHlwZURlZmluaXRpb24oX3JlZjIxKSB7XG4gICAgdmFyIG9wZXJhdGlvbiA9IF9yZWYyMS5vcGVyYXRpb24sXG4gICAgICAgIHR5cGUgPSBfcmVmMjEudHlwZTtcbiAgICByZXR1cm4gb3BlcmF0aW9uICsgJzogJyArIHR5cGU7XG4gIH0sXG4gIFNjYWxhclR5cGVEZWZpbml0aW9uOiBhZGREZXNjcmlwdGlvbihmdW5jdGlvbiAoX3JlZjIyKSB7XG4gICAgdmFyIG5hbWUgPSBfcmVmMjIubmFtZSxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWYyMi5kaXJlY3RpdmVzO1xuICAgIHJldHVybiBqb2luKFsnc2NhbGFyJywgbmFtZSwgam9pbihkaXJlY3RpdmVzLCAnICcpXSwgJyAnKTtcbiAgfSksXG4gIE9iamVjdFR5cGVEZWZpbml0aW9uOiBhZGREZXNjcmlwdGlvbihmdW5jdGlvbiAoX3JlZjIzKSB7XG4gICAgdmFyIG5hbWUgPSBfcmVmMjMubmFtZSxcbiAgICAgICAgaW50ZXJmYWNlcyA9IF9yZWYyMy5pbnRlcmZhY2VzLFxuICAgICAgICBkaXJlY3RpdmVzID0gX3JlZjIzLmRpcmVjdGl2ZXMsXG4gICAgICAgIGZpZWxkcyA9IF9yZWYyMy5maWVsZHM7XG4gICAgcmV0dXJuIGpvaW4oWyd0eXBlJywgbmFtZSwgd3JhcCgnaW1wbGVtZW50cyAnLCBqb2luKGludGVyZmFjZXMsICcgJiAnKSksIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgYmxvY2soZmllbGRzKV0sICcgJyk7XG4gIH0pLFxuICBGaWVsZERlZmluaXRpb246IGFkZERlc2NyaXB0aW9uKGZ1bmN0aW9uIChfcmVmMjQpIHtcbiAgICB2YXIgbmFtZSA9IF9yZWYyNC5uYW1lLFxuICAgICAgICBhcmdzID0gX3JlZjI0LmFyZ3VtZW50cyxcbiAgICAgICAgdHlwZSA9IF9yZWYyNC50eXBlLFxuICAgICAgICBkaXJlY3RpdmVzID0gX3JlZjI0LmRpcmVjdGl2ZXM7XG4gICAgcmV0dXJuIG5hbWUgKyAoaGFzTXVsdGlsaW5lSXRlbXMoYXJncykgPyB3cmFwKCcoXFxuJywgaW5kZW50KGpvaW4oYXJncywgJ1xcbicpKSwgJ1xcbiknKSA6IHdyYXAoJygnLCBqb2luKGFyZ3MsICcsICcpLCAnKScpKSArICc6ICcgKyB0eXBlICsgd3JhcCgnICcsIGpvaW4oZGlyZWN0aXZlcywgJyAnKSk7XG4gIH0pLFxuICBJbnB1dFZhbHVlRGVmaW5pdGlvbjogYWRkRGVzY3JpcHRpb24oZnVuY3Rpb24gKF9yZWYyNSkge1xuICAgIHZhciBuYW1lID0gX3JlZjI1Lm5hbWUsXG4gICAgICAgIHR5cGUgPSBfcmVmMjUudHlwZSxcbiAgICAgICAgZGVmYXVsdFZhbHVlID0gX3JlZjI1LmRlZmF1bHRWYWx1ZSxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWYyNS5kaXJlY3RpdmVzO1xuICAgIHJldHVybiBqb2luKFtuYW1lICsgJzogJyArIHR5cGUsIHdyYXAoJz0gJywgZGVmYXVsdFZhbHVlKSwgam9pbihkaXJlY3RpdmVzLCAnICcpXSwgJyAnKTtcbiAgfSksXG4gIEludGVyZmFjZVR5cGVEZWZpbml0aW9uOiBhZGREZXNjcmlwdGlvbihmdW5jdGlvbiAoX3JlZjI2KSB7XG4gICAgdmFyIG5hbWUgPSBfcmVmMjYubmFtZSxcbiAgICAgICAgaW50ZXJmYWNlcyA9IF9yZWYyNi5pbnRlcmZhY2VzLFxuICAgICAgICBkaXJlY3RpdmVzID0gX3JlZjI2LmRpcmVjdGl2ZXMsXG4gICAgICAgIGZpZWxkcyA9IF9yZWYyNi5maWVsZHM7XG4gICAgcmV0dXJuIGpvaW4oWydpbnRlcmZhY2UnLCBuYW1lLCB3cmFwKCdpbXBsZW1lbnRzICcsIGpvaW4oaW50ZXJmYWNlcywgJyAmICcpKSwgam9pbihkaXJlY3RpdmVzLCAnICcpLCBibG9jayhmaWVsZHMpXSwgJyAnKTtcbiAgfSksXG4gIFVuaW9uVHlwZURlZmluaXRpb246IGFkZERlc2NyaXB0aW9uKGZ1bmN0aW9uIChfcmVmMjcpIHtcbiAgICB2YXIgbmFtZSA9IF9yZWYyNy5uYW1lLFxuICAgICAgICBkaXJlY3RpdmVzID0gX3JlZjI3LmRpcmVjdGl2ZXMsXG4gICAgICAgIHR5cGVzID0gX3JlZjI3LnR5cGVzO1xuICAgIHJldHVybiBqb2luKFsndW5pb24nLCBuYW1lLCBqb2luKGRpcmVjdGl2ZXMsICcgJyksIHR5cGVzICYmIHR5cGVzLmxlbmd0aCAhPT0gMCA/ICc9ICcgKyBqb2luKHR5cGVzLCAnIHwgJykgOiAnJ10sICcgJyk7XG4gIH0pLFxuICBFbnVtVHlwZURlZmluaXRpb246IGFkZERlc2NyaXB0aW9uKGZ1bmN0aW9uIChfcmVmMjgpIHtcbiAgICB2YXIgbmFtZSA9IF9yZWYyOC5uYW1lLFxuICAgICAgICBkaXJlY3RpdmVzID0gX3JlZjI4LmRpcmVjdGl2ZXMsXG4gICAgICAgIHZhbHVlcyA9IF9yZWYyOC52YWx1ZXM7XG4gICAgcmV0dXJuIGpvaW4oWydlbnVtJywgbmFtZSwgam9pbihkaXJlY3RpdmVzLCAnICcpLCBibG9jayh2YWx1ZXMpXSwgJyAnKTtcbiAgfSksXG4gIEVudW1WYWx1ZURlZmluaXRpb246IGFkZERlc2NyaXB0aW9uKGZ1bmN0aW9uIChfcmVmMjkpIHtcbiAgICB2YXIgbmFtZSA9IF9yZWYyOS5uYW1lLFxuICAgICAgICBkaXJlY3RpdmVzID0gX3JlZjI5LmRpcmVjdGl2ZXM7XG4gICAgcmV0dXJuIGpvaW4oW25hbWUsIGpvaW4oZGlyZWN0aXZlcywgJyAnKV0sICcgJyk7XG4gIH0pLFxuICBJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uOiBhZGREZXNjcmlwdGlvbihmdW5jdGlvbiAoX3JlZjMwKSB7XG4gICAgdmFyIG5hbWUgPSBfcmVmMzAubmFtZSxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWYzMC5kaXJlY3RpdmVzLFxuICAgICAgICBmaWVsZHMgPSBfcmVmMzAuZmllbGRzO1xuICAgIHJldHVybiBqb2luKFsnaW5wdXQnLCBuYW1lLCBqb2luKGRpcmVjdGl2ZXMsICcgJyksIGJsb2NrKGZpZWxkcyldLCAnICcpO1xuICB9KSxcbiAgRGlyZWN0aXZlRGVmaW5pdGlvbjogYWRkRGVzY3JpcHRpb24oZnVuY3Rpb24gKF9yZWYzMSkge1xuICAgIHZhciBuYW1lID0gX3JlZjMxLm5hbWUsXG4gICAgICAgIGFyZ3MgPSBfcmVmMzEuYXJndW1lbnRzLFxuICAgICAgICByZXBlYXRhYmxlID0gX3JlZjMxLnJlcGVhdGFibGUsXG4gICAgICAgIGxvY2F0aW9ucyA9IF9yZWYzMS5sb2NhdGlvbnM7XG4gICAgcmV0dXJuICdkaXJlY3RpdmUgQCcgKyBuYW1lICsgKGhhc011bHRpbGluZUl0ZW1zKGFyZ3MpID8gd3JhcCgnKFxcbicsIGluZGVudChqb2luKGFyZ3MsICdcXG4nKSksICdcXG4pJykgOiB3cmFwKCcoJywgam9pbihhcmdzLCAnLCAnKSwgJyknKSkgKyAocmVwZWF0YWJsZSA/ICcgcmVwZWF0YWJsZScgOiAnJykgKyAnIG9uICcgKyBqb2luKGxvY2F0aW9ucywgJyB8ICcpO1xuICB9KSxcbiAgU2NoZW1hRXh0ZW5zaW9uOiBmdW5jdGlvbiBTY2hlbWFFeHRlbnNpb24oX3JlZjMyKSB7XG4gICAgdmFyIGRpcmVjdGl2ZXMgPSBfcmVmMzIuZGlyZWN0aXZlcyxcbiAgICAgICAgb3BlcmF0aW9uVHlwZXMgPSBfcmVmMzIub3BlcmF0aW9uVHlwZXM7XG4gICAgcmV0dXJuIGpvaW4oWydleHRlbmQgc2NoZW1hJywgam9pbihkaXJlY3RpdmVzLCAnICcpLCBibG9jayhvcGVyYXRpb25UeXBlcyldLCAnICcpO1xuICB9LFxuICBTY2FsYXJUeXBlRXh0ZW5zaW9uOiBmdW5jdGlvbiBTY2FsYXJUeXBlRXh0ZW5zaW9uKF9yZWYzMykge1xuICAgIHZhciBuYW1lID0gX3JlZjMzLm5hbWUsXG4gICAgICAgIGRpcmVjdGl2ZXMgPSBfcmVmMzMuZGlyZWN0aXZlcztcbiAgICByZXR1cm4gam9pbihbJ2V4dGVuZCBzY2FsYXInLCBuYW1lLCBqb2luKGRpcmVjdGl2ZXMsICcgJyldLCAnICcpO1xuICB9LFxuICBPYmplY3RUeXBlRXh0ZW5zaW9uOiBmdW5jdGlvbiBPYmplY3RUeXBlRXh0ZW5zaW9uKF9yZWYzNCkge1xuICAgIHZhciBuYW1lID0gX3JlZjM0Lm5hbWUsXG4gICAgICAgIGludGVyZmFjZXMgPSBfcmVmMzQuaW50ZXJmYWNlcyxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWYzNC5kaXJlY3RpdmVzLFxuICAgICAgICBmaWVsZHMgPSBfcmVmMzQuZmllbGRzO1xuICAgIHJldHVybiBqb2luKFsnZXh0ZW5kIHR5cGUnLCBuYW1lLCB3cmFwKCdpbXBsZW1lbnRzICcsIGpvaW4oaW50ZXJmYWNlcywgJyAmICcpKSwgam9pbihkaXJlY3RpdmVzLCAnICcpLCBibG9jayhmaWVsZHMpXSwgJyAnKTtcbiAgfSxcbiAgSW50ZXJmYWNlVHlwZUV4dGVuc2lvbjogZnVuY3Rpb24gSW50ZXJmYWNlVHlwZUV4dGVuc2lvbihfcmVmMzUpIHtcbiAgICB2YXIgbmFtZSA9IF9yZWYzNS5uYW1lLFxuICAgICAgICBpbnRlcmZhY2VzID0gX3JlZjM1LmludGVyZmFjZXMsXG4gICAgICAgIGRpcmVjdGl2ZXMgPSBfcmVmMzUuZGlyZWN0aXZlcyxcbiAgICAgICAgZmllbGRzID0gX3JlZjM1LmZpZWxkcztcbiAgICByZXR1cm4gam9pbihbJ2V4dGVuZCBpbnRlcmZhY2UnLCBuYW1lLCB3cmFwKCdpbXBsZW1lbnRzICcsIGpvaW4oaW50ZXJmYWNlcywgJyAmICcpKSwgam9pbihkaXJlY3RpdmVzLCAnICcpLCBibG9jayhmaWVsZHMpXSwgJyAnKTtcbiAgfSxcbiAgVW5pb25UeXBlRXh0ZW5zaW9uOiBmdW5jdGlvbiBVbmlvblR5cGVFeHRlbnNpb24oX3JlZjM2KSB7XG4gICAgdmFyIG5hbWUgPSBfcmVmMzYubmFtZSxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWYzNi5kaXJlY3RpdmVzLFxuICAgICAgICB0eXBlcyA9IF9yZWYzNi50eXBlcztcbiAgICByZXR1cm4gam9pbihbJ2V4dGVuZCB1bmlvbicsIG5hbWUsIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgdHlwZXMgJiYgdHlwZXMubGVuZ3RoICE9PSAwID8gJz0gJyArIGpvaW4odHlwZXMsICcgfCAnKSA6ICcnXSwgJyAnKTtcbiAgfSxcbiAgRW51bVR5cGVFeHRlbnNpb246IGZ1bmN0aW9uIEVudW1UeXBlRXh0ZW5zaW9uKF9yZWYzNykge1xuICAgIHZhciBuYW1lID0gX3JlZjM3Lm5hbWUsXG4gICAgICAgIGRpcmVjdGl2ZXMgPSBfcmVmMzcuZGlyZWN0aXZlcyxcbiAgICAgICAgdmFsdWVzID0gX3JlZjM3LnZhbHVlcztcbiAgICByZXR1cm4gam9pbihbJ2V4dGVuZCBlbnVtJywgbmFtZSwgam9pbihkaXJlY3RpdmVzLCAnICcpLCBibG9jayh2YWx1ZXMpXSwgJyAnKTtcbiAgfSxcbiAgSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uOiBmdW5jdGlvbiBJbnB1dE9iamVjdFR5cGVFeHRlbnNpb24oX3JlZjM4KSB7XG4gICAgdmFyIG5hbWUgPSBfcmVmMzgubmFtZSxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWYzOC5kaXJlY3RpdmVzLFxuICAgICAgICBmaWVsZHMgPSBfcmVmMzguZmllbGRzO1xuICAgIHJldHVybiBqb2luKFsnZXh0ZW5kIGlucHV0JywgbmFtZSwgam9pbihkaXJlY3RpdmVzLCAnICcpLCBibG9jayhmaWVsZHMpXSwgJyAnKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gYWRkRGVzY3JpcHRpb24oY2IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgcmV0dXJuIGpvaW4oW25vZGUuZGVzY3JpcHRpb24sIGNiKG5vZGUpXSwgJ1xcbicpO1xuICB9O1xufVxuLyoqXG4gKiBHaXZlbiBtYXliZUFycmF5LCBwcmludCBhbiBlbXB0eSBzdHJpbmcgaWYgaXQgaXMgbnVsbCBvciBlbXB0eSwgb3RoZXJ3aXNlXG4gKiBwcmludCBhbGwgaXRlbXMgdG9nZXRoZXIgc2VwYXJhdGVkIGJ5IHNlcGFyYXRvciBpZiBwcm92aWRlZFxuICovXG5cblxuZnVuY3Rpb24gam9pbihtYXliZUFycmF5KSB7XG4gIHZhciBfbWF5YmVBcnJheSRmaWx0ZXIkam87XG5cbiAgdmFyIHNlcGFyYXRvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG4gIHJldHVybiAoX21heWJlQXJyYXkkZmlsdGVyJGpvID0gbWF5YmVBcnJheSA9PT0gbnVsbCB8fCBtYXliZUFycmF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtYXliZUFycmF5LmZpbHRlcihmdW5jdGlvbiAoeCkge1xuICAgIHJldHVybiB4O1xuICB9KS5qb2luKHNlcGFyYXRvcikpICE9PSBudWxsICYmIF9tYXliZUFycmF5JGZpbHRlciRqbyAhPT0gdm9pZCAwID8gX21heWJlQXJyYXkkZmlsdGVyJGpvIDogJyc7XG59XG4vKipcbiAqIEdpdmVuIGFycmF5LCBwcmludCBlYWNoIGl0ZW0gb24gaXRzIG93biBsaW5lLCB3cmFwcGVkIGluIGFuXG4gKiBpbmRlbnRlZCBcInsgfVwiIGJsb2NrLlxuICovXG5cblxuZnVuY3Rpb24gYmxvY2soYXJyYXkpIHtcbiAgcmV0dXJuIHdyYXAoJ3tcXG4nLCBpbmRlbnQoam9pbihhcnJheSwgJ1xcbicpKSwgJ1xcbn0nKTtcbn1cbi8qKlxuICogSWYgbWF5YmVTdHJpbmcgaXMgbm90IG51bGwgb3IgZW1wdHksIHRoZW4gd3JhcCB3aXRoIHN0YXJ0IGFuZCBlbmQsIG90aGVyd2lzZSBwcmludCBhbiBlbXB0eSBzdHJpbmcuXG4gKi9cblxuXG5mdW5jdGlvbiB3cmFwKHN0YXJ0LCBtYXliZVN0cmluZykge1xuICB2YXIgZW5kID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAnJztcbiAgcmV0dXJuIG1heWJlU3RyaW5nICE9IG51bGwgJiYgbWF5YmVTdHJpbmcgIT09ICcnID8gc3RhcnQgKyBtYXliZVN0cmluZyArIGVuZCA6ICcnO1xufVxuXG5mdW5jdGlvbiBpbmRlbnQoc3RyKSB7XG4gIHJldHVybiB3cmFwKCcgICcsIHN0ci5yZXBsYWNlKC9cXG4vZywgJ1xcbiAgJykpO1xufVxuXG5mdW5jdGlvbiBpc011bHRpbGluZShzdHIpIHtcbiAgcmV0dXJuIHN0ci5pbmRleE9mKCdcXG4nKSAhPT0gLTE7XG59XG5cbmZ1bmN0aW9uIGhhc011bHRpbGluZUl0ZW1zKG1heWJlQXJyYXkpIHtcbiAgcmV0dXJuIG1heWJlQXJyYXkgIT0gbnVsbCAmJiBtYXliZUFycmF5LnNvbWUoaXNNdWx0aWxpbmUpO1xufVxuIiwiaW1wb3J0IHsgS2luZCB9IGZyb20gXCIuL2tpbmRzLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGlzRGVmaW5pdGlvbk5vZGUobm9kZSkge1xuICByZXR1cm4gaXNFeGVjdXRhYmxlRGVmaW5pdGlvbk5vZGUobm9kZSkgfHwgaXNUeXBlU3lzdGVtRGVmaW5pdGlvbk5vZGUobm9kZSkgfHwgaXNUeXBlU3lzdGVtRXh0ZW5zaW9uTm9kZShub2RlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0V4ZWN1dGFibGVEZWZpbml0aW9uTm9kZShub2RlKSB7XG4gIHJldHVybiBub2RlLmtpbmQgPT09IEtpbmQuT1BFUkFUSU9OX0RFRklOSVRJT04gfHwgbm9kZS5raW5kID09PSBLaW5kLkZSQUdNRU5UX0RFRklOSVRJT047XG59XG5leHBvcnQgZnVuY3Rpb24gaXNTZWxlY3Rpb25Ob2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUua2luZCA9PT0gS2luZC5GSUVMRCB8fCBub2RlLmtpbmQgPT09IEtpbmQuRlJBR01FTlRfU1BSRUFEIHx8IG5vZGUua2luZCA9PT0gS2luZC5JTkxJTkVfRlJBR01FTlQ7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNWYWx1ZU5vZGUobm9kZSkge1xuICByZXR1cm4gbm9kZS5raW5kID09PSBLaW5kLlZBUklBQkxFIHx8IG5vZGUua2luZCA9PT0gS2luZC5JTlQgfHwgbm9kZS5raW5kID09PSBLaW5kLkZMT0FUIHx8IG5vZGUua2luZCA9PT0gS2luZC5TVFJJTkcgfHwgbm9kZS5raW5kID09PSBLaW5kLkJPT0xFQU4gfHwgbm9kZS5raW5kID09PSBLaW5kLk5VTEwgfHwgbm9kZS5raW5kID09PSBLaW5kLkVOVU0gfHwgbm9kZS5raW5kID09PSBLaW5kLkxJU1QgfHwgbm9kZS5raW5kID09PSBLaW5kLk9CSkVDVDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1R5cGVOb2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUua2luZCA9PT0gS2luZC5OQU1FRF9UWVBFIHx8IG5vZGUua2luZCA9PT0gS2luZC5MSVNUX1RZUEUgfHwgbm9kZS5raW5kID09PSBLaW5kLk5PTl9OVUxMX1RZUEU7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNUeXBlU3lzdGVtRGVmaW5pdGlvbk5vZGUobm9kZSkge1xuICByZXR1cm4gbm9kZS5raW5kID09PSBLaW5kLlNDSEVNQV9ERUZJTklUSU9OIHx8IGlzVHlwZURlZmluaXRpb25Ob2RlKG5vZGUpIHx8IG5vZGUua2luZCA9PT0gS2luZC5ESVJFQ1RJVkVfREVGSU5JVElPTjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1R5cGVEZWZpbml0aW9uTm9kZShub2RlKSB7XG4gIHJldHVybiBub2RlLmtpbmQgPT09IEtpbmQuU0NBTEFSX1RZUEVfREVGSU5JVElPTiB8fCBub2RlLmtpbmQgPT09IEtpbmQuT0JKRUNUX1RZUEVfREVGSU5JVElPTiB8fCBub2RlLmtpbmQgPT09IEtpbmQuSU5URVJGQUNFX1RZUEVfREVGSU5JVElPTiB8fCBub2RlLmtpbmQgPT09IEtpbmQuVU5JT05fVFlQRV9ERUZJTklUSU9OIHx8IG5vZGUua2luZCA9PT0gS2luZC5FTlVNX1RZUEVfREVGSU5JVElPTiB8fCBub2RlLmtpbmQgPT09IEtpbmQuSU5QVVRfT0JKRUNUX1RZUEVfREVGSU5JVElPTjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1R5cGVTeXN0ZW1FeHRlbnNpb25Ob2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUua2luZCA9PT0gS2luZC5TQ0hFTUFfRVhURU5TSU9OIHx8IGlzVHlwZUV4dGVuc2lvbk5vZGUobm9kZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNUeXBlRXh0ZW5zaW9uTm9kZShub2RlKSB7XG4gIHJldHVybiBub2RlLmtpbmQgPT09IEtpbmQuU0NBTEFSX1RZUEVfRVhURU5TSU9OIHx8IG5vZGUua2luZCA9PT0gS2luZC5PQkpFQ1RfVFlQRV9FWFRFTlNJT04gfHwgbm9kZS5raW5kID09PSBLaW5kLklOVEVSRkFDRV9UWVBFX0VYVEVOU0lPTiB8fCBub2RlLmtpbmQgPT09IEtpbmQuVU5JT05fVFlQRV9FWFRFTlNJT04gfHwgbm9kZS5raW5kID09PSBLaW5kLkVOVU1fVFlQRV9FWFRFTlNJT04gfHwgbm9kZS5raW5kID09PSBLaW5kLklOUFVUX09CSkVDVF9UWVBFX0VYVEVOU0lPTjtcbn1cbiIsImltcG9ydCB7IHJlbW92ZSB9IGZyb20gXCJ0cy1pbnZhcmlhbnQvcHJvY2Vzcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgU291cmNlIH0gZnJvbSAnZ3JhcGhxbCc7XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlVGVtcG9yYXJ5R2xvYmFscygpIHtcbiAgICByZXR1cm4gdHlwZW9mIFNvdXJjZSA9PT0gXCJmdW5jdGlvblwiID8gcmVtb3ZlKCkgOiByZW1vdmUoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpeC1ncmFwaHFsLmpzLm1hcCIsImltcG9ydCB7IGludmFyaWFudCwgSW52YXJpYW50RXJyb3IgfSBmcm9tIFwidHMtaW52YXJpYW50XCI7XG5pbXBvcnQgREVWIGZyb20gXCIuL0RFVi5qc1wiO1xuZXhwb3J0IHsgREVWIH07XG5leHBvcnQgZnVuY3Rpb24gY2hlY2tERVYoKSB7XG4gICAgX19ERVZfXyA/IGludmFyaWFudChcImJvb2xlYW5cIiA9PT0gdHlwZW9mIERFViwgREVWKSA6IGludmFyaWFudChcImJvb2xlYW5cIiA9PT0gdHlwZW9mIERFViwgMzkpO1xufVxuaW1wb3J0IHsgcmVtb3ZlVGVtcG9yYXJ5R2xvYmFscyB9IGZyb20gXCIuL2ZpeC1ncmFwaHFsLmpzXCI7XG5yZW1vdmVUZW1wb3JhcnlHbG9iYWxzKCk7XG5leHBvcnQgeyBtYXliZSB9IGZyb20gXCIuL21heWJlLmpzXCI7XG5leHBvcnQgeyBkZWZhdWx0IGFzIGdsb2JhbCB9IGZyb20gXCIuL2dsb2JhbC5qc1wiO1xuZXhwb3J0IHsgaW52YXJpYW50LCBJbnZhcmlhbnRFcnJvciB9O1xuY2hlY2tERVYoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCIuLi9nbG9iYWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyB2aXNpdCwgQlJFQUssIH0gZnJvbSAnZ3JhcGhxbCc7XG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkSW5jbHVkZShfYSwgdmFyaWFibGVzKSB7XG4gICAgdmFyIGRpcmVjdGl2ZXMgPSBfYS5kaXJlY3RpdmVzO1xuICAgIGlmICghZGlyZWN0aXZlcyB8fCAhZGlyZWN0aXZlcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBnZXRJbmNsdXNpb25EaXJlY3RpdmVzKGRpcmVjdGl2ZXMpLmV2ZXJ5KGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgZGlyZWN0aXZlID0gX2EuZGlyZWN0aXZlLCBpZkFyZ3VtZW50ID0gX2EuaWZBcmd1bWVudDtcbiAgICAgICAgdmFyIGV2YWxlZFZhbHVlID0gZmFsc2U7XG4gICAgICAgIGlmIChpZkFyZ3VtZW50LnZhbHVlLmtpbmQgPT09ICdWYXJpYWJsZScpIHtcbiAgICAgICAgICAgIGV2YWxlZFZhbHVlID0gdmFyaWFibGVzICYmIHZhcmlhYmxlc1tpZkFyZ3VtZW50LnZhbHVlLm5hbWUudmFsdWVdO1xuICAgICAgICAgICAgX19ERVZfXyA/IGludmFyaWFudChldmFsZWRWYWx1ZSAhPT0gdm9pZCAwLCBcIkludmFsaWQgdmFyaWFibGUgcmVmZXJlbmNlZCBpbiBAXCIuY29uY2F0KGRpcmVjdGl2ZS5uYW1lLnZhbHVlLCBcIiBkaXJlY3RpdmUuXCIpKSA6IGludmFyaWFudChldmFsZWRWYWx1ZSAhPT0gdm9pZCAwLCA0MCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBldmFsZWRWYWx1ZSA9IGlmQXJndW1lbnQudmFsdWUudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZS5uYW1lLnZhbHVlID09PSAnc2tpcCcgPyAhZXZhbGVkVmFsdWUgOiBldmFsZWRWYWx1ZTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXREaXJlY3RpdmVOYW1lcyhyb290KSB7XG4gICAgdmFyIG5hbWVzID0gW107XG4gICAgdmlzaXQocm9vdCwge1xuICAgICAgICBEaXJlY3RpdmU6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICBuYW1lcy5wdXNoKG5vZGUubmFtZS52YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIG5hbWVzO1xufVxuZXhwb3J0IHZhciBoYXNBbnlEaXJlY3RpdmVzID0gZnVuY3Rpb24gKG5hbWVzLCByb290KSB7IHJldHVybiBoYXNEaXJlY3RpdmVzKG5hbWVzLCByb290LCBmYWxzZSk7IH07XG5leHBvcnQgdmFyIGhhc0FsbERpcmVjdGl2ZXMgPSBmdW5jdGlvbiAobmFtZXMsIHJvb3QpIHsgcmV0dXJuIGhhc0RpcmVjdGl2ZXMobmFtZXMsIHJvb3QsIHRydWUpOyB9O1xuZXhwb3J0IGZ1bmN0aW9uIGhhc0RpcmVjdGl2ZXMobmFtZXMsIHJvb3QsIGFsbCkge1xuICAgIHZhciBuYW1lU2V0ID0gbmV3IFNldChuYW1lcyk7XG4gICAgdmFyIHVuaXF1ZUNvdW50ID0gbmFtZVNldC5zaXplO1xuICAgIHZpc2l0KHJvb3QsIHtcbiAgICAgICAgRGlyZWN0aXZlOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgaWYgKG5hbWVTZXQuZGVsZXRlKG5vZGUubmFtZS52YWx1ZSkgJiZcbiAgICAgICAgICAgICAgICAoIWFsbCB8fCAhbmFtZVNldC5zaXplKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBCUkVBSztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gYWxsID8gIW5hbWVTZXQuc2l6ZSA6IG5hbWVTZXQuc2l6ZSA8IHVuaXF1ZUNvdW50O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0NsaWVudEV4cG9ydHMoZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQgJiYgaGFzRGlyZWN0aXZlcyhbJ2NsaWVudCcsICdleHBvcnQnXSwgZG9jdW1lbnQsIHRydWUpO1xufVxuZnVuY3Rpb24gaXNJbmNsdXNpb25EaXJlY3RpdmUoX2EpIHtcbiAgICB2YXIgdmFsdWUgPSBfYS5uYW1lLnZhbHVlO1xuICAgIHJldHVybiB2YWx1ZSA9PT0gJ3NraXAnIHx8IHZhbHVlID09PSAnaW5jbHVkZSc7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5jbHVzaW9uRGlyZWN0aXZlcyhkaXJlY3RpdmVzKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIGlmIChkaXJlY3RpdmVzICYmIGRpcmVjdGl2ZXMubGVuZ3RoKSB7XG4gICAgICAgIGRpcmVjdGl2ZXMuZm9yRWFjaChmdW5jdGlvbiAoZGlyZWN0aXZlKSB7XG4gICAgICAgICAgICBpZiAoIWlzSW5jbHVzaW9uRGlyZWN0aXZlKGRpcmVjdGl2ZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGl2ZUFyZ3VtZW50cyA9IGRpcmVjdGl2ZS5hcmd1bWVudHM7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aXZlTmFtZSA9IGRpcmVjdGl2ZS5uYW1lLnZhbHVlO1xuICAgICAgICAgICAgX19ERVZfXyA/IGludmFyaWFudChkaXJlY3RpdmVBcmd1bWVudHMgJiYgZGlyZWN0aXZlQXJndW1lbnRzLmxlbmd0aCA9PT0gMSwgXCJJbmNvcnJlY3QgbnVtYmVyIG9mIGFyZ3VtZW50cyBmb3IgdGhlIEBcIi5jb25jYXQoZGlyZWN0aXZlTmFtZSwgXCIgZGlyZWN0aXZlLlwiKSkgOiBpbnZhcmlhbnQoZGlyZWN0aXZlQXJndW1lbnRzICYmIGRpcmVjdGl2ZUFyZ3VtZW50cy5sZW5ndGggPT09IDEsIDQxKTtcbiAgICAgICAgICAgIHZhciBpZkFyZ3VtZW50ID0gZGlyZWN0aXZlQXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgX19ERVZfXyA/IGludmFyaWFudChpZkFyZ3VtZW50Lm5hbWUgJiYgaWZBcmd1bWVudC5uYW1lLnZhbHVlID09PSAnaWYnLCBcIkludmFsaWQgYXJndW1lbnQgZm9yIHRoZSBAXCIuY29uY2F0KGRpcmVjdGl2ZU5hbWUsIFwiIGRpcmVjdGl2ZS5cIikpIDogaW52YXJpYW50KGlmQXJndW1lbnQubmFtZSAmJiBpZkFyZ3VtZW50Lm5hbWUudmFsdWUgPT09ICdpZicsIDQyKTtcbiAgICAgICAgICAgIHZhciBpZlZhbHVlID0gaWZBcmd1bWVudC52YWx1ZTtcbiAgICAgICAgICAgIF9fREVWX18gPyBpbnZhcmlhbnQoaWZWYWx1ZSAmJlxuICAgICAgICAgICAgICAgIChpZlZhbHVlLmtpbmQgPT09ICdWYXJpYWJsZScgfHwgaWZWYWx1ZS5raW5kID09PSAnQm9vbGVhblZhbHVlJyksIFwiQXJndW1lbnQgZm9yIHRoZSBAXCIuY29uY2F0KGRpcmVjdGl2ZU5hbWUsIFwiIGRpcmVjdGl2ZSBtdXN0IGJlIGEgdmFyaWFibGUgb3IgYSBib29sZWFuIHZhbHVlLlwiKSkgOiBpbnZhcmlhbnQoaWZWYWx1ZSAmJlxuICAgICAgICAgICAgICAgIChpZlZhbHVlLmtpbmQgPT09ICdWYXJpYWJsZScgfHwgaWZWYWx1ZS5raW5kID09PSAnQm9vbGVhblZhbHVlJyksIDQzKTtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHsgZGlyZWN0aXZlOiBkaXJlY3RpdmUsIGlmQXJndW1lbnQ6IGlmQXJndW1lbnQgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlyZWN0aXZlcy5qcy5tYXAiLCJpbXBvcnQgeyBfX2Fzc2lnbiwgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaW52YXJpYW50LCBJbnZhcmlhbnRFcnJvciB9IGZyb20gXCIuLi9nbG9iYWxzL2luZGV4LmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRRdWVyeURvY3VtZW50KGRvY3VtZW50LCBmcmFnbWVudE5hbWUpIHtcbiAgICB2YXIgYWN0dWFsRnJhZ21lbnROYW1lID0gZnJhZ21lbnROYW1lO1xuICAgIHZhciBmcmFnbWVudHMgPSBbXTtcbiAgICBkb2N1bWVudC5kZWZpbml0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChkZWZpbml0aW9uKSB7XG4gICAgICAgIGlmIChkZWZpbml0aW9uLmtpbmQgPT09ICdPcGVyYXRpb25EZWZpbml0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgX19ERVZfXyA/IG5ldyBJbnZhcmlhbnRFcnJvcihcIkZvdW5kIGEgXCIuY29uY2F0KGRlZmluaXRpb24ub3BlcmF0aW9uLCBcIiBvcGVyYXRpb25cIikuY29uY2F0KGRlZmluaXRpb24ubmFtZSA/IFwiIG5hbWVkICdcIi5jb25jYXQoZGVmaW5pdGlvbi5uYW1lLnZhbHVlLCBcIidcIikgOiAnJywgXCIuIFwiKSArXG4gICAgICAgICAgICAgICAgJ05vIG9wZXJhdGlvbnMgYXJlIGFsbG93ZWQgd2hlbiB1c2luZyBhIGZyYWdtZW50IGFzIGEgcXVlcnkuIE9ubHkgZnJhZ21lbnRzIGFyZSBhbGxvd2VkLicpIDogbmV3IEludmFyaWFudEVycm9yKDQ0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmaW5pdGlvbi5raW5kID09PSAnRnJhZ21lbnREZWZpbml0aW9uJykge1xuICAgICAgICAgICAgZnJhZ21lbnRzLnB1c2goZGVmaW5pdGlvbik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAodHlwZW9mIGFjdHVhbEZyYWdtZW50TmFtZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgX19ERVZfXyA/IGludmFyaWFudChmcmFnbWVudHMubGVuZ3RoID09PSAxLCBcIkZvdW5kIFwiLmNvbmNhdChmcmFnbWVudHMubGVuZ3RoLCBcIiBmcmFnbWVudHMuIGBmcmFnbWVudE5hbWVgIG11c3QgYmUgcHJvdmlkZWQgd2hlbiB0aGVyZSBpcyBub3QgZXhhY3RseSAxIGZyYWdtZW50LlwiKSkgOiBpbnZhcmlhbnQoZnJhZ21lbnRzLmxlbmd0aCA9PT0gMSwgNDUpO1xuICAgICAgICBhY3R1YWxGcmFnbWVudE5hbWUgPSBmcmFnbWVudHNbMF0ubmFtZS52YWx1ZTtcbiAgICB9XG4gICAgdmFyIHF1ZXJ5ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGRvY3VtZW50KSwgeyBkZWZpbml0aW9uczogX19zcHJlYWRBcnJheShbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2luZDogJ09wZXJhdGlvbkRlZmluaXRpb24nLFxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25TZXQ6IHtcbiAgICAgICAgICAgICAgICAgICAga2luZDogJ1NlbGVjdGlvblNldCcsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiAnRnJhZ21lbnRTcHJlYWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogJ05hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYWN0dWFsRnJhZ21lbnROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sIGRvY3VtZW50LmRlZmluaXRpb25zLCB0cnVlKSB9KTtcbiAgICByZXR1cm4gcXVlcnk7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnJhZ21lbnRNYXAoZnJhZ21lbnRzKSB7XG4gICAgaWYgKGZyYWdtZW50cyA9PT0gdm9pZCAwKSB7IGZyYWdtZW50cyA9IFtdOyB9XG4gICAgdmFyIHN5bVRhYmxlID0ge307XG4gICAgZnJhZ21lbnRzLmZvckVhY2goZnVuY3Rpb24gKGZyYWdtZW50KSB7XG4gICAgICAgIHN5bVRhYmxlW2ZyYWdtZW50Lm5hbWUudmFsdWVdID0gZnJhZ21lbnQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIHN5bVRhYmxlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50RnJvbVNlbGVjdGlvbihzZWxlY3Rpb24sIGZyYWdtZW50TWFwKSB7XG4gICAgc3dpdGNoIChzZWxlY3Rpb24ua2luZCkge1xuICAgICAgICBjYXNlICdJbmxpbmVGcmFnbWVudCc6XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uO1xuICAgICAgICBjYXNlICdGcmFnbWVudFNwcmVhZCc6IHtcbiAgICAgICAgICAgIHZhciBmcmFnbWVudE5hbWUgPSBzZWxlY3Rpb24ubmFtZS52YWx1ZTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZnJhZ21lbnRNYXAgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmcmFnbWVudE1hcChmcmFnbWVudE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZyYWdtZW50ID0gZnJhZ21lbnRNYXAgJiYgZnJhZ21lbnRNYXBbZnJhZ21lbnROYW1lXTtcbiAgICAgICAgICAgIF9fREVWX18gPyBpbnZhcmlhbnQoZnJhZ21lbnQsIFwiTm8gZnJhZ21lbnQgbmFtZWQgXCIuY29uY2F0KGZyYWdtZW50TmFtZSkpIDogaW52YXJpYW50KGZyYWdtZW50LCA0Nik7XG4gICAgICAgICAgICByZXR1cm4gZnJhZ21lbnQgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJhZ21lbnRzLmpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBpc05vbk51bGxPYmplY3Qob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9iamVjdHMuanMubWFwIiwiaW1wb3J0IHsgSW52YXJpYW50RXJyb3IgfSBmcm9tIFwiLi4vZ2xvYmFscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgaXNOb25OdWxsT2JqZWN0IH0gZnJvbSBcIi4uL2NvbW1vbi9vYmplY3RzLmpzXCI7XG5pbXBvcnQgeyBnZXRGcmFnbWVudEZyb21TZWxlY3Rpb24gfSBmcm9tIFwiLi9mcmFnbWVudHMuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBtYWtlUmVmZXJlbmNlKGlkKSB7XG4gICAgcmV0dXJuIHsgX19yZWY6IFN0cmluZyhpZCkgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1JlZmVyZW5jZShvYmopIHtcbiAgICByZXR1cm4gQm9vbGVhbihvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9iai5fX3JlZiA9PT0gJ3N0cmluZycpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzRG9jdW1lbnROb2RlKHZhbHVlKSB7XG4gICAgcmV0dXJuIChpc05vbk51bGxPYmplY3QodmFsdWUpICYmXG4gICAgICAgIHZhbHVlLmtpbmQgPT09IFwiRG9jdW1lbnRcIiAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KHZhbHVlLmRlZmluaXRpb25zKSk7XG59XG5mdW5jdGlvbiBpc1N0cmluZ1ZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLmtpbmQgPT09ICdTdHJpbmdWYWx1ZSc7XG59XG5mdW5jdGlvbiBpc0Jvb2xlYW5WYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5raW5kID09PSAnQm9vbGVhblZhbHVlJztcbn1cbmZ1bmN0aW9uIGlzSW50VmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUua2luZCA9PT0gJ0ludFZhbHVlJztcbn1cbmZ1bmN0aW9uIGlzRmxvYXRWYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5raW5kID09PSAnRmxvYXRWYWx1ZSc7XG59XG5mdW5jdGlvbiBpc1ZhcmlhYmxlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLmtpbmQgPT09ICdWYXJpYWJsZSc7XG59XG5mdW5jdGlvbiBpc09iamVjdFZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLmtpbmQgPT09ICdPYmplY3RWYWx1ZSc7XG59XG5mdW5jdGlvbiBpc0xpc3RWYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5raW5kID09PSAnTGlzdFZhbHVlJztcbn1cbmZ1bmN0aW9uIGlzRW51bVZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLmtpbmQgPT09ICdFbnVtVmFsdWUnO1xufVxuZnVuY3Rpb24gaXNOdWxsVmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUua2luZCA9PT0gJ051bGxWYWx1ZSc7XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uKGFyZ09iaiwgbmFtZSwgdmFsdWUsIHZhcmlhYmxlcykge1xuICAgIGlmIChpc0ludFZhbHVlKHZhbHVlKSB8fCBpc0Zsb2F0VmFsdWUodmFsdWUpKSB7XG4gICAgICAgIGFyZ09ialtuYW1lLnZhbHVlXSA9IE51bWJlcih2YWx1ZS52YWx1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQm9vbGVhblZhbHVlKHZhbHVlKSB8fCBpc1N0cmluZ1ZhbHVlKHZhbHVlKSkge1xuICAgICAgICBhcmdPYmpbbmFtZS52YWx1ZV0gPSB2YWx1ZS52YWx1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPYmplY3RWYWx1ZSh2YWx1ZSkpIHtcbiAgICAgICAgdmFyIG5lc3RlZEFyZ09ial8xID0ge307XG4gICAgICAgIHZhbHVlLmZpZWxkcy5tYXAoZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbihuZXN0ZWRBcmdPYmpfMSwgb2JqLm5hbWUsIG9iai52YWx1ZSwgdmFyaWFibGVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFyZ09ialtuYW1lLnZhbHVlXSA9IG5lc3RlZEFyZ09ial8xO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1ZhcmlhYmxlKHZhbHVlKSkge1xuICAgICAgICB2YXIgdmFyaWFibGVWYWx1ZSA9ICh2YXJpYWJsZXMgfHwge30pW3ZhbHVlLm5hbWUudmFsdWVdO1xuICAgICAgICBhcmdPYmpbbmFtZS52YWx1ZV0gPSB2YXJpYWJsZVZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0xpc3RWYWx1ZSh2YWx1ZSkpIHtcbiAgICAgICAgYXJnT2JqW25hbWUudmFsdWVdID0gdmFsdWUudmFsdWVzLm1hcChmdW5jdGlvbiAobGlzdFZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgbmVzdGVkQXJnQXJyYXlPYmogPSB7fTtcbiAgICAgICAgICAgIHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbihuZXN0ZWRBcmdBcnJheU9iaiwgbmFtZSwgbGlzdFZhbHVlLCB2YXJpYWJsZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5lc3RlZEFyZ0FycmF5T2JqW25hbWUudmFsdWVdO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNFbnVtVmFsdWUodmFsdWUpKSB7XG4gICAgICAgIGFyZ09ialtuYW1lLnZhbHVlXSA9IHZhbHVlLnZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc051bGxWYWx1ZSh2YWx1ZSkpIHtcbiAgICAgICAgYXJnT2JqW25hbWUudmFsdWVdID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IF9fREVWX18gPyBuZXcgSW52YXJpYW50RXJyb3IoXCJUaGUgaW5saW5lIGFyZ3VtZW50IFxcXCJcIi5jb25jYXQobmFtZS52YWx1ZSwgXCJcXFwiIG9mIGtpbmQgXFxcIlwiKS5jb25jYXQodmFsdWUua2luZCwgXCJcXFwiXCIpICtcbiAgICAgICAgICAgICdpcyBub3Qgc3VwcG9ydGVkLiBVc2UgdmFyaWFibGVzIGluc3RlYWQgb2YgaW5saW5lIGFyZ3VtZW50cyB0byAnICtcbiAgICAgICAgICAgICdvdmVyY29tZSB0aGlzIGxpbWl0YXRpb24uJykgOiBuZXcgSW52YXJpYW50RXJyb3IoNTUpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZUtleU5hbWVGcm9tRmllbGQoZmllbGQsIHZhcmlhYmxlcykge1xuICAgIHZhciBkaXJlY3RpdmVzT2JqID0gbnVsbDtcbiAgICBpZiAoZmllbGQuZGlyZWN0aXZlcykge1xuICAgICAgICBkaXJlY3RpdmVzT2JqID0ge307XG4gICAgICAgIGZpZWxkLmRpcmVjdGl2ZXMuZm9yRWFjaChmdW5jdGlvbiAoZGlyZWN0aXZlKSB7XG4gICAgICAgICAgICBkaXJlY3RpdmVzT2JqW2RpcmVjdGl2ZS5uYW1lLnZhbHVlXSA9IHt9O1xuICAgICAgICAgICAgaWYgKGRpcmVjdGl2ZS5hcmd1bWVudHMpIHtcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUuYXJndW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gX2EubmFtZSwgdmFsdWUgPSBfYS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbihkaXJlY3RpdmVzT2JqW2RpcmVjdGl2ZS5uYW1lLnZhbHVlXSwgbmFtZSwgdmFsdWUsIHZhcmlhYmxlcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB2YXIgYXJnT2JqID0gbnVsbDtcbiAgICBpZiAoZmllbGQuYXJndW1lbnRzICYmIGZpZWxkLmFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgYXJnT2JqID0ge307XG4gICAgICAgIGZpZWxkLmFyZ3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIG5hbWUgPSBfYS5uYW1lLCB2YWx1ZSA9IF9hLnZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbihhcmdPYmosIG5hbWUsIHZhbHVlLCB2YXJpYWJsZXMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGdldFN0b3JlS2V5TmFtZShmaWVsZC5uYW1lLnZhbHVlLCBhcmdPYmosIGRpcmVjdGl2ZXNPYmopO1xufVxudmFyIEtOT1dOX0RJUkVDVElWRVMgPSBbXG4gICAgJ2Nvbm5lY3Rpb24nLFxuICAgICdpbmNsdWRlJyxcbiAgICAnc2tpcCcsXG4gICAgJ2NsaWVudCcsXG4gICAgJ3Jlc3QnLFxuICAgICdleHBvcnQnLFxuXTtcbmV4cG9ydCB2YXIgZ2V0U3RvcmVLZXlOYW1lID0gT2JqZWN0LmFzc2lnbihmdW5jdGlvbiAoZmllbGROYW1lLCBhcmdzLCBkaXJlY3RpdmVzKSB7XG4gICAgaWYgKGFyZ3MgJiZcbiAgICAgICAgZGlyZWN0aXZlcyAmJlxuICAgICAgICBkaXJlY3RpdmVzWydjb25uZWN0aW9uJ10gJiZcbiAgICAgICAgZGlyZWN0aXZlc1snY29ubmVjdGlvbiddWydrZXknXSkge1xuICAgICAgICBpZiAoZGlyZWN0aXZlc1snY29ubmVjdGlvbiddWydmaWx0ZXInXSAmJlxuICAgICAgICAgICAgZGlyZWN0aXZlc1snY29ubmVjdGlvbiddWydmaWx0ZXInXS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyS2V5cyA9IGRpcmVjdGl2ZXNbJ2Nvbm5lY3Rpb24nXVsnZmlsdGVyJ11cbiAgICAgICAgICAgICAgICA/IGRpcmVjdGl2ZXNbJ2Nvbm5lY3Rpb24nXVsnZmlsdGVyJ11cbiAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICAgICAgZmlsdGVyS2V5cy5zb3J0KCk7XG4gICAgICAgICAgICB2YXIgZmlsdGVyZWRBcmdzXzEgPSB7fTtcbiAgICAgICAgICAgIGZpbHRlcktleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyZWRBcmdzXzFba2V5XSA9IGFyZ3Nba2V5XTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KGRpcmVjdGl2ZXNbJ2Nvbm5lY3Rpb24nXVsna2V5J10sIFwiKFwiKS5jb25jYXQoc3RyaW5naWZ5KGZpbHRlcmVkQXJnc18xKSwgXCIpXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZXNbJ2Nvbm5lY3Rpb24nXVsna2V5J107XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGNvbXBsZXRlRmllbGROYW1lID0gZmllbGROYW1lO1xuICAgIGlmIChhcmdzKSB7XG4gICAgICAgIHZhciBzdHJpbmdpZmllZEFyZ3MgPSBzdHJpbmdpZnkoYXJncyk7XG4gICAgICAgIGNvbXBsZXRlRmllbGROYW1lICs9IFwiKFwiLmNvbmNhdChzdHJpbmdpZmllZEFyZ3MsIFwiKVwiKTtcbiAgICB9XG4gICAgaWYgKGRpcmVjdGl2ZXMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoZGlyZWN0aXZlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAoS05PV05fRElSRUNUSVZFUy5pbmRleE9mKGtleSkgIT09IC0xKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmIChkaXJlY3RpdmVzW2tleV0gJiYgT2JqZWN0LmtleXMoZGlyZWN0aXZlc1trZXldKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZUZpZWxkTmFtZSArPSBcIkBcIi5jb25jYXQoa2V5LCBcIihcIikuY29uY2F0KHN0cmluZ2lmeShkaXJlY3RpdmVzW2tleV0pLCBcIilcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZUZpZWxkTmFtZSArPSBcIkBcIi5jb25jYXQoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBjb21wbGV0ZUZpZWxkTmFtZTtcbn0sIHtcbiAgICBzZXRTdHJpbmdpZnk6IGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHZhciBwcmV2aW91cyA9IHN0cmluZ2lmeTtcbiAgICAgICAgc3RyaW5naWZ5ID0gcztcbiAgICAgICAgcmV0dXJuIHByZXZpb3VzO1xuICAgIH0sXG59KTtcbnZhciBzdHJpbmdpZnkgPSBmdW5jdGlvbiBkZWZhdWx0U3RyaW5naWZ5KHZhbHVlKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlLCBzdHJpbmdpZnlSZXBsYWNlcik7XG59O1xuZnVuY3Rpb24gc3RyaW5naWZ5UmVwbGFjZXIoX2tleSwgdmFsdWUpIHtcbiAgICBpZiAoaXNOb25OdWxsT2JqZWN0KHZhbHVlKSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSBPYmplY3Qua2V5cyh2YWx1ZSkuc29ydCgpLnJlZHVjZShmdW5jdGlvbiAoY29weSwga2V5KSB7XG4gICAgICAgICAgICBjb3B5W2tleV0gPSB2YWx1ZVtrZXldO1xuICAgICAgICAgICAgcmV0dXJuIGNvcHk7XG4gICAgICAgIH0sIHt9KTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFyZ3VtZW50c09iamVjdEZyb21GaWVsZChmaWVsZCwgdmFyaWFibGVzKSB7XG4gICAgaWYgKGZpZWxkLmFyZ3VtZW50cyAmJiBmaWVsZC5hcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBhcmdPYmpfMSA9IHt9O1xuICAgICAgICBmaWVsZC5hcmd1bWVudHMuZm9yRWFjaChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gX2EubmFtZSwgdmFsdWUgPSBfYS52YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZVRvT2JqZWN0UmVwcmVzZW50YXRpb24oYXJnT2JqXzEsIG5hbWUsIHZhbHVlLCB2YXJpYWJsZXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFyZ09ial8xO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXN1bHRLZXlOYW1lRnJvbUZpZWxkKGZpZWxkKSB7XG4gICAgcmV0dXJuIGZpZWxkLmFsaWFzID8gZmllbGQuYWxpYXMudmFsdWUgOiBmaWVsZC5uYW1lLnZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFR5cGVuYW1lRnJvbVJlc3VsdChyZXN1bHQsIHNlbGVjdGlvblNldCwgZnJhZ21lbnRNYXApIHtcbiAgICBpZiAodHlwZW9mIHJlc3VsdC5fX3R5cGVuYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gcmVzdWx0Ll9fdHlwZW5hbWU7XG4gICAgfVxuICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBzZWxlY3Rpb25TZXQuc2VsZWN0aW9uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIHNlbGVjdGlvbiA9IF9hW19pXTtcbiAgICAgICAgaWYgKGlzRmllbGQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgaWYgKHNlbGVjdGlvbi5uYW1lLnZhbHVlID09PSAnX190eXBlbmFtZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0W3Jlc3VsdEtleU5hbWVGcm9tRmllbGQoc2VsZWN0aW9uKV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgdHlwZW5hbWUgPSBnZXRUeXBlbmFtZUZyb21SZXN1bHQocmVzdWx0LCBnZXRGcmFnbWVudEZyb21TZWxlY3Rpb24oc2VsZWN0aW9uLCBmcmFnbWVudE1hcCkuc2VsZWN0aW9uU2V0LCBmcmFnbWVudE1hcCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHR5cGVuYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlbmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0ZpZWxkKHNlbGVjdGlvbikge1xuICAgIHJldHVybiBzZWxlY3Rpb24ua2luZCA9PT0gJ0ZpZWxkJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0lubGluZUZyYWdtZW50KHNlbGVjdGlvbikge1xuICAgIHJldHVybiBzZWxlY3Rpb24ua2luZCA9PT0gJ0lubGluZUZyYWdtZW50Jztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0b3JlVXRpbHMuanMubWFwIiwiaW1wb3J0IHsgaW52YXJpYW50LCBJbnZhcmlhbnRFcnJvciB9IGZyb20gXCIuLi9nbG9iYWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyB2YWx1ZVRvT2JqZWN0UmVwcmVzZW50YXRpb24gfSBmcm9tIFwiLi9zdG9yZVV0aWxzLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gY2hlY2tEb2N1bWVudChkb2MpIHtcbiAgICBfX0RFVl9fID8gaW52YXJpYW50KGRvYyAmJiBkb2Mua2luZCA9PT0gJ0RvY3VtZW50JywgXCJFeHBlY3RpbmcgYSBwYXJzZWQgR3JhcGhRTCBkb2N1bWVudC4gUGVyaGFwcyB5b3UgbmVlZCB0byB3cmFwIHRoZSBxdWVyeSBzdHJpbmcgaW4gYSBcXFwiZ3FsXFxcIiB0YWc/IGh0dHA6Ly9kb2NzLmFwb2xsb3N0YWNrLmNvbS9hcG9sbG8tY2xpZW50L2NvcmUuaHRtbCNncWxcIikgOiBpbnZhcmlhbnQoZG9jICYmIGRvYy5raW5kID09PSAnRG9jdW1lbnQnLCA0Nyk7XG4gICAgdmFyIG9wZXJhdGlvbnMgPSBkb2MuZGVmaW5pdGlvbnNcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5raW5kICE9PSAnRnJhZ21lbnREZWZpbml0aW9uJzsgfSlcbiAgICAgICAgLm1hcChmdW5jdGlvbiAoZGVmaW5pdGlvbikge1xuICAgICAgICBpZiAoZGVmaW5pdGlvbi5raW5kICE9PSAnT3BlcmF0aW9uRGVmaW5pdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IF9fREVWX18gPyBuZXcgSW52YXJpYW50RXJyb3IoXCJTY2hlbWEgdHlwZSBkZWZpbml0aW9ucyBub3QgYWxsb3dlZCBpbiBxdWVyaWVzLiBGb3VuZDogXFxcIlwiLmNvbmNhdChkZWZpbml0aW9uLmtpbmQsIFwiXFxcIlwiKSkgOiBuZXcgSW52YXJpYW50RXJyb3IoNDgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuICAgIH0pO1xuICAgIF9fREVWX18gPyBpbnZhcmlhbnQob3BlcmF0aW9ucy5sZW5ndGggPD0gMSwgXCJBbWJpZ3VvdXMgR3JhcGhRTCBkb2N1bWVudDogY29udGFpbnMgXCIuY29uY2F0KG9wZXJhdGlvbnMubGVuZ3RoLCBcIiBvcGVyYXRpb25zXCIpKSA6IGludmFyaWFudChvcGVyYXRpb25zLmxlbmd0aCA8PSAxLCA0OSk7XG4gICAgcmV0dXJuIGRvYztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcGVyYXRpb25EZWZpbml0aW9uKGRvYykge1xuICAgIGNoZWNrRG9jdW1lbnQoZG9jKTtcbiAgICByZXR1cm4gZG9jLmRlZmluaXRpb25zLmZpbHRlcihmdW5jdGlvbiAoZGVmaW5pdGlvbikge1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvbi5raW5kID09PSAnT3BlcmF0aW9uRGVmaW5pdGlvbic7XG4gICAgfSlbMF07XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0T3BlcmF0aW9uTmFtZShkb2MpIHtcbiAgICByZXR1cm4gKGRvYy5kZWZpbml0aW9uc1xuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChkZWZpbml0aW9uKSB7XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9uLmtpbmQgPT09ICdPcGVyYXRpb25EZWZpbml0aW9uJyAmJiAhIWRlZmluaXRpb24ubmFtZTtcbiAgICB9KVxuICAgICAgICAubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4Lm5hbWUudmFsdWU7IH0pWzBdIHx8IG51bGwpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50RGVmaW5pdGlvbnMoZG9jKSB7XG4gICAgcmV0dXJuIGRvYy5kZWZpbml0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKGRlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb24ua2luZCA9PT0gJ0ZyYWdtZW50RGVmaW5pdGlvbic7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UXVlcnlEZWZpbml0aW9uKGRvYykge1xuICAgIHZhciBxdWVyeURlZiA9IGdldE9wZXJhdGlvbkRlZmluaXRpb24oZG9jKTtcbiAgICBfX0RFVl9fID8gaW52YXJpYW50KHF1ZXJ5RGVmICYmIHF1ZXJ5RGVmLm9wZXJhdGlvbiA9PT0gJ3F1ZXJ5JywgJ011c3QgY29udGFpbiBhIHF1ZXJ5IGRlZmluaXRpb24uJykgOiBpbnZhcmlhbnQocXVlcnlEZWYgJiYgcXVlcnlEZWYub3BlcmF0aW9uID09PSAncXVlcnknLCA1MCk7XG4gICAgcmV0dXJuIHF1ZXJ5RGVmO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50RGVmaW5pdGlvbihkb2MpIHtcbiAgICBfX0RFVl9fID8gaW52YXJpYW50KGRvYy5raW5kID09PSAnRG9jdW1lbnQnLCBcIkV4cGVjdGluZyBhIHBhcnNlZCBHcmFwaFFMIGRvY3VtZW50LiBQZXJoYXBzIHlvdSBuZWVkIHRvIHdyYXAgdGhlIHF1ZXJ5IHN0cmluZyBpbiBhIFxcXCJncWxcXFwiIHRhZz8gaHR0cDovL2RvY3MuYXBvbGxvc3RhY2suY29tL2Fwb2xsby1jbGllbnQvY29yZS5odG1sI2dxbFwiKSA6IGludmFyaWFudChkb2Mua2luZCA9PT0gJ0RvY3VtZW50JywgNTEpO1xuICAgIF9fREVWX18gPyBpbnZhcmlhbnQoZG9jLmRlZmluaXRpb25zLmxlbmd0aCA8PSAxLCAnRnJhZ21lbnQgbXVzdCBoYXZlIGV4YWN0bHkgb25lIGRlZmluaXRpb24uJykgOiBpbnZhcmlhbnQoZG9jLmRlZmluaXRpb25zLmxlbmd0aCA8PSAxLCA1Mik7XG4gICAgdmFyIGZyYWdtZW50RGVmID0gZG9jLmRlZmluaXRpb25zWzBdO1xuICAgIF9fREVWX18gPyBpbnZhcmlhbnQoZnJhZ21lbnREZWYua2luZCA9PT0gJ0ZyYWdtZW50RGVmaW5pdGlvbicsICdNdXN0IGJlIGEgZnJhZ21lbnQgZGVmaW5pdGlvbi4nKSA6IGludmFyaWFudChmcmFnbWVudERlZi5raW5kID09PSAnRnJhZ21lbnREZWZpbml0aW9uJywgNTMpO1xuICAgIHJldHVybiBmcmFnbWVudERlZjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYWluRGVmaW5pdGlvbihxdWVyeURvYykge1xuICAgIGNoZWNrRG9jdW1lbnQocXVlcnlEb2MpO1xuICAgIHZhciBmcmFnbWVudERlZmluaXRpb247XG4gICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHF1ZXJ5RG9jLmRlZmluaXRpb25zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgZGVmaW5pdGlvbiA9IF9hW19pXTtcbiAgICAgICAgaWYgKGRlZmluaXRpb24ua2luZCA9PT0gJ09wZXJhdGlvbkRlZmluaXRpb24nKSB7XG4gICAgICAgICAgICB2YXIgb3BlcmF0aW9uID0gZGVmaW5pdGlvbi5vcGVyYXRpb247XG4gICAgICAgICAgICBpZiAob3BlcmF0aW9uID09PSAncXVlcnknIHx8XG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uID09PSAnbXV0YXRpb24nIHx8XG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uID09PSAnc3Vic2NyaXB0aW9uJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWZpbml0aW9uLmtpbmQgPT09ICdGcmFnbWVudERlZmluaXRpb24nICYmICFmcmFnbWVudERlZmluaXRpb24pIHtcbiAgICAgICAgICAgIGZyYWdtZW50RGVmaW5pdGlvbiA9IGRlZmluaXRpb247XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZyYWdtZW50RGVmaW5pdGlvbikge1xuICAgICAgICByZXR1cm4gZnJhZ21lbnREZWZpbml0aW9uO1xuICAgIH1cbiAgICB0aHJvdyBfX0RFVl9fID8gbmV3IEludmFyaWFudEVycm9yKCdFeHBlY3RlZCBhIHBhcnNlZCBHcmFwaFFMIHF1ZXJ5IHdpdGggYSBxdWVyeSwgbXV0YXRpb24sIHN1YnNjcmlwdGlvbiwgb3IgYSBmcmFnbWVudC4nKSA6IG5ldyBJbnZhcmlhbnRFcnJvcig1NCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdFZhbHVlcyhkZWZpbml0aW9uKSB7XG4gICAgdmFyIGRlZmF1bHRWYWx1ZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHZhciBkZWZzID0gZGVmaW5pdGlvbiAmJiBkZWZpbml0aW9uLnZhcmlhYmxlRGVmaW5pdGlvbnM7XG4gICAgaWYgKGRlZnMgJiYgZGVmcy5sZW5ndGgpIHtcbiAgICAgICAgZGVmcy5mb3JFYWNoKGZ1bmN0aW9uIChkZWYpIHtcbiAgICAgICAgICAgIGlmIChkZWYuZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uKGRlZmF1bHRWYWx1ZXMsIGRlZi52YXJpYWJsZS5uYW1lLCBkZWYuZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBkZWZhdWx0VmFsdWVzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0RnJvbUFTVC5qcy5tYXAiLCJleHBvcnQgdmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuZXhwb3J0IGZ1bmN0aW9uIGlzTm9uRW1wdHlBcnJheSh2YWx1ZSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPiAwO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXlzLmpzLm1hcCIsImltcG9ydCB7IF9fYXNzaWduLCBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tIFwiLi4vZ2xvYmFscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgdmlzaXQsIEtpbmQsIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyBjaGVja0RvY3VtZW50LCBnZXRPcGVyYXRpb25EZWZpbml0aW9uLCBnZXRGcmFnbWVudERlZmluaXRpb24sIGdldEZyYWdtZW50RGVmaW5pdGlvbnMsIGdldE1haW5EZWZpbml0aW9uLCB9IGZyb20gXCIuL2dldEZyb21BU1QuanNcIjtcbmltcG9ydCB7IGlzRmllbGQgfSBmcm9tIFwiLi9zdG9yZVV0aWxzLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVGcmFnbWVudE1hcCwgfSBmcm9tIFwiLi9mcmFnbWVudHMuanNcIjtcbmltcG9ydCB7IGlzQXJyYXkgfSBmcm9tIFwiLi4vY29tbW9uL2FycmF5cy5qc1wiO1xudmFyIFRZUEVOQU1FX0ZJRUxEID0ge1xuICAgIGtpbmQ6IEtpbmQuRklFTEQsXG4gICAgbmFtZToge1xuICAgICAgICBraW5kOiBLaW5kLk5BTUUsXG4gICAgICAgIHZhbHVlOiAnX190eXBlbmFtZScsXG4gICAgfSxcbn07XG5mdW5jdGlvbiBpc0VtcHR5KG9wLCBmcmFnbWVudE1hcCkge1xuICAgIHJldHVybiAhb3AgfHwgb3Auc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMuZXZlcnkoZnVuY3Rpb24gKHNlbGVjdGlvbikgeyByZXR1cm4gc2VsZWN0aW9uLmtpbmQgPT09IEtpbmQuRlJBR01FTlRfU1BSRUFEICYmXG4gICAgICAgIGlzRW1wdHkoZnJhZ21lbnRNYXBbc2VsZWN0aW9uLm5hbWUudmFsdWVdLCBmcmFnbWVudE1hcCk7IH0pO1xufVxuZnVuY3Rpb24gbnVsbElmRG9jSXNFbXB0eShkb2MpIHtcbiAgICByZXR1cm4gaXNFbXB0eShnZXRPcGVyYXRpb25EZWZpbml0aW9uKGRvYykgfHwgZ2V0RnJhZ21lbnREZWZpbml0aW9uKGRvYyksIGNyZWF0ZUZyYWdtZW50TWFwKGdldEZyYWdtZW50RGVmaW5pdGlvbnMoZG9jKSkpXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IGRvYztcbn1cbmZ1bmN0aW9uIGdldERpcmVjdGl2ZU1hdGNoZXIoZGlyZWN0aXZlcykge1xuICAgIHZhciBuYW1lU2V0ID0gbmV3IFNldCgpO1xuICAgIHZhciB0ZXN0cyA9IFtdO1xuICAgIGRpcmVjdGl2ZXMuZm9yRWFjaChmdW5jdGlvbiAoZGlyZWN0aXZlKSB7XG4gICAgICAgIGlmIChkaXJlY3RpdmUubmFtZSkge1xuICAgICAgICAgICAgbmFtZVNldC5hZGQoZGlyZWN0aXZlLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpcmVjdGl2ZS50ZXN0KSB7XG4gICAgICAgICAgICB0ZXN0cy5wdXNoKGRpcmVjdGl2ZS50ZXN0KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZGlyZWN0aXZlKSB7IHJldHVybiAobmFtZVNldC5oYXMoZGlyZWN0aXZlLm5hbWUudmFsdWUpIHx8XG4gICAgICAgIHRlc3RzLnNvbWUoZnVuY3Rpb24gKHRlc3QpIHsgcmV0dXJuIHRlc3QoZGlyZWN0aXZlKTsgfSkpOyB9O1xufVxuZnVuY3Rpb24gbWFrZUluVXNlR2V0dGVyRnVuY3Rpb24oZGVmYXVsdEtleSkge1xuICAgIHZhciBtYXAgPSBuZXcgTWFwKCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGluVXNlR2V0dGVyRnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIGlmIChrZXkgPT09IHZvaWQgMCkgeyBrZXkgPSBkZWZhdWx0S2V5OyB9XG4gICAgICAgIHZhciBpblVzZSA9IG1hcC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKCFpblVzZSkge1xuICAgICAgICAgICAgbWFwLnNldChrZXksIGluVXNlID0ge1xuICAgICAgICAgICAgICAgIHZhcmlhYmxlczogbmV3IFNldCxcbiAgICAgICAgICAgICAgICBmcmFnbWVudFNwcmVhZHM6IG5ldyBTZXQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5Vc2U7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVEaXJlY3RpdmVzRnJvbURvY3VtZW50KGRpcmVjdGl2ZXMsIGRvYykge1xuICAgIHZhciBnZXRJblVzZUJ5T3BlcmF0aW9uTmFtZSA9IG1ha2VJblVzZUdldHRlckZ1bmN0aW9uKFwiXCIpO1xuICAgIHZhciBnZXRJblVzZUJ5RnJhZ21lbnROYW1lID0gbWFrZUluVXNlR2V0dGVyRnVuY3Rpb24oXCJcIik7XG4gICAgdmFyIGdldEluVXNlID0gZnVuY3Rpb24gKGFuY2VzdG9ycykge1xuICAgICAgICBmb3IgKHZhciBwID0gMCwgYW5jZXN0b3IgPSB2b2lkIDA7IHAgPCBhbmNlc3RvcnMubGVuZ3RoICYmIChhbmNlc3RvciA9IGFuY2VzdG9yc1twXSk7ICsrcCkge1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkoYW5jZXN0b3IpKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKGFuY2VzdG9yLmtpbmQgPT09IEtpbmQuT1BFUkFUSU9OX0RFRklOSVRJT04pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0SW5Vc2VCeU9wZXJhdGlvbk5hbWUoYW5jZXN0b3IubmFtZSAmJiBhbmNlc3Rvci5uYW1lLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhbmNlc3Rvci5raW5kID09PSBLaW5kLkZSQUdNRU5UX0RFRklOSVRJT04pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0SW5Vc2VCeUZyYWdtZW50TmFtZShhbmNlc3Rvci5uYW1lLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfX0RFVl9fICYmIGludmFyaWFudC5lcnJvcihcIkNvdWxkIG5vdCBmaW5kIG9wZXJhdGlvbiBvciBmcmFnbWVudFwiKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICB2YXIgb3BlcmF0aW9uQ291bnQgPSAwO1xuICAgIGZvciAodmFyIGkgPSBkb2MuZGVmaW5pdGlvbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgaWYgKGRvYy5kZWZpbml0aW9uc1tpXS5raW5kID09PSBLaW5kLk9QRVJBVElPTl9ERUZJTklUSU9OKSB7XG4gICAgICAgICAgICArK29wZXJhdGlvbkNvdW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBkaXJlY3RpdmVNYXRjaGVyID0gZ2V0RGlyZWN0aXZlTWF0Y2hlcihkaXJlY3RpdmVzKTtcbiAgICB2YXIgaGFzUmVtb3ZlRGlyZWN0aXZlID0gZGlyZWN0aXZlcy5zb21lKGZ1bmN0aW9uIChkaXJlY3RpdmUpIHsgcmV0dXJuIGRpcmVjdGl2ZS5yZW1vdmU7IH0pO1xuICAgIHZhciBzaG91bGRSZW1vdmVGaWVsZCA9IGZ1bmN0aW9uIChub2RlRGlyZWN0aXZlcykgeyByZXR1cm4gKGhhc1JlbW92ZURpcmVjdGl2ZSAmJlxuICAgICAgICBub2RlRGlyZWN0aXZlcyAmJlxuICAgICAgICBub2RlRGlyZWN0aXZlcy5zb21lKGRpcmVjdGl2ZU1hdGNoZXIpKTsgfTtcbiAgICB2YXIgb3JpZ2luYWxGcmFnbWVudERlZnNCeVBhdGggPSBuZXcgTWFwKCk7XG4gICAgdmFyIGZpcnN0VmlzaXRNYWRlQ2hhbmdlcyA9IGZhbHNlO1xuICAgIHZhciBmaWVsZE9ySW5saW5lRnJhZ21lbnRWaXNpdG9yID0ge1xuICAgICAgICBlbnRlcjogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIGlmIChzaG91bGRSZW1vdmVGaWVsZChub2RlLmRpcmVjdGl2ZXMpKSB7XG4gICAgICAgICAgICAgICAgZmlyc3RWaXNpdE1hZGVDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9O1xuICAgIHZhciBkb2NXaXRob3V0RGlyZWN0aXZlU3VidHJlZXMgPSB2aXNpdChkb2MsIHtcbiAgICAgICAgRmllbGQ6IGZpZWxkT3JJbmxpbmVGcmFnbWVudFZpc2l0b3IsXG4gICAgICAgIElubGluZUZyYWdtZW50OiBmaWVsZE9ySW5saW5lRnJhZ21lbnRWaXNpdG9yLFxuICAgICAgICBWYXJpYWJsZURlZmluaXRpb246IHtcbiAgICAgICAgICAgIGVudGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgVmFyaWFibGU6IHtcbiAgICAgICAgICAgIGVudGVyOiBmdW5jdGlvbiAobm9kZSwgX2tleSwgX3BhcmVudCwgX3BhdGgsIGFuY2VzdG9ycykge1xuICAgICAgICAgICAgICAgIHZhciBpblVzZSA9IGdldEluVXNlKGFuY2VzdG9ycyk7XG4gICAgICAgICAgICAgICAgaWYgKGluVXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGluVXNlLnZhcmlhYmxlcy5hZGQobm9kZS5uYW1lLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBGcmFnbWVudFNwcmVhZDoge1xuICAgICAgICAgICAgZW50ZXI6IGZ1bmN0aW9uIChub2RlLCBfa2V5LCBfcGFyZW50LCBfcGF0aCwgYW5jZXN0b3JzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZFJlbW92ZUZpZWxkKG5vZGUuZGlyZWN0aXZlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RWaXNpdE1hZGVDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBpblVzZSA9IGdldEluVXNlKGFuY2VzdG9ycyk7XG4gICAgICAgICAgICAgICAgaWYgKGluVXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGluVXNlLmZyYWdtZW50U3ByZWFkcy5hZGQobm9kZS5uYW1lLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBGcmFnbWVudERlZmluaXRpb246IHtcbiAgICAgICAgICAgIGVudGVyOiBmdW5jdGlvbiAobm9kZSwgX2tleSwgX3BhcmVudCwgcGF0aCkge1xuICAgICAgICAgICAgICAgIG9yaWdpbmFsRnJhZ21lbnREZWZzQnlQYXRoLnNldChKU09OLnN0cmluZ2lmeShwYXRoKSwgbm9kZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGVhdmU6IGZ1bmN0aW9uIChub2RlLCBfa2V5LCBfcGFyZW50LCBwYXRoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsTm9kZSA9IG9yaWdpbmFsRnJhZ21lbnREZWZzQnlQYXRoLmdldChKU09OLnN0cmluZ2lmeShwYXRoKSk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUgPT09IG9yaWdpbmFsTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wZXJhdGlvbkNvdW50ID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICBub2RlLnNlbGVjdGlvblNldC5zZWxlY3Rpb25zLmV2ZXJ5KGZ1bmN0aW9uIChzZWxlY3Rpb24pIHsgcmV0dXJuIChzZWxlY3Rpb24ua2luZCA9PT0gS2luZC5GSUVMRCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uLm5hbWUudmFsdWUgPT09ICdfX3R5cGVuYW1lJyk7IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGdldEluVXNlQnlGcmFnbWVudE5hbWUobm9kZS5uYW1lLnZhbHVlKS5yZW1vdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RWaXNpdE1hZGVDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgRGlyZWN0aXZlOiB7XG4gICAgICAgICAgICBsZWF2ZTogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aXZlTWF0Y2hlcihub2RlKSkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdFZpc2l0TWFkZUNoYW5nZXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIGlmICghZmlyc3RWaXNpdE1hZGVDaGFuZ2VzKSB7XG4gICAgICAgIHJldHVybiBkb2M7XG4gICAgfVxuICAgIHZhciBwb3B1bGF0ZVRyYW5zaXRpdmVWYXJzID0gZnVuY3Rpb24gKGluVXNlKSB7XG4gICAgICAgIGlmICghaW5Vc2UudHJhbnNpdGl2ZVZhcnMpIHtcbiAgICAgICAgICAgIGluVXNlLnRyYW5zaXRpdmVWYXJzID0gbmV3IFNldChpblVzZS52YXJpYWJsZXMpO1xuICAgICAgICAgICAgaWYgKCFpblVzZS5yZW1vdmVkKSB7XG4gICAgICAgICAgICAgICAgaW5Vc2UuZnJhZ21lbnRTcHJlYWRzLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkRnJhZ21lbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcHVsYXRlVHJhbnNpdGl2ZVZhcnMoZ2V0SW5Vc2VCeUZyYWdtZW50TmFtZShjaGlsZEZyYWdtZW50TmFtZSkpLnRyYW5zaXRpdmVWYXJzLmZvckVhY2goZnVuY3Rpb24gKHZhck5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluVXNlLnRyYW5zaXRpdmVWYXJzLmFkZCh2YXJOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluVXNlO1xuICAgIH07XG4gICAgdmFyIGFsbEZyYWdtZW50TmFtZXNVc2VkID0gbmV3IFNldCgpO1xuICAgIGRvY1dpdGhvdXREaXJlY3RpdmVTdWJ0cmVlcy5kZWZpbml0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChkZWYpIHtcbiAgICAgICAgaWYgKGRlZi5raW5kID09PSBLaW5kLk9QRVJBVElPTl9ERUZJTklUSU9OKSB7XG4gICAgICAgICAgICBwb3B1bGF0ZVRyYW5zaXRpdmVWYXJzKGdldEluVXNlQnlPcGVyYXRpb25OYW1lKGRlZi5uYW1lICYmIGRlZi5uYW1lLnZhbHVlKSkuZnJhZ21lbnRTcHJlYWRzLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkRnJhZ21lbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgYWxsRnJhZ21lbnROYW1lc1VzZWQuYWRkKGNoaWxkRnJhZ21lbnROYW1lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlZi5raW5kID09PSBLaW5kLkZSQUdNRU5UX0RFRklOSVRJT04gJiZcbiAgICAgICAgICAgIG9wZXJhdGlvbkNvdW50ID09PSAwICYmXG4gICAgICAgICAgICAhZ2V0SW5Vc2VCeUZyYWdtZW50TmFtZShkZWYubmFtZS52YWx1ZSkucmVtb3ZlZCkge1xuICAgICAgICAgICAgYWxsRnJhZ21lbnROYW1lc1VzZWQuYWRkKGRlZi5uYW1lLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGFsbEZyYWdtZW50TmFtZXNVc2VkLmZvckVhY2goZnVuY3Rpb24gKGZyYWdtZW50TmFtZSkge1xuICAgICAgICBwb3B1bGF0ZVRyYW5zaXRpdmVWYXJzKGdldEluVXNlQnlGcmFnbWVudE5hbWUoZnJhZ21lbnROYW1lKSkuZnJhZ21lbnRTcHJlYWRzLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkRnJhZ21lbnROYW1lKSB7XG4gICAgICAgICAgICBhbGxGcmFnbWVudE5hbWVzVXNlZC5hZGQoY2hpbGRGcmFnbWVudE5hbWUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICB2YXIgZnJhZ21lbnRXaWxsQmVSZW1vdmVkID0gZnVuY3Rpb24gKGZyYWdtZW50TmFtZSkgeyByZXR1cm4gISEoIWFsbEZyYWdtZW50TmFtZXNVc2VkLmhhcyhmcmFnbWVudE5hbWUpIHx8XG4gICAgICAgIGdldEluVXNlQnlGcmFnbWVudE5hbWUoZnJhZ21lbnROYW1lKS5yZW1vdmVkKTsgfTtcbiAgICB2YXIgZW50ZXJWaXNpdG9yID0ge1xuICAgICAgICBlbnRlcjogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIGlmIChmcmFnbWVudFdpbGxCZVJlbW92ZWQobm9kZS5uYW1lLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH07XG4gICAgcmV0dXJuIG51bGxJZkRvY0lzRW1wdHkodmlzaXQoZG9jV2l0aG91dERpcmVjdGl2ZVN1YnRyZWVzLCB7XG4gICAgICAgIEZyYWdtZW50U3ByZWFkOiBlbnRlclZpc2l0b3IsXG4gICAgICAgIEZyYWdtZW50RGVmaW5pdGlvbjogZW50ZXJWaXNpdG9yLFxuICAgICAgICBPcGVyYXRpb25EZWZpbml0aW9uOiB7XG4gICAgICAgICAgICBsZWF2ZTogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS52YXJpYWJsZURlZmluaXRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1c2VkVmFyaWFibGVOYW1lc18xID0gcG9wdWxhdGVUcmFuc2l0aXZlVmFycyhnZXRJblVzZUJ5T3BlcmF0aW9uTmFtZShub2RlLm5hbWUgJiYgbm9kZS5uYW1lLnZhbHVlKSkudHJhbnNpdGl2ZVZhcnM7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VkVmFyaWFibGVOYW1lc18xLnNpemUgPCBub2RlLnZhcmlhYmxlRGVmaW5pdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIG5vZGUpLCB7IHZhcmlhYmxlRGVmaW5pdGlvbnM6IG5vZGUudmFyaWFibGVEZWZpbml0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKHZhckRlZikgeyByZXR1cm4gdXNlZFZhcmlhYmxlTmFtZXNfMS5oYXModmFyRGVmLnZhcmlhYmxlLm5hbWUudmFsdWUpOyB9KSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSkpO1xufVxuZXhwb3J0IHZhciBhZGRUeXBlbmFtZVRvRG9jdW1lbnQgPSBPYmplY3QuYXNzaWduKGZ1bmN0aW9uIChkb2MpIHtcbiAgICByZXR1cm4gdmlzaXQoZG9jLCB7XG4gICAgICAgIFNlbGVjdGlvblNldDoge1xuICAgICAgICAgICAgZW50ZXI6IGZ1bmN0aW9uIChub2RlLCBfa2V5LCBwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50ICYmXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5raW5kID09PSBLaW5kLk9QRVJBVElPTl9ERUZJTklUSU9OKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGlvbnMgPSBub2RlLnNlbGVjdGlvbnM7XG4gICAgICAgICAgICAgICAgaWYgKCFzZWxlY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHNraXAgPSBzZWxlY3Rpb25zLnNvbWUoZnVuY3Rpb24gKHNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGlzRmllbGQoc2VsZWN0aW9uKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHNlbGVjdGlvbi5uYW1lLnZhbHVlID09PSAnX190eXBlbmFtZScgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb24ubmFtZS52YWx1ZS5sYXN0SW5kZXhPZignX18nLCAwKSA9PT0gMCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChza2lwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gcGFyZW50O1xuICAgICAgICAgICAgICAgIGlmIChpc0ZpZWxkKGZpZWxkKSAmJlxuICAgICAgICAgICAgICAgICAgICBmaWVsZC5kaXJlY3RpdmVzICYmXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmRpcmVjdGl2ZXMuc29tZShmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5uYW1lLnZhbHVlID09PSAnZXhwb3J0JzsgfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIG5vZGUpLCB7IHNlbGVjdGlvbnM6IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgc2VsZWN0aW9ucywgdHJ1ZSksIFtUWVBFTkFNRV9GSUVMRF0sIGZhbHNlKSB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSk7XG59LCB7XG4gICAgYWRkZWQ6IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICByZXR1cm4gZmllbGQgPT09IFRZUEVOQU1FX0ZJRUxEO1xuICAgIH0sXG59KTtcbnZhciBjb25uZWN0aW9uUmVtb3ZlQ29uZmlnID0ge1xuICAgIHRlc3Q6IGZ1bmN0aW9uIChkaXJlY3RpdmUpIHtcbiAgICAgICAgdmFyIHdpbGxSZW1vdmUgPSBkaXJlY3RpdmUubmFtZS52YWx1ZSA9PT0gJ2Nvbm5lY3Rpb24nO1xuICAgICAgICBpZiAod2lsbFJlbW92ZSkge1xuICAgICAgICAgICAgaWYgKCFkaXJlY3RpdmUuYXJndW1lbnRzIHx8XG4gICAgICAgICAgICAgICAgIWRpcmVjdGl2ZS5hcmd1bWVudHMuc29tZShmdW5jdGlvbiAoYXJnKSB7IHJldHVybiBhcmcubmFtZS52YWx1ZSA9PT0gJ2tleSc7IH0pKSB7XG4gICAgICAgICAgICAgICAgX19ERVZfXyAmJiBpbnZhcmlhbnQud2FybignUmVtb3ZpbmcgYW4gQGNvbm5lY3Rpb24gZGlyZWN0aXZlIGV2ZW4gdGhvdWdoIGl0IGRvZXMgbm90IGhhdmUgYSBrZXkuICcgK1xuICAgICAgICAgICAgICAgICAgICAnWW91IG1heSB3YW50IHRvIHVzZSB0aGUga2V5IHBhcmFtZXRlciB0byBzcGVjaWZ5IGEgc3RvcmUga2V5LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aWxsUmVtb3ZlO1xuICAgIH0sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNvbm5lY3Rpb25EaXJlY3RpdmVGcm9tRG9jdW1lbnQoZG9jKSB7XG4gICAgcmV0dXJuIHJlbW92ZURpcmVjdGl2ZXNGcm9tRG9jdW1lbnQoW2Nvbm5lY3Rpb25SZW1vdmVDb25maWddLCBjaGVja0RvY3VtZW50KGRvYykpO1xufVxuZnVuY3Rpb24gaGFzRGlyZWN0aXZlc0luU2VsZWN0aW9uU2V0KGRpcmVjdGl2ZXMsIHNlbGVjdGlvblNldCwgbmVzdGVkQ2hlY2spIHtcbiAgICBpZiAobmVzdGVkQ2hlY2sgPT09IHZvaWQgMCkgeyBuZXN0ZWRDaGVjayA9IHRydWU7IH1cbiAgICByZXR1cm4gKCEhc2VsZWN0aW9uU2V0ICYmXG4gICAgICAgIHNlbGVjdGlvblNldC5zZWxlY3Rpb25zICYmXG4gICAgICAgIHNlbGVjdGlvblNldC5zZWxlY3Rpb25zLnNvbWUoZnVuY3Rpb24gKHNlbGVjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGhhc0RpcmVjdGl2ZXNJblNlbGVjdGlvbihkaXJlY3RpdmVzLCBzZWxlY3Rpb24sIG5lc3RlZENoZWNrKTtcbiAgICAgICAgfSkpO1xufVxuZnVuY3Rpb24gaGFzRGlyZWN0aXZlc0luU2VsZWN0aW9uKGRpcmVjdGl2ZXMsIHNlbGVjdGlvbiwgbmVzdGVkQ2hlY2spIHtcbiAgICBpZiAobmVzdGVkQ2hlY2sgPT09IHZvaWQgMCkgeyBuZXN0ZWRDaGVjayA9IHRydWU7IH1cbiAgICBpZiAoIWlzRmllbGQoc2VsZWN0aW9uKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFzZWxlY3Rpb24uZGlyZWN0aXZlcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiAoc2VsZWN0aW9uLmRpcmVjdGl2ZXMuc29tZShnZXREaXJlY3RpdmVNYXRjaGVyKGRpcmVjdGl2ZXMpKSB8fFxuICAgICAgICAobmVzdGVkQ2hlY2sgJiZcbiAgICAgICAgICAgIGhhc0RpcmVjdGl2ZXNJblNlbGVjdGlvblNldChkaXJlY3RpdmVzLCBzZWxlY3Rpb24uc2VsZWN0aW9uU2V0LCBuZXN0ZWRDaGVjaykpKTtcbn1cbmZ1bmN0aW9uIGdldEFyZ3VtZW50TWF0Y2hlcihjb25maWcpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gYXJndW1lbnRNYXRjaGVyKGFyZ3VtZW50KSB7XG4gICAgICAgIHJldHVybiBjb25maWcuc29tZShmdW5jdGlvbiAoYUNvbmZpZykge1xuICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50LnZhbHVlICYmXG4gICAgICAgICAgICAgICAgYXJndW1lbnQudmFsdWUua2luZCA9PT0gS2luZC5WQVJJQUJMRSAmJlxuICAgICAgICAgICAgICAgIGFyZ3VtZW50LnZhbHVlLm5hbWUgJiZcbiAgICAgICAgICAgICAgICAoYUNvbmZpZy5uYW1lID09PSBhcmd1bWVudC52YWx1ZS5uYW1lLnZhbHVlIHx8XG4gICAgICAgICAgICAgICAgICAgIChhQ29uZmlnLnRlc3QgJiYgYUNvbmZpZy50ZXN0KGFyZ3VtZW50KSkpO1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUFyZ3VtZW50c0Zyb21Eb2N1bWVudChjb25maWcsIGRvYykge1xuICAgIHZhciBhcmdNYXRjaGVyID0gZ2V0QXJndW1lbnRNYXRjaGVyKGNvbmZpZyk7XG4gICAgcmV0dXJuIG51bGxJZkRvY0lzRW1wdHkodmlzaXQoZG9jLCB7XG4gICAgICAgIE9wZXJhdGlvbkRlZmluaXRpb246IHtcbiAgICAgICAgICAgIGVudGVyOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbm9kZSksIHsgdmFyaWFibGVEZWZpbml0aW9uczogbm9kZS52YXJpYWJsZURlZmluaXRpb25zID8gbm9kZS52YXJpYWJsZURlZmluaXRpb25zLmZpbHRlcihmdW5jdGlvbiAodmFyRGVmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWNvbmZpZy5zb21lKGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIGFyZy5uYW1lID09PSB2YXJEZWYudmFyaWFibGUubmFtZS52YWx1ZTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pIDogW10gfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBGaWVsZDoge1xuICAgICAgICAgICAgZW50ZXI6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNob3VsZFJlbW92ZUZpZWxkID0gY29uZmlnLnNvbWUoZnVuY3Rpb24gKGFyZ0NvbmZpZykgeyByZXR1cm4gYXJnQ29uZmlnLnJlbW92ZTsgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZFJlbW92ZUZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmdNYXRjaENvdW50XzEgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5hcmd1bWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYXJndW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmdNYXRjaGVyKGFyZykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnTWF0Y2hDb3VudF8xICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ01hdGNoQ291bnRfMSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBBcmd1bWVudDoge1xuICAgICAgICAgICAgZW50ZXI6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ01hdGNoZXIobm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9KSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRnJhZ21lbnRTcHJlYWRGcm9tRG9jdW1lbnQoY29uZmlnLCBkb2MpIHtcbiAgICBmdW5jdGlvbiBlbnRlcihub2RlKSB7XG4gICAgICAgIGlmIChjb25maWcuc29tZShmdW5jdGlvbiAoZGVmKSB7IHJldHVybiBkZWYubmFtZSA9PT0gbm9kZS5uYW1lLnZhbHVlOyB9KSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxJZkRvY0lzRW1wdHkodmlzaXQoZG9jLCB7XG4gICAgICAgIEZyYWdtZW50U3ByZWFkOiB7IGVudGVyOiBlbnRlciB9LFxuICAgICAgICBGcmFnbWVudERlZmluaXRpb246IHsgZW50ZXI6IGVudGVyIH0sXG4gICAgfSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkUXVlcnlGcm9tU2VsZWN0aW9uU2V0KGRvY3VtZW50KSB7XG4gICAgdmFyIGRlZmluaXRpb24gPSBnZXRNYWluRGVmaW5pdGlvbihkb2N1bWVudCk7XG4gICAgdmFyIGRlZmluaXRpb25PcGVyYXRpb24gPSBkZWZpbml0aW9uLm9wZXJhdGlvbjtcbiAgICBpZiAoZGVmaW5pdGlvbk9wZXJhdGlvbiA9PT0gJ3F1ZXJ5Jykge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQ7XG4gICAgfVxuICAgIHZhciBtb2RpZmllZERvYyA9IHZpc2l0KGRvY3VtZW50LCB7XG4gICAgICAgIE9wZXJhdGlvbkRlZmluaXRpb246IHtcbiAgICAgICAgICAgIGVudGVyOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbm9kZSksIHsgb3BlcmF0aW9uOiAncXVlcnknIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gbW9kaWZpZWREb2M7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2xpZW50U2V0c0Zyb21Eb2N1bWVudChkb2N1bWVudCkge1xuICAgIGNoZWNrRG9jdW1lbnQoZG9jdW1lbnQpO1xuICAgIHZhciBtb2RpZmllZERvYyA9IHJlbW92ZURpcmVjdGl2ZXNGcm9tRG9jdW1lbnQoW1xuICAgICAgICB7XG4gICAgICAgICAgICB0ZXN0OiBmdW5jdGlvbiAoZGlyZWN0aXZlKSB7IHJldHVybiBkaXJlY3RpdmUubmFtZS52YWx1ZSA9PT0gJ2NsaWVudCc7IH0sXG4gICAgICAgICAgICByZW1vdmU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgXSwgZG9jdW1lbnQpO1xuICAgIHJldHVybiBtb2RpZmllZERvYztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5qcy5tYXAiLCJpbXBvcnQgeyBfX2Fzc2lnbiwgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaXNOb25OdWxsT2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0cy5qc1wiO1xudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZURlZXAoKSB7XG4gICAgdmFyIHNvdXJjZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBzb3VyY2VzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBtZXJnZURlZXBBcnJheShzb3VyY2VzKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZURlZXBBcnJheShzb3VyY2VzKSB7XG4gICAgdmFyIHRhcmdldCA9IHNvdXJjZXNbMF0gfHwge307XG4gICAgdmFyIGNvdW50ID0gc291cmNlcy5sZW5ndGg7XG4gICAgaWYgKGNvdW50ID4gMSkge1xuICAgICAgICB2YXIgbWVyZ2VyID0gbmV3IERlZXBNZXJnZXIoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgICAgICB0YXJnZXQgPSBtZXJnZXIubWVyZ2UodGFyZ2V0LCBzb3VyY2VzW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxudmFyIGRlZmF1bHRSZWNvbmNpbGVyID0gZnVuY3Rpb24gKHRhcmdldCwgc291cmNlLCBwcm9wZXJ0eSkge1xuICAgIHJldHVybiB0aGlzLm1lcmdlKHRhcmdldFtwcm9wZXJ0eV0sIHNvdXJjZVtwcm9wZXJ0eV0pO1xufTtcbnZhciBEZWVwTWVyZ2VyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEZWVwTWVyZ2VyKHJlY29uY2lsZXIpIHtcbiAgICAgICAgaWYgKHJlY29uY2lsZXIgPT09IHZvaWQgMCkgeyByZWNvbmNpbGVyID0gZGVmYXVsdFJlY29uY2lsZXI7IH1cbiAgICAgICAgdGhpcy5yZWNvbmNpbGVyID0gcmVjb25jaWxlcjtcbiAgICAgICAgdGhpcy5pc09iamVjdCA9IGlzTm9uTnVsbE9iamVjdDtcbiAgICAgICAgdGhpcy5wYXN0Q29waWVzID0gbmV3IFNldCgpO1xuICAgIH1cbiAgICBEZWVwTWVyZ2VyLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY29udGV4dCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgY29udGV4dFtfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOb25OdWxsT2JqZWN0KHNvdXJjZSkgJiYgaXNOb25OdWxsT2JqZWN0KHRhcmdldCkpIHtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlS2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBzb3VyY2VLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRWYWx1ZSA9IHRhcmdldFtzb3VyY2VLZXldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlW3NvdXJjZUtleV0gIT09IHRhcmdldFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gX3RoaXMucmVjb25jaWxlci5hcHBseShfdGhpcywgX19zcHJlYWRBcnJheShbdGFyZ2V0LCBzb3VyY2UsIHNvdXJjZUtleV0sIGNvbnRleHQsIGZhbHNlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSB0YXJnZXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IF90aGlzLnNoYWxsb3dDb3B5Rm9yTWVyZ2UodGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRbc291cmNlS2V5XSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gX3RoaXMuc2hhbGxvd0NvcHlGb3JNZXJnZSh0YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRbc291cmNlS2V5XSA9IHNvdXJjZVtzb3VyY2VLZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc291cmNlO1xuICAgIH07XG4gICAgRGVlcE1lcmdlci5wcm90b3R5cGUuc2hhbGxvd0NvcHlGb3JNZXJnZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoaXNOb25OdWxsT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhc3RDb3BpZXMuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBfX2Fzc2lnbih7IF9fcHJvdG9fXzogT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKSB9LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGFzdENvcGllcy5hZGQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIHJldHVybiBEZWVwTWVyZ2VyO1xufSgpKTtcbmV4cG9ydCB7IERlZXBNZXJnZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlRGVlcC5qcy5tYXAiLCJmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bXCJAQGl0ZXJhdG9yXCJdOyBpZiAoaXQpIHJldHVybiAoaXQgPSBpdC5jYWxsKG8pKS5uZXh0LmJpbmQoaXQpOyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHJldHVybiBmdW5jdGlvbiAoKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vLyA9PT0gU3ltYm9sIFN1cHBvcnQgPT09XG52YXIgaGFzU3ltYm9scyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbic7XG59O1xuXG52YXIgaGFzU3ltYm9sID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgcmV0dXJuIGhhc1N5bWJvbHMoKSAmJiBCb29sZWFuKFN5bWJvbFtuYW1lXSk7XG59O1xuXG52YXIgZ2V0U3ltYm9sID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgcmV0dXJuIGhhc1N5bWJvbChuYW1lKSA/IFN5bWJvbFtuYW1lXSA6ICdAQCcgKyBuYW1lO1xufTtcblxuaWYgKGhhc1N5bWJvbHMoKSAmJiAhaGFzU3ltYm9sKCdvYnNlcnZhYmxlJykpIHtcbiAgU3ltYm9sLm9ic2VydmFibGUgPSBTeW1ib2woJ29ic2VydmFibGUnKTtcbn1cblxudmFyIFN5bWJvbEl0ZXJhdG9yID0gZ2V0U3ltYm9sKCdpdGVyYXRvcicpO1xudmFyIFN5bWJvbE9ic2VydmFibGUgPSBnZXRTeW1ib2woJ29ic2VydmFibGUnKTtcbnZhciBTeW1ib2xTcGVjaWVzID0gZ2V0U3ltYm9sKCdzcGVjaWVzJyk7IC8vID09PSBBYnN0cmFjdCBPcGVyYXRpb25zID09PVxuXG5mdW5jdGlvbiBnZXRNZXRob2Qob2JqLCBrZXkpIHtcbiAgdmFyIHZhbHVlID0gb2JqW2tleV07XG4gIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgVHlwZUVycm9yKHZhbHVlICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGdldFNwZWNpZXMob2JqKSB7XG4gIHZhciBjdG9yID0gb2JqLmNvbnN0cnVjdG9yO1xuXG4gIGlmIChjdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICBjdG9yID0gY3RvcltTeW1ib2xTcGVjaWVzXTtcblxuICAgIGlmIChjdG9yID09PSBudWxsKSB7XG4gICAgICBjdG9yID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjdG9yICE9PSB1bmRlZmluZWQgPyBjdG9yIDogT2JzZXJ2YWJsZTtcbn1cblxuZnVuY3Rpb24gaXNPYnNlcnZhYmxlKHgpIHtcbiAgcmV0dXJuIHggaW5zdGFuY2VvZiBPYnNlcnZhYmxlOyAvLyBTUEVDOiBCcmFuZCBjaGVja1xufVxuXG5mdW5jdGlvbiBob3N0UmVwb3J0RXJyb3IoZSkge1xuICBpZiAoaG9zdFJlcG9ydEVycm9yLmxvZykge1xuICAgIGhvc3RSZXBvcnRFcnJvci5sb2coZSk7XG4gIH0gZWxzZSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBlO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVucXVldWUoZm4pIHtcbiAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGZuKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaG9zdFJlcG9ydEVycm9yKGUpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNsZWFudXBTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKSB7XG4gIHZhciBjbGVhbnVwID0gc3Vic2NyaXB0aW9uLl9jbGVhbnVwO1xuICBpZiAoY2xlYW51cCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gIHN1YnNjcmlwdGlvbi5fY2xlYW51cCA9IHVuZGVmaW5lZDtcblxuICBpZiAoIWNsZWFudXApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIGlmICh0eXBlb2YgY2xlYW51cCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2xlYW51cCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdW5zdWJzY3JpYmUgPSBnZXRNZXRob2QoY2xlYW51cCwgJ3Vuc3Vic2NyaWJlJyk7XG5cbiAgICAgIGlmICh1bnN1YnNjcmliZSkge1xuICAgICAgICB1bnN1YnNjcmliZS5jYWxsKGNsZWFudXApO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGhvc3RSZXBvcnRFcnJvcihlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjbG9zZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pIHtcbiAgc3Vic2NyaXB0aW9uLl9vYnNlcnZlciA9IHVuZGVmaW5lZDtcbiAgc3Vic2NyaXB0aW9uLl9xdWV1ZSA9IHVuZGVmaW5lZDtcbiAgc3Vic2NyaXB0aW9uLl9zdGF0ZSA9ICdjbG9zZWQnO1xufVxuXG5mdW5jdGlvbiBmbHVzaFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pIHtcbiAgdmFyIHF1ZXVlID0gc3Vic2NyaXB0aW9uLl9xdWV1ZTtcblxuICBpZiAoIXF1ZXVlKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3Vic2NyaXB0aW9uLl9xdWV1ZSA9IHVuZGVmaW5lZDtcbiAgc3Vic2NyaXB0aW9uLl9zdGF0ZSA9ICdyZWFkeSc7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7ICsraSkge1xuICAgIG5vdGlmeVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24sIHF1ZXVlW2ldLnR5cGUsIHF1ZXVlW2ldLnZhbHVlKTtcbiAgICBpZiAoc3Vic2NyaXB0aW9uLl9zdGF0ZSA9PT0gJ2Nsb3NlZCcpIGJyZWFrO1xuICB9XG59XG5cbmZ1bmN0aW9uIG5vdGlmeVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24sIHR5cGUsIHZhbHVlKSB7XG4gIHN1YnNjcmlwdGlvbi5fc3RhdGUgPSAncnVubmluZyc7XG4gIHZhciBvYnNlcnZlciA9IHN1YnNjcmlwdGlvbi5fb2JzZXJ2ZXI7XG5cbiAgdHJ5IHtcbiAgICB2YXIgbSA9IGdldE1ldGhvZChvYnNlcnZlciwgdHlwZSk7XG5cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ25leHQnOlxuICAgICAgICBpZiAobSkgbS5jYWxsKG9ic2VydmVyLCB2YWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIGNsb3NlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIGlmIChtKSBtLmNhbGwob2JzZXJ2ZXIsIHZhbHVlKTtlbHNlIHRocm93IHZhbHVlO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY29tcGxldGUnOlxuICAgICAgICBjbG9zZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xuICAgICAgICBpZiAobSkgbS5jYWxsKG9ic2VydmVyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgaG9zdFJlcG9ydEVycm9yKGUpO1xuICB9XG5cbiAgaWYgKHN1YnNjcmlwdGlvbi5fc3RhdGUgPT09ICdjbG9zZWQnKSBjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7ZWxzZSBpZiAoc3Vic2NyaXB0aW9uLl9zdGF0ZSA9PT0gJ3J1bm5pbmcnKSBzdWJzY3JpcHRpb24uX3N0YXRlID0gJ3JlYWR5Jztcbn1cblxuZnVuY3Rpb24gb25Ob3RpZnkoc3Vic2NyaXB0aW9uLCB0eXBlLCB2YWx1ZSkge1xuICBpZiAoc3Vic2NyaXB0aW9uLl9zdGF0ZSA9PT0gJ2Nsb3NlZCcpIHJldHVybjtcblxuICBpZiAoc3Vic2NyaXB0aW9uLl9zdGF0ZSA9PT0gJ2J1ZmZlcmluZycpIHtcbiAgICBzdWJzY3JpcHRpb24uX3F1ZXVlLnB1c2goe1xuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIHZhbHVlOiB2YWx1ZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHN1YnNjcmlwdGlvbi5fc3RhdGUgIT09ICdyZWFkeScpIHtcbiAgICBzdWJzY3JpcHRpb24uX3N0YXRlID0gJ2J1ZmZlcmluZyc7XG4gICAgc3Vic2NyaXB0aW9uLl9xdWV1ZSA9IFt7XG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgdmFsdWU6IHZhbHVlXG4gICAgfV07XG4gICAgZW5xdWV1ZShmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZmx1c2hTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTtcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBub3RpZnlTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uLCB0eXBlLCB2YWx1ZSk7XG59XG5cbnZhciBTdWJzY3JpcHRpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTdWJzY3JpcHRpb24ob2JzZXJ2ZXIsIHN1YnNjcmliZXIpIHtcbiAgICAvLyBBU1NFUlQ6IG9ic2VydmVyIGlzIGFuIG9iamVjdFxuICAgIC8vIEFTU0VSVDogc3Vic2NyaWJlciBpcyBjYWxsYWJsZVxuICAgIHRoaXMuX2NsZWFudXAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fb2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICB0aGlzLl9xdWV1ZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9zdGF0ZSA9ICdpbml0aWFsaXppbmcnO1xuICAgIHZhciBzdWJzY3JpcHRpb25PYnNlcnZlciA9IG5ldyBTdWJzY3JpcHRpb25PYnNlcnZlcih0aGlzKTtcblxuICAgIHRyeSB7XG4gICAgICB0aGlzLl9jbGVhbnVwID0gc3Vic2NyaWJlci5jYWxsKHVuZGVmaW5lZCwgc3Vic2NyaXB0aW9uT2JzZXJ2ZXIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHN1YnNjcmlwdGlvbk9ic2VydmVyLmVycm9yKGUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gJ2luaXRpYWxpemluZycpIHRoaXMuX3N0YXRlID0gJ3JlYWR5JztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBTdWJzY3JpcHRpb24ucHJvdG90eXBlO1xuXG4gIF9wcm90by51bnN1YnNjcmliZSA9IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkge1xuICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gJ2Nsb3NlZCcpIHtcbiAgICAgIGNsb3NlU3Vic2NyaXB0aW9uKHRoaXMpO1xuICAgICAgY2xlYW51cFN1YnNjcmlwdGlvbih0aGlzKTtcbiAgICB9XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKFN1YnNjcmlwdGlvbiwgW3tcbiAgICBrZXk6IFwiY2xvc2VkXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3RhdGUgPT09ICdjbG9zZWQnO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTdWJzY3JpcHRpb247XG59KCk7XG5cbnZhciBTdWJzY3JpcHRpb25PYnNlcnZlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFN1YnNjcmlwdGlvbk9ic2VydmVyKHN1YnNjcmlwdGlvbikge1xuICAgIHRoaXMuX3N1YnNjcmlwdGlvbiA9IHN1YnNjcmlwdGlvbjtcbiAgfVxuXG4gIHZhciBfcHJvdG8yID0gU3Vic2NyaXB0aW9uT2JzZXJ2ZXIucHJvdG90eXBlO1xuXG4gIF9wcm90bzIubmV4dCA9IGZ1bmN0aW9uIG5leHQodmFsdWUpIHtcbiAgICBvbk5vdGlmeSh0aGlzLl9zdWJzY3JpcHRpb24sICduZXh0JywgdmFsdWUpO1xuICB9O1xuXG4gIF9wcm90bzIuZXJyb3IgPSBmdW5jdGlvbiBlcnJvcih2YWx1ZSkge1xuICAgIG9uTm90aWZ5KHRoaXMuX3N1YnNjcmlwdGlvbiwgJ2Vycm9yJywgdmFsdWUpO1xuICB9O1xuXG4gIF9wcm90bzIuY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcbiAgICBvbk5vdGlmeSh0aGlzLl9zdWJzY3JpcHRpb24sICdjb21wbGV0ZScpO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhTdWJzY3JpcHRpb25PYnNlcnZlciwgW3tcbiAgICBrZXk6IFwiY2xvc2VkXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9uLl9zdGF0ZSA9PT0gJ2Nsb3NlZCc7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFN1YnNjcmlwdGlvbk9ic2VydmVyO1xufSgpO1xuXG52YXIgT2JzZXJ2YWJsZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIE9ic2VydmFibGUoc3Vic2NyaWJlcikge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBPYnNlcnZhYmxlKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JzZXJ2YWJsZSBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24nKTtcbiAgICBpZiAodHlwZW9mIHN1YnNjcmliZXIgIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBUeXBlRXJyb3IoJ09ic2VydmFibGUgaW5pdGlhbGl6ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgdGhpcy5fc3Vic2NyaWJlciA9IHN1YnNjcmliZXI7XG4gIH1cblxuICB2YXIgX3Byb3RvMyA9IE9ic2VydmFibGUucHJvdG90eXBlO1xuXG4gIF9wcm90bzMuc3Vic2NyaWJlID0gZnVuY3Rpb24gc3Vic2NyaWJlKG9ic2VydmVyKSB7XG4gICAgaWYgKHR5cGVvZiBvYnNlcnZlciAhPT0gJ29iamVjdCcgfHwgb2JzZXJ2ZXIgPT09IG51bGwpIHtcbiAgICAgIG9ic2VydmVyID0ge1xuICAgICAgICBuZXh0OiBvYnNlcnZlcixcbiAgICAgICAgZXJyb3I6IGFyZ3VtZW50c1sxXSxcbiAgICAgICAgY29tcGxldGU6IGFyZ3VtZW50c1syXVxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFN1YnNjcmlwdGlvbihvYnNlcnZlciwgdGhpcy5fc3Vic2NyaWJlcik7XG4gIH07XG5cbiAgX3Byb3RvMy5mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaChmbikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcihmbiArICcgaXMgbm90IGEgZnVuY3Rpb24nKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZG9uZSgpIHtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF90aGlzLnN1YnNjcmliZSh7XG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmbih2YWx1ZSwgZG9uZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogcmVqZWN0LFxuICAgICAgICBjb21wbGV0ZTogcmVzb2x2ZVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvMy5tYXAgPSBmdW5jdGlvbiBtYXAoZm4pIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBUeXBlRXJyb3IoZm4gKyAnIGlzIG5vdCBhIGZ1bmN0aW9uJyk7XG4gICAgdmFyIEMgPSBnZXRTcGVjaWVzKHRoaXMpO1xuICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHJldHVybiBfdGhpczIuc3Vic2NyaWJlKHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhbHVlID0gZm4odmFsdWUpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvMy5maWx0ZXIgPSBmdW5jdGlvbiBmaWx0ZXIoZm4pIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBUeXBlRXJyb3IoZm4gKyAnIGlzIG5vdCBhIGZ1bmN0aW9uJyk7XG4gICAgdmFyIEMgPSBnZXRTcGVjaWVzKHRoaXMpO1xuICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHJldHVybiBfdGhpczMuc3Vic2NyaWJlKHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghZm4odmFsdWUpKSByZXR1cm47XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG9ic2VydmVyLm5leHQodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8zLnJlZHVjZSA9IGZ1bmN0aW9uIHJlZHVjZShmbikge1xuICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcihmbiArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcbiAgICB2YXIgQyA9IGdldFNwZWNpZXModGhpcyk7XG4gICAgdmFyIGhhc1NlZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMTtcbiAgICB2YXIgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICB2YXIgc2VlZCA9IGFyZ3VtZW50c1sxXTtcbiAgICB2YXIgYWNjID0gc2VlZDtcbiAgICByZXR1cm4gbmV3IEMoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICByZXR1cm4gX3RoaXM0LnN1YnNjcmliZSh7XG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhciBmaXJzdCA9ICFoYXNWYWx1ZTtcbiAgICAgICAgICBoYXNWYWx1ZSA9IHRydWU7XG5cbiAgICAgICAgICBpZiAoIWZpcnN0IHx8IGhhc1NlZWQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGFjYyA9IGZuKGFjYywgdmFsdWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuZXJyb3IoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFjYyA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKCFoYXNWYWx1ZSAmJiAhaGFzU2VlZCkgcmV0dXJuIG9ic2VydmVyLmVycm9yKG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCByZWR1Y2UgYW4gZW1wdHkgc2VxdWVuY2UnKSk7XG4gICAgICAgICAgb2JzZXJ2ZXIubmV4dChhY2MpO1xuICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzMuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0KCkge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHNvdXJjZXMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBzb3VyY2VzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHZhciBDID0gZ2V0U3BlY2llcyh0aGlzKTtcbiAgICByZXR1cm4gbmV3IEMoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgc3Vic2NyaXB0aW9uO1xuICAgICAgdmFyIGluZGV4ID0gMDtcblxuICAgICAgZnVuY3Rpb24gc3RhcnROZXh0KG5leHQpIHtcbiAgICAgICAgc3Vic2NyaXB0aW9uID0gbmV4dC5zdWJzY3JpYmUoe1xuICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHYpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IHNvdXJjZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHN0YXJ0TmV4dChDLmZyb20oc291cmNlc1tpbmRleCsrXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHN0YXJ0TmV4dChfdGhpczUpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8zLmZsYXRNYXAgPSBmdW5jdGlvbiBmbGF0TWFwKGZuKSB7XG4gICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgVHlwZUVycm9yKGZuICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICAgIHZhciBDID0gZ2V0U3BlY2llcyh0aGlzKTtcbiAgICByZXR1cm4gbmV3IEMoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IFtdO1xuXG4gICAgICB2YXIgb3V0ZXIgPSBfdGhpczYuc3Vic2NyaWJlKHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKGZuKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB2YWx1ZSA9IGZuKHZhbHVlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBpbm5lciA9IEMuZnJvbSh2YWx1ZSkuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgdmFyIGkgPSBzdWJzY3JpcHRpb25zLmluZGV4T2YoaW5uZXIpO1xuICAgICAgICAgICAgICBpZiAoaSA+PSAwKSBzdWJzY3JpcHRpb25zLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgY29tcGxldGVJZkRvbmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2goaW5uZXIpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjb21wbGV0ZUlmRG9uZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gY29tcGxldGVJZkRvbmUoKSB7XG4gICAgICAgIGlmIChvdXRlci5jbG9zZWQgJiYgc3Vic2NyaXB0aW9ucy5sZW5ndGggPT09IDApIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAocykge1xuICAgICAgICAgIHJldHVybiBzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBvdXRlci51bnN1YnNjcmliZSgpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8zW1N5bWJvbE9ic2VydmFibGVdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIE9ic2VydmFibGUuZnJvbSA9IGZ1bmN0aW9uIGZyb20oeCkge1xuICAgIHZhciBDID0gdHlwZW9mIHRoaXMgPT09ICdmdW5jdGlvbicgPyB0aGlzIDogT2JzZXJ2YWJsZTtcbiAgICBpZiAoeCA9PSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKHggKyAnIGlzIG5vdCBhbiBvYmplY3QnKTtcbiAgICB2YXIgbWV0aG9kID0gZ2V0TWV0aG9kKHgsIFN5bWJvbE9ic2VydmFibGUpO1xuXG4gICAgaWYgKG1ldGhvZCkge1xuICAgICAgdmFyIG9ic2VydmFibGUgPSBtZXRob2QuY2FsbCh4KTtcbiAgICAgIGlmIChPYmplY3Qob2JzZXJ2YWJsZSkgIT09IG9ic2VydmFibGUpIHRocm93IG5ldyBUeXBlRXJyb3Iob2JzZXJ2YWJsZSArICcgaXMgbm90IGFuIG9iamVjdCcpO1xuICAgICAgaWYgKGlzT2JzZXJ2YWJsZShvYnNlcnZhYmxlKSAmJiBvYnNlcnZhYmxlLmNvbnN0cnVjdG9yID09PSBDKSByZXR1cm4gb2JzZXJ2YWJsZTtcbiAgICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGUuc3Vic2NyaWJlKG9ic2VydmVyKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChoYXNTeW1ib2woJ2l0ZXJhdG9yJykpIHtcbiAgICAgIG1ldGhvZCA9IGdldE1ldGhvZCh4LCBTeW1ib2xJdGVyYXRvcik7XG5cbiAgICAgIGlmIChtZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICAgIGVucXVldWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKG9ic2VydmVyLmNsb3NlZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG1ldGhvZC5jYWxsKHgpKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcC52YWx1ZTtcbiAgICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChpdGVtKTtcbiAgICAgICAgICAgICAgaWYgKG9ic2VydmVyLmNsb3NlZCkgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh4KSkge1xuICAgICAgcmV0dXJuIG5ldyBDKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICBlbnF1ZXVlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAob2JzZXJ2ZXIuY2xvc2VkKSByZXR1cm47XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQoeFtpXSk7XG4gICAgICAgICAgICBpZiAob2JzZXJ2ZXIuY2xvc2VkKSByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHggKyAnIGlzIG5vdCBvYnNlcnZhYmxlJyk7XG4gIH07XG5cbiAgT2JzZXJ2YWJsZS5vZiA9IGZ1bmN0aW9uIG9mKCkge1xuICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgaXRlbXMgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgIGl0ZW1zW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgfVxuXG4gICAgdmFyIEMgPSB0eXBlb2YgdGhpcyA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMgOiBPYnNlcnZhYmxlO1xuICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIGVucXVldWUoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAob2JzZXJ2ZXIuY2xvc2VkKSByZXR1cm47XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIG9ic2VydmVyLm5leHQoaXRlbXNbaV0pO1xuICAgICAgICAgIGlmIChvYnNlcnZlci5jbG9zZWQpIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBfY3JlYXRlQ2xhc3MoT2JzZXJ2YWJsZSwgbnVsbCwgW3tcbiAgICBrZXk6IFN5bWJvbFNwZWNpZXMsXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gT2JzZXJ2YWJsZTtcbn0oKTtcblxuaWYgKGhhc1N5bWJvbHMoKSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoT2JzZXJ2YWJsZSwgU3ltYm9sKCdleHRlbnNpb25zJyksIHtcbiAgICB2YWx1ZToge1xuICAgICAgc3ltYm9sOiBTeW1ib2xPYnNlcnZhYmxlLFxuICAgICAgaG9zdFJlcG9ydEVycm9yOiBob3N0UmVwb3J0RXJyb3JcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cblxuZXhwb3J0IHsgT2JzZXJ2YWJsZSB9O1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3ltYm9sT2JzZXJ2YWJsZVBvbnlmaWxsKHJvb3QpIHtcblx0dmFyIHJlc3VsdDtcblx0dmFyIFN5bWJvbCA9IHJvb3QuU3ltYm9sO1xuXG5cdGlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0aWYgKFN5bWJvbC5vYnNlcnZhYmxlKSB7XG5cdFx0XHRyZXN1bHQgPSBTeW1ib2wub2JzZXJ2YWJsZTtcblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRpZiAodHlwZW9mIFN5bWJvbC5mb3IgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0Ly8gVGhpcyBqdXN0IG5lZWRzIHRvIGJlIHNvbWV0aGluZyB0aGF0IHdvbid0IHRyYW1wbGUgb3RoZXIgdXNlcidzIFN5bWJvbC5mb3IgdXNlXG5cdFx0XHRcdC8vIEl0IGFsc28gd2lsbCBndWlkZSBwZW9wbGUgdG8gdGhlIHNvdXJjZSBvZiB0aGVpciBpc3N1ZXMsIGlmIHRoaXMgaXMgcHJvYmxlbWF0aWMuXG5cdFx0XHRcdC8vIE1FVEE6IEl0J3MgYSByZXNvdXJjZSBsb2NhdG9yIVxuXHRcdFx0XHRyZXN1bHQgPSBTeW1ib2wuZm9yKCdodHRwczovL2dpdGh1Yi5jb20vYmVubGVzaC9zeW1ib2wtb2JzZXJ2YWJsZScpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gU3ltYm9sLmZvciBkaWRuJ3QgZXhpc3QhIFRoZSBiZXN0IHdlIGNhbiBkbyBhdCB0aGlzIHBvaW50IGlzIGEgdG90YWxseSBcblx0XHRcdFx0Ly8gdW5pcXVlIHN5bWJvbC4gTm90ZSB0aGF0IHRoZSBzdHJpbmcgYXJndW1lbnQgaGVyZSBpcyBhIGRlc2NyaXB0b3IsIG5vdFxuXHRcdFx0XHQvLyBhbiBpZGVudGlmaWVyLiBUaGlzIHN5bWJvbCBpcyB1bmlxdWUuXG5cdFx0XHRcdHJlc3VsdCA9IFN5bWJvbCgnaHR0cHM6Ly9naXRodWIuY29tL2Jlbmxlc2gvc3ltYm9sLW9ic2VydmFibGUnKTtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdFN5bWJvbC5vYnNlcnZhYmxlID0gcmVzdWx0O1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdC8vIERvIG5vdGhpbmcuIEluIHNvbWUgZW52aXJvbm1lbnRzLCB1c2VycyBoYXZlIGZyb3plbiBgU3ltYm9sYCBmb3Igc2VjdXJpdHkgcmVhc29ucyxcblx0XHRcdFx0Ly8gaWYgaXQgaXMgZnJvemVuIGFzc2lnbmluZyB0byBpdCB3aWxsIHRocm93LiBJbiB0aGlzIGNhc2UsIHdlIGRvbid0IGNhcmUsIGJlY2F1c2Vcblx0XHRcdFx0Ly8gdGhleSB3aWxsIG5lZWQgdG8gdXNlIHRoZSByZXR1cm5lZCB2YWx1ZSBmcm9tIHRoZSBwb255ZmlsbC5cblx0XHRcdH1cblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0cmVzdWx0ID0gJ0BAb2JzZXJ2YWJsZSc7XG5cdH1cblxuXHRyZXR1cm4gcmVzdWx0O1xufTtcbiIsIi8qIGdsb2JhbCB3aW5kb3cgKi9cbmltcG9ydCBwb255ZmlsbCBmcm9tICcuL3BvbnlmaWxsLmpzJztcblxudmFyIHJvb3Q7XG5cbmlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgcm9vdCA9IHNlbGY7XG59IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSBnbG9iYWw7XG59IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSBtb2R1bGU7XG59IGVsc2Uge1xuICByb290ID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbn1cblxudmFyIHJlc3VsdCA9IHBvbnlmaWxsKHJvb3QpO1xuZXhwb3J0IGRlZmF1bHQgcmVzdWx0O1xuIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgfSBmcm9tICd6ZW4tb2JzZXJ2YWJsZS10cyc7XG5pbXBvcnQgJ3N5bWJvbC1vYnNlcnZhYmxlJztcbnZhciBwcm90b3R5cGUgPSBPYnNlcnZhYmxlLnByb3RvdHlwZTtcbnZhciBmYWtlT2JzU3ltYm9sID0gJ0BAb2JzZXJ2YWJsZSc7XG5pZiAoIXByb3RvdHlwZVtmYWtlT2JzU3ltYm9sXSkge1xuICAgIHByb3RvdHlwZVtmYWtlT2JzU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG59XG5leHBvcnQgeyBPYnNlcnZhYmxlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZhYmxlLmpzLm1hcCIsInZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5leHBvcnQgZnVuY3Rpb24gY2xvbmVEZWVwKHZhbHVlKSB7XG4gICAgcmV0dXJuIGNsb25lRGVlcEhlbHBlcih2YWx1ZSk7XG59XG5mdW5jdGlvbiBjbG9uZURlZXBIZWxwZXIodmFsLCBzZWVuKSB7XG4gICAgc3dpdGNoICh0b1N0cmluZy5jYWxsKHZhbCkpIHtcbiAgICAgICAgY2FzZSBcIltvYmplY3QgQXJyYXldXCI6IHtcbiAgICAgICAgICAgIHNlZW4gPSBzZWVuIHx8IG5ldyBNYXA7XG4gICAgICAgICAgICBpZiAoc2Vlbi5oYXModmFsKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Vlbi5nZXQodmFsKTtcbiAgICAgICAgICAgIHZhciBjb3B5XzEgPSB2YWwuc2xpY2UoMCk7XG4gICAgICAgICAgICBzZWVuLnNldCh2YWwsIGNvcHlfMSk7XG4gICAgICAgICAgICBjb3B5XzEuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIGkpIHtcbiAgICAgICAgICAgICAgICBjb3B5XzFbaV0gPSBjbG9uZURlZXBIZWxwZXIoY2hpbGQsIHNlZW4pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY29weV8xO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJbb2JqZWN0IE9iamVjdF1cIjoge1xuICAgICAgICAgICAgc2VlbiA9IHNlZW4gfHwgbmV3IE1hcDtcbiAgICAgICAgICAgIGlmIChzZWVuLmhhcyh2YWwpKVxuICAgICAgICAgICAgICAgIHJldHVybiBzZWVuLmdldCh2YWwpO1xuICAgICAgICAgICAgdmFyIGNvcHlfMiA9IE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbCkpO1xuICAgICAgICAgICAgc2Vlbi5zZXQodmFsLCBjb3B5XzIpO1xuICAgICAgICAgICAgT2JqZWN0LmtleXModmFsKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICBjb3B5XzJba2V5XSA9IGNsb25lRGVlcEhlbHBlcih2YWxba2V5XSwgc2Vlbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBjb3B5XzI7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xvbmVEZWVwLmpzLm1hcCIsImltcG9ydCBcIi4uL2dsb2JhbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IGlzTm9uTnVsbE9iamVjdCB9IGZyb20gXCIuL29iamVjdHMuanNcIjtcbmZ1bmN0aW9uIGRlZXBGcmVlemUodmFsdWUpIHtcbiAgICB2YXIgd29ya1NldCA9IG5ldyBTZXQoW3ZhbHVlXSk7XG4gICAgd29ya1NldC5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgaWYgKGlzTm9uTnVsbE9iamVjdChvYmopICYmIHNoYWxsb3dGcmVlemUob2JqKSA9PT0gb2JqKSB7XG4gICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNOb25OdWxsT2JqZWN0KG9ialtuYW1lXSkpXG4gICAgICAgICAgICAgICAgICAgIHdvcmtTZXQuYWRkKG9ialtuYW1lXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHNoYWxsb3dGcmVlemUob2JqKSB7XG4gICAgaWYgKF9fREVWX18gJiYgIU9iamVjdC5pc0Zyb3plbihvYmopKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBPYmplY3QuZnJlZXplKG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgVHlwZUVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1heWJlRGVlcEZyZWV6ZShvYmopIHtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgICBkZWVwRnJlZXplKG9iaik7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXliZURlZXBGcmVlemUuanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGl0ZXJhdGVPYnNlcnZlcnNTYWZlbHkob2JzZXJ2ZXJzLCBtZXRob2QsIGFyZ3VtZW50KSB7XG4gICAgdmFyIG9ic2VydmVyc1dpdGhNZXRob2QgPSBbXTtcbiAgICBvYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbiAob2JzKSB7IHJldHVybiBvYnNbbWV0aG9kXSAmJiBvYnNlcnZlcnNXaXRoTWV0aG9kLnB1c2gob2JzKTsgfSk7XG4gICAgb2JzZXJ2ZXJzV2l0aE1ldGhvZC5mb3JFYWNoKGZ1bmN0aW9uIChvYnMpIHsgcmV0dXJuIG9ic1ttZXRob2RdKGFyZ3VtZW50KTsgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVyYXRpb24uanMubWFwIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCIuL09ic2VydmFibGUuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBhc3luY01hcChvYnNlcnZhYmxlLCBtYXBGbiwgY2F0Y2hGbikge1xuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgdmFyIG5leHQgPSBvYnNlcnZlci5uZXh0LCBlcnJvciA9IG9ic2VydmVyLmVycm9yLCBjb21wbGV0ZSA9IG9ic2VydmVyLmNvbXBsZXRlO1xuICAgICAgICB2YXIgYWN0aXZlQ2FsbGJhY2tDb3VudCA9IDA7XG4gICAgICAgIHZhciBjb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIHByb21pc2VRdWV1ZSA9IHtcbiAgICAgICAgICAgIHRoZW46IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXR1cm4gcmVzb2x2ZShjYWxsYmFjaygpKTsgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBtYWtlQ2FsbGJhY2soZXhhbWluZXIsIGRlbGVnYXRlKSB7XG4gICAgICAgICAgICBpZiAoZXhhbWluZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgICAgICAgICArK2FjdGl2ZUNhbGxiYWNrQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib3RoID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZXhhbWluZXIoYXJnKTsgfTtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZVF1ZXVlID0gcHJvbWlzZVF1ZXVlLnRoZW4oYm90aCwgYm90aCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAtLWFjdGl2ZUNhbGxiYWNrQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0ICYmIG5leHQuY2FsbChvYnNlcnZlciwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLS1hY3RpdmVDYWxsYmFja0NvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChjYXVnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yICYmIGVycm9yLmNhbGwob2JzZXJ2ZXIsIGNhdWdodCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gZGVsZWdhdGUgJiYgZGVsZWdhdGUuY2FsbChvYnNlcnZlciwgYXJnKTsgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgaGFuZGxlciA9IHtcbiAgICAgICAgICAgIG5leHQ6IG1ha2VDYWxsYmFjayhtYXBGbiwgbmV4dCksXG4gICAgICAgICAgICBlcnJvcjogbWFrZUNhbGxiYWNrKGNhdGNoRm4sIGVycm9yKSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIWFjdGl2ZUNhbGxiYWNrQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGUgJiYgY29tcGxldGUuY2FsbChvYnNlcnZlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHN1YiA9IG9ic2VydmFibGUuc3Vic2NyaWJlKGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gc3ViLnVuc3Vic2NyaWJlKCk7IH07XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3luY01hcC5qcy5tYXAiLCJpbXBvcnQgeyBtYXliZSB9IGZyb20gXCIuLi9nbG9iYWxzL2luZGV4LmpzXCI7XG5leHBvcnQgdmFyIGNhblVzZVdlYWtNYXAgPSB0eXBlb2YgV2Vha01hcCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIG1heWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5hdmlnYXRvci5wcm9kdWN0OyB9KSAhPT0gJ1JlYWN0TmF0aXZlJztcbmV4cG9ydCB2YXIgY2FuVXNlV2Vha1NldCA9IHR5cGVvZiBXZWFrU2V0ID09PSAnZnVuY3Rpb24nO1xuZXhwb3J0IHZhciBjYW5Vc2VTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIFN5bWJvbC5mb3IgPT09ICdmdW5jdGlvbic7XG5leHBvcnQgdmFyIGNhblVzZUFzeW5jSXRlcmF0b3JTeW1ib2wgPSBjYW5Vc2VTeW1ib2wgJiYgU3ltYm9sLmFzeW5jSXRlcmF0b3I7XG5leHBvcnQgdmFyIGNhblVzZURPTSA9IHR5cGVvZiBtYXliZShmdW5jdGlvbiAoKSB7IHJldHVybiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudDsgfSkgPT09IFwiZnVuY3Rpb25cIjtcbnZhciB1c2luZ0pTRE9NID0gbWF5YmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwianNkb21cIikgPj0gMDsgfSkgfHwgZmFsc2U7XG5leHBvcnQgdmFyIGNhblVzZUxheW91dEVmZmVjdCA9IGNhblVzZURPTSAmJiAhdXNpbmdKU0RPTTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhblVzZS5qcy5tYXAiLCJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcIi4vT2JzZXJ2YWJsZS5qc1wiO1xuaW1wb3J0IHsgY2FuVXNlU3ltYm9sIH0gZnJvbSBcIi4uL2NvbW1vbi9jYW5Vc2UuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBmaXhPYnNlcnZhYmxlU3ViY2xhc3Moc3ViY2xhc3MpIHtcbiAgICBmdW5jdGlvbiBzZXQoa2V5KSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdWJjbGFzcywga2V5LCB7IHZhbHVlOiBPYnNlcnZhYmxlIH0pO1xuICAgIH1cbiAgICBpZiAoY2FuVXNlU3ltYm9sICYmIFN5bWJvbC5zcGVjaWVzKSB7XG4gICAgICAgIHNldChTeW1ib2wuc3BlY2llcyk7XG4gICAgfVxuICAgIHNldChcIkBAc3BlY2llc1wiKTtcbiAgICByZXR1cm4gc3ViY2xhc3M7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdWJjbGFzc2luZy5qcy5tYXAiLCJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwiLi9PYnNlcnZhYmxlLmpzXCI7XG5pbXBvcnQgeyBpdGVyYXRlT2JzZXJ2ZXJzU2FmZWx5IH0gZnJvbSBcIi4vaXRlcmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBmaXhPYnNlcnZhYmxlU3ViY2xhc3MgfSBmcm9tIFwiLi9zdWJjbGFzc2luZy5qc1wiO1xuZnVuY3Rpb24gaXNQcm9taXNlTGlrZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gXCJmdW5jdGlvblwiO1xufVxudmFyIENvbmNhc3QgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb25jYXN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENvbmNhc3Qoc291cmNlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIF90aGlzLmFkZE9ic2VydmVyKG9ic2VydmVyKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5yZW1vdmVPYnNlcnZlcihvYnNlcnZlcik7IH07XG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm9ic2VydmVycyA9IG5ldyBTZXQoKTtcbiAgICAgICAgX3RoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIF90aGlzLnJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgX3RoaXMucmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICB9KTtcbiAgICAgICAgX3RoaXMuaGFuZGxlcnMgPSB7XG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnN1YiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5sYXRlc3QgPSBbXCJuZXh0XCIsIHJlc3VsdF07XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm5vdGlmeShcIm5leHRcIiwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgaXRlcmF0ZU9ic2VydmVyc1NhZmVseShfdGhpcy5vYnNlcnZlcnMsIFwibmV4dFwiLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1YiA9IF90aGlzLnN1YjtcbiAgICAgICAgICAgICAgICBpZiAoc3ViICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdWIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN1Yi51bnN1YnNjcmliZSgpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3ViID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubGF0ZXN0ID0gW1wiZXJyb3JcIiwgZXJyb3JdO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5ub3RpZnkoXCJlcnJvclwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIGl0ZXJhdGVPYnNlcnZlcnNTYWZlbHkoX3RoaXMub2JzZXJ2ZXJzLCBcImVycm9yXCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBfdGhpcywgc3ViID0gX2Euc3ViLCBfYiA9IF9hLnNvdXJjZXMsIHNvdXJjZXMgPSBfYiA9PT0gdm9pZCAwID8gW10gOiBfYjtcbiAgICAgICAgICAgICAgICBpZiAoc3ViICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHNvdXJjZXMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN1Yi51bnN1YnNjcmliZSgpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnN1YiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMubGF0ZXN0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubGF0ZXN0WzBdID09PSBcIm5leHRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlc29sdmUoX3RoaXMubGF0ZXN0WzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm5vdGlmeShcImNvbXBsZXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlcmF0ZU9ic2VydmVyc1NhZmVseShfdGhpcy5vYnNlcnZlcnMsIFwiY29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNQcm9taXNlTGlrZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnRoZW4oZnVuY3Rpb24gKG9icykgeyByZXR1cm4gX3RoaXMuc3ViID0gb2JzLnN1YnNjcmliZShfdGhpcy5oYW5kbGVycyk7IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3ViID0gdmFsdWUuc3Vic2NyaWJlKF90aGlzLmhhbmRsZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLm5leHRSZXN1bHRMaXN0ZW5lcnMgPSBuZXcgU2V0KCk7XG4gICAgICAgIF90aGlzLmNhbmNlbCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgIF90aGlzLnJlamVjdChyZWFzb24pO1xuICAgICAgICAgICAgX3RoaXMuc291cmNlcyA9IFtdO1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlcnMuY29tcGxldGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMucHJvbWlzZS5jYXRjaChmdW5jdGlvbiAoXykgeyB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2VzID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHNvdXJjZXMgPSBbbmV3IE9ic2VydmFibGUoc291cmNlcyldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1Byb21pc2VMaWtlKHNvdXJjZXMpKSB7XG4gICAgICAgICAgICBzb3VyY2VzLnRoZW4oZnVuY3Rpb24gKGl0ZXJhYmxlKSB7IHJldHVybiBfdGhpcy5zdGFydChpdGVyYWJsZSk7IH0sIF90aGlzLmhhbmRsZXJzLmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLnN0YXJ0KHNvdXJjZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQ29uY2FzdC5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoc291cmNlcykge1xuICAgICAgICBpZiAodGhpcy5zdWIgIT09IHZvaWQgMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5zb3VyY2VzID0gQXJyYXkuZnJvbShzb3VyY2VzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgQ29uY2FzdC5wcm90b3R5cGUuZGVsaXZlckxhc3RNZXNzYWdlID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmxhdGVzdCkge1xuICAgICAgICAgICAgdmFyIG5leHRPckVycm9yID0gdGhpcy5sYXRlc3RbMF07XG4gICAgICAgICAgICB2YXIgbWV0aG9kID0gb2JzZXJ2ZXJbbmV4dE9yRXJyb3JdO1xuICAgICAgICAgICAgaWYgKG1ldGhvZCkge1xuICAgICAgICAgICAgICAgIG1ldGhvZC5jYWxsKG9ic2VydmVyLCB0aGlzLmxhdGVzdFsxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zdWIgPT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICBuZXh0T3JFcnJvciA9PT0gXCJuZXh0XCIgJiZcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbmNhc3QucHJvdG90eXBlLmFkZE9ic2VydmVyID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIGlmICghdGhpcy5vYnNlcnZlcnMuaGFzKG9ic2VydmVyKSkge1xuICAgICAgICAgICAgdGhpcy5kZWxpdmVyTGFzdE1lc3NhZ2Uob2JzZXJ2ZXIpO1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMuYWRkKG9ic2VydmVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29uY2FzdC5wcm90b3R5cGUucmVtb3ZlT2JzZXJ2ZXIgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzLmRlbGV0ZShvYnNlcnZlcikgJiZcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLnNpemUgPCAxKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbmNhc3QucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uIChtZXRob2QsIGFyZykge1xuICAgICAgICB2YXIgbmV4dFJlc3VsdExpc3RlbmVycyA9IHRoaXMubmV4dFJlc3VsdExpc3RlbmVycztcbiAgICAgICAgaWYgKG5leHRSZXN1bHRMaXN0ZW5lcnMuc2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5uZXh0UmVzdWx0TGlzdGVuZXJzID0gbmV3IFNldDtcbiAgICAgICAgICAgIG5leHRSZXN1bHRMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsgcmV0dXJuIGxpc3RlbmVyKG1ldGhvZCwgYXJnKTsgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbmNhc3QucHJvdG90eXBlLmJlZm9yZU5leHQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5leHRSZXN1bHRMaXN0ZW5lcnMuYWRkKGZ1bmN0aW9uIChtZXRob2QsIGFyZykge1xuICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG1ldGhvZCwgYXJnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29uY2FzdDtcbn0oT2JzZXJ2YWJsZSkpO1xuZXhwb3J0IHsgQ29uY2FzdCB9O1xuZml4T2JzZXJ2YWJsZVN1YmNsYXNzKENvbmNhc3QpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29uY2FzdC5qcy5tYXAiLCJpbXBvcnQgeyBpc05vbk51bGxPYmplY3QgfSBmcm9tIFwiLi9vYmplY3RzLmpzXCI7XG5pbXBvcnQgeyBpc05vbkVtcHR5QXJyYXkgfSBmcm9tIFwiLi9hcnJheXMuanNcIjtcbmltcG9ydCB7IERlZXBNZXJnZXIgfSBmcm9tIFwiLi9tZXJnZURlZXAuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBpc0V4ZWN1dGlvblBhdGNoSW5jcmVtZW50YWxSZXN1bHQodmFsdWUpIHtcbiAgICByZXR1cm4gXCJpbmNyZW1lbnRhbFwiIGluIHZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzRXhlY3V0aW9uUGF0Y2hJbml0aWFsUmVzdWx0KHZhbHVlKSB7XG4gICAgcmV0dXJuIFwiaGFzTmV4dFwiIGluIHZhbHVlICYmIFwiZGF0YVwiIGluIHZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzRXhlY3V0aW9uUGF0Y2hSZXN1bHQodmFsdWUpIHtcbiAgICByZXR1cm4gKGlzRXhlY3V0aW9uUGF0Y2hJbmNyZW1lbnRhbFJlc3VsdCh2YWx1ZSkgfHxcbiAgICAgICAgaXNFeGVjdXRpb25QYXRjaEluaXRpYWxSZXN1bHQodmFsdWUpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Fwb2xsb1BheWxvYWRSZXN1bHQodmFsdWUpIHtcbiAgICByZXR1cm4gaXNOb25OdWxsT2JqZWN0KHZhbHVlKSAmJiBcInBheWxvYWRcIiBpbiB2YWx1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUluY3JlbWVudGFsRGF0YShwcmV2UmVzdWx0LCByZXN1bHQpIHtcbiAgICB2YXIgbWVyZ2VkRGF0YSA9IHByZXZSZXN1bHQ7XG4gICAgdmFyIG1lcmdlciA9IG5ldyBEZWVwTWVyZ2VyKCk7XG4gICAgaWYgKGlzRXhlY3V0aW9uUGF0Y2hJbmNyZW1lbnRhbFJlc3VsdChyZXN1bHQpICYmXG4gICAgICAgIGlzTm9uRW1wdHlBcnJheShyZXN1bHQuaW5jcmVtZW50YWwpKSB7XG4gICAgICAgIHJlc3VsdC5pbmNyZW1lbnRhbC5mb3JFYWNoKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBfYS5kYXRhLCBwYXRoID0gX2EucGF0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBwYXRoLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IHBhdGhbaV07XG4gICAgICAgICAgICAgICAgdmFyIGlzTnVtZXJpY0tleSA9ICFpc05hTigra2V5KTtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50XzEgPSBpc051bWVyaWNLZXkgPyBbXSA6IHt9O1xuICAgICAgICAgICAgICAgIHBhcmVudF8xW2tleV0gPSBkYXRhO1xuICAgICAgICAgICAgICAgIGRhdGEgPSBwYXJlbnRfMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1lcmdlZERhdGEgPSBtZXJnZXIubWVyZ2UobWVyZ2VkRGF0YSwgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VkRGF0YTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluY3JlbWVudGFsUmVzdWx0LmpzLm1hcCIsImltcG9ydCB7IGlzTm9uRW1wdHlBcnJheSB9IGZyb20gXCIuL2FycmF5cy5qc1wiO1xuaW1wb3J0IHsgaXNFeGVjdXRpb25QYXRjaEluY3JlbWVudGFsUmVzdWx0IH0gZnJvbSBcIi4vaW5jcmVtZW50YWxSZXN1bHQuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBncmFwaFFMUmVzdWx0SGFzRXJyb3IocmVzdWx0KSB7XG4gICAgdmFyIGVycm9ycyA9IGdldEdyYXBoUUxFcnJvcnNGcm9tUmVzdWx0KHJlc3VsdCk7XG4gICAgcmV0dXJuIGlzTm9uRW1wdHlBcnJheShlcnJvcnMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEdyYXBoUUxFcnJvcnNGcm9tUmVzdWx0KHJlc3VsdCkge1xuICAgIHZhciBncmFwaFFMRXJyb3JzID0gaXNOb25FbXB0eUFycmF5KHJlc3VsdC5lcnJvcnMpXG4gICAgICAgID8gcmVzdWx0LmVycm9ycy5zbGljZSgwKVxuICAgICAgICA6IFtdO1xuICAgIGlmIChpc0V4ZWN1dGlvblBhdGNoSW5jcmVtZW50YWxSZXN1bHQocmVzdWx0KSAmJlxuICAgICAgICBpc05vbkVtcHR5QXJyYXkocmVzdWx0LmluY3JlbWVudGFsKSkge1xuICAgICAgICByZXN1bHQuaW5jcmVtZW50YWwuZm9yRWFjaChmdW5jdGlvbiAoaW5jcmVtZW50YWxSZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChpbmNyZW1lbnRhbFJlc3VsdC5lcnJvcnMpIHtcbiAgICAgICAgICAgICAgICBncmFwaFFMRXJyb3JzLnB1c2guYXBwbHkoZ3JhcGhRTEVycm9ycywgaW5jcmVtZW50YWxSZXN1bHQuZXJyb3JzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBncmFwaFFMRXJyb3JzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JIYW5kbGluZy5qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gY29tcGFjdCgpIHtcbiAgICB2YXIgb2JqZWN0cyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIG9iamVjdHNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgb2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgaWYgKCFvYmopXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbXBhY3QuanMubWFwIiwidmFyIHByZWZpeENvdW50cyA9IG5ldyBNYXAoKTtcbmV4cG9ydCBmdW5jdGlvbiBtYWtlVW5pcXVlSWQocHJlZml4KSB7XG4gICAgdmFyIGNvdW50ID0gcHJlZml4Q291bnRzLmdldChwcmVmaXgpIHx8IDE7XG4gICAgcHJlZml4Q291bnRzLnNldChwcmVmaXgsIGNvdW50ICsgMSk7XG4gICAgcmV0dXJuIFwiXCIuY29uY2F0KHByZWZpeCwgXCI6XCIpLmNvbmNhdChjb3VudCwgXCI6XCIpLmNvbmNhdChNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYWtlVW5pcXVlSWQuanMubWFwIiwiaW1wb3J0IHsgbWFrZVVuaXF1ZUlkIH0gZnJvbSBcIi4vbWFrZVVuaXF1ZUlkLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5Rm9yRGlzcGxheSh2YWx1ZSkge1xuICAgIHZhciB1bmRlZklkID0gbWFrZVVuaXF1ZUlkKFwic3RyaW5naWZ5Rm9yRGlzcGxheVwiKTtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gdm9pZCAwID8gdW5kZWZJZCA6IHZhbHVlO1xuICAgIH0pLnNwbGl0KEpTT04uc3RyaW5naWZ5KHVuZGVmSWQpKS5qb2luKFwiPHVuZGVmaW5lZD5cIik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdHJpbmdpZnlGb3JEaXNwbGF5LmpzLm1hcCIsImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBjb21wYWN0IH0gZnJvbSBcIi4vY29tcGFjdC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhkZWZhdWx0cywgb3B0aW9ucykge1xuICAgIHJldHVybiBjb21wYWN0KGRlZmF1bHRzLCBvcHRpb25zLCBvcHRpb25zLnZhcmlhYmxlcyAmJiB7XG4gICAgICAgIHZhcmlhYmxlczogX19hc3NpZ24oX19hc3NpZ24oe30sIChkZWZhdWx0cyAmJiBkZWZhdWx0cy52YXJpYWJsZXMpKSwgb3B0aW9ucy52YXJpYWJsZXMpLFxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VPcHRpb25zLmpzLm1hcCIsImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gZnJvbUVycm9yKGVycm9yVmFsdWUpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yVmFsdWUpO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbUVycm9yLmpzLm1hcCIsImV4cG9ydCB2YXIgdGhyb3dTZXJ2ZXJFcnJvciA9IGZ1bmN0aW9uIChyZXNwb25zZSwgcmVzdWx0LCBtZXNzYWdlKSB7XG4gICAgdmFyIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIGVycm9yLm5hbWUgPSAnU2VydmVyRXJyb3InO1xuICAgIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgZXJyb3Iuc3RhdHVzQ29kZSA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICBlcnJvci5yZXN1bHQgPSByZXN1bHQ7XG4gICAgdGhyb3cgZXJyb3I7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3dTZXJ2ZXJFcnJvci5qcy5tYXAiLCJpbXBvcnQgeyBJbnZhcmlhbnRFcnJvciB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlT3BlcmF0aW9uKG9wZXJhdGlvbikge1xuICAgIHZhciBPUEVSQVRJT05fRklFTERTID0gW1xuICAgICAgICAncXVlcnknLFxuICAgICAgICAnb3BlcmF0aW9uTmFtZScsXG4gICAgICAgICd2YXJpYWJsZXMnLFxuICAgICAgICAnZXh0ZW5zaW9ucycsXG4gICAgICAgICdjb250ZXh0JyxcbiAgICBdO1xuICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhvcGVyYXRpb24pOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIga2V5ID0gX2FbX2ldO1xuICAgICAgICBpZiAoT1BFUkFUSU9OX0ZJRUxEUy5pbmRleE9mKGtleSkgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBfX0RFVl9fID8gbmV3IEludmFyaWFudEVycm9yKFwiaWxsZWdhbCBhcmd1bWVudDogXCIuY29uY2F0KGtleSkpIDogbmV3IEludmFyaWFudEVycm9yKDI3KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3BlcmF0aW9uO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmFsaWRhdGVPcGVyYXRpb24uanMubWFwIiwiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPcGVyYXRpb24oc3RhcnRpbmcsIG9wZXJhdGlvbikge1xuICAgIHZhciBjb250ZXh0ID0gX19hc3NpZ24oe30sIHN0YXJ0aW5nKTtcbiAgICB2YXIgc2V0Q29udGV4dCA9IGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgbmV4dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29udGV4dCA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb250ZXh0KSwgbmV4dChjb250ZXh0KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGNvbnRleHQpLCBuZXh0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIGdldENvbnRleHQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoX19hc3NpZ24oe30sIGNvbnRleHQpKTsgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3BlcmF0aW9uLCAnc2V0Q29udGV4dCcsIHtcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBzZXRDb250ZXh0LFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvcGVyYXRpb24sICdnZXRDb250ZXh0Jywge1xuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IGdldENvbnRleHQsXG4gICAgfSk7XG4gICAgcmV0dXJuIG9wZXJhdGlvbjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZU9wZXJhdGlvbi5qcy5tYXAiLCJpbXBvcnQgeyBnZXRPcGVyYXRpb25OYW1lIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybU9wZXJhdGlvbihvcGVyYXRpb24pIHtcbiAgICB2YXIgdHJhbnNmb3JtZWRPcGVyYXRpb24gPSB7XG4gICAgICAgIHZhcmlhYmxlczogb3BlcmF0aW9uLnZhcmlhYmxlcyB8fCB7fSxcbiAgICAgICAgZXh0ZW5zaW9uczogb3BlcmF0aW9uLmV4dGVuc2lvbnMgfHwge30sXG4gICAgICAgIG9wZXJhdGlvbk5hbWU6IG9wZXJhdGlvbi5vcGVyYXRpb25OYW1lLFxuICAgICAgICBxdWVyeTogb3BlcmF0aW9uLnF1ZXJ5LFxuICAgIH07XG4gICAgaWYgKCF0cmFuc2Zvcm1lZE9wZXJhdGlvbi5vcGVyYXRpb25OYW1lKSB7XG4gICAgICAgIHRyYW5zZm9ybWVkT3BlcmF0aW9uLm9wZXJhdGlvbk5hbWUgPVxuICAgICAgICAgICAgdHlwZW9mIHRyYW5zZm9ybWVkT3BlcmF0aW9uLnF1ZXJ5ICE9PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gZ2V0T3BlcmF0aW9uTmFtZSh0cmFuc2Zvcm1lZE9wZXJhdGlvbi5xdWVyeSkgfHwgdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgOiAnJztcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybWVkT3BlcmF0aW9uO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNmb3JtT3BlcmF0aW9uLmpzLm1hcCIsImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgSW52YXJpYW50RXJyb3IsIGludmFyaWFudCB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IHZhbGlkYXRlT3BlcmF0aW9uLCBjcmVhdGVPcGVyYXRpb24sIHRyYW5zZm9ybU9wZXJhdGlvbiwgfSBmcm9tIFwiLi4vdXRpbHMvaW5kZXguanNcIjtcbmZ1bmN0aW9uIHBhc3N0aHJvdWdoKG9wLCBmb3J3YXJkKSB7XG4gICAgcmV0dXJuIChmb3J3YXJkID8gZm9yd2FyZChvcCkgOiBPYnNlcnZhYmxlLm9mKCkpO1xufVxuZnVuY3Rpb24gdG9MaW5rKGhhbmRsZXIpIHtcbiAgICByZXR1cm4gdHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicgPyBuZXcgQXBvbGxvTGluayhoYW5kbGVyKSA6IGhhbmRsZXI7XG59XG5mdW5jdGlvbiBpc1Rlcm1pbmF0aW5nKGxpbmspIHtcbiAgICByZXR1cm4gbGluay5yZXF1ZXN0Lmxlbmd0aCA8PSAxO1xufVxudmFyIExpbmtFcnJvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExpbmtFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBMaW5rRXJyb3IobWVzc2FnZSwgbGluaykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5saW5rID0gbGluaztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gTGlua0Vycm9yO1xufShFcnJvcikpO1xudmFyIEFwb2xsb0xpbmsgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFwb2xsb0xpbmsocmVxdWVzdCkge1xuICAgICAgICBpZiAocmVxdWVzdClcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7XG4gICAgfVxuICAgIEFwb2xsb0xpbmsuZW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXBvbGxvTGluayhmdW5jdGlvbiAoKSB7IHJldHVybiBPYnNlcnZhYmxlLm9mKCk7IH0pO1xuICAgIH07XG4gICAgQXBvbGxvTGluay5mcm9tID0gZnVuY3Rpb24gKGxpbmtzKSB7XG4gICAgICAgIGlmIChsaW5rcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICByZXR1cm4gQXBvbGxvTGluay5lbXB0eSgpO1xuICAgICAgICByZXR1cm4gbGlua3MubWFwKHRvTGluaykucmVkdWNlKGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4LmNvbmNhdCh5KTsgfSk7XG4gICAgfTtcbiAgICBBcG9sbG9MaW5rLnNwbGl0ID0gZnVuY3Rpb24gKHRlc3QsIGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIHZhciBsZWZ0TGluayA9IHRvTGluayhsZWZ0KTtcbiAgICAgICAgdmFyIHJpZ2h0TGluayA9IHRvTGluayhyaWdodCB8fCBuZXcgQXBvbGxvTGluayhwYXNzdGhyb3VnaCkpO1xuICAgICAgICBpZiAoaXNUZXJtaW5hdGluZyhsZWZ0TGluaykgJiYgaXNUZXJtaW5hdGluZyhyaWdodExpbmspKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFwb2xsb0xpbmsoZnVuY3Rpb24gKG9wZXJhdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0ZXN0KG9wZXJhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgPyBsZWZ0TGluay5yZXF1ZXN0KG9wZXJhdGlvbikgfHwgT2JzZXJ2YWJsZS5vZigpXG4gICAgICAgICAgICAgICAgICAgIDogcmlnaHRMaW5rLnJlcXVlc3Qob3BlcmF0aW9uKSB8fCBPYnNlcnZhYmxlLm9mKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXBvbGxvTGluayhmdW5jdGlvbiAob3BlcmF0aW9uLCBmb3J3YXJkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRlc3Qob3BlcmF0aW9uKVxuICAgICAgICAgICAgICAgICAgICA/IGxlZnRMaW5rLnJlcXVlc3Qob3BlcmF0aW9uLCBmb3J3YXJkKSB8fCBPYnNlcnZhYmxlLm9mKClcbiAgICAgICAgICAgICAgICAgICAgOiByaWdodExpbmsucmVxdWVzdChvcGVyYXRpb24sIGZvcndhcmQpIHx8IE9ic2VydmFibGUub2YoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBcG9sbG9MaW5rLmV4ZWN1dGUgPSBmdW5jdGlvbiAobGluaywgb3BlcmF0aW9uKSB7XG4gICAgICAgIHJldHVybiAobGluay5yZXF1ZXN0KGNyZWF0ZU9wZXJhdGlvbihvcGVyYXRpb24uY29udGV4dCwgdHJhbnNmb3JtT3BlcmF0aW9uKHZhbGlkYXRlT3BlcmF0aW9uKG9wZXJhdGlvbikpKSkgfHwgT2JzZXJ2YWJsZS5vZigpKTtcbiAgICB9O1xuICAgIEFwb2xsb0xpbmsuY29uY2F0ID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgdmFyIGZpcnN0TGluayA9IHRvTGluayhmaXJzdCk7XG4gICAgICAgIGlmIChpc1Rlcm1pbmF0aW5nKGZpcnN0TGluaykpIHtcbiAgICAgICAgICAgIF9fREVWX18gJiYgaW52YXJpYW50Lndhcm4obmV3IExpbmtFcnJvcihcIllvdSBhcmUgY2FsbGluZyBjb25jYXQgb24gYSB0ZXJtaW5hdGluZyBsaW5rLCB3aGljaCB3aWxsIGhhdmUgbm8gZWZmZWN0XCIsIGZpcnN0TGluaykpO1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0TGluaztcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV4dExpbmsgPSB0b0xpbmsoc2Vjb25kKTtcbiAgICAgICAgaWYgKGlzVGVybWluYXRpbmcobmV4dExpbmspKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFwb2xsb0xpbmsoZnVuY3Rpb24gKG9wZXJhdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdExpbmsucmVxdWVzdChvcGVyYXRpb24sIGZ1bmN0aW9uIChvcCkgeyByZXR1cm4gbmV4dExpbmsucmVxdWVzdChvcCkgfHwgT2JzZXJ2YWJsZS5vZigpOyB9KSB8fCBPYnNlcnZhYmxlLm9mKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXBvbGxvTGluayhmdW5jdGlvbiAob3BlcmF0aW9uLCBmb3J3YXJkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChmaXJzdExpbmsucmVxdWVzdChvcGVyYXRpb24sIGZ1bmN0aW9uIChvcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dExpbmsucmVxdWVzdChvcCwgZm9yd2FyZCkgfHwgT2JzZXJ2YWJsZS5vZigpO1xuICAgICAgICAgICAgICAgIH0pIHx8IE9ic2VydmFibGUub2YoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQXBvbGxvTGluay5wcm90b3R5cGUuc3BsaXQgPSBmdW5jdGlvbiAodGVzdCwgbGVmdCwgcmlnaHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uY2F0KEFwb2xsb0xpbmsuc3BsaXQodGVzdCwgbGVmdCwgcmlnaHQgfHwgbmV3IEFwb2xsb0xpbmsocGFzc3Rocm91Z2gpKSk7XG4gICAgfTtcbiAgICBBcG9sbG9MaW5rLnByb3RvdHlwZS5jb25jYXQgPSBmdW5jdGlvbiAobmV4dCkge1xuICAgICAgICByZXR1cm4gQXBvbGxvTGluay5jb25jYXQodGhpcywgbmV4dCk7XG4gICAgfTtcbiAgICBBcG9sbG9MaW5rLnByb3RvdHlwZS5yZXF1ZXN0ID0gZnVuY3Rpb24gKG9wZXJhdGlvbiwgZm9yd2FyZCkge1xuICAgICAgICB0aHJvdyBfX0RFVl9fID8gbmV3IEludmFyaWFudEVycm9yKCdyZXF1ZXN0IGlzIG5vdCBpbXBsZW1lbnRlZCcpIDogbmV3IEludmFyaWFudEVycm9yKDIyKTtcbiAgICB9O1xuICAgIEFwb2xsb0xpbmsucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIG9ic2VydmVyKSB7XG4gICAgICAgIGlmIChvYnNlcnZlciAmJiBvYnNlcnZlci5lcnJvcikge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH07XG4gICAgQXBvbGxvTGluay5wcm90b3R5cGUuc2V0T25FcnJvciA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICB0aGlzLm9uRXJyb3IgPSBmbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gQXBvbGxvTGluaztcbn0oKSk7XG5leHBvcnQgeyBBcG9sbG9MaW5rIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BcG9sbG9MaW5rLmpzLm1hcCIsImltcG9ydCB7IEFwb2xsb0xpbmsgfSBmcm9tIFwiLi9BcG9sbG9MaW5rLmpzXCI7XG5leHBvcnQgdmFyIHNwbGl0ID0gQXBvbGxvTGluay5zcGxpdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwbGl0LmpzLm1hcCIsImltcG9ydCB7IEFwb2xsb0xpbmsgfSBmcm9tIFwiLi9BcG9sbG9MaW5rLmpzXCI7XG5leHBvcnQgdmFyIGV4ZWN1dGUgPSBBcG9sbG9MaW5rLmV4ZWN1dGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1leGVjdXRlLmpzLm1hcCIsImV4cG9ydCB2YXIgdmVyc2lvbiA9ICczLjcuMTQnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmVyc2lvbi5qcy5tYXAiLCJpbXBvcnQgeyBjYW5Vc2VBc3luY0l0ZXJhdG9yU3ltYm9sIH0gZnJvbSBcIi4vY2FuVXNlLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gaXNOb2RlUmVzcG9uc2UodmFsdWUpIHtcbiAgICByZXR1cm4gISF2YWx1ZS5ib2R5O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUmVhZGFibGVTdHJlYW0odmFsdWUpIHtcbiAgICByZXR1cm4gISF2YWx1ZS5nZXRSZWFkZXI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBc3luY0l0ZXJhYmxlSXRlcmF0b3IodmFsdWUpIHtcbiAgICByZXR1cm4gISEoY2FuVXNlQXN5bmNJdGVyYXRvclN5bWJvbCAmJlxuICAgICAgICB2YWx1ZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU3RyZWFtYWJsZUJsb2IodmFsdWUpIHtcbiAgICByZXR1cm4gISF2YWx1ZS5zdHJlYW07XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCbG9iKHZhbHVlKSB7XG4gICAgcmV0dXJuICEhdmFsdWUuYXJyYXlCdWZmZXI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNOb2RlUmVhZGFibGVTdHJlYW0odmFsdWUpIHtcbiAgICByZXR1cm4gISF2YWx1ZS5waXBlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzcG9uc2VJdGVyYXRvci5qcy5tYXAiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhc3luY0l0ZXJhdG9yKHNvdXJjZSkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgaXRlcmF0b3IgPSBzb3VyY2VbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk7XG4gICAgcmV0dXJuIF9hID0ge1xuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIF9hW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuICAgICAgICBfYTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzeW5jLmpzLm1hcCIsImltcG9ydCB7IGNhblVzZUFzeW5jSXRlcmF0b3JTeW1ib2wgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBub2RlU3RyZWFtSXRlcmF0b3Ioc3RyZWFtKSB7XG4gICAgdmFyIGNsZWFudXAgPSBudWxsO1xuICAgIHZhciBlcnJvciA9IG51bGw7XG4gICAgdmFyIGRvbmUgPSBmYWxzZTtcbiAgICB2YXIgZGF0YSA9IFtdO1xuICAgIHZhciB3YWl0aW5nID0gW107XG4gICAgZnVuY3Rpb24gb25EYXRhKGNodW5rKSB7XG4gICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHdhaXRpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgc2hpZnRlZEFyciA9IHdhaXRpbmcuc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNoaWZ0ZWRBcnIpICYmIHNoaWZ0ZWRBcnJbMF0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2hpZnRlZEFyclswXSh7IHZhbHVlOiBjaHVuaywgZG9uZTogZmFsc2UgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5wdXNoKGNodW5rKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25FcnJvcihlcnIpIHtcbiAgICAgICAgZXJyb3IgPSBlcnI7XG4gICAgICAgIHZhciBhbGwgPSB3YWl0aW5nLnNsaWNlKCk7XG4gICAgICAgIGFsbC5mb3JFYWNoKGZ1bmN0aW9uIChwYWlyKSB7XG4gICAgICAgICAgICBwYWlyWzFdKGVycik7XG4gICAgICAgIH0pO1xuICAgICAgICAhY2xlYW51cCB8fCBjbGVhbnVwKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uRW5kKCkge1xuICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICAgdmFyIGFsbCA9IHdhaXRpbmcuc2xpY2UoKTtcbiAgICAgICAgYWxsLmZvckVhY2goZnVuY3Rpb24gKHBhaXIpIHtcbiAgICAgICAgICAgIHBhaXJbMF0oeyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgIWNsZWFudXAgfHwgY2xlYW51cCgpO1xuICAgIH1cbiAgICBjbGVhbnVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjbGVhbnVwID0gbnVsbDtcbiAgICAgICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKFwiZGF0YVwiLCBvbkRhdGEpO1xuICAgICAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLCBvbkVycm9yKTtcbiAgICAgICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKFwiZW5kXCIsIG9uRW5kKTtcbiAgICAgICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKFwiZmluaXNoXCIsIG9uRW5kKTtcbiAgICAgICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIiwgb25FbmQpO1xuICAgIH07XG4gICAgc3RyZWFtLm9uKFwiZGF0YVwiLCBvbkRhdGEpO1xuICAgIHN0cmVhbS5vbihcImVycm9yXCIsIG9uRXJyb3IpO1xuICAgIHN0cmVhbS5vbihcImVuZFwiLCBvbkVuZCk7XG4gICAgc3RyZWFtLm9uKFwiZmluaXNoXCIsIG9uRW5kKTtcbiAgICBzdHJlYW0ub24oXCJjbG9zZVwiLCBvbkVuZCk7XG4gICAgZnVuY3Rpb24gZ2V0TmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IHZhbHVlOiBkYXRhLnNoaWZ0KCksIGRvbmU6IGZhbHNlIH0pO1xuICAgICAgICAgICAgaWYgKGRvbmUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoeyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH0pO1xuICAgICAgICAgICAgd2FpdGluZy5wdXNoKFtyZXNvbHZlLCByZWplY3RdKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHZhciBpdGVyYXRvciA9IHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldE5leHQoKTtcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIGlmIChjYW5Vc2VBc3luY0l0ZXJhdG9yU3ltYm9sKSB7XG4gICAgICAgIGl0ZXJhdG9yW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gaXRlcmF0b3I7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub2RlU3RyZWFtLmpzLm1hcCIsImltcG9ydCB7IGNhblVzZUFzeW5jSXRlcmF0b3JTeW1ib2wgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwcm9taXNlSXRlcmF0b3IocHJvbWlzZSkge1xuICAgIHZhciByZXNvbHZlZCA9IGZhbHNlO1xuICAgIHZhciBpdGVyYXRvciA9IHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHJlc29sdmVkKVxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBkb25lOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgdmFsdWU6IHZhbHVlLCBkb25lOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgIH07XG4gICAgaWYgKGNhblVzZUFzeW5jSXRlcmF0b3JTeW1ib2wpIHtcbiAgICAgICAgaXRlcmF0b3JbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBpdGVyYXRvcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb21pc2UuanMubWFwIiwiaW1wb3J0IHsgY2FuVXNlQXN5bmNJdGVyYXRvclN5bWJvbCB9IGZyb20gXCIuLi8uLi8uLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlYWRlckl0ZXJhdG9yKHJlYWRlcikge1xuICAgIHZhciBpdGVyYXRvciA9IHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5yZWFkKCk7XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICBpZiAoY2FuVXNlQXN5bmNJdGVyYXRvclN5bWJvbCkge1xuICAgICAgICBpdGVyYXRvcltTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZXJhdG9yO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhZGVyLmpzLm1hcCIsImltcG9ydCB7IGlzQXN5bmNJdGVyYWJsZUl0ZXJhdG9yLCBpc0Jsb2IsIGlzTm9kZVJlc3BvbnNlLCBpc05vZGVSZWFkYWJsZVN0cmVhbSwgaXNSZWFkYWJsZVN0cmVhbSwgaXNTdHJlYW1hYmxlQmxvYiwgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2NvbW1vbi9yZXNwb25zZUl0ZXJhdG9yLmpzXCI7XG5pbXBvcnQgYXN5bmNJdGVyYXRvciBmcm9tIFwiLi9pdGVyYXRvcnMvYXN5bmMuanNcIjtcbmltcG9ydCBub2RlU3RyZWFtSXRlcmF0b3IgZnJvbSBcIi4vaXRlcmF0b3JzL25vZGVTdHJlYW0uanNcIjtcbmltcG9ydCBwcm9taXNlSXRlcmF0b3IgZnJvbSBcIi4vaXRlcmF0b3JzL3Byb21pc2UuanNcIjtcbmltcG9ydCByZWFkZXJJdGVyYXRvciBmcm9tIFwiLi9pdGVyYXRvcnMvcmVhZGVyLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcmVzcG9uc2VJdGVyYXRvcihyZXNwb25zZSkge1xuICAgIHZhciBib2R5ID0gcmVzcG9uc2U7XG4gICAgaWYgKGlzTm9kZVJlc3BvbnNlKHJlc3BvbnNlKSlcbiAgICAgICAgYm9keSA9IHJlc3BvbnNlLmJvZHk7XG4gICAgaWYgKGlzQXN5bmNJdGVyYWJsZUl0ZXJhdG9yKGJvZHkpKVxuICAgICAgICByZXR1cm4gYXN5bmNJdGVyYXRvcihib2R5KTtcbiAgICBpZiAoaXNSZWFkYWJsZVN0cmVhbShib2R5KSlcbiAgICAgICAgcmV0dXJuIHJlYWRlckl0ZXJhdG9yKGJvZHkuZ2V0UmVhZGVyKCkpO1xuICAgIGlmIChpc1N0cmVhbWFibGVCbG9iKGJvZHkpKSB7XG4gICAgICAgIHJldHVybiByZWFkZXJJdGVyYXRvcihib2R5LnN0cmVhbSgpLmdldFJlYWRlcigpKTtcbiAgICB9XG4gICAgaWYgKGlzQmxvYihib2R5KSlcbiAgICAgICAgcmV0dXJuIHByb21pc2VJdGVyYXRvcihib2R5LmFycmF5QnVmZmVyKCkpO1xuICAgIGlmIChpc05vZGVSZWFkYWJsZVN0cmVhbShib2R5KSlcbiAgICAgICAgcmV0dXJuIG5vZGVTdHJlYW1JdGVyYXRvcihib2R5KTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGJvZHkgdHlwZSBmb3IgcmVzcG9uc2VJdGVyYXRvci4gUGxlYXNlIHBhc3MgYSBzdHJlYW1hYmxlIHJlc3BvbnNlLlwiKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc3BvbnNlSXRlcmF0b3IuanMubWFwIiwiaW1wb3J0IHsgX19leHRlbmRzLCBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgXCIuLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgaXNOb25OdWxsT2JqZWN0IH0gZnJvbSBcIi4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuZXhwb3J0IHZhciBQUk9UT0NPTF9FUlJPUlNfU1lNQk9MID0gU3ltYm9sKCk7XG5leHBvcnQgZnVuY3Rpb24gZ3JhcGhRTFJlc3VsdEhhc1Byb3RvY29sRXJyb3JzKHJlc3VsdCkge1xuICAgIGlmIChyZXN1bHQuZXh0ZW5zaW9ucykge1xuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShyZXN1bHQuZXh0ZW5zaW9uc1tQUk9UT0NPTF9FUlJPUlNfU1lNQk9MXSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Fwb2xsb0Vycm9yKGVycikge1xuICAgIHJldHVybiBlcnIuaGFzT3duUHJvcGVydHkoJ2dyYXBoUUxFcnJvcnMnKTtcbn1cbnZhciBnZW5lcmF0ZUVycm9yTWVzc2FnZSA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICB2YXIgZXJyb3JzID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW10sIGVyci5ncmFwaFFMRXJyb3JzLCB0cnVlKSwgZXJyLmNsaWVudEVycm9ycywgdHJ1ZSksIGVyci5wcm90b2NvbEVycm9ycywgdHJ1ZSk7XG4gICAgaWYgKGVyci5uZXR3b3JrRXJyb3IpXG4gICAgICAgIGVycm9ycy5wdXNoKGVyci5uZXR3b3JrRXJyb3IpO1xuICAgIHJldHVybiBlcnJvcnNcbiAgICAgICAgLm1hcChmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBpc05vbk51bGxPYmplY3QoZXJyKSAmJiBlcnIubWVzc2FnZSB8fCAnRXJyb3IgbWVzc2FnZSBub3QgZm91bmQuJzsgfSlcbiAgICAgICAgLmpvaW4oJ1xcbicpO1xufTtcbnZhciBBcG9sbG9FcnJvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFwb2xsb0Vycm9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFwb2xsb0Vycm9yKF9hKSB7XG4gICAgICAgIHZhciBncmFwaFFMRXJyb3JzID0gX2EuZ3JhcGhRTEVycm9ycywgcHJvdG9jb2xFcnJvcnMgPSBfYS5wcm90b2NvbEVycm9ycywgY2xpZW50RXJyb3JzID0gX2EuY2xpZW50RXJyb3JzLCBuZXR3b3JrRXJyb3IgPSBfYS5uZXR3b3JrRXJyb3IsIGVycm9yTWVzc2FnZSA9IF9hLmVycm9yTWVzc2FnZSwgZXh0cmFJbmZvID0gX2EuZXh0cmFJbmZvO1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBlcnJvck1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm5hbWUgPSAnQXBvbGxvRXJyb3InO1xuICAgICAgICBfdGhpcy5ncmFwaFFMRXJyb3JzID0gZ3JhcGhRTEVycm9ycyB8fCBbXTtcbiAgICAgICAgX3RoaXMucHJvdG9jb2xFcnJvcnMgPSBwcm90b2NvbEVycm9ycyB8fCBbXTtcbiAgICAgICAgX3RoaXMuY2xpZW50RXJyb3JzID0gY2xpZW50RXJyb3JzIHx8IFtdO1xuICAgICAgICBfdGhpcy5uZXR3b3JrRXJyb3IgPSBuZXR3b3JrRXJyb3IgfHwgbnVsbDtcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fCBnZW5lcmF0ZUVycm9yTWVzc2FnZShfdGhpcyk7XG4gICAgICAgIF90aGlzLmV4dHJhSW5mbyA9IGV4dHJhSW5mbztcbiAgICAgICAgX3RoaXMuX19wcm90b19fID0gQXBvbGxvRXJyb3IucHJvdG90eXBlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBBcG9sbG9FcnJvcjtcbn0oRXJyb3IpKTtcbmV4cG9ydCB7IEFwb2xsb0Vycm9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgcmVzcG9uc2VJdGVyYXRvciB9IGZyb20gXCIuL3Jlc3BvbnNlSXRlcmF0b3IuanNcIjtcbmltcG9ydCB7IHRocm93U2VydmVyRXJyb3IgfSBmcm9tIFwiLi4vdXRpbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IFBST1RPQ09MX0VSUk9SU19TWU1CT0wgfSBmcm9tIFwiLi4vLi4vZXJyb3JzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBpc0Fwb2xsb1BheWxvYWRSZXN1bHQgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2NvbW1vbi9pbmNyZW1lbnRhbFJlc3VsdC5qc1wiO1xudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbmV4cG9ydCBmdW5jdGlvbiByZWFkTXVsdGlwYXJ0Qm9keShyZXNwb25zZSwgb2JzZXJ2ZXIpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlY29kZXIsIGNvbnRlbnRUeXBlLCBkZWxpbWl0ZXIsIGJvdW5kYXJ5VmFsLCBib3VuZGFyeSwgYnVmZmVyLCBpdGVyYXRvciwgcnVubmluZywgX2YsIHZhbHVlLCBkb25lLCBjaHVuaywgYmksIG1lc3NhZ2UsIGksIGhlYWRlcnMsIGNvbnRlbnRUeXBlXzEsIGJvZHksIHJlc3VsdCwgbmV4dDtcbiAgICAgICAgdmFyIF9nLCBfaDtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfaikge1xuICAgICAgICAgICAgc3dpdGNoIChfai5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKFRleHREZWNvZGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRleHREZWNvZGVyIG11c3QgYmUgZGVmaW5lZCBpbiB0aGUgZW52aXJvbm1lbnQ6IHBsZWFzZSBpbXBvcnQgYSBwb2x5ZmlsbC5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IChfYSA9IHJlc3BvbnNlLmhlYWRlcnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXQoXCJjb250ZW50LXR5cGVcIik7XG4gICAgICAgICAgICAgICAgICAgIGRlbGltaXRlciA9IFwiYm91bmRhcnk9XCI7XG4gICAgICAgICAgICAgICAgICAgIGJvdW5kYXJ5VmFsID0gKGNvbnRlbnRUeXBlID09PSBudWxsIHx8IGNvbnRlbnRUeXBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb250ZW50VHlwZS5pbmNsdWRlcyhkZWxpbWl0ZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb250ZW50VHlwZSA9PT0gbnVsbCB8fCBjb250ZW50VHlwZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udGVudFR5cGUuc3Vic3RyaW5nKChjb250ZW50VHlwZSA9PT0gbnVsbCB8fCBjb250ZW50VHlwZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udGVudFR5cGUuaW5kZXhPZihkZWxpbWl0ZXIpKSArIGRlbGltaXRlci5sZW5ndGgpLnJlcGxhY2UoL1snXCJdL2csIFwiXCIpLnJlcGxhY2UoL1xcOyguKikvZ20sIFwiXCIpLnRyaW0oKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIi1cIjtcbiAgICAgICAgICAgICAgICAgICAgYm91bmRhcnkgPSBcIi0tXCIuY29uY2F0KGJvdW5kYXJ5VmFsKTtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3IgPSByZXNwb25zZUl0ZXJhdG9yKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgcnVubmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIF9qLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGlmICghcnVubmluZykgcmV0dXJuIFszLCAzXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCBpdGVyYXRvci5uZXh0KCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgX2YgPSBfai5zZW50KCksIHZhbHVlID0gX2YudmFsdWUsIGRvbmUgPSBfZi5kb25lO1xuICAgICAgICAgICAgICAgICAgICBjaHVuayA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IHZhbHVlIDogZGVjb2Rlci5kZWNvZGUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBydW5uaW5nID0gIWRvbmU7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlciArPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgYmkgPSBidWZmZXIuaW5kZXhPZihib3VuZGFyeSk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChiaSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2cgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnNsaWNlKDAsIGJpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIuc2xpY2UoYmkgKyBib3VuZGFyeS5sZW5ndGgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSwgbWVzc2FnZSA9IF9nWzBdLCBidWZmZXIgPSBfZ1sxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyaW0oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBtZXNzYWdlLmluZGV4T2YoXCJcXHJcXG5cXHJcXG5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IHBhcnNlSGVhZGVycyhtZXNzYWdlLnNsaWNlKDAsIGkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZV8xID0gaGVhZGVyc1tcImNvbnRlbnQtdHlwZVwiXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudFR5cGVfMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZV8xLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImFwcGxpY2F0aW9uL2pzb25cIikgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIHBhdGNoIGNvbnRlbnQgdHlwZTogYXBwbGljYXRpb24vanNvbiBpcyByZXF1aXJlZC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgPSBtZXNzYWdlLnNsaWNlKGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHBhcnNlSnNvbkJvZHkocmVzcG9uc2UsIGJvZHkucmVwbGFjZShcIlxcclxcblwiLCBcIlwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhyZXN1bHQpLmxlbmd0aCA+IDEgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YVwiIGluIHJlc3VsdCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbmNyZW1lbnRhbFwiIGluIHJlc3VsdCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlcnJvcnNcIiBpbiByZXN1bHQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGF5bG9hZFwiIGluIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXBvbGxvUGF5bG9hZFJlc3VsdChyZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInBheWxvYWRcIiBpbiByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCA9IF9fYXNzaWduKHt9LCByZXN1bHQucGF5bG9hZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcImVycm9yc1wiIGluIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIG5leHQpLCB7IGV4dGVuc2lvbnM6IF9fYXNzaWduKF9fYXNzaWduKHt9LCAoXCJleHRlbnNpb25zXCIgaW4gbmV4dCA/IG5leHQuZXh0ZW5zaW9ucyA6IG51bGwpKSwgKF9oID0ge30sIF9oW1BST1RPQ09MX0VSUk9SU19TWU1CT0xdID0gcmVzdWx0LmVycm9ycywgX2gpKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF9iID0gb2JzZXJ2ZXIubmV4dCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwob2JzZXJ2ZXIsIG5leHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF9jID0gb2JzZXJ2ZXIubmV4dCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmNhbGwob2JzZXJ2ZXIsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoT2JqZWN0LmtleXMocmVzdWx0KS5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaGFzTmV4dFwiIGluIHJlc3VsdCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXJlc3VsdC5oYXNOZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoX2QgPSBvYnNlcnZlci5jb21wbGV0ZSkgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLmNhbGwob2JzZXJ2ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRXJyb3IoZXJyLCBvYnNlcnZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYmkgPSBidWZmZXIuaW5kZXhPZihib3VuZGFyeSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszLCAxXTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIChfZSA9IG9ic2VydmVyLmNvbXBsZXRlKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UuY2FsbChvYnNlcnZlcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhoZWFkZXJUZXh0KSB7XG4gICAgdmFyIGhlYWRlcnNJbml0ID0ge307XG4gICAgaGVhZGVyVGV4dC5zcGxpdChcIlxcblwiKS5mb3JFYWNoKGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIHZhciBpID0gbGluZS5pbmRleE9mKFwiOlwiKTtcbiAgICAgICAgaWYgKGkgPiAtMSkge1xuICAgICAgICAgICAgdmFyIG5hbWVfMSA9IGxpbmUuc2xpY2UoMCwgaSkudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBsaW5lLnNsaWNlKGkgKyAxKS50cmltKCk7XG4gICAgICAgICAgICBoZWFkZXJzSW5pdFtuYW1lXzFdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gaGVhZGVyc0luaXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VKc29uQm9keShyZXNwb25zZSwgYm9keVRleHQpIHtcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDMwMCkge1xuICAgICAgICB2YXIgZ2V0UmVzdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShib2R5VGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvZHlUZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aHJvd1NlcnZlckVycm9yKHJlc3BvbnNlLCBnZXRSZXN1bHQoKSwgXCJSZXNwb25zZSBub3Qgc3VjY2Vzc2Z1bDogUmVjZWl2ZWQgc3RhdHVzIGNvZGUgXCIuY29uY2F0KHJlc3BvbnNlLnN0YXR1cykpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShib2R5VGV4dCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgdmFyIHBhcnNlRXJyb3IgPSBlcnI7XG4gICAgICAgIHBhcnNlRXJyb3IubmFtZSA9IFwiU2VydmVyUGFyc2VFcnJvclwiO1xuICAgICAgICBwYXJzZUVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgIHBhcnNlRXJyb3Iuc3RhdHVzQ29kZSA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICAgICAgcGFyc2VFcnJvci5ib2R5VGV4dCA9IGJvZHlUZXh0O1xuICAgICAgICB0aHJvdyBwYXJzZUVycm9yO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnIsIG9ic2VydmVyKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBpZiAoZXJyLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKGVyci5yZXN1bHQgJiYgZXJyLnJlc3VsdC5lcnJvcnMgJiYgZXJyLnJlc3VsdC5kYXRhKSB7XG4gICAgICAgIChfYSA9IG9ic2VydmVyLm5leHQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKG9ic2VydmVyLCBlcnIucmVzdWx0KTtcbiAgICB9XG4gICAgKF9iID0gb2JzZXJ2ZXIuZXJyb3IpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKG9ic2VydmVyLCBlcnIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRKc29uQm9keShyZXNwb25zZSwgb3BlcmF0aW9uLCBvYnNlcnZlcikge1xuICAgIHBhcnNlQW5kQ2hlY2tIdHRwUmVzcG9uc2Uob3BlcmF0aW9uKShyZXNwb25zZSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAoX2EgPSBvYnNlcnZlci5uZXh0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbChvYnNlcnZlciwgcmVzdWx0KTtcbiAgICAgICAgKF9iID0gb2JzZXJ2ZXIuY29tcGxldGUpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKG9ic2VydmVyKTtcbiAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikgeyByZXR1cm4gaGFuZGxlRXJyb3IoZXJyLCBvYnNlcnZlcik7IH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQW5kQ2hlY2tIdHRwUmVzcG9uc2Uob3BlcmF0aW9ucykge1xuICAgIHJldHVybiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgICAgICAgICAudGV4dCgpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYm9keVRleHQpIHsgcmV0dXJuIHBhcnNlSnNvbkJvZHkocmVzcG9uc2UsIGJvZHlUZXh0KTsgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gMzAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3dTZXJ2ZXJFcnJvcihyZXNwb25zZSwgcmVzdWx0LCBcIlJlc3BvbnNlIG5vdCBzdWNjZXNzZnVsOiBSZWNlaXZlZCBzdGF0dXMgY29kZSBcIi5jb25jYXQocmVzcG9uc2Uuc3RhdHVzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVzdWx0KSAmJlxuICAgICAgICAgICAgICAgICFoYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwgXCJkYXRhXCIpICYmXG4gICAgICAgICAgICAgICAgIWhhc093blByb3BlcnR5LmNhbGwocmVzdWx0LCBcImVycm9yc1wiKSkge1xuICAgICAgICAgICAgICAgIHRocm93U2VydmVyRXJyb3IocmVzcG9uc2UsIHJlc3VsdCwgXCJTZXJ2ZXIgcmVzcG9uc2Ugd2FzIG1pc3NpbmcgZm9yIHF1ZXJ5ICdcIi5jb25jYXQoQXJyYXkuaXNBcnJheShvcGVyYXRpb25zKVxuICAgICAgICAgICAgICAgICAgICA/IG9wZXJhdGlvbnMubWFwKGZ1bmN0aW9uIChvcCkgeyByZXR1cm4gb3Aub3BlcmF0aW9uTmFtZTsgfSlcbiAgICAgICAgICAgICAgICAgICAgOiBvcGVyYXRpb25zLm9wZXJhdGlvbk5hbWUsIFwiJy5cIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlQW5kQ2hlY2tIdHRwUmVzcG9uc2UuanMubWFwIiwiaW1wb3J0IHsgSW52YXJpYW50RXJyb3IgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2dsb2JhbHMvaW5kZXguanNcIjtcbmV4cG9ydCB2YXIgc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXIgPSBmdW5jdGlvbiAocCwgbGFiZWwpIHtcbiAgICB2YXIgc2VyaWFsaXplZDtcbiAgICB0cnkge1xuICAgICAgICBzZXJpYWxpemVkID0gSlNPTi5zdHJpbmdpZnkocCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHZhciBwYXJzZUVycm9yID0gX19ERVZfXyA/IG5ldyBJbnZhcmlhbnRFcnJvcihcIk5ldHdvcmsgcmVxdWVzdCBmYWlsZWQuIFwiLmNvbmNhdChsYWJlbCwgXCIgaXMgbm90IHNlcmlhbGl6YWJsZTogXCIpLmNvbmNhdChlLm1lc3NhZ2UpKSA6IG5ldyBJbnZhcmlhbnRFcnJvcigyNCk7XG4gICAgICAgIHBhcnNlRXJyb3IucGFyc2VFcnJvciA9IGU7XG4gICAgICAgIHRocm93IHBhcnNlRXJyb3I7XG4gICAgfVxuICAgIHJldHVybiBzZXJpYWxpemVkO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlcmlhbGl6ZUZldGNoUGFyYW1ldGVyLmpzLm1hcCIsImltcG9ydCB7IF9fYXNzaWduLCBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBwcmludCB9IGZyb20gJ2dyYXBocWwnO1xuO1xudmFyIGRlZmF1bHRIdHRwT3B0aW9ucyA9IHtcbiAgICBpbmNsdWRlUXVlcnk6IHRydWUsXG4gICAgaW5jbHVkZUV4dGVuc2lvbnM6IGZhbHNlLFxuICAgIHByZXNlcnZlSGVhZGVyQ2FzZTogZmFsc2UsXG59O1xudmFyIGRlZmF1bHRIZWFkZXJzID0ge1xuICAgIGFjY2VwdDogJyovKicsXG4gICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbn07XG52YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG59O1xuZXhwb3J0IHZhciBmYWxsYmFja0h0dHBDb25maWcgPSB7XG4gICAgaHR0cDogZGVmYXVsdEh0dHBPcHRpb25zLFxuICAgIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzLFxuICAgIG9wdGlvbnM6IGRlZmF1bHRPcHRpb25zLFxufTtcbmV4cG9ydCB2YXIgZGVmYXVsdFByaW50ZXIgPSBmdW5jdGlvbiAoYXN0LCBwcmludGVyKSB7IHJldHVybiBwcmludGVyKGFzdCk7IH07XG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0SHR0cE9wdGlvbnNBbmRCb2R5KG9wZXJhdGlvbiwgZmFsbGJhY2tDb25maWcpIHtcbiAgICB2YXIgY29uZmlncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGNvbmZpZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGNvbmZpZ3MudW5zaGlmdChmYWxsYmFja0NvbmZpZyk7XG4gICAgcmV0dXJuIHNlbGVjdEh0dHBPcHRpb25zQW5kQm9keUludGVybmFsLmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbb3BlcmF0aW9uLFxuICAgICAgICBkZWZhdWx0UHJpbnRlcl0sIGNvbmZpZ3MsIGZhbHNlKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0SHR0cE9wdGlvbnNBbmRCb2R5SW50ZXJuYWwob3BlcmF0aW9uLCBwcmludGVyKSB7XG4gICAgdmFyIGNvbmZpZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBjb25maWdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgIHZhciBodHRwID0ge307XG4gICAgY29uZmlncy5mb3JFYWNoKGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgb3B0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgY29uZmlnLm9wdGlvbnMpLCB7IGhlYWRlcnM6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zLmhlYWRlcnMpLCBjb25maWcuaGVhZGVycykgfSk7XG4gICAgICAgIGlmIChjb25maWcuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuY3JlZGVudGlhbHMgPSBjb25maWcuY3JlZGVudGlhbHM7XG4gICAgICAgIH1cbiAgICAgICAgaHR0cCA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBodHRwKSwgY29uZmlnLmh0dHApO1xuICAgIH0pO1xuICAgIGlmIChvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzID0gcmVtb3ZlRHVwbGljYXRlSGVhZGVycyhvcHRpb25zLmhlYWRlcnMsIGh0dHAucHJlc2VydmVIZWFkZXJDYXNlKTtcbiAgICB9XG4gICAgdmFyIG9wZXJhdGlvbk5hbWUgPSBvcGVyYXRpb24ub3BlcmF0aW9uTmFtZSwgZXh0ZW5zaW9ucyA9IG9wZXJhdGlvbi5leHRlbnNpb25zLCB2YXJpYWJsZXMgPSBvcGVyYXRpb24udmFyaWFibGVzLCBxdWVyeSA9IG9wZXJhdGlvbi5xdWVyeTtcbiAgICB2YXIgYm9keSA9IHsgb3BlcmF0aW9uTmFtZTogb3BlcmF0aW9uTmFtZSwgdmFyaWFibGVzOiB2YXJpYWJsZXMgfTtcbiAgICBpZiAoaHR0cC5pbmNsdWRlRXh0ZW5zaW9ucylcbiAgICAgICAgYm9keS5leHRlbnNpb25zID0gZXh0ZW5zaW9ucztcbiAgICBpZiAoaHR0cC5pbmNsdWRlUXVlcnkpXG4gICAgICAgIGJvZHkucXVlcnkgPSBwcmludGVyKHF1ZXJ5LCBwcmludCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgYm9keTogYm9keSxcbiAgICB9O1xufVxuO1xuZnVuY3Rpb24gcmVtb3ZlRHVwbGljYXRlSGVhZGVycyhoZWFkZXJzLCBwcmVzZXJ2ZUhlYWRlckNhc2UpIHtcbiAgICBpZiAoIXByZXNlcnZlSGVhZGVyQ2FzZSkge1xuICAgICAgICB2YXIgbm9ybWFsaXplZEhlYWRlcnNfMSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIE9iamVjdC5rZXlzKE9iamVjdChoZWFkZXJzKSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgbm9ybWFsaXplZEhlYWRlcnNfMVtuYW1lLnRvTG93ZXJDYXNlKCldID0gaGVhZGVyc1tuYW1lXTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBub3JtYWxpemVkSGVhZGVyc18xO1xuICAgIH1cbiAgICB2YXIgaGVhZGVyRGF0YSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgT2JqZWN0LmtleXMoT2JqZWN0KGhlYWRlcnMpKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGhlYWRlckRhdGFbbmFtZS50b0xvd2VyQ2FzZSgpXSA9IHsgb3JpZ2luYWxOYW1lOiBuYW1lLCB2YWx1ZTogaGVhZGVyc1tuYW1lXSB9O1xuICAgIH0pO1xuICAgIHZhciBub3JtYWxpemVkSGVhZGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgT2JqZWN0LmtleXMoaGVhZGVyRGF0YSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBub3JtYWxpemVkSGVhZGVyc1toZWFkZXJEYXRhW25hbWVdLm9yaWdpbmFsTmFtZV0gPSBoZWFkZXJEYXRhW25hbWVdLnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBub3JtYWxpemVkSGVhZGVycztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlbGVjdEh0dHBPcHRpb25zQW5kQm9keS5qcy5tYXAiLCJpbXBvcnQgeyBJbnZhcmlhbnRFcnJvciB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuZXhwb3J0IHZhciBjaGVja0ZldGNoZXIgPSBmdW5jdGlvbiAoZmV0Y2hlcikge1xuICAgIGlmICghZmV0Y2hlciAmJiB0eXBlb2YgZmV0Y2ggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRocm93IF9fREVWX18gPyBuZXcgSW52YXJpYW50RXJyb3IoXCJcXG5cXFwiZmV0Y2hcXFwiIGhhcyBub3QgYmVlbiBmb3VuZCBnbG9iYWxseSBhbmQgbm8gZmV0Y2hlciBoYXMgYmVlbiBjb25maWd1cmVkLiBUbyBmaXggdGhpcywgaW5zdGFsbCBhIGZldGNoIHBhY2thZ2UgKGxpa2UgaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvY3Jvc3MtZmV0Y2gpLCBpbnN0YW50aWF0ZSB0aGUgZmV0Y2hlciwgYW5kIHBhc3MgaXQgaW50byB5b3VyIEh0dHBMaW5rIGNvbnN0cnVjdG9yLiBGb3IgZXhhbXBsZTpcXG5cXG5pbXBvcnQgZmV0Y2ggZnJvbSAnY3Jvc3MtZmV0Y2gnO1xcbmltcG9ydCB7IEFwb2xsb0NsaWVudCwgSHR0cExpbmsgfSBmcm9tICdAYXBvbGxvL2NsaWVudCc7XFxuY29uc3QgY2xpZW50ID0gbmV3IEFwb2xsb0NsaWVudCh7XFxuICBsaW5rOiBuZXcgSHR0cExpbmsoeyB1cmk6ICcvZ3JhcGhxbCcsIGZldGNoIH0pXFxufSk7XFxuICAgIFwiKSA6IG5ldyBJbnZhcmlhbnRFcnJvcigyMyk7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNoZWNrRmV0Y2hlci5qcy5tYXAiLCJleHBvcnQgdmFyIGNyZWF0ZVNpZ25hbElmU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0eXBlb2YgQWJvcnRDb250cm9sbGVyID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgcmV0dXJuIHsgY29udHJvbGxlcjogZmFsc2UsIHNpZ25hbDogZmFsc2UgfTtcbiAgICB2YXIgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICB2YXIgc2lnbmFsID0gY29udHJvbGxlci5zaWduYWw7XG4gICAgcmV0dXJuIHsgY29udHJvbGxlcjogY29udHJvbGxlciwgc2lnbmFsOiBzaWduYWwgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGVTaWduYWxJZlN1cHBvcnRlZC5qcy5tYXAiLCJleHBvcnQgdmFyIHNlbGVjdFVSSSA9IGZ1bmN0aW9uIChvcGVyYXRpb24sIGZhbGxiYWNrVVJJKSB7XG4gICAgdmFyIGNvbnRleHQgPSBvcGVyYXRpb24uZ2V0Q29udGV4dCgpO1xuICAgIHZhciBjb250ZXh0VVJJID0gY29udGV4dC51cmk7XG4gICAgaWYgKGNvbnRleHRVUkkpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHRVUkk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBmYWxsYmFja1VSSSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gZmFsbGJhY2tVUkkob3BlcmF0aW9uKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxsYmFja1VSSSB8fCAnL2dyYXBocWwnO1xuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZWxlY3RVUkkuanMubWFwIiwiaW1wb3J0IHsgc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXIgfSBmcm9tIFwiLi9zZXJpYWxpemVGZXRjaFBhcmFtZXRlci5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHJld3JpdGVVUklGb3JHRVQoY2hvc2VuVVJJLCBib2R5KSB7XG4gICAgdmFyIHF1ZXJ5UGFyYW1zID0gW107XG4gICAgdmFyIGFkZFF1ZXJ5UGFyYW0gPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICBxdWVyeVBhcmFtcy5wdXNoKFwiXCIuY29uY2F0KGtleSwgXCI9XCIpLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKSk7XG4gICAgfTtcbiAgICBpZiAoJ3F1ZXJ5JyBpbiBib2R5KSB7XG4gICAgICAgIGFkZFF1ZXJ5UGFyYW0oJ3F1ZXJ5JywgYm9keS5xdWVyeSk7XG4gICAgfVxuICAgIGlmIChib2R5Lm9wZXJhdGlvbk5hbWUpIHtcbiAgICAgICAgYWRkUXVlcnlQYXJhbSgnb3BlcmF0aW9uTmFtZScsIGJvZHkub3BlcmF0aW9uTmFtZSk7XG4gICAgfVxuICAgIGlmIChib2R5LnZhcmlhYmxlcykge1xuICAgICAgICB2YXIgc2VyaWFsaXplZFZhcmlhYmxlcyA9IHZvaWQgMDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNlcmlhbGl6ZWRWYXJpYWJsZXMgPSBzZXJpYWxpemVGZXRjaFBhcmFtZXRlcihib2R5LnZhcmlhYmxlcywgJ1ZhcmlhYmxlcyBtYXAnKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHsgcGFyc2VFcnJvcjogcGFyc2VFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGFkZFF1ZXJ5UGFyYW0oJ3ZhcmlhYmxlcycsIHNlcmlhbGl6ZWRWYXJpYWJsZXMpO1xuICAgIH1cbiAgICBpZiAoYm9keS5leHRlbnNpb25zKSB7XG4gICAgICAgIHZhciBzZXJpYWxpemVkRXh0ZW5zaW9ucyA9IHZvaWQgMDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNlcmlhbGl6ZWRFeHRlbnNpb25zID0gc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXIoYm9keS5leHRlbnNpb25zLCAnRXh0ZW5zaW9ucyBtYXAnKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHsgcGFyc2VFcnJvcjogcGFyc2VFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGFkZFF1ZXJ5UGFyYW0oJ2V4dGVuc2lvbnMnLCBzZXJpYWxpemVkRXh0ZW5zaW9ucyk7XG4gICAgfVxuICAgIHZhciBmcmFnbWVudCA9ICcnLCBwcmVGcmFnbWVudCA9IGNob3NlblVSSTtcbiAgICB2YXIgZnJhZ21lbnRTdGFydCA9IGNob3NlblVSSS5pbmRleE9mKCcjJyk7XG4gICAgaWYgKGZyYWdtZW50U3RhcnQgIT09IC0xKSB7XG4gICAgICAgIGZyYWdtZW50ID0gY2hvc2VuVVJJLnN1YnN0cihmcmFnbWVudFN0YXJ0KTtcbiAgICAgICAgcHJlRnJhZ21lbnQgPSBjaG9zZW5VUkkuc3Vic3RyKDAsIGZyYWdtZW50U3RhcnQpO1xuICAgIH1cbiAgICB2YXIgcXVlcnlQYXJhbXNQcmVmaXggPSBwcmVGcmFnbWVudC5pbmRleE9mKCc/JykgPT09IC0xID8gJz8nIDogJyYnO1xuICAgIHZhciBuZXdVUkkgPSBwcmVGcmFnbWVudCArIHF1ZXJ5UGFyYW1zUHJlZml4ICsgcXVlcnlQYXJhbXMuam9pbignJicpICsgZnJhZ21lbnQ7XG4gICAgcmV0dXJuIHsgbmV3VVJJOiBuZXdVUkkgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJld3JpdGVVUklGb3JHRVQuanMubWFwIiwiaW1wb3J0IHsgX19hc3NpZ24sIF9fcmVzdCB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IFwiLi4vLi4vdXRpbGl0aWVzL2dsb2JhbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgdmlzaXQgfSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IEFwb2xsb0xpbmsgfSBmcm9tIFwiLi4vY29yZS9pbmRleC5qc1wiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgaGFzRGlyZWN0aXZlcyB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IHNlcmlhbGl6ZUZldGNoUGFyYW1ldGVyIH0gZnJvbSBcIi4vc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXIuanNcIjtcbmltcG9ydCB7IHNlbGVjdFVSSSB9IGZyb20gXCIuL3NlbGVjdFVSSS5qc1wiO1xuaW1wb3J0IHsgaGFuZGxlRXJyb3IsIHJlYWRNdWx0aXBhcnRCb2R5LCByZWFkSnNvbkJvZHkgfSBmcm9tIFwiLi9wYXJzZUFuZENoZWNrSHR0cFJlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBjaGVja0ZldGNoZXIgfSBmcm9tIFwiLi9jaGVja0ZldGNoZXIuanNcIjtcbmltcG9ydCB7IHNlbGVjdEh0dHBPcHRpb25zQW5kQm9keUludGVybmFsLCBkZWZhdWx0UHJpbnRlciwgZmFsbGJhY2tIdHRwQ29uZmlnIH0gZnJvbSBcIi4vc2VsZWN0SHR0cE9wdGlvbnNBbmRCb2R5LmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVTaWduYWxJZlN1cHBvcnRlZCB9IGZyb20gXCIuL2NyZWF0ZVNpZ25hbElmU3VwcG9ydGVkLmpzXCI7XG5pbXBvcnQgeyByZXdyaXRlVVJJRm9yR0VUIH0gZnJvbSBcIi4vcmV3cml0ZVVSSUZvckdFVC5qc1wiO1xuaW1wb3J0IHsgZnJvbUVycm9yIH0gZnJvbSBcIi4uL3V0aWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBtYXliZSwgZ2V0TWFpbkRlZmluaXRpb24gfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG52YXIgYmFja3VwRmV0Y2ggPSBtYXliZShmdW5jdGlvbiAoKSB7IHJldHVybiBmZXRjaDsgfSk7XG5leHBvcnQgdmFyIGNyZWF0ZUh0dHBMaW5rID0gZnVuY3Rpb24gKGxpbmtPcHRpb25zKSB7XG4gICAgaWYgKGxpbmtPcHRpb25zID09PSB2b2lkIDApIHsgbGlua09wdGlvbnMgPSB7fTsgfVxuICAgIHZhciBfYSA9IGxpbmtPcHRpb25zLnVyaSwgdXJpID0gX2EgPT09IHZvaWQgMCA/ICcvZ3JhcGhxbCcgOiBfYSwgcHJlZmVycmVkRmV0Y2ggPSBsaW5rT3B0aW9ucy5mZXRjaCwgX2IgPSBsaW5rT3B0aW9ucy5wcmludCwgcHJpbnQgPSBfYiA9PT0gdm9pZCAwID8gZGVmYXVsdFByaW50ZXIgOiBfYiwgaW5jbHVkZUV4dGVuc2lvbnMgPSBsaW5rT3B0aW9ucy5pbmNsdWRlRXh0ZW5zaW9ucywgcHJlc2VydmVIZWFkZXJDYXNlID0gbGlua09wdGlvbnMucHJlc2VydmVIZWFkZXJDYXNlLCB1c2VHRVRGb3JRdWVyaWVzID0gbGlua09wdGlvbnMudXNlR0VURm9yUXVlcmllcywgX2MgPSBsaW5rT3B0aW9ucy5pbmNsdWRlVW51c2VkVmFyaWFibGVzLCBpbmNsdWRlVW51c2VkVmFyaWFibGVzID0gX2MgPT09IHZvaWQgMCA/IGZhbHNlIDogX2MsIHJlcXVlc3RPcHRpb25zID0gX19yZXN0KGxpbmtPcHRpb25zLCBbXCJ1cmlcIiwgXCJmZXRjaFwiLCBcInByaW50XCIsIFwiaW5jbHVkZUV4dGVuc2lvbnNcIiwgXCJwcmVzZXJ2ZUhlYWRlckNhc2VcIiwgXCJ1c2VHRVRGb3JRdWVyaWVzXCIsIFwiaW5jbHVkZVVudXNlZFZhcmlhYmxlc1wiXSk7XG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgICAgY2hlY2tGZXRjaGVyKHByZWZlcnJlZEZldGNoIHx8IGJhY2t1cEZldGNoKTtcbiAgICB9XG4gICAgdmFyIGxpbmtDb25maWcgPSB7XG4gICAgICAgIGh0dHA6IHsgaW5jbHVkZUV4dGVuc2lvbnM6IGluY2x1ZGVFeHRlbnNpb25zLCBwcmVzZXJ2ZUhlYWRlckNhc2U6IHByZXNlcnZlSGVhZGVyQ2FzZSB9LFxuICAgICAgICBvcHRpb25zOiByZXF1ZXN0T3B0aW9ucy5mZXRjaE9wdGlvbnMsXG4gICAgICAgIGNyZWRlbnRpYWxzOiByZXF1ZXN0T3B0aW9ucy5jcmVkZW50aWFscyxcbiAgICAgICAgaGVhZGVyczogcmVxdWVzdE9wdGlvbnMuaGVhZGVycyxcbiAgICB9O1xuICAgIHJldHVybiBuZXcgQXBvbGxvTGluayhmdW5jdGlvbiAob3BlcmF0aW9uKSB7XG4gICAgICAgIHZhciBjaG9zZW5VUkkgPSBzZWxlY3RVUkkob3BlcmF0aW9uLCB1cmkpO1xuICAgICAgICB2YXIgY29udGV4dCA9IG9wZXJhdGlvbi5nZXRDb250ZXh0KCk7XG4gICAgICAgIHZhciBjbGllbnRBd2FyZW5lc3NIZWFkZXJzID0ge307XG4gICAgICAgIGlmIChjb250ZXh0LmNsaWVudEF3YXJlbmVzcykge1xuICAgICAgICAgICAgdmFyIF9hID0gY29udGV4dC5jbGllbnRBd2FyZW5lc3MsIG5hbWVfMSA9IF9hLm5hbWUsIHZlcnNpb24gPSBfYS52ZXJzaW9uO1xuICAgICAgICAgICAgaWYgKG5hbWVfMSkge1xuICAgICAgICAgICAgICAgIGNsaWVudEF3YXJlbmVzc0hlYWRlcnNbJ2Fwb2xsb2dyYXBocWwtY2xpZW50LW5hbWUnXSA9IG5hbWVfMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgY2xpZW50QXdhcmVuZXNzSGVhZGVyc1snYXBvbGxvZ3JhcGhxbC1jbGllbnQtdmVyc2lvbiddID0gdmVyc2lvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgY29udGV4dEhlYWRlcnMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY2xpZW50QXdhcmVuZXNzSGVhZGVycyksIGNvbnRleHQuaGVhZGVycyk7XG4gICAgICAgIHZhciBjb250ZXh0Q29uZmlnID0ge1xuICAgICAgICAgICAgaHR0cDogY29udGV4dC5odHRwLFxuICAgICAgICAgICAgb3B0aW9uczogY29udGV4dC5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICBjcmVkZW50aWFsczogY29udGV4dC5jcmVkZW50aWFscyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGNvbnRleHRIZWFkZXJzLFxuICAgICAgICB9O1xuICAgICAgICB2YXIgX2IgPSBzZWxlY3RIdHRwT3B0aW9uc0FuZEJvZHlJbnRlcm5hbChvcGVyYXRpb24sIHByaW50LCBmYWxsYmFja0h0dHBDb25maWcsIGxpbmtDb25maWcsIGNvbnRleHRDb25maWcpLCBvcHRpb25zID0gX2Iub3B0aW9ucywgYm9keSA9IF9iLmJvZHk7XG4gICAgICAgIGlmIChib2R5LnZhcmlhYmxlcyAmJiAhaW5jbHVkZVVudXNlZFZhcmlhYmxlcykge1xuICAgICAgICAgICAgdmFyIHVudXNlZE5hbWVzXzEgPSBuZXcgU2V0KE9iamVjdC5rZXlzKGJvZHkudmFyaWFibGVzKSk7XG4gICAgICAgICAgICB2aXNpdChvcGVyYXRpb24ucXVlcnksIHtcbiAgICAgICAgICAgICAgICBWYXJpYWJsZTogZnVuY3Rpb24gKG5vZGUsIF9rZXksIHBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50ICYmIHBhcmVudC5raW5kICE9PSAnVmFyaWFibGVEZWZpbml0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdW51c2VkTmFtZXNfMS5kZWxldGUobm9kZS5uYW1lLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh1bnVzZWROYW1lc18xLnNpemUpIHtcbiAgICAgICAgICAgICAgICBib2R5LnZhcmlhYmxlcyA9IF9fYXNzaWduKHt9LCBib2R5LnZhcmlhYmxlcyk7XG4gICAgICAgICAgICAgICAgdW51c2VkTmFtZXNfMS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBib2R5LnZhcmlhYmxlc1tuYW1lXTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgY29udHJvbGxlcjtcbiAgICAgICAgaWYgKCFvcHRpb25zLnNpZ25hbCkge1xuICAgICAgICAgICAgdmFyIF9jID0gY3JlYXRlU2lnbmFsSWZTdXBwb3J0ZWQoKSwgX2NvbnRyb2xsZXIgPSBfYy5jb250cm9sbGVyLCBzaWduYWwgPSBfYy5zaWduYWw7XG4gICAgICAgICAgICBjb250cm9sbGVyID0gX2NvbnRyb2xsZXI7XG4gICAgICAgICAgICBpZiAoY29udHJvbGxlcilcbiAgICAgICAgICAgICAgICBvcHRpb25zLnNpZ25hbCA9IHNpZ25hbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVmaW5pdGlvbklzTXV0YXRpb24gPSBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgcmV0dXJuIGQua2luZCA9PT0gJ09wZXJhdGlvbkRlZmluaXRpb24nICYmIGQub3BlcmF0aW9uID09PSAnbXV0YXRpb24nO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZGVmaW5pdGlvbklzU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBkLmtpbmQgPT09ICdPcGVyYXRpb25EZWZpbml0aW9uJyAmJiBkLm9wZXJhdGlvbiA9PT0gJ3N1YnNjcmlwdGlvbic7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBpc1N1YnNjcmlwdGlvbiA9IGRlZmluaXRpb25Jc1N1YnNjcmlwdGlvbihnZXRNYWluRGVmaW5pdGlvbihvcGVyYXRpb24ucXVlcnkpKTtcbiAgICAgICAgdmFyIGhhc0RlZmVyID0gaGFzRGlyZWN0aXZlcyhbJ2RlZmVyJ10sIG9wZXJhdGlvbi5xdWVyeSk7XG4gICAgICAgIGlmICh1c2VHRVRGb3JRdWVyaWVzICYmXG4gICAgICAgICAgICAhb3BlcmF0aW9uLnF1ZXJ5LmRlZmluaXRpb25zLnNvbWUoZGVmaW5pdGlvbklzTXV0YXRpb24pKSB7XG4gICAgICAgICAgICBvcHRpb25zLm1ldGhvZCA9ICdHRVQnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNEZWZlciB8fCBpc1N1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgb3B0aW9ucy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICAgICAgdmFyIGFjY2VwdEhlYWRlciA9IFwibXVsdGlwYXJ0L21peGVkO1wiO1xuICAgICAgICAgICAgaWYgKGlzU3Vic2NyaXB0aW9uICYmIGhhc0RlZmVyKSB7XG4gICAgICAgICAgICAgICAgX19ERVZfXyAmJiBpbnZhcmlhbnQud2FybihcIk11bHRpcGFydC1zdWJzY3JpcHRpb25zIGRvIG5vdCBzdXBwb3J0IEBkZWZlclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc1N1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgIGFjY2VwdEhlYWRlciArPSAnYm91bmRhcnk9Z3JhcGhxbDtzdWJzY3JpcHRpb25TcGVjPTEuMCxhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhhc0RlZmVyKSB7XG4gICAgICAgICAgICAgICAgYWNjZXB0SGVhZGVyICs9ICdkZWZlclNwZWM9MjAyMjA4MjQsYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zLmhlYWRlcnMuYWNjZXB0ID0gYWNjZXB0SGVhZGVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICAgICAgICAgIHZhciBfZCA9IHJld3JpdGVVUklGb3JHRVQoY2hvc2VuVVJJLCBib2R5KSwgbmV3VVJJID0gX2QubmV3VVJJLCBwYXJzZUVycm9yID0gX2QucGFyc2VFcnJvcjtcbiAgICAgICAgICAgIGlmIChwYXJzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZyb21FcnJvcihwYXJzZUVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNob3NlblVSSSA9IG5ld1VSSTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5ib2R5ID0gc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXIoYm9keSwgJ1BheWxvYWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZyb21FcnJvcihwYXJzZUVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudEZldGNoID0gcHJlZmVycmVkRmV0Y2ggfHwgbWF5YmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gZmV0Y2g7IH0pIHx8IGJhY2t1cEZldGNoO1xuICAgICAgICAgICAgY3VycmVudEZldGNoKGNob3NlblVSSSwgb3B0aW9ucylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uLnNldENvbnRleHQoeyByZXNwb25zZTogcmVzcG9uc2UgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGN0eXBlID0gKF9hID0gcmVzcG9uc2UuaGVhZGVycykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldCgnY29udGVudC10eXBlJyk7XG4gICAgICAgICAgICAgICAgaWYgKGN0eXBlICE9PSBudWxsICYmIC9ebXVsdGlwYXJ0XFwvbWl4ZWQvaS50ZXN0KGN0eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZE11bHRpcGFydEJvZHkocmVzcG9uc2UsIG9ic2VydmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkSnNvbkJvZHkocmVzcG9uc2UsIG9wZXJhdGlvbiwgb2JzZXJ2ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIGhhbmRsZUVycm9yKGVyciwgb2JzZXJ2ZXIpOyB9KTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZUh0dHBMaW5rLmpzLm1hcCIsImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQXBvbGxvTGluayB9IGZyb20gXCIuLi9jb3JlL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVIdHRwTGluayB9IGZyb20gXCIuL2NyZWF0ZUh0dHBMaW5rLmpzXCI7XG52YXIgSHR0cExpbmsgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhIdHRwTGluaywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBIdHRwTGluayhvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNyZWF0ZUh0dHBMaW5rKG9wdGlvbnMpLnJlcXVlc3QpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBIdHRwTGluaztcbn0oQXBvbGxvTGluaykpO1xuZXhwb3J0IHsgSHR0cExpbmsgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUh0dHBMaW5rLmpzLm1hcCIsImNvbnN0IHsgdG9TdHJpbmcsIGhhc093blByb3BlcnR5IH0gPSBPYmplY3QucHJvdG90eXBlO1xuY29uc3QgZm5Ub1N0ciA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcbmNvbnN0IHByZXZpb3VzQ29tcGFyaXNvbnMgPSBuZXcgTWFwKCk7XG4vKipcbiAqIFBlcmZvcm1zIGEgZGVlcCBlcXVhbGl0eSBjaGVjayBvbiB0d28gSmF2YVNjcmlwdCB2YWx1ZXMsIHRvbGVyYXRpbmcgY3ljbGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWwoYSwgYikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBjaGVjayhhLCBiKTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIHByZXZpb3VzQ29tcGFyaXNvbnMuY2xlYXIoKTtcbiAgICB9XG59XG4vLyBBbGxvdyBkZWZhdWx0IGltcG9ydHMgYXMgd2VsbC5cbmV4cG9ydCBkZWZhdWx0IGVxdWFsO1xuZnVuY3Rpb24gY2hlY2soYSwgYikge1xuICAgIC8vIElmIHRoZSB0d28gdmFsdWVzIGFyZSBzdHJpY3RseSBlcXVhbCwgb3VyIGpvYiBpcyBlYXN5LlxuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nIHJldHVybnMgYSByZXByZXNlbnRhdGlvbiBvZiB0aGUgcnVudGltZSB0eXBlIG9mXG4gICAgLy8gdGhlIGdpdmVuIHZhbHVlIHRoYXQgaXMgY29uc2lkZXJhYmx5IG1vcmUgcHJlY2lzZSB0aGFuIHR5cGVvZi5cbiAgICBjb25zdCBhVGFnID0gdG9TdHJpbmcuY2FsbChhKTtcbiAgICBjb25zdCBiVGFnID0gdG9TdHJpbmcuY2FsbChiKTtcbiAgICAvLyBJZiB0aGUgcnVudGltZSB0eXBlcyBvZiBhIGFuZCBiIGFyZSBkaWZmZXJlbnQsIHRoZXkgY291bGQgbWF5YmUgYmUgZXF1YWxcbiAgICAvLyB1bmRlciBzb21lIGludGVycHJldGF0aW9uIG9mIGVxdWFsaXR5LCBidXQgZm9yIHNpbXBsaWNpdHkgYW5kIHBlcmZvcm1hbmNlXG4gICAgLy8gd2UganVzdCByZXR1cm4gZmFsc2UgaW5zdGVhZC5cbiAgICBpZiAoYVRhZyAhPT0gYlRhZykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHN3aXRjaCAoYVRhZykge1xuICAgICAgICBjYXNlICdbb2JqZWN0IEFycmF5XSc6XG4gICAgICAgICAgICAvLyBBcnJheXMgYXJlIGEgbG90IGxpa2Ugb3RoZXIgb2JqZWN0cywgYnV0IHdlIGNhbiBjaGVhcGx5IGNvbXBhcmUgdGhlaXJcbiAgICAgICAgICAgIC8vIGxlbmd0aHMgYXMgYSBzaG9ydC1jdXQgYmVmb3JlIGNvbXBhcmluZyB0aGVpciBlbGVtZW50cy5cbiAgICAgICAgICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAvLyBGYWxsIHRocm91Z2ggdG8gb2JqZWN0IGNhc2UuLi5cbiAgICAgICAgY2FzZSAnW29iamVjdCBPYmplY3RdJzoge1xuICAgICAgICAgICAgaWYgKHByZXZpb3VzbHlDb21wYXJlZChhLCBiKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IGFLZXlzID0gZGVmaW5lZEtleXMoYSk7XG4gICAgICAgICAgICBjb25zdCBiS2V5cyA9IGRlZmluZWRLZXlzKGIpO1xuICAgICAgICAgICAgLy8gSWYgYGFgIGFuZCBgYmAgaGF2ZSBhIGRpZmZlcmVudCBudW1iZXIgb2YgZW51bWVyYWJsZSBrZXlzLCB0aGV5XG4gICAgICAgICAgICAvLyBtdXN0IGJlIGRpZmZlcmVudC5cbiAgICAgICAgICAgIGNvbnN0IGtleUNvdW50ID0gYUtleXMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGtleUNvdW50ICE9PSBiS2V5cy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgLy8gTm93IG1ha2Ugc3VyZSB0aGV5IGhhdmUgdGhlIHNhbWUga2V5cy5cbiAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwga2V5Q291bnQ7ICsraykge1xuICAgICAgICAgICAgICAgIGlmICghaGFzT3duUHJvcGVydHkuY2FsbChiLCBhS2V5c1trXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZpbmFsbHksIGNoZWNrIGRlZXAgZXF1YWxpdHkgb2YgYWxsIGNoaWxkIHByb3BlcnRpZXMuXG4gICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGtleUNvdW50OyArK2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBhS2V5c1trXTtcbiAgICAgICAgICAgICAgICBpZiAoIWNoZWNrKGFba2V5XSwgYltrZXldKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnW29iamVjdCBFcnJvcl0nOlxuICAgICAgICAgICAgcmV0dXJuIGEubmFtZSA9PT0gYi5uYW1lICYmIGEubWVzc2FnZSA9PT0gYi5tZXNzYWdlO1xuICAgICAgICBjYXNlICdbb2JqZWN0IE51bWJlcl0nOlxuICAgICAgICAgICAgLy8gSGFuZGxlIE5hTiwgd2hpY2ggaXMgIT09IGl0c2VsZi5cbiAgICAgICAgICAgIGlmIChhICE9PSBhKVxuICAgICAgICAgICAgICAgIHJldHVybiBiICE9PSBiO1xuICAgICAgICAvLyBGYWxsIHRocm91Z2ggdG8gc2hhcmVkICthID09PSArYiBjYXNlLi4uXG4gICAgICAgIGNhc2UgJ1tvYmplY3QgQm9vbGVhbl0nOlxuICAgICAgICBjYXNlICdbb2JqZWN0IERhdGVdJzpcbiAgICAgICAgICAgIHJldHVybiArYSA9PT0gK2I7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgUmVnRXhwXSc6XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6XG4gICAgICAgICAgICByZXR1cm4gYSA9PSBgJHtifWA7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgTWFwXSc6XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgU2V0XSc6IHtcbiAgICAgICAgICAgIGlmIChhLnNpemUgIT09IGIuc2l6ZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAocHJldmlvdXNseUNvbXBhcmVkKGEsIGIpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgY29uc3QgYUl0ZXJhdG9yID0gYS5lbnRyaWVzKCk7XG4gICAgICAgICAgICBjb25zdCBpc01hcCA9IGFUYWcgPT09ICdbb2JqZWN0IE1hcF0nO1xuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0gYUl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5mby5kb25lKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAvLyBJZiBhIGluc3RhbmNlb2YgU2V0LCBhVmFsdWUgPT09IGFLZXkuXG4gICAgICAgICAgICAgICAgY29uc3QgW2FLZXksIGFWYWx1ZV0gPSBpbmZvLnZhbHVlO1xuICAgICAgICAgICAgICAgIC8vIFNvIHRoaXMgd29ya3MgdGhlIHNhbWUgd2F5IGZvciBib3RoIFNldCBhbmQgTWFwLlxuICAgICAgICAgICAgICAgIGlmICghYi5oYXMoYUtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBIb3dldmVyLCB3ZSBjYXJlIGFib3V0IGRlZXAgZXF1YWxpdHkgb2YgdmFsdWVzIG9ubHkgd2hlbiBkZWFsaW5nXG4gICAgICAgICAgICAgICAgLy8gd2l0aCBNYXAgc3RydWN0dXJlcy5cbiAgICAgICAgICAgICAgICBpZiAoaXNNYXAgJiYgIWNoZWNrKGFWYWx1ZSwgYi5nZXQoYUtleSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdbb2JqZWN0IFVpbnQxNkFycmF5XSc6XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgVWludDhBcnJheV0nOiAvLyBCdWZmZXIsIGluIE5vZGUuanMuXG4gICAgICAgIGNhc2UgJ1tvYmplY3QgVWludDMyQXJyYXldJzpcbiAgICAgICAgY2FzZSAnW29iamVjdCBJbnQzMkFycmF5XSc6XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgSW50OEFycmF5XSc6XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgSW50MTZBcnJheV0nOlxuICAgICAgICBjYXNlICdbb2JqZWN0IEFycmF5QnVmZmVyXSc6XG4gICAgICAgICAgICAvLyBEYXRhVmlldyBkb2Vzbid0IG5lZWQgdGhlc2UgY29udmVyc2lvbnMsIGJ1dCB0aGUgZXF1YWxpdHkgY2hlY2sgaXNcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSB0aGUgc2FtZS5cbiAgICAgICAgICAgIGEgPSBuZXcgVWludDhBcnJheShhKTtcbiAgICAgICAgICAgIGIgPSBuZXcgVWludDhBcnJheShiKTtcbiAgICAgICAgLy8gRmFsbCB0aHJvdWdoLi4uXG4gICAgICAgIGNhc2UgJ1tvYmplY3QgRGF0YVZpZXddJzoge1xuICAgICAgICAgICAgbGV0IGxlbiA9IGEuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIGlmIChsZW4gPT09IGIuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHdoaWxlIChsZW4tLSAmJiBhW2xlbl0gPT09IGJbbGVuXSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIGxvb3BpbmcgYXMgbG9uZyBhcyB0aGUgYnl0ZXMgYXJlIGVxdWFsLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsZW4gPT09IC0xO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgQXN5bmNGdW5jdGlvbl0nOlxuICAgICAgICBjYXNlICdbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXSc6XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgQXN5bmNHZW5lcmF0b3JGdW5jdGlvbl0nOlxuICAgICAgICBjYXNlICdbb2JqZWN0IEZ1bmN0aW9uXSc6IHtcbiAgICAgICAgICAgIGNvbnN0IGFDb2RlID0gZm5Ub1N0ci5jYWxsKGEpO1xuICAgICAgICAgICAgaWYgKGFDb2RlICE9PSBmblRvU3RyLmNhbGwoYikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXZSBjb25zaWRlciBub24tbmF0aXZlIGZ1bmN0aW9ucyBlcXVhbCBpZiB0aGV5IGhhdmUgdGhlIHNhbWUgY29kZVxuICAgICAgICAgICAgLy8gKG5hdGl2ZSBmdW5jdGlvbnMgcmVxdWlyZSA9PT0gYmVjYXVzZSB0aGVpciBjb2RlIGlzIGNlbnNvcmVkKS5cbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIGJlaGF2aW9yIGlzIG5vdCBlbnRpcmVseSBzb3VuZCwgc2luY2UgIT09IGZ1bmN0aW9uXG4gICAgICAgICAgICAvLyBvYmplY3RzIHdpdGggdGhlIHNhbWUgY29kZSBjYW4gYmVoYXZlIGRpZmZlcmVudGx5IGRlcGVuZGluZyBvblxuICAgICAgICAgICAgLy8gdGhlaXIgY2xvc3VyZSBzY29wZS4gSG93ZXZlciwgYW55IGZ1bmN0aW9uIGNhbiBiZWhhdmUgZGlmZmVyZW50bHlcbiAgICAgICAgICAgIC8vIGRlcGVuZGluZyBvbiB0aGUgdmFsdWVzIG9mIGl0cyBpbnB1dCBhcmd1bWVudHMgKGluY2x1ZGluZyB0aGlzKVxuICAgICAgICAgICAgLy8gYW5kIGl0cyBjYWxsaW5nIGNvbnRleHQgKGluY2x1ZGluZyBpdHMgY2xvc3VyZSBzY29wZSksIGV2ZW5cbiAgICAgICAgICAgIC8vIHRob3VnaCB0aGUgZnVuY3Rpb24gb2JqZWN0IGlzID09PSB0byBpdHNlbGY7IGFuZCBpdCBpcyBlbnRpcmVseVxuICAgICAgICAgICAgLy8gcG9zc2libGUgZm9yIGZ1bmN0aW9ucyB0aGF0IGFyZSBub3QgPT09IHRvIGJlaGF2ZSBleGFjdGx5IHRoZVxuICAgICAgICAgICAgLy8gc2FtZSB1bmRlciBhbGwgY29uY2VpdmFibGUgY2lyY3Vtc3RhbmNlcy4gQmVjYXVzZSBub25lIG9mIHRoZXNlXG4gICAgICAgICAgICAvLyBmYWN0b3JzIGFyZSBzdGF0aWNhbGx5IGRlY2lkYWJsZSBpbiBKYXZhU2NyaXB0LCBKUyBmdW5jdGlvblxuICAgICAgICAgICAgLy8gZXF1YWxpdHkgaXMgbm90IHdlbGwtZGVmaW5lZC4gVGhpcyBhbWJpZ3VpdHkgYWxsb3dzIHVzIHRvXG4gICAgICAgICAgICAvLyBjb25zaWRlciB0aGUgYmVzdCBwb3NzaWJsZSBoZXVyaXN0aWMgYW1vbmcgdmFyaW91cyBpbXBlcmZlY3RcbiAgICAgICAgICAgIC8vIG9wdGlvbnMsIGFuZCBlcXVhdGluZyBub24tbmF0aXZlIGZ1bmN0aW9ucyB0aGF0IGhhdmUgdGhlIHNhbWVcbiAgICAgICAgICAgIC8vIGNvZGUgaGFzIGVub3Jtb3VzIHByYWN0aWNhbCBiZW5lZml0cywgc3VjaCBhcyB3aGVuIGNvbXBhcmluZ1xuICAgICAgICAgICAgLy8gZnVuY3Rpb25zIHRoYXQgYXJlIHJlcGVhdGVkbHkgcGFzc2VkIGFzIGZyZXNoIGZ1bmN0aW9uXG4gICAgICAgICAgICAvLyBleHByZXNzaW9ucyB3aXRoaW4gb2JqZWN0cyB0aGF0IGFyZSBvdGhlcndpc2UgZGVlcGx5IGVxdWFsLiBTaW5jZVxuICAgICAgICAgICAgLy8gYW55IGZ1bmN0aW9uIGNyZWF0ZWQgZnJvbSB0aGUgc2FtZSBzeW50YWN0aWMgZXhwcmVzc2lvbiAoaW4gdGhlXG4gICAgICAgICAgICAvLyBzYW1lIGNvZGUgbG9jYXRpb24pIHdpbGwgYWx3YXlzIHN0cmluZ2lmeSB0byB0aGUgc2FtZSBjb2RlXG4gICAgICAgICAgICAvLyBhY2NvcmRpbmcgdG8gZm5Ub1N0ci5jYWxsLCB3ZSBjYW4gcmVhc29uYWJseSBleHBlY3QgdGhlc2VcbiAgICAgICAgICAgIC8vIHJlcGVhdGVkbHkgcGFzc2VkIGZ1bmN0aW9uIGV4cHJlc3Npb25zIHRvIGhhdmUgdGhlIHNhbWUgY29kZSwgYW5kXG4gICAgICAgICAgICAvLyB0aHVzIGJlaGF2ZSBcInRoZSBzYW1lXCIgKHdpdGggYWxsIHRoZSBjYXZlYXRzIG1lbnRpb25lZCBhYm92ZSksXG4gICAgICAgICAgICAvLyBldmVuIHRob3VnaCB0aGUgcnVudGltZSBmdW5jdGlvbiBvYmplY3RzIGFyZSAhPT0gdG8gb25lIGFub3RoZXIuXG4gICAgICAgICAgICByZXR1cm4gIWVuZHNXaXRoKGFDb2RlLCBuYXRpdmVDb2RlU3VmZml4KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBPdGhlcndpc2UgdGhlIHZhbHVlcyBhcmUgbm90IGVxdWFsLlxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGRlZmluZWRLZXlzKG9iaikge1xuICAgIC8vIFJlbWVtYmVyIHRoYXQgdGhlIHNlY29uZCBhcmd1bWVudCB0byBBcnJheS5wcm90b3R5cGUuZmlsdGVyIHdpbGwgYmVcbiAgICAvLyB1c2VkIGFzIGB0aGlzYCB3aXRoaW4gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLmZpbHRlcihpc0RlZmluZWRLZXksIG9iaik7XG59XG5mdW5jdGlvbiBpc0RlZmluZWRLZXkoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXNba2V5XSAhPT0gdm9pZCAwO1xufVxuY29uc3QgbmF0aXZlQ29kZVN1ZmZpeCA9IFwieyBbbmF0aXZlIGNvZGVdIH1cIjtcbmZ1bmN0aW9uIGVuZHNXaXRoKGZ1bGwsIHN1ZmZpeCkge1xuICAgIGNvbnN0IGZyb21JbmRleCA9IGZ1bGwubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aDtcbiAgICByZXR1cm4gZnJvbUluZGV4ID49IDAgJiZcbiAgICAgICAgZnVsbC5pbmRleE9mKHN1ZmZpeCwgZnJvbUluZGV4KSA9PT0gZnJvbUluZGV4O1xufVxuZnVuY3Rpb24gcHJldmlvdXNseUNvbXBhcmVkKGEsIGIpIHtcbiAgICAvLyBUaG91Z2ggY3ljbGljIHJlZmVyZW5jZXMgY2FuIG1ha2UgYW4gb2JqZWN0IGdyYXBoIGFwcGVhciBpbmZpbml0ZSBmcm9tIHRoZVxuICAgIC8vIHBlcnNwZWN0aXZlIG9mIGEgZGVwdGgtZmlyc3QgdHJhdmVyc2FsLCB0aGUgZ3JhcGggc3RpbGwgY29udGFpbnMgYSBmaW5pdGVcbiAgICAvLyBudW1iZXIgb2YgZGlzdGluY3Qgb2JqZWN0IHJlZmVyZW5jZXMuIFdlIHVzZSB0aGUgcHJldmlvdXNDb21wYXJpc29ucyBjYWNoZVxuICAgIC8vIHRvIGF2b2lkIGNvbXBhcmluZyB0aGUgc2FtZSBwYWlyIG9mIG9iamVjdCByZWZlcmVuY2VzIG1vcmUgdGhhbiBvbmNlLCB3aGljaFxuICAgIC8vIGd1YXJhbnRlZXMgdGVybWluYXRpb24gKGV2ZW4gaWYgd2UgZW5kIHVwIGNvbXBhcmluZyBldmVyeSBvYmplY3QgaW4gb25lXG4gICAgLy8gZ3JhcGggdG8gZXZlcnkgb2JqZWN0IGluIHRoZSBvdGhlciBncmFwaCwgd2hpY2ggaXMgZXh0cmVtZWx5IHVubGlrZWx5KSxcbiAgICAvLyB3aGlsZSBzdGlsbCBhbGxvd2luZyB3ZWlyZCBpc29tb3JwaGljIHN0cnVjdHVyZXMgKGxpa2UgcmluZ3Mgd2l0aCBkaWZmZXJlbnRcbiAgICAvLyBsZW5ndGhzKSBhIGNoYW5jZSB0byBwYXNzIHRoZSBlcXVhbGl0eSB0ZXN0LlxuICAgIGxldCBiU2V0ID0gcHJldmlvdXNDb21wYXJpc29ucy5nZXQoYSk7XG4gICAgaWYgKGJTZXQpIHtcbiAgICAgICAgLy8gUmV0dXJuIHRydWUgaGVyZSBiZWNhdXNlIHdlIGNhbiBiZSBzdXJlIGZhbHNlIHdpbGwgYmUgcmV0dXJuZWQgc29tZXdoZXJlXG4gICAgICAgIC8vIGVsc2UgaWYgdGhlIG9iamVjdHMgYXJlIG5vdCBlcXVpdmFsZW50LlxuICAgICAgICBpZiAoYlNldC5oYXMoYikpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHByZXZpb3VzQ29tcGFyaXNvbnMuc2V0KGEsIGJTZXQgPSBuZXcgU2V0KTtcbiAgICB9XG4gICAgYlNldC5hZGQoYik7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiLy8gQSBbdHJpZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVHJpZSkgZGF0YSBzdHJ1Y3R1cmUgdGhhdCBob2xkc1xyXG4vLyBvYmplY3Qga2V5cyB3ZWFrbHksIHlldCBjYW4gYWxzbyBob2xkIG5vbi1vYmplY3Qga2V5cywgdW5saWtlIHRoZVxyXG4vLyBuYXRpdmUgYFdlYWtNYXBgLlxyXG4vLyBJZiBubyBtYWtlRGF0YSBmdW5jdGlvbiBpcyBzdXBwbGllZCwgdGhlIGxvb2tlZC11cCBkYXRhIHdpbGwgYmUgYW4gZW1wdHksXHJcbi8vIG51bGwtcHJvdG90eXBlIE9iamVjdC5cclxudmFyIGRlZmF1bHRNYWtlRGF0YSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCk7IH07XHJcbi8vIFVzZWZ1bCBmb3IgcHJvY2Vzc2luZyBhcmd1bWVudHMgb2JqZWN0cyBhcyB3ZWxsIGFzIGFycmF5cy5cclxudmFyIF9hID0gQXJyYXkucHJvdG90eXBlLCBmb3JFYWNoID0gX2EuZm9yRWFjaCwgc2xpY2UgPSBfYS5zbGljZTtcclxudmFyIFRyaWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUcmllKHdlYWtuZXNzLCBtYWtlRGF0YSkge1xyXG4gICAgICAgIGlmICh3ZWFrbmVzcyA9PT0gdm9pZCAwKSB7IHdlYWtuZXNzID0gdHJ1ZTsgfVxyXG4gICAgICAgIGlmIChtYWtlRGF0YSA9PT0gdm9pZCAwKSB7IG1ha2VEYXRhID0gZGVmYXVsdE1ha2VEYXRhOyB9XHJcbiAgICAgICAgdGhpcy53ZWFrbmVzcyA9IHdlYWtuZXNzO1xyXG4gICAgICAgIHRoaXMubWFrZURhdGEgPSBtYWtlRGF0YTtcclxuICAgIH1cclxuICAgIFRyaWUucHJvdG90eXBlLmxvb2t1cCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJyYXkgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcnJheVtfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5sb29rdXBBcnJheShhcnJheSk7XHJcbiAgICB9O1xyXG4gICAgVHJpZS5wcm90b3R5cGUubG9va3VwQXJyYXkgPSBmdW5jdGlvbiAoYXJyYXkpIHtcclxuICAgICAgICB2YXIgbm9kZSA9IHRoaXM7XHJcbiAgICAgICAgZm9yRWFjaC5jYWxsKGFycmF5LCBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBub2RlID0gbm9kZS5nZXRDaGlsZFRyaWUoa2V5KTsgfSk7XHJcbiAgICAgICAgcmV0dXJuIG5vZGUuZGF0YSB8fCAobm9kZS5kYXRhID0gdGhpcy5tYWtlRGF0YShzbGljZS5jYWxsKGFycmF5KSkpO1xyXG4gICAgfTtcclxuICAgIFRyaWUucHJvdG90eXBlLmdldENoaWxkVHJpZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgbWFwID0gdGhpcy53ZWFrbmVzcyAmJiBpc09ialJlZihrZXkpXHJcbiAgICAgICAgICAgID8gdGhpcy53ZWFrIHx8ICh0aGlzLndlYWsgPSBuZXcgV2Vha01hcCgpKVxyXG4gICAgICAgICAgICA6IHRoaXMuc3Ryb25nIHx8ICh0aGlzLnN0cm9uZyA9IG5ldyBNYXAoKSk7XHJcbiAgICAgICAgdmFyIGNoaWxkID0gbWFwLmdldChrZXkpO1xyXG4gICAgICAgIGlmICghY2hpbGQpXHJcbiAgICAgICAgICAgIG1hcC5zZXQoa2V5LCBjaGlsZCA9IG5ldyBUcmllKHRoaXMud2Vha25lc3MsIHRoaXMubWFrZURhdGEpKTtcclxuICAgICAgICByZXR1cm4gY2hpbGQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRyaWU7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGlzT2JqUmVmKHZhbHVlKSB7XHJcbiAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkge1xyXG4gICAgICAgIGNhc2UgXCJvYmplY3RcIjpcclxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgLy8gRmFsbCB0aHJvdWdoIHRvIHJldHVybiB0cnVlLi4uXHJcbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XG5cbmV4cG9ydCB7IFRyaWUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyaWUuZXNtLmpzLm1hcFxuIiwiLy8gVGhpcyBjdXJyZW50Q29udGV4dCB2YXJpYWJsZSB3aWxsIG9ubHkgYmUgdXNlZCBpZiB0aGUgbWFrZVNsb3RDbGFzc1xuLy8gZnVuY3Rpb24gaXMgY2FsbGVkLCB3aGljaCBoYXBwZW5zIG9ubHkgaWYgdGhpcyBpcyB0aGUgZmlyc3QgY29weSBvZiB0aGVcbi8vIEB3cnkvY29udGV4dCBwYWNrYWdlIHRvIGJlIGltcG9ydGVkLlxubGV0IGN1cnJlbnRDb250ZXh0ID0gbnVsbDtcbi8vIFRoaXMgdW5pcXVlIGludGVybmFsIG9iamVjdCBpcyB1c2VkIHRvIGRlbm90ZSB0aGUgYWJzZW5jZSBvZiBhIHZhbHVlXG4vLyBmb3IgYSBnaXZlbiBTbG90LCBhbmQgaXMgbmV2ZXIgZXhwb3NlZCB0byBvdXRzaWRlIGNvZGUuXG5jb25zdCBNSVNTSU5HX1ZBTFVFID0ge307XG5sZXQgaWRDb3VudGVyID0gMTtcbi8vIEFsdGhvdWdoIHdlIGNhbid0IGRvIGFueXRoaW5nIGFib3V0IHRoZSBjb3N0IG9mIGR1cGxpY2F0ZWQgY29kZSBmcm9tXG4vLyBhY2NpZGVudGFsbHkgYnVuZGxpbmcgbXVsdGlwbGUgY29waWVzIG9mIHRoZSBAd3J5L2NvbnRleHQgcGFja2FnZSwgd2UgY2FuXG4vLyBhdm9pZCBjcmVhdGluZyB0aGUgU2xvdCBjbGFzcyBtb3JlIHRoYW4gb25jZSB1c2luZyBtYWtlU2xvdENsYXNzLlxuY29uc3QgbWFrZVNsb3RDbGFzcyA9ICgpID0+IGNsYXNzIFNsb3Qge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBJZiB5b3UgaGF2ZSBhIFNsb3Qgb2JqZWN0LCB5b3UgY2FuIGZpbmQgb3V0IGl0cyBzbG90LmlkLCBidXQgeW91IGNhbm5vdFxuICAgICAgICAvLyBndWVzcyB0aGUgc2xvdC5pZCBvZiBhIFNsb3QgeW91IGRvbid0IGhhdmUgYWNjZXNzIHRvLCB0aGFua3MgdG8gdGhlXG4gICAgICAgIC8vIHJhbmRvbWl6ZWQgc3VmZml4LlxuICAgICAgICB0aGlzLmlkID0gW1xuICAgICAgICAgICAgXCJzbG90XCIsXG4gICAgICAgICAgICBpZENvdW50ZXIrKyxcbiAgICAgICAgICAgIERhdGUubm93KCksXG4gICAgICAgICAgICBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKSxcbiAgICAgICAgXS5qb2luKFwiOlwiKTtcbiAgICB9XG4gICAgaGFzVmFsdWUoKSB7XG4gICAgICAgIGZvciAobGV0IGNvbnRleHQgPSBjdXJyZW50Q29udGV4dDsgY29udGV4dDsgY29udGV4dCA9IGNvbnRleHQucGFyZW50KSB7XG4gICAgICAgICAgICAvLyBXZSB1c2UgdGhlIFNsb3Qgb2JqZWN0IGlzZWxmIGFzIGEga2V5IHRvIGl0cyB2YWx1ZSwgd2hpY2ggbWVhbnMgdGhlXG4gICAgICAgICAgICAvLyB2YWx1ZSBjYW5ub3QgYmUgb2J0YWluZWQgd2l0aG91dCBhIHJlZmVyZW5jZSB0byB0aGUgU2xvdCBvYmplY3QuXG4gICAgICAgICAgICBpZiAodGhpcy5pZCBpbiBjb250ZXh0LnNsb3RzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjb250ZXh0LnNsb3RzW3RoaXMuaWRdO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gTUlTU0lOR19WQUxVRSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRleHQgIT09IGN1cnJlbnRDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENhY2hlIHRoZSB2YWx1ZSBpbiBjdXJyZW50Q29udGV4dC5zbG90cyBzbyB0aGUgbmV4dCBsb29rdXAgd2lsbFxuICAgICAgICAgICAgICAgICAgICAvLyBiZSBmYXN0ZXIuIFRoaXMgY2FjaGluZyBpcyBzYWZlIGJlY2F1c2UgdGhlIHRyZWUgb2YgY29udGV4dHMgYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSB2YWx1ZXMgb2YgdGhlIHNsb3RzIGFyZSBsb2dpY2FsbHkgaW1tdXRhYmxlLlxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q29udGV4dC5zbG90c1t0aGlzLmlkXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudENvbnRleHQpIHtcbiAgICAgICAgICAgIC8vIElmIGEgdmFsdWUgd2FzIG5vdCBmb3VuZCBmb3IgdGhpcyBTbG90LCBpdCdzIG5ldmVyIGdvaW5nIHRvIGJlIGZvdW5kXG4gICAgICAgICAgICAvLyBubyBtYXR0ZXIgaG93IG1hbnkgdGltZXMgd2UgbG9vayBpdCB1cCwgc28gd2UgbWlnaHQgYXMgd2VsbCBjYWNoZVxuICAgICAgICAgICAgLy8gdGhlIGFic2VuY2Ugb2YgdGhlIHZhbHVlLCB0b28uXG4gICAgICAgICAgICBjdXJyZW50Q29udGV4dC5zbG90c1t0aGlzLmlkXSA9IE1JU1NJTkdfVkFMVUU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRDb250ZXh0LnNsb3RzW3RoaXMuaWRdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdpdGhWYWx1ZSh2YWx1ZSwgY2FsbGJhY2ssIFxuICAgIC8vIEdpdmVuIHRoZSBwcmV2YWxlbmNlIG9mIGFycm93IGZ1bmN0aW9ucywgc3BlY2lmeWluZyBhcmd1bWVudHMgaXMgbGlrZWx5XG4gICAgLy8gdG8gYmUgbXVjaCBtb3JlIGNvbW1vbiB0aGFuIHNwZWNpZnlpbmcgYHRoaXNgLCBoZW5jZSB0aGlzIG9yZGVyaW5nOlxuICAgIGFyZ3MsIHRoaXNBcmcpIHtcbiAgICAgICAgY29uc3Qgc2xvdHMgPSB7XG4gICAgICAgICAgICBfX3Byb3RvX186IG51bGwsXG4gICAgICAgICAgICBbdGhpcy5pZF06IHZhbHVlLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwYXJlbnQgPSBjdXJyZW50Q29udGV4dDtcbiAgICAgICAgY3VycmVudENvbnRleHQgPSB7IHBhcmVudCwgc2xvdHMgfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseSBhbGxvd3MgdGhlIGFyZ3VtZW50cyBhcnJheSBhcmd1bWVudCB0byBiZVxuICAgICAgICAgICAgLy8gb21pdHRlZCBvciB1bmRlZmluZWQsIHNvIGFyZ3MhIGlzIGZpbmUgaGVyZS5cbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGN1cnJlbnRDb250ZXh0ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENhcHR1cmUgdGhlIGN1cnJlbnQgY29udGV4dCBhbmQgd3JhcCBhIGNhbGxiYWNrIGZ1bmN0aW9uIHNvIHRoYXQgaXRcbiAgICAvLyByZWVzdGFibGlzaGVzIHRoZSBjYXB0dXJlZCBjb250ZXh0IHdoZW4gY2FsbGVkLlxuICAgIHN0YXRpYyBiaW5kKGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjdXJyZW50Q29udGV4dDtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHNhdmVkID0gY3VycmVudENvbnRleHQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDb250ZXh0ID0gc2F2ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIEltbWVkaWF0ZWx5IHJ1biBhIGNhbGxiYWNrIGZ1bmN0aW9uIHdpdGhvdXQgYW55IGNhcHR1cmVkIGNvbnRleHQuXG4gICAgc3RhdGljIG5vQ29udGV4dChjYWxsYmFjaywgXG4gICAgLy8gR2l2ZW4gdGhlIHByZXZhbGVuY2Ugb2YgYXJyb3cgZnVuY3Rpb25zLCBzcGVjaWZ5aW5nIGFyZ3VtZW50cyBpcyBsaWtlbHlcbiAgICAvLyB0byBiZSBtdWNoIG1vcmUgY29tbW9uIHRoYW4gc3BlY2lmeWluZyBgdGhpc2AsIGhlbmNlIHRoaXMgb3JkZXJpbmc6XG4gICAgYXJncywgdGhpc0FyZykge1xuICAgICAgICBpZiAoY3VycmVudENvbnRleHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHNhdmVkID0gY3VycmVudENvbnRleHQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDb250ZXh0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAvLyBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkgYWxsb3dzIHRoZSBhcmd1bWVudHMgYXJyYXkgYXJndW1lbnQgdG8gYmVcbiAgICAgICAgICAgICAgICAvLyBvbWl0dGVkIG9yIHVuZGVmaW5lZCwgc28gYXJncyEgaXMgZmluZSBoZXJlLlxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDb250ZXh0ID0gc2F2ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuZnVuY3Rpb24gbWF5YmUoZm4pIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZm4oKTtcbiAgICB9XG4gICAgY2F0Y2ggKGlnbm9yZWQpIHsgfVxufVxuLy8gV2Ugc3RvcmUgYSBzaW5nbGUgZ2xvYmFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBTbG90IGNsYXNzIGFzIGEgcGVybWFuZW50XG4vLyBub24tZW51bWVyYWJsZSBwcm9wZXJ0eSBvZiB0aGUgZ2xvYmFsVGhpcyBvYmplY3QuIFRoaXMgb2JmdXNjYXRpb24gZG9lc1xuLy8gbm90aGluZyB0byBwcmV2ZW50IGFjY2VzcyB0byB0aGUgU2xvdCBjbGFzcywgYnV0IGF0IGxlYXN0IGl0IGVuc3VyZXMgdGhlXG4vLyBpbXBsZW1lbnRhdGlvbiAoaS5lLiBjdXJyZW50Q29udGV4dCkgY2Fubm90IGJlIHRhbXBlcmVkIHdpdGgsIGFuZCBhbGwgY29waWVzXG4vLyBvZiB0aGUgQHdyeS9jb250ZXh0IHBhY2thZ2UgKGhvcGVmdWxseSBqdXN0IG9uZSkgd2lsbCBzaGFyZSB0aGUgc2FtZSBTbG90XG4vLyBpbXBsZW1lbnRhdGlvbi4gU2luY2UgdGhlIGZpcnN0IGNvcHkgb2YgdGhlIEB3cnkvY29udGV4dCBwYWNrYWdlIHRvIGJlXG4vLyBpbXBvcnRlZCB3aW5zLCB0aGlzIHRlY2huaXF1ZSBpbXBvc2VzIGEgc3RlZXAgY29zdCBmb3IgYW55IGZ1dHVyZSBicmVha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgU2xvdCBjbGFzcy5cbmNvbnN0IGdsb2JhbEtleSA9IFwiQHdyeS9jb250ZXh0OlNsb3RcIjtcbmNvbnN0IGhvc3QgPSBcbi8vIFByZWZlciBnbG9iYWxUaGlzIHdoZW4gYXZhaWxhYmxlLlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2JlbmphbW4vd3J5d2FyZS9pc3N1ZXMvMzQ3XG5tYXliZSgoKSA9PiBnbG9iYWxUaGlzKSB8fFxuICAgIC8vIEZhbGwgYmFjayB0byBnbG9iYWwsIHdoaWNoIHdvcmtzIGluIE5vZGUuanMgYW5kIG1heSBiZSBjb252ZXJ0ZWQgYnkgc29tZVxuICAgIC8vIGJ1bmRsZXJzIHRvIHRoZSBhcHByb3ByaWF0ZSBpZGVudGlmaWVyICh3aW5kb3csIHNlbGYsIC4uLikgZGVwZW5kaW5nIG9uIHRoZVxuICAgIC8vIGJ1bmRsaW5nIHRhcmdldC4gaHR0cHM6Ly9naXRodWIuY29tL2VuZG9qcy9lbmRvL2lzc3Vlcy81NzYjaXNzdWVjb21tZW50LTExNzg1MTUyMjRcbiAgICBtYXliZSgoKSA9PiBnbG9iYWwpIHx8XG4gICAgLy8gT3RoZXJ3aXNlLCB1c2UgYSBkdW1teSBob3N0IHRoYXQncyBsb2NhbCB0byB0aGlzIG1vZHVsZS4gV2UgdXNlZCB0byBmYWxsXG4gICAgLy8gYmFjayB0byB1c2luZyB0aGUgQXJyYXkgY29uc3RydWN0b3IgYXMgYSBuYW1lc3BhY2UsIGJ1dCB0aGF0IHdhcyBmbGFnZ2VkIGluXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2JlbmphbW4vd3J5d2FyZS9pc3N1ZXMvMzQ3LCBhbmQgY2FuIGJlIGF2b2lkZWQuXG4gICAgT2JqZWN0LmNyZWF0ZShudWxsKTtcbi8vIFdoaWNoZXZlciBnbG9iYWxIb3N0IHdlJ3JlIHVzaW5nLCBtYWtlIFR5cGVTY3JpcHQgaGFwcHkgYWJvdXQgdGhlIGFkZGl0aW9uYWxcbi8vIGdsb2JhbEtleSBwcm9wZXJ0eS5cbmNvbnN0IGdsb2JhbEhvc3QgPSBob3N0O1xuZXhwb3J0IGNvbnN0IFNsb3QgPSBnbG9iYWxIb3N0W2dsb2JhbEtleV0gfHxcbiAgICAvLyBFYXJsaWVyIHZlcnNpb25zIG9mIHRoaXMgcGFja2FnZSBzdG9yZWQgdGhlIGdsb2JhbEtleSBwcm9wZXJ0eSBvbiB0aGUgQXJyYXlcbiAgICAvLyBjb25zdHJ1Y3Rvciwgc28gd2UgY2hlY2sgdGhlcmUgYXMgd2VsbCwgdG8gcHJldmVudCBTbG90IGNsYXNzIGR1cGxpY2F0aW9uLlxuICAgIEFycmF5W2dsb2JhbEtleV0gfHxcbiAgICAoZnVuY3Rpb24gKFNsb3QpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWxIb3N0LCBnbG9iYWxLZXksIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogU2xvdCxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgLy8gV2hlbiBpdCB3YXMgcG9zc2libGUgZm9yIGdsb2JhbEhvc3QgdG8gYmUgdGhlIEFycmF5IGNvbnN0cnVjdG9yIChhXG4gICAgICAgICAgICAgICAgLy8gbGVnYWN5IFNsb3QgZGVkdXAgc3RyYXRlZ3kpLCBpdCB3YXMgaW1wb3J0YW50IGZvciB0aGUgcHJvcGVydHkgdG8gYmVcbiAgICAgICAgICAgICAgICAvLyBjb25maWd1cmFibGU6dHJ1ZSBzbyBpdCBjb3VsZCBiZSBkZWxldGVkLiBUaGF0IGRvZXMgbm90IHNlZW0gdG8gYmUgYXNcbiAgICAgICAgICAgICAgICAvLyBpbXBvcnRhbnQgd2hlbiBnbG9iYWxIb3N0IGlzIHRoZSBnbG9iYWwgb2JqZWN0LCBidXQgSSBkb24ndCB3YW50IHRvXG4gICAgICAgICAgICAgICAgLy8gY2F1c2Ugc2ltaWxhciBwcm9ibGVtcyBhZ2FpbiwgYW5kIGNvbmZpZ3VyYWJsZTp0cnVlIHNlZW1zIHNhZmVzdC5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZW5kb2pzL2VuZG8vaXNzdWVzLzU3NiNpc3N1ZWNvbW1lbnQtMTE3ODI3NDAwOFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICByZXR1cm4gU2xvdDtcbiAgICAgICAgfVxuICAgIH0pKG1ha2VTbG90Q2xhc3MoKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zbG90LmpzLm1hcCIsImltcG9ydCB7IFRyaWUgfSBmcm9tICdAd3J5L3RyaWUnO1xuZXhwb3J0IHsgVHJpZSBhcyBLZXlUcmllIH0gZnJvbSAnQHdyeS90cmllJztcbmltcG9ydCB7IFNsb3QgfSBmcm9tICdAd3J5L2NvbnRleHQnO1xuZXhwb3J0IHsgYXN5bmNGcm9tR2VuLCBiaW5kIGFzIGJpbmRDb250ZXh0LCBub0NvbnRleHQsIHNldFRpbWVvdXQgfSBmcm9tICdAd3J5L2NvbnRleHQnO1xuXG5mdW5jdGlvbiBkZWZhdWx0RGlzcG9zZSgpIHsgfVxyXG52YXIgQ2FjaGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDYWNoZShtYXgsIGRpc3Bvc2UpIHtcclxuICAgICAgICBpZiAobWF4ID09PSB2b2lkIDApIHsgbWF4ID0gSW5maW5pdHk7IH1cclxuICAgICAgICBpZiAoZGlzcG9zZSA9PT0gdm9pZCAwKSB7IGRpc3Bvc2UgPSBkZWZhdWx0RGlzcG9zZTsgfVxyXG4gICAgICAgIHRoaXMubWF4ID0gbWF4O1xyXG4gICAgICAgIHRoaXMuZGlzcG9zZSA9IGRpc3Bvc2U7XHJcbiAgICAgICAgdGhpcy5tYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5uZXdlc3QgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub2xkZXN0ID0gbnVsbDtcclxuICAgIH1cclxuICAgIENhY2hlLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmhhcyhrZXkpO1xyXG4gICAgfTtcclxuICAgIENhY2hlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmdldE5vZGUoa2V5KTtcclxuICAgICAgICByZXR1cm4gbm9kZSAmJiBub2RlLnZhbHVlO1xyXG4gICAgfTtcclxuICAgIENhY2hlLnByb3RvdHlwZS5nZXROb2RlID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciBub2RlID0gdGhpcy5tYXAuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZSAhPT0gdGhpcy5uZXdlc3QpIHtcclxuICAgICAgICAgICAgdmFyIG9sZGVyID0gbm9kZS5vbGRlciwgbmV3ZXIgPSBub2RlLm5ld2VyO1xyXG4gICAgICAgICAgICBpZiAobmV3ZXIpIHtcclxuICAgICAgICAgICAgICAgIG5ld2VyLm9sZGVyID0gb2xkZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBvbGRlci5uZXdlciA9IG5ld2VyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5vZGUub2xkZXIgPSB0aGlzLm5ld2VzdDtcclxuICAgICAgICAgICAgbm9kZS5vbGRlci5uZXdlciA9IG5vZGU7XHJcbiAgICAgICAgICAgIG5vZGUubmV3ZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLm5ld2VzdCA9IG5vZGU7XHJcbiAgICAgICAgICAgIGlmIChub2RlID09PSB0aGlzLm9sZGVzdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbGRlc3QgPSBuZXdlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH07XHJcbiAgICBDYWNoZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZ2V0Tm9kZShrZXkpO1xyXG4gICAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5vZGUgPSB7XHJcbiAgICAgICAgICAgIGtleToga2V5LFxyXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXHJcbiAgICAgICAgICAgIG5ld2VyOiBudWxsLFxyXG4gICAgICAgICAgICBvbGRlcjogdGhpcy5uZXdlc3RcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLm5ld2VzdCkge1xyXG4gICAgICAgICAgICB0aGlzLm5ld2VzdC5uZXdlciA9IG5vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubmV3ZXN0ID0gbm9kZTtcclxuICAgICAgICB0aGlzLm9sZGVzdCA9IHRoaXMub2xkZXN0IHx8IG5vZGU7XHJcbiAgICAgICAgdGhpcy5tYXAuc2V0KGtleSwgbm9kZSk7XHJcbiAgICAgICAgcmV0dXJuIG5vZGUudmFsdWU7XHJcbiAgICB9O1xyXG4gICAgQ2FjaGUucHJvdG90eXBlLmNsZWFuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHdoaWxlICh0aGlzLm9sZGVzdCAmJiB0aGlzLm1hcC5zaXplID4gdGhpcy5tYXgpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWxldGUodGhpcy5vbGRlc3Qua2V5KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ2FjaGUucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMubWFwLmdldChrZXkpO1xyXG4gICAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlID09PSB0aGlzLm5ld2VzdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uZXdlc3QgPSBub2RlLm9sZGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChub2RlID09PSB0aGlzLm9sZGVzdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbGRlc3QgPSBub2RlLm5ld2VyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChub2RlLm5ld2VyKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlLm5ld2VyLm9sZGVyID0gbm9kZS5vbGRlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobm9kZS5vbGRlcikge1xyXG4gICAgICAgICAgICAgICAgbm9kZS5vbGRlci5uZXdlciA9IG5vZGUubmV3ZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5tYXAuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZShub2RlLnZhbHVlLCBrZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDYWNoZTtcclxufSgpKTtcblxudmFyIHBhcmVudEVudHJ5U2xvdCA9IG5ldyBTbG90KCk7XG5cbnZhciBfYTtcclxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcclxudmFyIFxyXG4vLyBUaGlzIEFycmF5LmZyb20gcG9seWZpbGwgaXMgcmVzdHJpY3RlZCB0byB3b3JraW5nIHdpdGggU2V0PGFueT4gZm9yIG5vdyxcclxuLy8gYnV0IHdlIGNhbiBpbXByb3ZlIHRoZSBwb2x5ZmlsbCBhbmQgYWRkIG90aGVyIGlucHV0IHR5cGVzLCBhcyBuZWVkZWQuIE5vdGVcclxuLy8gdGhhdCB0aGlzIGZhbGxiYWNrIGltcGxlbWVudGF0aW9uIHdpbGwgb25seSBiZSB1c2VkIGlmIHRoZSBob3N0IGVudmlyb25tZW50XHJcbi8vIGRvZXMgbm90IHN1cHBvcnQgYSBuYXRpdmUgQXJyYXkuZnJvbSBmdW5jdGlvbi4gSW4gbW9zdCBtb2Rlcm4gSlMgcnVudGltZXMsXHJcbi8vIHRoZSB0b0FycmF5IGZ1bmN0aW9uIGV4cG9ydGVkIGhlcmUgd2lsbCBiZSA9PT0gQXJyYXkuZnJvbS5cclxudG9BcnJheSA9IChfYSA9IEFycmF5LmZyb20sIF9hID09PSB2b2lkIDAgPyBmdW5jdGlvbiAoY29sbGVjdGlvbikge1xyXG4gICAgdmFyIGFycmF5ID0gW107XHJcbiAgICBjb2xsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGFycmF5LnB1c2goaXRlbSk7IH0pO1xyXG4gICAgcmV0dXJuIGFycmF5O1xyXG59IDogX2EpO1xyXG5mdW5jdGlvbiBtYXliZVVuc3Vic2NyaWJlKGVudHJ5T3JEZXApIHtcclxuICAgIHZhciB1bnN1YnNjcmliZSA9IGVudHJ5T3JEZXAudW5zdWJzY3JpYmU7XHJcbiAgICBpZiAodHlwZW9mIHVuc3Vic2NyaWJlID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICBlbnRyeU9yRGVwLnVuc3Vic2NyaWJlID0gdm9pZCAwO1xyXG4gICAgICAgIHVuc3Vic2NyaWJlKCk7XHJcbiAgICB9XHJcbn1cblxudmFyIGVtcHR5U2V0UG9vbCA9IFtdO1xyXG52YXIgUE9PTF9UQVJHRVRfU0laRSA9IDEwMDtcclxuLy8gU2luY2UgdGhpcyBwYWNrYWdlIG1pZ2h0IGJlIHVzZWQgYnJvd3NlcnMsIHdlIHNob3VsZCBhdm9pZCB1c2luZyB0aGVcclxuLy8gTm9kZSBidWlsdC1pbiBhc3NlcnQgbW9kdWxlLlxyXG5mdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLCBvcHRpb25hbE1lc3NhZ2UpIHtcclxuICAgIGlmICghY29uZGl0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG9wdGlvbmFsTWVzc2FnZSB8fCBcImFzc2VydGlvbiBmYWlsdXJlXCIpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbHVlSXMoYSwgYikge1xyXG4gICAgdmFyIGxlbiA9IGEubGVuZ3RoO1xyXG4gICAgcmV0dXJuIChcclxuICAgIC8vIFVua25vd24gdmFsdWVzIGFyZSBub3QgZXF1YWwgdG8gZWFjaCBvdGhlci5cclxuICAgIGxlbiA+IDAgJiZcclxuICAgICAgICAvLyBCb3RoIHZhbHVlcyBtdXN0IGJlIG9yZGluYXJ5IChvciBib3RoIGV4Y2VwdGlvbmFsKSB0byBiZSBlcXVhbC5cclxuICAgICAgICBsZW4gPT09IGIubGVuZ3RoICYmXHJcbiAgICAgICAgLy8gVGhlIHVuZGVybHlpbmcgdmFsdWUgb3IgZXhjZXB0aW9uIG11c3QgYmUgdGhlIHNhbWUuXHJcbiAgICAgICAgYVtsZW4gLSAxXSA9PT0gYltsZW4gLSAxXSk7XHJcbn1cclxuZnVuY3Rpb24gdmFsdWVHZXQodmFsdWUpIHtcclxuICAgIHN3aXRjaCAodmFsdWUubGVuZ3RoKSB7XHJcbiAgICAgICAgY2FzZSAwOiB0aHJvdyBuZXcgRXJyb3IoXCJ1bmtub3duIHZhbHVlXCIpO1xyXG4gICAgICAgIGNhc2UgMTogcmV0dXJuIHZhbHVlWzBdO1xyXG4gICAgICAgIGNhc2UgMjogdGhyb3cgdmFsdWVbMV07XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsdWVDb3B5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdmFsdWUuc2xpY2UoMCk7XHJcbn1cclxudmFyIEVudHJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRW50cnkoZm4pIHtcclxuICAgICAgICB0aGlzLmZuID0gZm47XHJcbiAgICAgICAgdGhpcy5wYXJlbnRzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMuY2hpbGRWYWx1ZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgLy8gV2hlbiB0aGlzIEVudHJ5IGhhcyBjaGlsZHJlbiB0aGF0IGFyZSBkaXJ0eSwgdGhpcyBwcm9wZXJ0eSBiZWNvbWVzXHJcbiAgICAgICAgLy8gYSBTZXQgY29udGFpbmluZyBvdGhlciBFbnRyeSBvYmplY3RzLCBib3Jyb3dlZCBmcm9tIGVtcHR5U2V0UG9vbC5cclxuICAgICAgICAvLyBXaGVuIHRoZSBzZXQgYmVjb21lcyBlbXB0eSwgaXQgZ2V0cyByZWN5Y2xlZCBiYWNrIHRvIGVtcHR5U2V0UG9vbC5cclxuICAgICAgICB0aGlzLmRpcnR5Q2hpbGRyZW4gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucmVjb21wdXRpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gW107XHJcbiAgICAgICAgdGhpcy5kZXBzID0gbnVsbDtcclxuICAgICAgICArK0VudHJ5LmNvdW50O1xyXG4gICAgfVxyXG4gICAgRW50cnkucHJvdG90eXBlLnBlZWsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoID09PSAxICYmICFtaWdodEJlRGlydHkodGhpcykpIHtcclxuICAgICAgICAgICAgcmVtZW1iZXJQYXJlbnQodGhpcyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlWzBdO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBUaGlzIGlzIHRoZSBtb3N0IGltcG9ydGFudCBtZXRob2Qgb2YgdGhlIEVudHJ5IEFQSSwgYmVjYXVzZSBpdFxyXG4gICAgLy8gZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBjYWNoZWQgdGhpcy52YWx1ZSBjYW4gYmUgcmV0dXJuZWQgaW1tZWRpYXRlbHksXHJcbiAgICAvLyBvciBtdXN0IGJlIHJlY29tcHV0ZWQuIFRoZSBvdmVyYWxsIHBlcmZvcm1hbmNlIG9mIHRoZSBjYWNoaW5nIHN5c3RlbVxyXG4gICAgLy8gZGVwZW5kcyBvbiB0aGUgdHJ1dGggb2YgdGhlIGZvbGxvd2luZyBvYnNlcnZhdGlvbnM6ICgxKSB0aGlzLmRpcnR5IGlzXHJcbiAgICAvLyB1c3VhbGx5IGZhbHNlLCAoMikgdGhpcy5kaXJ0eUNoaWxkcmVuIGlzIHVzdWFsbHkgbnVsbC9lbXB0eSwgYW5kIHRodXNcclxuICAgIC8vICgzKSB2YWx1ZUdldCh0aGlzLnZhbHVlKSBpcyB1c3VhbGx5IHJldHVybmVkIHdpdGhvdXQgcmVjb21wdXRhdGlvbi5cclxuICAgIEVudHJ5LnByb3RvdHlwZS5yZWNvbXB1dGUgPSBmdW5jdGlvbiAoYXJncykge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5yZWNvbXB1dGluZywgXCJhbHJlYWR5IHJlY29tcHV0aW5nXCIpO1xyXG4gICAgICAgIHJlbWVtYmVyUGFyZW50KHRoaXMpO1xyXG4gICAgICAgIHJldHVybiBtaWdodEJlRGlydHkodGhpcylcclxuICAgICAgICAgICAgPyByZWFsbHlSZWNvbXB1dGUodGhpcywgYXJncylcclxuICAgICAgICAgICAgOiB2YWx1ZUdldCh0aGlzLnZhbHVlKTtcclxuICAgIH07XHJcbiAgICBFbnRyeS5wcm90b3R5cGUuc2V0RGlydHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlydHkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnZhbHVlLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgcmVwb3J0RGlydHkodGhpcyk7XHJcbiAgICAgICAgLy8gV2UgY2FuIGdvIGFoZWFkIGFuZCB1bnN1YnNjcmliZSBoZXJlLCBzaW5jZSBhbnkgZnVydGhlciBkaXJ0eVxyXG4gICAgICAgIC8vIG5vdGlmaWNhdGlvbnMgd2UgcmVjZWl2ZSB3aWxsIGJlIHJlZHVuZGFudCwgYW5kIHVuc3Vic2NyaWJpbmcgbWF5XHJcbiAgICAgICAgLy8gZnJlZSB1cCBzb21lIHJlc291cmNlcywgZS5nLiBmaWxlIHdhdGNoZXJzLlxyXG4gICAgICAgIG1heWJlVW5zdWJzY3JpYmUodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgRW50cnkucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnNldERpcnR5KCk7XHJcbiAgICAgICAgLy8gU2V2ZXIgYW55IGRlcGVuZGVuY3kgcmVsYXRpb25zaGlwcyB3aXRoIG91ciBvd24gY2hpbGRyZW4sIHNvIHRob3NlXHJcbiAgICAgICAgLy8gY2hpbGRyZW4gZG9uJ3QgcmV0YWluIHRoaXMgcGFyZW50IEVudHJ5IGluIHRoZWlyIGNoaWxkLnBhcmVudHMgc2V0cyxcclxuICAgICAgICAvLyB0aGVyZWJ5IHByZXZlbnRpbmcgaXQgZnJvbSBiZWluZyBmdWxseSBnYXJiYWdlIGNvbGxlY3RlZC5cclxuICAgICAgICBmb3JnZXRDaGlsZHJlbih0aGlzKTtcclxuICAgICAgICAvLyBCZWNhdXNlIHRoaXMgZW50cnkgaGFzIGJlZW4ga2lja2VkIG91dCBvZiB0aGUgY2FjaGUgKGluIGluZGV4LmpzKSxcclxuICAgICAgICAvLyB3ZSd2ZSBsb3N0IHRoZSBhYmlsaXR5IHRvIGZpbmQgb3V0IGlmL3doZW4gdGhpcyBlbnRyeSBiZWNvbWVzIGRpcnR5LFxyXG4gICAgICAgIC8vIHdoZXRoZXIgdGhhdCBoYXBwZW5zIHRocm91Z2ggYSBzdWJzY3JpcHRpb24sIGJlY2F1c2Ugb2YgYSBkaXJlY3QgY2FsbFxyXG4gICAgICAgIC8vIHRvIGVudHJ5LnNldERpcnR5KCksIG9yIGJlY2F1c2Ugb25lIG9mIGl0cyBjaGlsZHJlbiBiZWNvbWVzIGRpcnR5LlxyXG4gICAgICAgIC8vIEJlY2F1c2Ugb2YgdGhpcyBsb3NzIG9mIGZ1dHVyZSBpbmZvcm1hdGlvbiwgd2UgaGF2ZSB0byBhc3N1bWUgdGhlXHJcbiAgICAgICAgLy8gd29yc3QgKHRoYXQgdGhpcyBlbnRyeSBtaWdodCBoYXZlIGJlY29tZSBkaXJ0eSB2ZXJ5IHNvb24pLCBzbyB3ZSBtdXN0XHJcbiAgICAgICAgLy8gaW1tZWRpYXRlbHkgbWFyayB0aGlzIGVudHJ5J3MgcGFyZW50cyBhcyBkaXJ0eS4gTm9ybWFsbHkgd2UgY291bGRcclxuICAgICAgICAvLyBqdXN0IGNhbGwgZW50cnkuc2V0RGlydHkoKSByYXRoZXIgdGhhbiBjYWxsaW5nIHBhcmVudC5zZXREaXJ0eSgpIGZvclxyXG4gICAgICAgIC8vIGVhY2ggcGFyZW50LCBidXQgdGhhdCB3b3VsZCBsZWF2ZSB0aGlzIGVudHJ5IGluIHBhcmVudC5jaGlsZFZhbHVlc1xyXG4gICAgICAgIC8vIGFuZCBwYXJlbnQuZGlydHlDaGlsZHJlbiwgd2hpY2ggd291bGQgcHJldmVudCB0aGUgY2hpbGQgZnJvbSBiZWluZ1xyXG4gICAgICAgIC8vIHRydWx5IGZvcmdvdHRlbi5cclxuICAgICAgICBlYWNoUGFyZW50KHRoaXMsIGZ1bmN0aW9uIChwYXJlbnQsIGNoaWxkKSB7XHJcbiAgICAgICAgICAgIHBhcmVudC5zZXREaXJ0eSgpO1xyXG4gICAgICAgICAgICBmb3JnZXRDaGlsZChwYXJlbnQsIF90aGlzKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBFbnRyeS5wcm90b3R5cGUuZm9yZ2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFRoZSBjb2RlIHRoYXQgY3JlYXRlcyBFbnRyeSBvYmplY3RzIGluIGluZGV4LnRzIHdpbGwgcmVwbGFjZSB0aGlzIG1ldGhvZFxyXG4gICAgICAgIC8vIHdpdGggb25lIHRoYXQgYWN0dWFsbHkgcmVtb3ZlcyB0aGUgRW50cnkgZnJvbSB0aGUgY2FjaGUsIHdoaWNoIHdpbGwgYWxzb1xyXG4gICAgICAgIC8vIHRyaWdnZXIgdGhlIGVudHJ5LmRpc3Bvc2UgbWV0aG9kLlxyXG4gICAgICAgIHRoaXMuZGlzcG9zZSgpO1xyXG4gICAgfTtcclxuICAgIEVudHJ5LnByb3RvdHlwZS5kZXBlbmRPbiA9IGZ1bmN0aW9uIChkZXApIHtcclxuICAgICAgICBkZXAuYWRkKHRoaXMpO1xyXG4gICAgICAgIGlmICghdGhpcy5kZXBzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVwcyA9IGVtcHR5U2V0UG9vbC5wb3AoKSB8fCBuZXcgU2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGVwcy5hZGQoZGVwKTtcclxuICAgIH07XHJcbiAgICBFbnRyeS5wcm90b3R5cGUuZm9yZ2V0RGVwcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLmRlcHMpIHtcclxuICAgICAgICAgICAgdG9BcnJheSh0aGlzLmRlcHMpLmZvckVhY2goZnVuY3Rpb24gKGRlcCkgeyByZXR1cm4gZGVwLmRlbGV0ZShfdGhpcyk7IH0pO1xyXG4gICAgICAgICAgICB0aGlzLmRlcHMuY2xlYXIoKTtcclxuICAgICAgICAgICAgZW1wdHlTZXRQb29sLnB1c2godGhpcy5kZXBzKTtcclxuICAgICAgICAgICAgdGhpcy5kZXBzID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRW50cnkuY291bnQgPSAwO1xyXG4gICAgcmV0dXJuIEVudHJ5O1xyXG59KCkpO1xyXG5mdW5jdGlvbiByZW1lbWJlclBhcmVudChjaGlsZCkge1xyXG4gICAgdmFyIHBhcmVudCA9IHBhcmVudEVudHJ5U2xvdC5nZXRWYWx1ZSgpO1xyXG4gICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgIGNoaWxkLnBhcmVudHMuYWRkKHBhcmVudCk7XHJcbiAgICAgICAgaWYgKCFwYXJlbnQuY2hpbGRWYWx1ZXMuaGFzKGNoaWxkKSkge1xyXG4gICAgICAgICAgICBwYXJlbnQuY2hpbGRWYWx1ZXMuc2V0KGNoaWxkLCBbXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtaWdodEJlRGlydHkoY2hpbGQpKSB7XHJcbiAgICAgICAgICAgIHJlcG9ydERpcnR5Q2hpbGQocGFyZW50LCBjaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXBvcnRDbGVhbkNoaWxkKHBhcmVudCwgY2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFyZW50O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlYWxseVJlY29tcHV0ZShlbnRyeSwgYXJncykge1xyXG4gICAgZm9yZ2V0Q2hpbGRyZW4oZW50cnkpO1xyXG4gICAgLy8gU2V0IGVudHJ5IGFzIHRoZSBwYXJlbnQgZW50cnkgd2hpbGUgY2FsbGluZyByZWNvbXB1dGVOZXdWYWx1ZShlbnRyeSkuXHJcbiAgICBwYXJlbnRFbnRyeVNsb3Qud2l0aFZhbHVlKGVudHJ5LCByZWNvbXB1dGVOZXdWYWx1ZSwgW2VudHJ5LCBhcmdzXSk7XHJcbiAgICBpZiAobWF5YmVTdWJzY3JpYmUoZW50cnksIGFyZ3MpKSB7XHJcbiAgICAgICAgLy8gSWYgd2Ugc3VjY2Vzc2Z1bGx5IHJlY29tcHV0ZWQgZW50cnkudmFsdWUgYW5kIGRpZCBub3QgZmFpbCB0b1xyXG4gICAgICAgIC8vIChyZSlzdWJzY3JpYmUsIHRoZW4gdGhpcyBFbnRyeSBpcyBubyBsb25nZXIgZXhwbGljaXRseSBkaXJ0eS5cclxuICAgICAgICBzZXRDbGVhbihlbnRyeSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWVHZXQoZW50cnkudmFsdWUpO1xyXG59XHJcbmZ1bmN0aW9uIHJlY29tcHV0ZU5ld1ZhbHVlKGVudHJ5LCBhcmdzKSB7XHJcbiAgICBlbnRyeS5yZWNvbXB1dGluZyA9IHRydWU7XHJcbiAgICAvLyBTZXQgZW50cnkudmFsdWUgYXMgdW5rbm93bi5cclxuICAgIGVudHJ5LnZhbHVlLmxlbmd0aCA9IDA7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIElmIGVudHJ5LmZuIHN1Y2NlZWRzLCBlbnRyeS52YWx1ZSB3aWxsIGJlY29tZSBhIG5vcm1hbCBWYWx1ZS5cclxuICAgICAgICBlbnRyeS52YWx1ZVswXSA9IGVudHJ5LmZuLmFwcGx5KG51bGwsIGFyZ3MpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBJZiBlbnRyeS5mbiB0aHJvd3MsIGVudHJ5LnZhbHVlIHdpbGwgYmVjb21lIGV4Y2VwdGlvbmFsLlxyXG4gICAgICAgIGVudHJ5LnZhbHVlWzFdID0gZTtcclxuICAgIH1cclxuICAgIC8vIEVpdGhlciB3YXksIHRoaXMgbGluZSBpcyBhbHdheXMgcmVhY2hlZC5cclxuICAgIGVudHJ5LnJlY29tcHV0aW5nID0gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gbWlnaHRCZURpcnR5KGVudHJ5KSB7XHJcbiAgICByZXR1cm4gZW50cnkuZGlydHkgfHwgISEoZW50cnkuZGlydHlDaGlsZHJlbiAmJiBlbnRyeS5kaXJ0eUNoaWxkcmVuLnNpemUpO1xyXG59XHJcbmZ1bmN0aW9uIHNldENsZWFuKGVudHJ5KSB7XHJcbiAgICBlbnRyeS5kaXJ0eSA9IGZhbHNlO1xyXG4gICAgaWYgKG1pZ2h0QmVEaXJ0eShlbnRyeSkpIHtcclxuICAgICAgICAvLyBUaGlzIEVudHJ5IG1heSBzdGlsbCBoYXZlIGRpcnR5IGNoaWxkcmVuLCBpbiB3aGljaCBjYXNlIHdlIGNhbid0XHJcbiAgICAgICAgLy8gbGV0IG91ciBwYXJlbnRzIGtub3cgd2UncmUgY2xlYW4ganVzdCB5ZXQuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcmVwb3J0Q2xlYW4oZW50cnkpO1xyXG59XHJcbmZ1bmN0aW9uIHJlcG9ydERpcnR5KGNoaWxkKSB7XHJcbiAgICBlYWNoUGFyZW50KGNoaWxkLCByZXBvcnREaXJ0eUNoaWxkKTtcclxufVxyXG5mdW5jdGlvbiByZXBvcnRDbGVhbihjaGlsZCkge1xyXG4gICAgZWFjaFBhcmVudChjaGlsZCwgcmVwb3J0Q2xlYW5DaGlsZCk7XHJcbn1cclxuZnVuY3Rpb24gZWFjaFBhcmVudChjaGlsZCwgY2FsbGJhY2spIHtcclxuICAgIHZhciBwYXJlbnRDb3VudCA9IGNoaWxkLnBhcmVudHMuc2l6ZTtcclxuICAgIGlmIChwYXJlbnRDb3VudCkge1xyXG4gICAgICAgIHZhciBwYXJlbnRzID0gdG9BcnJheShjaGlsZC5wYXJlbnRzKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcmVudENvdW50OyArK2kpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2socGFyZW50c1tpXSwgY2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vLyBMZXQgYSBwYXJlbnQgRW50cnkga25vdyB0aGF0IG9uZSBvZiBpdHMgY2hpbGRyZW4gbWF5IGJlIGRpcnR5LlxyXG5mdW5jdGlvbiByZXBvcnREaXJ0eUNoaWxkKHBhcmVudCwgY2hpbGQpIHtcclxuICAgIC8vIE11c3QgaGF2ZSBjYWxsZWQgcmVtZW1iZXJQYXJlbnQoY2hpbGQpIGJlZm9yZSBjYWxsaW5nXHJcbiAgICAvLyByZXBvcnREaXJ0eUNoaWxkKHBhcmVudCwgY2hpbGQpLlxyXG4gICAgYXNzZXJ0KHBhcmVudC5jaGlsZFZhbHVlcy5oYXMoY2hpbGQpKTtcclxuICAgIGFzc2VydChtaWdodEJlRGlydHkoY2hpbGQpKTtcclxuICAgIHZhciBwYXJlbnRXYXNDbGVhbiA9ICFtaWdodEJlRGlydHkocGFyZW50KTtcclxuICAgIGlmICghcGFyZW50LmRpcnR5Q2hpbGRyZW4pIHtcclxuICAgICAgICBwYXJlbnQuZGlydHlDaGlsZHJlbiA9IGVtcHR5U2V0UG9vbC5wb3AoKSB8fCBuZXcgU2V0O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAocGFyZW50LmRpcnR5Q2hpbGRyZW4uaGFzKGNoaWxkKSkge1xyXG4gICAgICAgIC8vIElmIHdlIGFscmVhZHkga25vdyB0aGlzIGNoaWxkIGlzIGRpcnR5LCB0aGVuIHdlIG11c3QgaGF2ZSBhbHJlYWR5XHJcbiAgICAgICAgLy8gaW5mb3JtZWQgb3VyIG93biBwYXJlbnRzIHRoYXQgd2UgYXJlIGRpcnR5LCBzbyB3ZSBjYW4gdGVybWluYXRlXHJcbiAgICAgICAgLy8gdGhlIHJlY3Vyc2lvbiBlYXJseS5cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBwYXJlbnQuZGlydHlDaGlsZHJlbi5hZGQoY2hpbGQpO1xyXG4gICAgLy8gSWYgcGFyZW50IHdhcyBjbGVhbiBiZWZvcmUsIGl0IGp1c3QgYmVjYW1lIChwb3NzaWJseSkgZGlydHkgKGFjY29yZGluZyB0b1xyXG4gICAgLy8gbWlnaHRCZURpcnR5KSwgc2luY2Ugd2UganVzdCBhZGRlZCBjaGlsZCB0byBwYXJlbnQuZGlydHlDaGlsZHJlbi5cclxuICAgIGlmIChwYXJlbnRXYXNDbGVhbikge1xyXG4gICAgICAgIHJlcG9ydERpcnR5KHBhcmVudCk7XHJcbiAgICB9XHJcbn1cclxuLy8gTGV0IGEgcGFyZW50IEVudHJ5IGtub3cgdGhhdCBvbmUgb2YgaXRzIGNoaWxkcmVuIGlzIG5vIGxvbmdlciBkaXJ0eS5cclxuZnVuY3Rpb24gcmVwb3J0Q2xlYW5DaGlsZChwYXJlbnQsIGNoaWxkKSB7XHJcbiAgICAvLyBNdXN0IGhhdmUgY2FsbGVkIHJlbWVtYmVyQ2hpbGQoY2hpbGQpIGJlZm9yZSBjYWxsaW5nXHJcbiAgICAvLyByZXBvcnRDbGVhbkNoaWxkKHBhcmVudCwgY2hpbGQpLlxyXG4gICAgYXNzZXJ0KHBhcmVudC5jaGlsZFZhbHVlcy5oYXMoY2hpbGQpKTtcclxuICAgIGFzc2VydCghbWlnaHRCZURpcnR5KGNoaWxkKSk7XHJcbiAgICB2YXIgY2hpbGRWYWx1ZSA9IHBhcmVudC5jaGlsZFZhbHVlcy5nZXQoY2hpbGQpO1xyXG4gICAgaWYgKGNoaWxkVmFsdWUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcGFyZW50LmNoaWxkVmFsdWVzLnNldChjaGlsZCwgdmFsdWVDb3B5KGNoaWxkLnZhbHVlKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICghdmFsdWVJcyhjaGlsZFZhbHVlLCBjaGlsZC52YWx1ZSkpIHtcclxuICAgICAgICBwYXJlbnQuc2V0RGlydHkoKTtcclxuICAgIH1cclxuICAgIHJlbW92ZURpcnR5Q2hpbGQocGFyZW50LCBjaGlsZCk7XHJcbiAgICBpZiAobWlnaHRCZURpcnR5KHBhcmVudCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICByZXBvcnRDbGVhbihwYXJlbnQpO1xyXG59XHJcbmZ1bmN0aW9uIHJlbW92ZURpcnR5Q2hpbGQocGFyZW50LCBjaGlsZCkge1xyXG4gICAgdmFyIGRjID0gcGFyZW50LmRpcnR5Q2hpbGRyZW47XHJcbiAgICBpZiAoZGMpIHtcclxuICAgICAgICBkYy5kZWxldGUoY2hpbGQpO1xyXG4gICAgICAgIGlmIChkYy5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgIGlmIChlbXB0eVNldFBvb2wubGVuZ3RoIDwgUE9PTF9UQVJHRVRfU0laRSkge1xyXG4gICAgICAgICAgICAgICAgZW1wdHlTZXRQb29sLnB1c2goZGMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhcmVudC5kaXJ0eUNoaWxkcmVuID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLy8gUmVtb3ZlcyBhbGwgY2hpbGRyZW4gZnJvbSB0aGlzIGVudHJ5IGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIHRoZVxyXG4vLyByZW1vdmVkIGNoaWxkcmVuLlxyXG5mdW5jdGlvbiBmb3JnZXRDaGlsZHJlbihwYXJlbnQpIHtcclxuICAgIGlmIChwYXJlbnQuY2hpbGRWYWx1ZXMuc2l6ZSA+IDApIHtcclxuICAgICAgICBwYXJlbnQuY2hpbGRWYWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAoX3ZhbHVlLCBjaGlsZCkge1xyXG4gICAgICAgICAgICBmb3JnZXRDaGlsZChwYXJlbnQsIGNoaWxkKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIFJlbW92ZSB0aGlzIHBhcmVudCBFbnRyeSBmcm9tIGFueSBzZXRzIHRvIHdoaWNoIGl0IHdhcyBhZGRlZCBieSB0aGVcclxuICAgIC8vIGFkZFRvU2V0IG1ldGhvZC5cclxuICAgIHBhcmVudC5mb3JnZXREZXBzKCk7XHJcbiAgICAvLyBBZnRlciB3ZSBmb3JnZXQgYWxsIG91ciBjaGlsZHJlbiwgdGhpcy5kaXJ0eUNoaWxkcmVuIG11c3QgYmUgZW1wdHlcclxuICAgIC8vIGFuZCB0aGVyZWZvcmUgbXVzdCBoYXZlIGJlZW4gcmVzZXQgdG8gbnVsbC5cclxuICAgIGFzc2VydChwYXJlbnQuZGlydHlDaGlsZHJlbiA9PT0gbnVsbCk7XHJcbn1cclxuZnVuY3Rpb24gZm9yZ2V0Q2hpbGQocGFyZW50LCBjaGlsZCkge1xyXG4gICAgY2hpbGQucGFyZW50cy5kZWxldGUocGFyZW50KTtcclxuICAgIHBhcmVudC5jaGlsZFZhbHVlcy5kZWxldGUoY2hpbGQpO1xyXG4gICAgcmVtb3ZlRGlydHlDaGlsZChwYXJlbnQsIGNoaWxkKTtcclxufVxyXG5mdW5jdGlvbiBtYXliZVN1YnNjcmliZShlbnRyeSwgYXJncykge1xyXG4gICAgaWYgKHR5cGVvZiBlbnRyeS5zdWJzY3JpYmUgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIG1heWJlVW5zdWJzY3JpYmUoZW50cnkpOyAvLyBQcmV2ZW50IGRvdWJsZSBzdWJzY3JpcHRpb25zLlxyXG4gICAgICAgICAgICBlbnRyeS51bnN1YnNjcmliZSA9IGVudHJ5LnN1YnNjcmliZS5hcHBseShudWxsLCBhcmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gSWYgdGhpcyBFbnRyeSBoYXMgYSBzdWJzY3JpYmUgZnVuY3Rpb24gYW5kIGl0IHRocmV3IGFuIGV4Y2VwdGlvblxyXG4gICAgICAgICAgICAvLyAob3IgYW4gdW5zdWJzY3JpYmUgZnVuY3Rpb24gaXQgcHJldmlvdXNseSByZXR1cm5lZCBub3cgdGhyb3dzKSxcclxuICAgICAgICAgICAgLy8gcmV0dXJuIGZhbHNlIHRvIGluZGljYXRlIHRoYXQgd2Ugd2VyZSBub3QgYWJsZSB0byBzdWJzY3JpYmUgKG9yXHJcbiAgICAgICAgICAgIC8vIHVuc3Vic2NyaWJlKSwgYW5kIHRoaXMgRW50cnkgc2hvdWxkIHJlbWFpbiBkaXJ0eS5cclxuICAgICAgICAgICAgZW50cnkuc2V0RGlydHkoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFJldHVybmluZyB0cnVlIGluZGljYXRlcyBlaXRoZXIgdGhhdCB0aGVyZSB3YXMgbm8gZW50cnkuc3Vic2NyaWJlXHJcbiAgICAvLyBmdW5jdGlvbiBvciB0aGF0IGl0IHN1Y2NlZWRlZC5cclxuICAgIHJldHVybiB0cnVlO1xyXG59XG5cbnZhciBFbnRyeU1ldGhvZHMgPSB7XHJcbiAgICBzZXREaXJ0eTogdHJ1ZSxcclxuICAgIGRpc3Bvc2U6IHRydWUsXHJcbiAgICBmb3JnZXQ6IHRydWUsIC8vIEZ1bGx5IHJlbW92ZSBwYXJlbnQgRW50cnkgZnJvbSBMUlUgY2FjaGUgYW5kIGNvbXB1dGF0aW9uIGdyYXBoXHJcbn07XHJcbmZ1bmN0aW9uIGRlcChvcHRpb25zKSB7XHJcbiAgICB2YXIgZGVwc0J5S2V5ID0gbmV3IE1hcCgpO1xyXG4gICAgdmFyIHN1YnNjcmliZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5zdWJzY3JpYmU7XHJcbiAgICBmdW5jdGlvbiBkZXBlbmQoa2V5KSB7XHJcbiAgICAgICAgdmFyIHBhcmVudCA9IHBhcmVudEVudHJ5U2xvdC5nZXRWYWx1ZSgpO1xyXG4gICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGRlcF8xID0gZGVwc0J5S2V5LmdldChrZXkpO1xyXG4gICAgICAgICAgICBpZiAoIWRlcF8xKSB7XHJcbiAgICAgICAgICAgICAgICBkZXBzQnlLZXkuc2V0KGtleSwgZGVwXzEgPSBuZXcgU2V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwYXJlbnQuZGVwZW5kT24oZGVwXzEpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHN1YnNjcmliZSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICBtYXliZVVuc3Vic2NyaWJlKGRlcF8xKTtcclxuICAgICAgICAgICAgICAgIGRlcF8xLnVuc3Vic2NyaWJlID0gc3Vic2NyaWJlKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkZXBlbmQuZGlydHkgPSBmdW5jdGlvbiBkaXJ0eShrZXksIGVudHJ5TWV0aG9kTmFtZSkge1xyXG4gICAgICAgIHZhciBkZXAgPSBkZXBzQnlLZXkuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKGRlcCkge1xyXG4gICAgICAgICAgICB2YXIgbV8xID0gKGVudHJ5TWV0aG9kTmFtZSAmJlxyXG4gICAgICAgICAgICAgICAgaGFzT3duUHJvcGVydHkuY2FsbChFbnRyeU1ldGhvZHMsIGVudHJ5TWV0aG9kTmFtZSkpID8gZW50cnlNZXRob2ROYW1lIDogXCJzZXREaXJ0eVwiO1xyXG4gICAgICAgICAgICAvLyBXZSBoYXZlIHRvIHVzZSB0b0FycmF5KGRlcCkuZm9yRWFjaCBpbnN0ZWFkIG9mIGRlcC5mb3JFYWNoLCBiZWNhdXNlXHJcbiAgICAgICAgICAgIC8vIG1vZGlmeWluZyBhIFNldCB3aGlsZSBpdGVyYXRpbmcgb3ZlciBpdCBjYW4gY2F1c2UgZWxlbWVudHMgaW4gdGhlIFNldFxyXG4gICAgICAgICAgICAvLyB0byBiZSByZW1vdmVkIGZyb20gdGhlIFNldCBiZWZvcmUgdGhleSd2ZSBiZWVuIGl0ZXJhdGVkIG92ZXIuXHJcbiAgICAgICAgICAgIHRvQXJyYXkoZGVwKS5mb3JFYWNoKGZ1bmN0aW9uIChlbnRyeSkgeyByZXR1cm4gZW50cnlbbV8xXSgpOyB9KTtcclxuICAgICAgICAgICAgZGVwc0J5S2V5LmRlbGV0ZShrZXkpO1xyXG4gICAgICAgICAgICBtYXliZVVuc3Vic2NyaWJlKGRlcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBkZXBlbmQ7XHJcbn1cblxuZnVuY3Rpb24gbWFrZURlZmF1bHRNYWtlQ2FjaGVLZXlGdW5jdGlvbigpIHtcclxuICAgIHZhciBrZXlUcmllID0gbmV3IFRyaWUodHlwZW9mIFdlYWtNYXAgPT09IFwiZnVuY3Rpb25cIik7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBrZXlUcmllLmxvb2t1cEFycmF5KGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG59XHJcbi8vIFRoZSBkZWZhdWx0TWFrZUNhY2hlS2V5IGZ1bmN0aW9uIGlzIHJlbWFya2FibHkgcG93ZXJmdWwsIGJlY2F1c2UgaXQgZ2l2ZXNcclxuLy8gYSB1bmlxdWUgb2JqZWN0IGZvciBhbnkgc2hhbGxvdy1pZGVudGljYWwgbGlzdCBvZiBhcmd1bWVudHMuIElmIHlvdSBuZWVkXHJcbi8vIHRvIGltcGxlbWVudCBhIGN1c3RvbSBtYWtlQ2FjaGVLZXkgZnVuY3Rpb24sIHlvdSBtYXkgZmluZCBpdCBoZWxwZnVsIHRvXHJcbi8vIGRlbGVnYXRlIHRoZSBmaW5hbCB3b3JrIHRvIGRlZmF1bHRNYWtlQ2FjaGVLZXksIHdoaWNoIGlzIHdoeSB3ZSBleHBvcnQgaXRcclxuLy8gaGVyZS4gSG93ZXZlciwgeW91IG1heSB3YW50IHRvIGF2b2lkIGRlZmF1bHRNYWtlQ2FjaGVLZXkgaWYgeW91ciBydW50aW1lXHJcbi8vIGRvZXMgbm90IHN1cHBvcnQgV2Vha01hcCwgb3IgeW91IGhhdmUgdGhlIGFiaWxpdHkgdG8gcmV0dXJuIGEgc3RyaW5nIGtleS5cclxuLy8gSW4gdGhvc2UgY2FzZXMsIGp1c3Qgd3JpdGUgeW91ciBvd24gY3VzdG9tIG1ha2VDYWNoZUtleSBmdW5jdGlvbnMuXHJcbnZhciBkZWZhdWx0TWFrZUNhY2hlS2V5ID0gbWFrZURlZmF1bHRNYWtlQ2FjaGVLZXlGdW5jdGlvbigpO1xyXG52YXIgY2FjaGVzID0gbmV3IFNldCgpO1xyXG5mdW5jdGlvbiB3cmFwKG9yaWdpbmFsRnVuY3Rpb24sIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7IH1cclxuICAgIHZhciBjYWNoZSA9IG5ldyBDYWNoZShvcHRpb25zLm1heCB8fCBNYXRoLnBvdygyLCAxNiksIGZ1bmN0aW9uIChlbnRyeSkgeyByZXR1cm4gZW50cnkuZGlzcG9zZSgpOyB9KTtcclxuICAgIHZhciBrZXlBcmdzID0gb3B0aW9ucy5rZXlBcmdzO1xyXG4gICAgdmFyIG1ha2VDYWNoZUtleSA9IG9wdGlvbnMubWFrZUNhY2hlS2V5IHx8XHJcbiAgICAgICAgbWFrZURlZmF1bHRNYWtlQ2FjaGVLZXlGdW5jdGlvbigpO1xyXG4gICAgdmFyIG9wdGltaXN0aWMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IG1ha2VDYWNoZUtleS5hcHBseShudWxsLCBrZXlBcmdzID8ga2V5QXJncy5hcHBseShudWxsLCBhcmd1bWVudHMpIDogYXJndW1lbnRzKTtcclxuICAgICAgICBpZiAoa2V5ID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRnVuY3Rpb24uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGVudHJ5ID0gY2FjaGUuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKCFlbnRyeSkge1xyXG4gICAgICAgICAgICBjYWNoZS5zZXQoa2V5LCBlbnRyeSA9IG5ldyBFbnRyeShvcmlnaW5hbEZ1bmN0aW9uKSk7XHJcbiAgICAgICAgICAgIGVudHJ5LnN1YnNjcmliZSA9IG9wdGlvbnMuc3Vic2NyaWJlO1xyXG4gICAgICAgICAgICAvLyBHaXZlIHRoZSBFbnRyeSB0aGUgYWJpbGl0eSB0byB0cmlnZ2VyIGNhY2hlLmRlbGV0ZShrZXkpLCBldmVuIHRob3VnaFxyXG4gICAgICAgICAgICAvLyB0aGUgRW50cnkgaXRzZWxmIGRvZXMgbm90IGtub3cgYWJvdXQga2V5IG9yIGNhY2hlLlxyXG4gICAgICAgICAgICBlbnRyeS5mb3JnZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjYWNoZS5kZWxldGUoa2V5KTsgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHZhbHVlID0gZW50cnkucmVjb21wdXRlKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xyXG4gICAgICAgIC8vIE1vdmUgdGhpcyBlbnRyeSB0byB0aGUgZnJvbnQgb2YgdGhlIGxlYXN0LXJlY2VudGx5IHVzZWQgcXVldWUsXHJcbiAgICAgICAgLy8gc2luY2Ugd2UganVzdCBmaW5pc2hlZCBjb21wdXRpbmcgaXRzIHZhbHVlLlxyXG4gICAgICAgIGNhY2hlLnNldChrZXksIGVudHJ5KTtcclxuICAgICAgICBjYWNoZXMuYWRkKGNhY2hlKTtcclxuICAgICAgICAvLyBDbGVhbiB1cCBhbnkgZXhjZXNzIGVudHJpZXMgaW4gdGhlIGNhY2hlLCBidXQgb25seSBpZiB0aGVyZSBpcyBub1xyXG4gICAgICAgIC8vIGFjdGl2ZSBwYXJlbnQgZW50cnksIG1lYW5pbmcgd2UncmUgbm90IGluIHRoZSBtaWRkbGUgb2YgYSBsYXJnZXJcclxuICAgICAgICAvLyBjb21wdXRhdGlvbiB0aGF0IG1pZ2h0IGJlIGZsdW1tb3hlZCBieSB0aGUgY2xlYW5pbmcuXHJcbiAgICAgICAgaWYgKCFwYXJlbnRFbnRyeVNsb3QuaGFzVmFsdWUoKSkge1xyXG4gICAgICAgICAgICBjYWNoZXMuZm9yRWFjaChmdW5jdGlvbiAoY2FjaGUpIHsgcmV0dXJuIGNhY2hlLmNsZWFuKCk7IH0pO1xyXG4gICAgICAgICAgICBjYWNoZXMuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvcHRpbWlzdGljLCBcInNpemVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVbXCJtYXBcIl0uc2l6ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICB9KTtcclxuICAgIGZ1bmN0aW9uIGRpcnR5S2V5KGtleSkge1xyXG4gICAgICAgIHZhciBlbnRyeSA9IGNhY2hlLmdldChrZXkpO1xyXG4gICAgICAgIGlmIChlbnRyeSkge1xyXG4gICAgICAgICAgICBlbnRyeS5zZXREaXJ0eSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9wdGltaXN0aWMuZGlydHlLZXkgPSBkaXJ0eUtleTtcclxuICAgIG9wdGltaXN0aWMuZGlydHkgPSBmdW5jdGlvbiBkaXJ0eSgpIHtcclxuICAgICAgICBkaXJ0eUtleShtYWtlQ2FjaGVLZXkuYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gcGVla0tleShrZXkpIHtcclxuICAgICAgICB2YXIgZW50cnkgPSBjYWNoZS5nZXQoa2V5KTtcclxuICAgICAgICBpZiAoZW50cnkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVudHJ5LnBlZWsoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvcHRpbWlzdGljLnBlZWtLZXkgPSBwZWVrS2V5O1xyXG4gICAgb3B0aW1pc3RpYy5wZWVrID0gZnVuY3Rpb24gcGVlaygpIHtcclxuICAgICAgICByZXR1cm4gcGVla0tleShtYWtlQ2FjaGVLZXkuYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gZm9yZ2V0S2V5KGtleSkge1xyXG4gICAgICAgIHJldHVybiBjYWNoZS5kZWxldGUoa2V5KTtcclxuICAgIH1cclxuICAgIG9wdGltaXN0aWMuZm9yZ2V0S2V5ID0gZm9yZ2V0S2V5O1xyXG4gICAgb3B0aW1pc3RpYy5mb3JnZXQgPSBmdW5jdGlvbiBmb3JnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZvcmdldEtleShtYWtlQ2FjaGVLZXkuYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XHJcbiAgICB9O1xyXG4gICAgb3B0aW1pc3RpYy5tYWtlQ2FjaGVLZXkgPSBtYWtlQ2FjaGVLZXk7XHJcbiAgICBvcHRpbWlzdGljLmdldEtleSA9IGtleUFyZ3MgPyBmdW5jdGlvbiBnZXRLZXkoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1ha2VDYWNoZUtleS5hcHBseShudWxsLCBrZXlBcmdzLmFwcGx5KG51bGwsIGFyZ3VtZW50cykpO1xyXG4gICAgfSA6IG1ha2VDYWNoZUtleTtcclxuICAgIHJldHVybiBPYmplY3QuZnJlZXplKG9wdGltaXN0aWMpO1xyXG59XG5cbmV4cG9ydCB7IGRlZmF1bHRNYWtlQ2FjaGVLZXksIGRlcCwgd3JhcCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVuZGxlLmVzbS5qcy5tYXBcbiIsImltcG9ydCB7IF9fYXNzaWduLCBfX3Jlc3QgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IHdyYXAgfSBmcm9tICdvcHRpbWlzbSc7XG5pbXBvcnQgeyBnZXRGcmFnbWVudFF1ZXJ5RG9jdW1lbnQsIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xudmFyIEFwb2xsb0NhY2hlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBcG9sbG9DYWNoZSgpIHtcbiAgICAgICAgdGhpcy5nZXRGcmFnbWVudERvYyA9IHdyYXAoZ2V0RnJhZ21lbnRRdWVyeURvY3VtZW50KTtcbiAgICB9XG4gICAgQXBvbGxvQ2FjaGUucHJvdG90eXBlLmJhdGNoID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGltaXN0aWNJZCA9IHR5cGVvZiBvcHRpb25zLm9wdGltaXN0aWMgPT09IFwic3RyaW5nXCIgPyBvcHRpb25zLm9wdGltaXN0aWMgOlxuICAgICAgICAgICAgb3B0aW9ucy5vcHRpbWlzdGljID09PSBmYWxzZSA/IG51bGwgOiB2b2lkIDA7XG4gICAgICAgIHZhciB1cGRhdGVSZXN1bHQ7XG4gICAgICAgIHRoaXMucGVyZm9ybVRyYW5zYWN0aW9uKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVwZGF0ZVJlc3VsdCA9IG9wdGlvbnMudXBkYXRlKF90aGlzKTsgfSwgb3B0aW1pc3RpY0lkKTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZVJlc3VsdDtcbiAgICB9O1xuICAgIEFwb2xsb0NhY2hlLnByb3RvdHlwZS5yZWNvcmRPcHRpbWlzdGljVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIG9wdGltaXN0aWNJZCkge1xuICAgICAgICB0aGlzLnBlcmZvcm1UcmFuc2FjdGlvbih0cmFuc2FjdGlvbiwgb3B0aW1pc3RpY0lkKTtcbiAgICB9O1xuICAgIEFwb2xsb0NhY2hlLnByb3RvdHlwZS50cmFuc2Zvcm1Eb2N1bWVudCA9IGZ1bmN0aW9uIChkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQ7XG4gICAgfTtcbiAgICBBcG9sbG9DYWNoZS5wcm90b3R5cGUudHJhbnNmb3JtRm9yTGluayA9IGZ1bmN0aW9uIChkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQ7XG4gICAgfTtcbiAgICBBcG9sbG9DYWNoZS5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIEFwb2xsb0NhY2hlLnByb3RvdHlwZS5nYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH07XG4gICAgQXBvbGxvQ2FjaGUucHJvdG90eXBlLm1vZGlmeSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIEFwb2xsb0NhY2hlLnByb3RvdHlwZS5yZWFkUXVlcnkgPSBmdW5jdGlvbiAob3B0aW9ucywgb3B0aW1pc3RpYykge1xuICAgICAgICBpZiAob3B0aW1pc3RpYyA9PT0gdm9pZCAwKSB7IG9wdGltaXN0aWMgPSAhIW9wdGlvbnMub3B0aW1pc3RpYzsgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZWFkKF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgeyByb290SWQ6IG9wdGlvbnMuaWQgfHwgJ1JPT1RfUVVFUlknLCBvcHRpbWlzdGljOiBvcHRpbWlzdGljIH0pKTtcbiAgICB9O1xuICAgIEFwb2xsb0NhY2hlLnByb3RvdHlwZS5yZWFkRnJhZ21lbnQgPSBmdW5jdGlvbiAob3B0aW9ucywgb3B0aW1pc3RpYykge1xuICAgICAgICBpZiAob3B0aW1pc3RpYyA9PT0gdm9pZCAwKSB7IG9wdGltaXN0aWMgPSAhIW9wdGlvbnMub3B0aW1pc3RpYzsgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZWFkKF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgeyBxdWVyeTogdGhpcy5nZXRGcmFnbWVudERvYyhvcHRpb25zLmZyYWdtZW50LCBvcHRpb25zLmZyYWdtZW50TmFtZSksIHJvb3RJZDogb3B0aW9ucy5pZCwgb3B0aW1pc3RpYzogb3B0aW1pc3RpYyB9KSk7XG4gICAgfTtcbiAgICBBcG9sbG9DYWNoZS5wcm90b3R5cGUud3JpdGVRdWVyeSA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgaWQgPSBfYS5pZCwgZGF0YSA9IF9hLmRhdGEsIG9wdGlvbnMgPSBfX3Jlc3QoX2EsIFtcImlkXCIsIFwiZGF0YVwiXSk7XG4gICAgICAgIHJldHVybiB0aGlzLndyaXRlKE9iamVjdC5hc3NpZ24ob3B0aW9ucywge1xuICAgICAgICAgICAgZGF0YUlkOiBpZCB8fCAnUk9PVF9RVUVSWScsXG4gICAgICAgICAgICByZXN1bHQ6IGRhdGEsXG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIEFwb2xsb0NhY2hlLnByb3RvdHlwZS53cml0ZUZyYWdtZW50ID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBpZCA9IF9hLmlkLCBkYXRhID0gX2EuZGF0YSwgZnJhZ21lbnQgPSBfYS5mcmFnbWVudCwgZnJhZ21lbnROYW1lID0gX2EuZnJhZ21lbnROYW1lLCBvcHRpb25zID0gX19yZXN0KF9hLCBbXCJpZFwiLCBcImRhdGFcIiwgXCJmcmFnbWVudFwiLCBcImZyYWdtZW50TmFtZVwiXSk7XG4gICAgICAgIHJldHVybiB0aGlzLndyaXRlKE9iamVjdC5hc3NpZ24ob3B0aW9ucywge1xuICAgICAgICAgICAgcXVlcnk6IHRoaXMuZ2V0RnJhZ21lbnREb2MoZnJhZ21lbnQsIGZyYWdtZW50TmFtZSksXG4gICAgICAgICAgICBkYXRhSWQ6IGlkLFxuICAgICAgICAgICAgcmVzdWx0OiBkYXRhLFxuICAgICAgICB9KSk7XG4gICAgfTtcbiAgICBBcG9sbG9DYWNoZS5wcm90b3R5cGUudXBkYXRlUXVlcnkgPSBmdW5jdGlvbiAob3B0aW9ucywgdXBkYXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhdGNoKHtcbiAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gKGNhY2hlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY2FjaGUucmVhZFF1ZXJ5KG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gdXBkYXRlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PT0gdm9pZCAwIHx8IGRhdGEgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICBjYWNoZS53cml0ZVF1ZXJ5KF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgeyBkYXRhOiBkYXRhIH0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQXBvbGxvQ2FjaGUucHJvdG90eXBlLnVwZGF0ZUZyYWdtZW50ID0gZnVuY3Rpb24gKG9wdGlvbnMsIHVwZGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaCh7XG4gICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uIChjYWNoZSkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNhY2hlLnJlYWRGcmFnbWVudChvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHVwZGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgPT09IHZvaWQgMCB8fCBkYXRhID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgY2FjaGUud3JpdGVGcmFnbWVudChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3B0aW9ucyksIHsgZGF0YTogZGF0YSB9KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBBcG9sbG9DYWNoZTtcbn0oKSk7XG5leHBvcnQgeyBBcG9sbG9DYWNoZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FjaGUuanMubWFwIiwiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG52YXIgTWlzc2luZ0ZpZWxkRXJyb3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNaXNzaW5nRmllbGRFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNaXNzaW5nRmllbGRFcnJvcihtZXNzYWdlLCBwYXRoLCBxdWVyeSwgdmFyaWFibGVzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIF90aGlzLnBhdGggPSBwYXRoO1xuICAgICAgICBfdGhpcy5xdWVyeSA9IHF1ZXJ5O1xuICAgICAgICBfdGhpcy52YXJpYWJsZXMgPSB2YXJpYWJsZXM7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KF90aGlzLnBhdGgpKSB7XG4gICAgICAgICAgICBfdGhpcy5taXNzaW5nID0gX3RoaXMubWVzc2FnZTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBfdGhpcy5wYXRoLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMubWlzc2luZyA9IChfYSA9IHt9LCBfYVtfdGhpcy5wYXRoW2ldXSA9IF90aGlzLm1pc3NpbmcsIF9hKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLm1pc3NpbmcgPSBfdGhpcy5wYXRoO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLl9fcHJvdG9fXyA9IE1pc3NpbmdGaWVsZEVycm9yLnByb3RvdHlwZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gTWlzc2luZ0ZpZWxkRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnQgeyBNaXNzaW5nRmllbGRFcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbW9uLmpzLm1hcCIsImltcG9ydCB7IGlzUmVmZXJlbmNlLCBpc0ZpZWxkLCBEZWVwTWVyZ2VyLCByZXN1bHRLZXlOYW1lRnJvbUZpZWxkLCBzaG91bGRJbmNsdWRlLCBpc05vbk51bGxPYmplY3QsIGNvbXBhY3QsIGNyZWF0ZUZyYWdtZW50TWFwLCBnZXRGcmFnbWVudERlZmluaXRpb25zLCBpc0FycmF5LCB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmV4cG9ydCB2YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbmV4cG9ydCBmdW5jdGlvbiBpc051bGxpc2godmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHZvaWQgMDtcbn1cbmV4cG9ydCB7IGlzQXJyYXkgfTtcbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0RGF0YUlkRnJvbU9iamVjdChfYSwgY29udGV4dCkge1xuICAgIHZhciBfX3R5cGVuYW1lID0gX2EuX190eXBlbmFtZSwgaWQgPSBfYS5pZCwgX2lkID0gX2EuX2lkO1xuICAgIGlmICh0eXBlb2YgX190eXBlbmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAoY29udGV4dCkge1xuICAgICAgICAgICAgY29udGV4dC5rZXlPYmplY3QgPVxuICAgICAgICAgICAgICAgICFpc051bGxpc2goaWQpID8geyBpZDogaWQgfSA6XG4gICAgICAgICAgICAgICAgICAgICFpc051bGxpc2goX2lkKSA/IHsgX2lkOiBfaWQgfSA6XG4gICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTnVsbGlzaChpZCkgJiYgIWlzTnVsbGlzaChfaWQpKSB7XG4gICAgICAgICAgICBpZCA9IF9pZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzTnVsbGlzaChpZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiLmNvbmNhdChfX3R5cGVuYW1lLCBcIjpcIikuY29uY2F0KCh0eXBlb2YgaWQgPT09IFwibnVtYmVyXCIgfHxcbiAgICAgICAgICAgICAgICB0eXBlb2YgaWQgPT09IFwic3RyaW5nXCIpID8gaWQgOiBKU09OLnN0cmluZ2lmeShpZCkpO1xuICAgICAgICB9XG4gICAgfVxufVxudmFyIGRlZmF1bHRDb25maWcgPSB7XG4gICAgZGF0YUlkRnJvbU9iamVjdDogZGVmYXVsdERhdGFJZEZyb21PYmplY3QsXG4gICAgYWRkVHlwZW5hbWU6IHRydWUsXG4gICAgcmVzdWx0Q2FjaGluZzogdHJ1ZSxcbiAgICBjYW5vbml6ZVJlc3VsdHM6IGZhbHNlLFxufTtcbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVDb25maWcoY29uZmlnKSB7XG4gICAgcmV0dXJuIGNvbXBhY3QoZGVmYXVsdENvbmZpZywgY29uZmlnKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRDYW5vbml6ZVJlc3VsdHMoY29uZmlnKSB7XG4gICAgdmFyIHZhbHVlID0gY29uZmlnLmNhbm9uaXplUmVzdWx0cztcbiAgICByZXR1cm4gdmFsdWUgPT09IHZvaWQgMCA/IGRlZmF1bHRDb25maWcuY2Fub25pemVSZXN1bHRzIDogdmFsdWU7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0VHlwZW5hbWVGcm9tU3RvcmVPYmplY3Qoc3RvcmUsIG9iamVjdE9yUmVmZXJlbmNlKSB7XG4gICAgcmV0dXJuIGlzUmVmZXJlbmNlKG9iamVjdE9yUmVmZXJlbmNlKVxuICAgICAgICA/IHN0b3JlLmdldChvYmplY3RPclJlZmVyZW5jZS5fX3JlZiwgXCJfX3R5cGVuYW1lXCIpXG4gICAgICAgIDogb2JqZWN0T3JSZWZlcmVuY2UgJiYgb2JqZWN0T3JSZWZlcmVuY2UuX190eXBlbmFtZTtcbn1cbmV4cG9ydCB2YXIgVHlwZU9yRmllbGROYW1lUmVnRXhwID0gL15bX2Etel1bXzAtOWEtel0qL2k7XG5leHBvcnQgZnVuY3Rpb24gZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZSkge1xuICAgIHZhciBtYXRjaCA9IHN0b3JlRmllbGROYW1lLm1hdGNoKFR5cGVPckZpZWxkTmFtZVJlZ0V4cCk7XG4gICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMF0gOiBzdG9yZUZpZWxkTmFtZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3Rpb25TZXRNYXRjaGVzUmVzdWx0KHNlbGVjdGlvblNldCwgcmVzdWx0LCB2YXJpYWJsZXMpIHtcbiAgICBpZiAoaXNOb25OdWxsT2JqZWN0KHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkocmVzdWx0KVxuICAgICAgICAgICAgPyByZXN1bHQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIHNlbGVjdGlvblNldE1hdGNoZXNSZXN1bHQoc2VsZWN0aW9uU2V0LCBpdGVtLCB2YXJpYWJsZXMpOyB9KVxuICAgICAgICAgICAgOiBzZWxlY3Rpb25TZXQuc2VsZWN0aW9ucy5ldmVyeShmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNGaWVsZChmaWVsZCkgJiYgc2hvdWxkSW5jbHVkZShmaWVsZCwgdmFyaWFibGVzKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gcmVzdWx0S2V5TmFtZUZyb21GaWVsZChmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoYXNPd24uY2FsbChyZXN1bHQsIGtleSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICghZmllbGQuc2VsZWN0aW9uU2V0IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uU2V0TWF0Y2hlc1Jlc3VsdChmaWVsZC5zZWxlY3Rpb25TZXQsIHJlc3VsdFtrZXldLCB2YXJpYWJsZXMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzTm9uTnVsbE9iamVjdCh2YWx1ZSkgJiZcbiAgICAgICAgIWlzUmVmZXJlbmNlKHZhbHVlKSAmJlxuICAgICAgICAhaXNBcnJheSh2YWx1ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVByb2Nlc3NlZEZpZWxkc01lcmdlcigpIHtcbiAgICByZXR1cm4gbmV3IERlZXBNZXJnZXI7XG59XG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdEZyYWdtZW50Q29udGV4dChkb2N1bWVudCwgZnJhZ21lbnRzKSB7XG4gICAgdmFyIGZyYWdtZW50TWFwID0gY3JlYXRlRnJhZ21lbnRNYXAoZ2V0RnJhZ21lbnREZWZpbml0aW9ucyhkb2N1bWVudCkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGZyYWdtZW50TWFwOiBmcmFnbWVudE1hcCxcbiAgICAgICAgbG9va3VwRnJhZ21lbnQ6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICB2YXIgZGVmID0gZnJhZ21lbnRNYXBbbmFtZV07XG4gICAgICAgICAgICBpZiAoIWRlZiAmJiBmcmFnbWVudHMpIHtcbiAgICAgICAgICAgICAgICBkZWYgPSBmcmFnbWVudHMubG9va3VwKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlZiB8fCBudWxsO1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oZWxwZXJzLmpzLm1hcCIsImltcG9ydCB7IF9fYXNzaWduLCBfX2V4dGVuZHMsIF9fcmVzdCB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9nbG9iYWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBkZXAgfSBmcm9tICdvcHRpbWlzbSc7XG5pbXBvcnQgeyBlcXVhbCB9IGZyb20gJ0B3cnkvZXF1YWxpdHknO1xuaW1wb3J0IHsgVHJpZSB9IGZyb20gJ0B3cnkvdHJpZSc7XG5pbXBvcnQgeyBpc1JlZmVyZW5jZSwgbWFrZVJlZmVyZW5jZSwgRGVlcE1lcmdlciwgbWF5YmVEZWVwRnJlZXplLCBjYW5Vc2VXZWFrTWFwLCBpc05vbk51bGxPYmplY3QsIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgaGFzT3duLCBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lIH0gZnJvbSBcIi4vaGVscGVycy5qc1wiO1xudmFyIERFTEVURSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG52YXIgZGVsTW9kaWZpZXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBERUxFVEU7IH07XG52YXIgSU5WQUxJREFURSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG52YXIgRW50aXR5U3RvcmUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEVudGl0eVN0b3JlKHBvbGljaWVzLCBncm91cCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnBvbGljaWVzID0gcG9saWNpZXM7XG4gICAgICAgIHRoaXMuZ3JvdXAgPSBncm91cDtcbiAgICAgICAgdGhpcy5kYXRhID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5yb290SWRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5yZWZzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5nZXRGaWVsZFZhbHVlID0gZnVuY3Rpb24gKG9iamVjdE9yUmVmZXJlbmNlLCBzdG9yZUZpZWxkTmFtZSkgeyByZXR1cm4gbWF5YmVEZWVwRnJlZXplKGlzUmVmZXJlbmNlKG9iamVjdE9yUmVmZXJlbmNlKVxuICAgICAgICAgICAgPyBfdGhpcy5nZXQob2JqZWN0T3JSZWZlcmVuY2UuX19yZWYsIHN0b3JlRmllbGROYW1lKVxuICAgICAgICAgICAgOiBvYmplY3RPclJlZmVyZW5jZSAmJiBvYmplY3RPclJlZmVyZW5jZVtzdG9yZUZpZWxkTmFtZV0pOyB9O1xuICAgICAgICB0aGlzLmNhblJlYWQgPSBmdW5jdGlvbiAob2JqT3JSZWYpIHtcbiAgICAgICAgICAgIHJldHVybiBpc1JlZmVyZW5jZShvYmpPclJlZilcbiAgICAgICAgICAgICAgICA/IF90aGlzLmhhcyhvYmpPclJlZi5fX3JlZilcbiAgICAgICAgICAgICAgICA6IHR5cGVvZiBvYmpPclJlZiA9PT0gXCJvYmplY3RcIjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50b1JlZmVyZW5jZSA9IGZ1bmN0aW9uIChvYmpPcklkT3JSZWYsIG1lcmdlSW50b1N0b3JlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9iak9ySWRPclJlZiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYWtlUmVmZXJlbmNlKG9iak9ySWRPclJlZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNSZWZlcmVuY2Uob2JqT3JJZE9yUmVmKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmpPcklkT3JSZWY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaWQgPSBfdGhpcy5wb2xpY2llcy5pZGVudGlmeShvYmpPcklkT3JSZWYpWzBdO1xuICAgICAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlZiA9IG1ha2VSZWZlcmVuY2UoaWQpO1xuICAgICAgICAgICAgICAgIGlmIChtZXJnZUludG9TdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5tZXJnZShpZCwgb2JqT3JJZE9yUmVmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgRW50aXR5U3RvcmUucHJvdG90eXBlLnRvT2JqZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hc3NpZ24oe30sIHRoaXMuZGF0YSk7XG4gICAgfTtcbiAgICBFbnRpdHlTdG9yZS5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGRhdGFJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb29rdXAoZGF0YUlkLCB0cnVlKSAhPT0gdm9pZCAwO1xuICAgIH07XG4gICAgRW50aXR5U3RvcmUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChkYXRhSWQsIGZpZWxkTmFtZSkge1xuICAgICAgICB0aGlzLmdyb3VwLmRlcGVuZChkYXRhSWQsIGZpZWxkTmFtZSk7XG4gICAgICAgIGlmIChoYXNPd24uY2FsbCh0aGlzLmRhdGEsIGRhdGFJZCkpIHtcbiAgICAgICAgICAgIHZhciBzdG9yZU9iamVjdCA9IHRoaXMuZGF0YVtkYXRhSWRdO1xuICAgICAgICAgICAgaWYgKHN0b3JlT2JqZWN0ICYmIGhhc093bi5jYWxsKHN0b3JlT2JqZWN0LCBmaWVsZE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlT2JqZWN0W2ZpZWxkTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpZWxkTmFtZSA9PT0gXCJfX3R5cGVuYW1lXCIgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMucG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWQsIGRhdGFJZCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvbGljaWVzLnJvb3RUeXBlbmFtZXNCeUlkW2RhdGFJZF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBMYXllcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldChkYXRhSWQsIGZpZWxkTmFtZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVudGl0eVN0b3JlLnByb3RvdHlwZS5sb29rdXAgPSBmdW5jdGlvbiAoZGF0YUlkLCBkZXBlbmRPbkV4aXN0ZW5jZSkge1xuICAgICAgICBpZiAoZGVwZW5kT25FeGlzdGVuY2UpXG4gICAgICAgICAgICB0aGlzLmdyb3VwLmRlcGVuZChkYXRhSWQsIFwiX19leGlzdHNcIik7XG4gICAgICAgIGlmIChoYXNPd24uY2FsbCh0aGlzLmRhdGEsIGRhdGFJZCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFbZGF0YUlkXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIExheWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQubG9va3VwKGRhdGFJZCwgZGVwZW5kT25FeGlzdGVuY2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvbGljaWVzLnJvb3RUeXBlbmFtZXNCeUlkW2RhdGFJZF0pIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbnRpdHlTdG9yZS5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbiAob2xkZXIsIG5ld2VyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBkYXRhSWQ7XG4gICAgICAgIGlmIChpc1JlZmVyZW5jZShvbGRlcikpXG4gICAgICAgICAgICBvbGRlciA9IG9sZGVyLl9fcmVmO1xuICAgICAgICBpZiAoaXNSZWZlcmVuY2UobmV3ZXIpKVxuICAgICAgICAgICAgbmV3ZXIgPSBuZXdlci5fX3JlZjtcbiAgICAgICAgdmFyIGV4aXN0aW5nID0gdHlwZW9mIG9sZGVyID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IHRoaXMubG9va3VwKGRhdGFJZCA9IG9sZGVyKVxuICAgICAgICAgICAgOiBvbGRlcjtcbiAgICAgICAgdmFyIGluY29taW5nID0gdHlwZW9mIG5ld2VyID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IHRoaXMubG9va3VwKGRhdGFJZCA9IG5ld2VyKVxuICAgICAgICAgICAgOiBuZXdlcjtcbiAgICAgICAgaWYgKCFpbmNvbWluZylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgX19ERVZfXyA/IGludmFyaWFudCh0eXBlb2YgZGF0YUlkID09PSBcInN0cmluZ1wiLCBcInN0b3JlLm1lcmdlIGV4cGVjdHMgYSBzdHJpbmcgSURcIikgOiBpbnZhcmlhbnQodHlwZW9mIGRhdGFJZCA9PT0gXCJzdHJpbmdcIiwgMSk7XG4gICAgICAgIHZhciBtZXJnZWQgPSBuZXcgRGVlcE1lcmdlcihzdG9yZU9iamVjdFJlY29uY2lsZXIpLm1lcmdlKGV4aXN0aW5nLCBpbmNvbWluZyk7XG4gICAgICAgIHRoaXMuZGF0YVtkYXRhSWRdID0gbWVyZ2VkO1xuICAgICAgICBpZiAobWVyZ2VkICE9PSBleGlzdGluZykge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMucmVmc1tkYXRhSWRdO1xuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXAuY2FjaGluZykge1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZHNUb0RpcnR5XzEgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmcpXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkc1RvRGlydHlfMS5fX2V4aXN0cyA9IDE7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoaW5jb21pbmcpLmZvckVhY2goZnVuY3Rpb24gKHN0b3JlRmllbGROYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmcgfHwgZXhpc3Rpbmdbc3RvcmVGaWVsZE5hbWVdICE9PSBtZXJnZWRbc3RvcmVGaWVsZE5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNUb0RpcnR5XzFbc3RvcmVGaWVsZE5hbWVdID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZE5hbWUgPSBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWUgIT09IHN0b3JlRmllbGROYW1lICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIV90aGlzLnBvbGljaWVzLmhhc0tleUFyZ3MobWVyZ2VkLl9fdHlwZW5hbWUsIGZpZWxkTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNUb0RpcnR5XzFbZmllbGROYW1lXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVyZ2VkW3N0b3JlRmllbGROYW1lXSA9PT0gdm9pZCAwICYmICEoX3RoaXMgaW5zdGFuY2VvZiBMYXllcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbWVyZ2VkW3N0b3JlRmllbGROYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZHNUb0RpcnR5XzEuX190eXBlbmFtZSAmJlxuICAgICAgICAgICAgICAgICAgICAhKGV4aXN0aW5nICYmIGV4aXN0aW5nLl9fdHlwZW5hbWUpICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWRbZGF0YUlkXSA9PT0gbWVyZ2VkLl9fdHlwZW5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZpZWxkc1RvRGlydHlfMS5fX3R5cGVuYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhmaWVsZHNUb0RpcnR5XzEpLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkTmFtZSkgeyByZXR1cm4gX3RoaXMuZ3JvdXAuZGlydHkoZGF0YUlkLCBmaWVsZE5hbWUpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgRW50aXR5U3RvcmUucHJvdG90eXBlLm1vZGlmeSA9IGZ1bmN0aW9uIChkYXRhSWQsIGZpZWxkcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgc3RvcmVPYmplY3QgPSB0aGlzLmxvb2t1cChkYXRhSWQpO1xuICAgICAgICBpZiAoc3RvcmVPYmplY3QpIHtcbiAgICAgICAgICAgIHZhciBjaGFuZ2VkRmllbGRzXzEgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgdmFyIG5lZWRUb01lcmdlXzEgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBhbGxEZWxldGVkXzEgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIHNoYXJlZERldGFpbHNfMSA9IHtcbiAgICAgICAgICAgICAgICBERUxFVEU6IERFTEVURSxcbiAgICAgICAgICAgICAgICBJTlZBTElEQVRFOiBJTlZBTElEQVRFLFxuICAgICAgICAgICAgICAgIGlzUmVmZXJlbmNlOiBpc1JlZmVyZW5jZSxcbiAgICAgICAgICAgICAgICB0b1JlZmVyZW5jZTogdGhpcy50b1JlZmVyZW5jZSxcbiAgICAgICAgICAgICAgICBjYW5SZWFkOiB0aGlzLmNhblJlYWQsXG4gICAgICAgICAgICAgICAgcmVhZEZpZWxkOiBmdW5jdGlvbiAoZmllbGROYW1lT3JPcHRpb25zLCBmcm9tKSB7IHJldHVybiBfdGhpcy5wb2xpY2llcy5yZWFkRmllbGQodHlwZW9mIGZpZWxkTmFtZU9yT3B0aW9ucyA9PT0gXCJzdHJpbmdcIiA/IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lOiBmaWVsZE5hbWVPck9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGZyb20gfHwgbWFrZVJlZmVyZW5jZShkYXRhSWQpLFxuICAgICAgICAgICAgICAgIH0gOiBmaWVsZE5hbWVPck9wdGlvbnMsIHsgc3RvcmU6IF90aGlzIH0pOyB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0b3JlT2JqZWN0KS5mb3JFYWNoKGZ1bmN0aW9uIChzdG9yZUZpZWxkTmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZE5hbWUgPSBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICB2YXIgZmllbGRWYWx1ZSA9IHN0b3JlT2JqZWN0W3N0b3JlRmllbGROYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGRWYWx1ZSA9PT0gdm9pZCAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgdmFyIG1vZGlmeSA9IHR5cGVvZiBmaWVsZHMgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgICAgICAgICA/IGZpZWxkc1xuICAgICAgICAgICAgICAgICAgICA6IGZpZWxkc1tzdG9yZUZpZWxkTmFtZV0gfHwgZmllbGRzW2ZpZWxkTmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKG1vZGlmeSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBtb2RpZnkgPT09IGRlbE1vZGlmaWVyID8gREVMRVRFIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmeShtYXliZURlZXBGcmVlemUoZmllbGRWYWx1ZSksIF9fYXNzaWduKF9fYXNzaWduKHt9LCBzaGFyZWREZXRhaWxzXzEpLCB7IGZpZWxkTmFtZTogZmllbGROYW1lLCBzdG9yZUZpZWxkTmFtZTogc3RvcmVGaWVsZE5hbWUsIHN0b3JhZ2U6IF90aGlzLmdldFN0b3JhZ2UoZGF0YUlkLCBzdG9yZUZpZWxkTmFtZSkgfSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgPT09IElOVkFMSURBVEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmdyb3VwLmRpcnR5KGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlID09PSBERUxFVEUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IGZpZWxkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkRmllbGRzXzFbc3RvcmVGaWVsZE5hbWVdID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVlZFRvTWVyZ2VfMSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaWVsZFZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgYWxsRGVsZXRlZF8xID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAobmVlZFRvTWVyZ2VfMSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWVyZ2UoZGF0YUlkLCBjaGFuZ2VkRmllbGRzXzEpO1xuICAgICAgICAgICAgICAgIGlmIChhbGxEZWxldGVkXzEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBMYXllcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW2RhdGFJZF0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5kYXRhW2RhdGFJZF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cC5kaXJ0eShkYXRhSWQsIFwiX19leGlzdHNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIEVudGl0eVN0b3JlLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoZGF0YUlkLCBmaWVsZE5hbWUsIGFyZ3MpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgc3RvcmVPYmplY3QgPSB0aGlzLmxvb2t1cChkYXRhSWQpO1xuICAgICAgICBpZiAoc3RvcmVPYmplY3QpIHtcbiAgICAgICAgICAgIHZhciB0eXBlbmFtZSA9IHRoaXMuZ2V0RmllbGRWYWx1ZShzdG9yZU9iamVjdCwgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgICAgICAgdmFyIHN0b3JlRmllbGROYW1lID0gZmllbGROYW1lICYmIGFyZ3NcbiAgICAgICAgICAgICAgICA/IHRoaXMucG9saWNpZXMuZ2V0U3RvcmVGaWVsZE5hbWUoeyB0eXBlbmFtZTogdHlwZW5hbWUsIGZpZWxkTmFtZTogZmllbGROYW1lLCBhcmdzOiBhcmdzIH0pXG4gICAgICAgICAgICAgICAgOiBmaWVsZE5hbWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tb2RpZnkoZGF0YUlkLCBzdG9yZUZpZWxkTmFtZSA/IChfYSA9IHt9LFxuICAgICAgICAgICAgICAgIF9hW3N0b3JlRmllbGROYW1lXSA9IGRlbE1vZGlmaWVyLFxuICAgICAgICAgICAgICAgIF9hKSA6IGRlbE1vZGlmaWVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBFbnRpdHlTdG9yZS5wcm90b3R5cGUuZXZpY3QgPSBmdW5jdGlvbiAob3B0aW9ucywgbGltaXQpIHtcbiAgICAgICAgdmFyIGV2aWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG9wdGlvbnMuaWQpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbCh0aGlzLmRhdGEsIG9wdGlvbnMuaWQpKSB7XG4gICAgICAgICAgICAgICAgZXZpY3RlZCA9IHRoaXMuZGVsZXRlKG9wdGlvbnMuaWQsIG9wdGlvbnMuZmllbGROYW1lLCBvcHRpb25zLmFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBMYXllciAmJiB0aGlzICE9PSBsaW1pdCkge1xuICAgICAgICAgICAgICAgIGV2aWN0ZWQgPSB0aGlzLnBhcmVudC5ldmljdChvcHRpb25zLCBsaW1pdCkgfHwgZXZpY3RlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmZpZWxkTmFtZSB8fCBldmljdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ncm91cC5kaXJ0eShvcHRpb25zLmlkLCBvcHRpb25zLmZpZWxkTmFtZSB8fCBcIl9fZXhpc3RzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmljdGVkO1xuICAgIH07XG4gICAgRW50aXR5U3RvcmUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlcGxhY2UobnVsbCk7XG4gICAgfTtcbiAgICBFbnRpdHlTdG9yZS5wcm90b3R5cGUuZXh0cmFjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9iaiA9IHRoaXMudG9PYmplY3QoKTtcbiAgICAgICAgdmFyIGV4dHJhUm9vdElkcyA9IFtdO1xuICAgICAgICB0aGlzLmdldFJvb3RJZFNldCgpLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICBpZiAoIWhhc093bi5jYWxsKF90aGlzLnBvbGljaWVzLnJvb3RUeXBlbmFtZXNCeUlkLCBpZCkpIHtcbiAgICAgICAgICAgICAgICBleHRyYVJvb3RJZHMucHVzaChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZXh0cmFSb290SWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgb2JqLl9fTUVUQSA9IHsgZXh0cmFSb290SWRzOiBleHRyYVJvb3RJZHMuc29ydCgpIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICAgIEVudGl0eVN0b3JlLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gKG5ld0RhdGEpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5kYXRhKS5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhSWQpIHtcbiAgICAgICAgICAgIGlmICghKG5ld0RhdGEgJiYgaGFzT3duLmNhbGwobmV3RGF0YSwgZGF0YUlkKSkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5kZWxldGUoZGF0YUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChuZXdEYXRhKSB7XG4gICAgICAgICAgICB2YXIgX19NRVRBID0gbmV3RGF0YS5fX01FVEEsIHJlc3RfMSA9IF9fcmVzdChuZXdEYXRhLCBbXCJfX01FVEFcIl0pO1xuICAgICAgICAgICAgT2JqZWN0LmtleXMocmVzdF8xKS5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhSWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5tZXJnZShkYXRhSWQsIHJlc3RfMVtkYXRhSWRdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKF9fTUVUQSkge1xuICAgICAgICAgICAgICAgIF9fTUVUQS5leHRyYVJvb3RJZHMuZm9yRWFjaCh0aGlzLnJldGFpbiwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVudGl0eVN0b3JlLnByb3RvdHlwZS5yZXRhaW4gPSBmdW5jdGlvbiAocm9vdElkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3RJZHNbcm9vdElkXSA9ICh0aGlzLnJvb3RJZHNbcm9vdElkXSB8fCAwKSArIDE7XG4gICAgfTtcbiAgICBFbnRpdHlTdG9yZS5wcm90b3R5cGUucmVsZWFzZSA9IGZ1bmN0aW9uIChyb290SWQpIHtcbiAgICAgICAgaWYgKHRoaXMucm9vdElkc1tyb290SWRdID4gMCkge1xuICAgICAgICAgICAgdmFyIGNvdW50ID0gLS10aGlzLnJvb3RJZHNbcm9vdElkXTtcbiAgICAgICAgICAgIGlmICghY291bnQpXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucm9vdElkc1tyb290SWRdO1xuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG4gICAgRW50aXR5U3RvcmUucHJvdG90eXBlLmdldFJvb3RJZFNldCA9IGZ1bmN0aW9uIChpZHMpIHtcbiAgICAgICAgaWYgKGlkcyA9PT0gdm9pZCAwKSB7IGlkcyA9IG5ldyBTZXQoKTsgfVxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnJvb3RJZHMpLmZvckVhY2goaWRzLmFkZCwgaWRzKTtcbiAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBMYXllcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Um9vdElkU2V0KGlkcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnBvbGljaWVzLnJvb3RUeXBlbmFtZXNCeUlkKS5mb3JFYWNoKGlkcy5hZGQsIGlkcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlkcztcbiAgICB9O1xuICAgIEVudGl0eVN0b3JlLnByb3RvdHlwZS5nYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGlkcyA9IHRoaXMuZ2V0Um9vdElkU2V0KCk7XG4gICAgICAgIHZhciBzbmFwc2hvdCA9IHRoaXMudG9PYmplY3QoKTtcbiAgICAgICAgaWRzLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoc25hcHNob3QsIGlkKSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKF90aGlzLmZpbmRDaGlsZFJlZklkcyhpZCkpLmZvckVhY2goaWRzLmFkZCwgaWRzKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgc25hcHNob3RbaWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGlkc1RvUmVtb3ZlID0gT2JqZWN0LmtleXMoc25hcHNob3QpO1xuICAgICAgICBpZiAoaWRzVG9SZW1vdmUubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgcm9vdF8xID0gdGhpcztcbiAgICAgICAgICAgIHdoaWxlIChyb290XzEgaW5zdGFuY2VvZiBMYXllcilcbiAgICAgICAgICAgICAgICByb290XzEgPSByb290XzEucGFyZW50O1xuICAgICAgICAgICAgaWRzVG9SZW1vdmUuZm9yRWFjaChmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIHJvb3RfMS5kZWxldGUoaWQpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaWRzVG9SZW1vdmU7XG4gICAgfTtcbiAgICBFbnRpdHlTdG9yZS5wcm90b3R5cGUuZmluZENoaWxkUmVmSWRzID0gZnVuY3Rpb24gKGRhdGFJZCkge1xuICAgICAgICBpZiAoIWhhc093bi5jYWxsKHRoaXMucmVmcywgZGF0YUlkKSkge1xuICAgICAgICAgICAgdmFyIGZvdW5kXzEgPSB0aGlzLnJlZnNbZGF0YUlkXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgICB2YXIgcm9vdCA9IHRoaXMuZGF0YVtkYXRhSWRdO1xuICAgICAgICAgICAgaWYgKCFyb290KVxuICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZF8xO1xuICAgICAgICAgICAgdmFyIHdvcmtTZXRfMSA9IG5ldyBTZXQoW3Jvb3RdKTtcbiAgICAgICAgICAgIHdvcmtTZXRfMS5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNSZWZlcmVuY2Uob2JqKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3VuZF8xW29iai5fX3JlZl0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNOb25OdWxsT2JqZWN0KG9iaikpIHtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IG9ialtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTm9uTnVsbE9iamVjdChjaGlsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrU2V0XzEuYWRkKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVmc1tkYXRhSWRdO1xuICAgIH07XG4gICAgRW50aXR5U3RvcmUucHJvdG90eXBlLm1ha2VDYWNoZUtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JvdXAua2V5TWFrZXIubG9va3VwQXJyYXkoYXJndW1lbnRzKTtcbiAgICB9O1xuICAgIHJldHVybiBFbnRpdHlTdG9yZTtcbn0oKSk7XG5leHBvcnQgeyBFbnRpdHlTdG9yZSB9O1xudmFyIENhY2hlR3JvdXAgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENhY2hlR3JvdXAoY2FjaGluZywgcGFyZW50KSB7XG4gICAgICAgIGlmIChwYXJlbnQgPT09IHZvaWQgMCkgeyBwYXJlbnQgPSBudWxsOyB9XG4gICAgICAgIHRoaXMuY2FjaGluZyA9IGNhY2hpbmc7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmQgPSBudWxsO1xuICAgICAgICB0aGlzLnJlc2V0Q2FjaGluZygpO1xuICAgIH1cbiAgICBDYWNoZUdyb3VwLnByb3RvdHlwZS5yZXNldENhY2hpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZCA9IHRoaXMuY2FjaGluZyA/IGRlcCgpIDogbnVsbDtcbiAgICAgICAgdGhpcy5rZXlNYWtlciA9IG5ldyBUcmllKGNhblVzZVdlYWtNYXApO1xuICAgIH07XG4gICAgQ2FjaGVHcm91cC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZCkge1xuICAgICAgICAgICAgdGhpcy5kKG1ha2VEZXBLZXkoZGF0YUlkLCBzdG9yZUZpZWxkTmFtZSkpO1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZSA9IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgaWYgKGZpZWxkTmFtZSAhPT0gc3RvcmVGaWVsZE5hbWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmQobWFrZURlcEtleShkYXRhSWQsIGZpZWxkTmFtZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGVwZW5kKGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBDYWNoZUdyb3VwLnByb3RvdHlwZS5kaXJ0eSA9IGZ1bmN0aW9uIChkYXRhSWQsIHN0b3JlRmllbGROYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLmQpIHtcbiAgICAgICAgICAgIHRoaXMuZC5kaXJ0eShtYWtlRGVwS2V5KGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpLCBzdG9yZUZpZWxkTmFtZSA9PT0gXCJfX2V4aXN0c1wiID8gXCJmb3JnZXRcIiA6IFwic2V0RGlydHlcIik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBDYWNoZUdyb3VwO1xufSgpKTtcbmZ1bmN0aW9uIG1ha2VEZXBLZXkoZGF0YUlkLCBzdG9yZUZpZWxkTmFtZSkge1xuICAgIHJldHVybiBzdG9yZUZpZWxkTmFtZSArICcjJyArIGRhdGFJZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXliZURlcGVuZE9uRXhpc3RlbmNlT2ZFbnRpdHkoc3RvcmUsIGVudGl0eUlkKSB7XG4gICAgaWYgKHN1cHBvcnRzUmVzdWx0Q2FjaGluZyhzdG9yZSkpIHtcbiAgICAgICAgc3RvcmUuZ3JvdXAuZGVwZW5kKGVudGl0eUlkLCBcIl9fZXhpc3RzXCIpO1xuICAgIH1cbn1cbihmdW5jdGlvbiAoRW50aXR5U3RvcmUpIHtcbiAgICB2YXIgUm9vdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhSb290LCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBSb290KF9hKSB7XG4gICAgICAgICAgICB2YXIgcG9saWNpZXMgPSBfYS5wb2xpY2llcywgX2IgPSBfYS5yZXN1bHRDYWNoaW5nLCByZXN1bHRDYWNoaW5nID0gX2IgPT09IHZvaWQgMCA/IHRydWUgOiBfYiwgc2VlZCA9IF9hLnNlZWQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwb2xpY2llcywgbmV3IENhY2hlR3JvdXAocmVzdWx0Q2FjaGluZykpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5zdHVtcCA9IG5ldyBTdHVtcChfdGhpcyk7XG4gICAgICAgICAgICBfdGhpcy5zdG9yYWdlVHJpZSA9IG5ldyBUcmllKGNhblVzZVdlYWtNYXApO1xuICAgICAgICAgICAgaWYgKHNlZWQpXG4gICAgICAgICAgICAgICAgX3RoaXMucmVwbGFjZShzZWVkKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBSb290LnByb3RvdHlwZS5hZGRMYXllciA9IGZ1bmN0aW9uIChsYXllcklkLCByZXBsYXkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0dW1wLmFkZExheWVyKGxheWVySWQsIHJlcGxheSk7XG4gICAgICAgIH07XG4gICAgICAgIFJvb3QucHJvdG90eXBlLnJlbW92ZUxheWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFJvb3QucHJvdG90eXBlLmdldFN0b3JhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdG9yYWdlVHJpZS5sb29rdXBBcnJheShhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUm9vdDtcbiAgICB9KEVudGl0eVN0b3JlKSk7XG4gICAgRW50aXR5U3RvcmUuUm9vdCA9IFJvb3Q7XG59KShFbnRpdHlTdG9yZSB8fCAoRW50aXR5U3RvcmUgPSB7fSkpO1xudmFyIExheWVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGF5ZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTGF5ZXIoaWQsIHBhcmVudCwgcmVwbGF5LCBncm91cCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQucG9saWNpZXMsIGdyb3VwKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5pZCA9IGlkO1xuICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIF90aGlzLnJlcGxheSA9IHJlcGxheTtcbiAgICAgICAgX3RoaXMuZ3JvdXAgPSBncm91cDtcbiAgICAgICAgcmVwbGF5KF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBMYXllci5wcm90b3R5cGUuYWRkTGF5ZXIgPSBmdW5jdGlvbiAobGF5ZXJJZCwgcmVwbGF5KSB7XG4gICAgICAgIHJldHVybiBuZXcgTGF5ZXIobGF5ZXJJZCwgdGhpcywgcmVwbGF5LCB0aGlzLmdyb3VwKTtcbiAgICB9O1xuICAgIExheWVyLnByb3RvdHlwZS5yZW1vdmVMYXllciA9IGZ1bmN0aW9uIChsYXllcklkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudC5yZW1vdmVMYXllcihsYXllcklkKTtcbiAgICAgICAgaWYgKGxheWVySWQgPT09IHRoaXMuaWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwLmNhY2hpbmcpIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGRhdGFJZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3duU3RvcmVPYmplY3QgPSBfdGhpcy5kYXRhW2RhdGFJZF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRTdG9yZU9iamVjdCA9IHBhcmVudFtcImxvb2t1cFwiXShkYXRhSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcmVudFN0b3JlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZWxldGUoZGF0YUlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghb3duU3RvcmVPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmdyb3VwLmRpcnR5KGRhdGFJZCwgXCJfX2V4aXN0c1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHBhcmVudFN0b3JlT2JqZWN0KS5mb3JFYWNoKGZ1bmN0aW9uIChzdG9yZUZpZWxkTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmdyb3VwLmRpcnR5KGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3duU3RvcmVPYmplY3QgIT09IHBhcmVudFN0b3JlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhvd25TdG9yZU9iamVjdCkuZm9yRWFjaChmdW5jdGlvbiAoc3RvcmVGaWVsZE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVxdWFsKG93blN0b3JlT2JqZWN0W3N0b3JlRmllbGROYW1lXSwgcGFyZW50U3RvcmVPYmplY3Rbc3RvcmVGaWVsZE5hbWVdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ncm91cC5kaXJ0eShkYXRhSWQsIHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyZW50ID09PSB0aGlzLnBhcmVudClcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICByZXR1cm4gcGFyZW50LmFkZExheWVyKHRoaXMuaWQsIHRoaXMucmVwbGF5KTtcbiAgICB9O1xuICAgIExheWVyLnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLnBhcmVudC50b09iamVjdCgpKSwgdGhpcy5kYXRhKTtcbiAgICB9O1xuICAgIExheWVyLnByb3RvdHlwZS5maW5kQ2hpbGRSZWZJZHMgPSBmdW5jdGlvbiAoZGF0YUlkKSB7XG4gICAgICAgIHZhciBmcm9tUGFyZW50ID0gdGhpcy5wYXJlbnQuZmluZENoaWxkUmVmSWRzKGRhdGFJZCk7XG4gICAgICAgIHJldHVybiBoYXNPd24uY2FsbCh0aGlzLmRhdGEsIGRhdGFJZCkgPyBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZnJvbVBhcmVudCksIF9zdXBlci5wcm90b3R5cGUuZmluZENoaWxkUmVmSWRzLmNhbGwodGhpcywgZGF0YUlkKSkgOiBmcm9tUGFyZW50O1xuICAgIH07XG4gICAgTGF5ZXIucHJvdG90eXBlLmdldFN0b3JhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgIHdoaWxlIChwLnBhcmVudClcbiAgICAgICAgICAgIHAgPSBwLnBhcmVudDtcbiAgICAgICAgcmV0dXJuIHAuZ2V0U3RvcmFnZS5hcHBseShwLCBhcmd1bWVudHMpO1xuICAgIH07XG4gICAgcmV0dXJuIExheWVyO1xufShFbnRpdHlTdG9yZSkpO1xudmFyIFN0dW1wID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3R1bXAsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3R1bXAocm9vdCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgXCJFbnRpdHlTdG9yZS5TdHVtcFwiLCByb290LCBmdW5jdGlvbiAoKSB7IH0sIG5ldyBDYWNoZUdyb3VwKHJvb3QuZ3JvdXAuY2FjaGluZywgcm9vdC5ncm91cCkpIHx8IHRoaXM7XG4gICAgfVxuICAgIFN0dW1wLnByb3RvdHlwZS5yZW1vdmVMYXllciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBTdHVtcC5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5tZXJnZS5hcHBseSh0aGlzLnBhcmVudCwgYXJndW1lbnRzKTtcbiAgICB9O1xuICAgIHJldHVybiBTdHVtcDtcbn0oTGF5ZXIpKTtcbmZ1bmN0aW9uIHN0b3JlT2JqZWN0UmVjb25jaWxlcihleGlzdGluZ09iamVjdCwgaW5jb21pbmdPYmplY3QsIHByb3BlcnR5KSB7XG4gICAgdmFyIGV4aXN0aW5nVmFsdWUgPSBleGlzdGluZ09iamVjdFtwcm9wZXJ0eV07XG4gICAgdmFyIGluY29taW5nVmFsdWUgPSBpbmNvbWluZ09iamVjdFtwcm9wZXJ0eV07XG4gICAgcmV0dXJuIGVxdWFsKGV4aXN0aW5nVmFsdWUsIGluY29taW5nVmFsdWUpID8gZXhpc3RpbmdWYWx1ZSA6IGluY29taW5nVmFsdWU7XG59XG5leHBvcnQgZnVuY3Rpb24gc3VwcG9ydHNSZXN1bHRDYWNoaW5nKHN0b3JlKSB7XG4gICAgcmV0dXJuICEhKHN0b3JlIGluc3RhbmNlb2YgRW50aXR5U3RvcmUgJiYgc3RvcmUuZ3JvdXAuY2FjaGluZyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbnRpdHlTdG9yZS5qcy5tYXAiLCJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IFwiLi4vLi4vdXRpbGl0aWVzL2dsb2JhbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IFRyaWUgfSBmcm9tIFwiQHdyeS90cmllXCI7XG5pbXBvcnQgeyBjYW5Vc2VXZWFrTWFwLCBjYW5Vc2VXZWFrU2V0LCBpc05vbk51bGxPYmplY3QgYXMgaXNPYmplY3RPckFycmF5LCB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGlzQXJyYXkgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5mdW5jdGlvbiBzaGFsbG93Q29weSh2YWx1ZSkge1xuICAgIGlmIChpc09iamVjdE9yQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBpc0FycmF5KHZhbHVlKVxuICAgICAgICAgICAgPyB2YWx1ZS5zbGljZSgwKVxuICAgICAgICAgICAgOiBfX2Fzc2lnbih7IF9fcHJvdG9fXzogT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKSB9LCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbnZhciBPYmplY3RDYW5vbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JqZWN0Q2Fub24oKSB7XG4gICAgICAgIHRoaXMua25vd24gPSBuZXcgKGNhblVzZVdlYWtTZXQgPyBXZWFrU2V0IDogU2V0KSgpO1xuICAgICAgICB0aGlzLnBvb2wgPSBuZXcgVHJpZShjYW5Vc2VXZWFrTWFwKTtcbiAgICAgICAgdGhpcy5wYXNzZXMgPSBuZXcgV2Vha01hcCgpO1xuICAgICAgICB0aGlzLmtleXNCeUpTT04gPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuZW1wdHkgPSB0aGlzLmFkbWl0KHt9KTtcbiAgICB9XG4gICAgT2JqZWN0Q2Fub24ucHJvdG90eXBlLmlzS25vd24gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGlzT2JqZWN0T3JBcnJheSh2YWx1ZSkgJiYgdGhpcy5rbm93bi5oYXModmFsdWUpO1xuICAgIH07XG4gICAgT2JqZWN0Q2Fub24ucHJvdG90eXBlLnBhc3MgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0T3JBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhciBjb3B5ID0gc2hhbGxvd0NvcHkodmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5wYXNzZXMuc2V0KGNvcHksIHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBjb3B5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIE9iamVjdENhbm9uLnByb3RvdHlwZS5hZG1pdCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoaXNPYmplY3RPckFycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgdmFyIG9yaWdpbmFsID0gdGhpcy5wYXNzZXMuZ2V0KHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChvcmlnaW5hbClcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWw7XG4gICAgICAgICAgICB2YXIgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpO1xuICAgICAgICAgICAgc3dpdGNoIChwcm90bykge1xuICAgICAgICAgICAgICAgIGNhc2UgQXJyYXkucHJvdG90eXBlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmtub3duLmhhcyh2YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IHZhbHVlLm1hcCh0aGlzLmFkbWl0LCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLnBvb2wubG9va3VwQXJyYXkoYXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUuYXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMua25vd24uYWRkKG5vZGUuYXJyYXkgPSBhcnJheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX19ERVZfXykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5mcmVlemUoYXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlLmFycmF5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIG51bGw6XG4gICAgICAgICAgICAgICAgY2FzZSBPYmplY3QucHJvdG90eXBlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmtub3duLmhhcyh2YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm90b18xID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5XzEgPSBbcHJvdG9fMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlzID0gdGhpcy5zb3J0ZWRLZXlzKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlfMS5wdXNoKGtleXMuanNvbik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdFZhbHVlSW5kZXhfMSA9IGFycmF5XzEubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBrZXlzLnNvcnRlZC5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5XzEucHVzaChfdGhpcy5hZG1pdCh2YWx1ZVtrZXldKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMucG9vbC5sb29rdXBBcnJheShhcnJheV8xKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFub2RlLm9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9ial8xID0gbm9kZS5vYmplY3QgPSBPYmplY3QuY3JlYXRlKHByb3RvXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5rbm93bi5hZGQob2JqXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5cy5zb3J0ZWQuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqXzFba2V5XSA9IGFycmF5XzFbZmlyc3RWYWx1ZUluZGV4XzEgKyBpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9fREVWX18pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZnJlZXplKG9ial8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5vYmplY3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIE9iamVjdENhbm9uLnByb3RvdHlwZS5zb3J0ZWRLZXlzID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gICAgICAgIHZhciBub2RlID0gdGhpcy5wb29sLmxvb2t1cEFycmF5KGtleXMpO1xuICAgICAgICBpZiAoIW5vZGUua2V5cykge1xuICAgICAgICAgICAga2V5cy5zb3J0KCk7XG4gICAgICAgICAgICB2YXIganNvbiA9IEpTT04uc3RyaW5naWZ5KGtleXMpO1xuICAgICAgICAgICAgaWYgKCEobm9kZS5rZXlzID0gdGhpcy5rZXlzQnlKU09OLmdldChqc29uKSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtleXNCeUpTT04uc2V0KGpzb24sIG5vZGUua2V5cyA9IHsgc29ydGVkOiBrZXlzLCBqc29uOiBqc29uIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlLmtleXM7XG4gICAgfTtcbiAgICByZXR1cm4gT2JqZWN0Q2Fub247XG59KCkpO1xuZXhwb3J0IHsgT2JqZWN0Q2Fub24gfTtcbmV4cG9ydCB2YXIgY2Fub25pY2FsU3RyaW5naWZ5ID0gT2JqZWN0LmFzc2lnbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAoaXNPYmplY3RPckFycmF5KHZhbHVlKSkge1xuICAgICAgICBpZiAoc3RyaW5naWZ5Q2Fub24gPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmVzZXRDYW5vbmljYWxTdHJpbmdpZnkoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2Fub25pY2FsID0gc3RyaW5naWZ5Q2Fub24uYWRtaXQodmFsdWUpO1xuICAgICAgICB2YXIganNvbiA9IHN0cmluZ2lmeUNhY2hlLmdldChjYW5vbmljYWwpO1xuICAgICAgICBpZiAoanNvbiA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBzdHJpbmdpZnlDYWNoZS5zZXQoY2Fub25pY2FsLCBqc29uID0gSlNPTi5zdHJpbmdpZnkoY2Fub25pY2FsKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGpzb247XG4gICAgfVxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG59LCB7XG4gICAgcmVzZXQ6IHJlc2V0Q2Fub25pY2FsU3RyaW5naWZ5LFxufSk7XG52YXIgc3RyaW5naWZ5Q2Fub247XG52YXIgc3RyaW5naWZ5Q2FjaGU7XG5mdW5jdGlvbiByZXNldENhbm9uaWNhbFN0cmluZ2lmeSgpIHtcbiAgICBzdHJpbmdpZnlDYW5vbiA9IG5ldyBPYmplY3RDYW5vbjtcbiAgICBzdHJpbmdpZnlDYWNoZSA9IG5ldyAoY2FuVXNlV2Vha01hcCA/IFdlYWtNYXAgOiBNYXApKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYmplY3QtY2Fub24uanMubWFwIiwiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGludmFyaWFudCwgSW52YXJpYW50RXJyb3IgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2dsb2JhbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IEtpbmQsIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyB3cmFwIH0gZnJvbSAnb3B0aW1pc20nO1xuaW1wb3J0IHsgaXNGaWVsZCwgcmVzdWx0S2V5TmFtZUZyb21GaWVsZCwgaXNSZWZlcmVuY2UsIG1ha2VSZWZlcmVuY2UsIHNob3VsZEluY2x1ZGUsIGFkZFR5cGVuYW1lVG9Eb2N1bWVudCwgZ2V0RGVmYXVsdFZhbHVlcywgZ2V0TWFpbkRlZmluaXRpb24sIGdldFF1ZXJ5RGVmaW5pdGlvbiwgZ2V0RnJhZ21lbnRGcm9tU2VsZWN0aW9uLCBtYXliZURlZXBGcmVlemUsIG1lcmdlRGVlcEFycmF5LCBEZWVwTWVyZ2VyLCBpc05vbk51bGxPYmplY3QsIGNhblVzZVdlYWtNYXAsIGNvbXBhY3QsIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgbWF5YmVEZXBlbmRPbkV4aXN0ZW5jZU9mRW50aXR5LCBzdXBwb3J0c1Jlc3VsdENhY2hpbmcgfSBmcm9tIFwiLi9lbnRpdHlTdG9yZS5qc1wiO1xuaW1wb3J0IHsgaXNBcnJheSwgZXh0cmFjdEZyYWdtZW50Q29udGV4dCwgZ2V0VHlwZW5hbWVGcm9tU3RvcmVPYmplY3QsIHNob3VsZENhbm9uaXplUmVzdWx0cyB9IGZyb20gXCIuL2hlbHBlcnMuanNcIjtcbmltcG9ydCB7IE1pc3NpbmdGaWVsZEVycm9yIH0gZnJvbSBcIi4uL2NvcmUvdHlwZXMvY29tbW9uLmpzXCI7XG5pbXBvcnQgeyBjYW5vbmljYWxTdHJpbmdpZnksIE9iamVjdENhbm9uIH0gZnJvbSBcIi4vb2JqZWN0LWNhbm9uLmpzXCI7XG47XG5mdW5jdGlvbiBleGVjU2VsZWN0aW9uU2V0S2V5QXJncyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25TZXQsXG4gICAgICAgIG9wdGlvbnMub2JqZWN0T3JSZWZlcmVuY2UsXG4gICAgICAgIG9wdGlvbnMuY29udGV4dCxcbiAgICAgICAgb3B0aW9ucy5jb250ZXh0LmNhbm9uaXplUmVzdWx0cyxcbiAgICBdO1xufVxudmFyIFN0b3JlUmVhZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdG9yZVJlYWRlcihjb25maWcpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5rbm93blJlc3VsdHMgPSBuZXcgKGNhblVzZVdlYWtNYXAgPyBXZWFrTWFwIDogTWFwKSgpO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbXBhY3QoY29uZmlnLCB7XG4gICAgICAgICAgICBhZGRUeXBlbmFtZTogY29uZmlnLmFkZFR5cGVuYW1lICE9PSBmYWxzZSxcbiAgICAgICAgICAgIGNhbm9uaXplUmVzdWx0czogc2hvdWxkQ2Fub25pemVSZXN1bHRzKGNvbmZpZyksXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNhbm9uID0gY29uZmlnLmNhbm9uIHx8IG5ldyBPYmplY3RDYW5vbjtcbiAgICAgICAgdGhpcy5leGVjdXRlU2VsZWN0aW9uU2V0ID0gd3JhcChmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgdmFyIGNhbm9uaXplUmVzdWx0cyA9IG9wdGlvbnMuY29udGV4dC5jYW5vbml6ZVJlc3VsdHM7XG4gICAgICAgICAgICB2YXIgcGVla0FyZ3MgPSBleGVjU2VsZWN0aW9uU2V0S2V5QXJncyhvcHRpb25zKTtcbiAgICAgICAgICAgIHBlZWtBcmdzWzNdID0gIWNhbm9uaXplUmVzdWx0cztcbiAgICAgICAgICAgIHZhciBvdGhlciA9IChfYSA9IF90aGlzLmV4ZWN1dGVTZWxlY3Rpb25TZXQpLnBlZWsuYXBwbHkoX2EsIHBlZWtBcmdzKTtcbiAgICAgICAgICAgIGlmIChvdGhlcikge1xuICAgICAgICAgICAgICAgIGlmIChjYW5vbml6ZVJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBvdGhlciksIHsgcmVzdWx0OiBfdGhpcy5jYW5vbi5hZG1pdChvdGhlci5yZXN1bHQpIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb3RoZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXliZURlcGVuZE9uRXhpc3RlbmNlT2ZFbnRpdHkob3B0aW9ucy5jb250ZXh0LnN0b3JlLCBvcHRpb25zLmVuY2xvc2luZ1JlZi5fX3JlZik7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZXhlY1NlbGVjdGlvblNldEltcGwob3B0aW9ucyk7XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1heDogdGhpcy5jb25maWcucmVzdWx0Q2FjaGVNYXhTaXplLFxuICAgICAgICAgICAga2V5QXJnczogZXhlY1NlbGVjdGlvblNldEtleUFyZ3MsXG4gICAgICAgICAgICBtYWtlQ2FjaGVLZXk6IGZ1bmN0aW9uIChzZWxlY3Rpb25TZXQsIHBhcmVudCwgY29udGV4dCwgY2Fub25pemVSZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1cHBvcnRzUmVzdWx0Q2FjaGluZyhjb250ZXh0LnN0b3JlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5zdG9yZS5tYWtlQ2FjaGVLZXkoc2VsZWN0aW9uU2V0LCBpc1JlZmVyZW5jZShwYXJlbnQpID8gcGFyZW50Ll9fcmVmIDogcGFyZW50LCBjb250ZXh0LnZhclN0cmluZywgY2Fub25pemVSZXN1bHRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5ID0gd3JhcChmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgbWF5YmVEZXBlbmRPbkV4aXN0ZW5jZU9mRW50aXR5KG9wdGlvbnMuY29udGV4dC5zdG9yZSwgb3B0aW9ucy5lbmNsb3NpbmdSZWYuX19yZWYpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmV4ZWNTdWJTZWxlY3RlZEFycmF5SW1wbChvcHRpb25zKTtcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbWF4OiB0aGlzLmNvbmZpZy5yZXN1bHRDYWNoZU1heFNpemUsXG4gICAgICAgICAgICBtYWtlQ2FjaGVLZXk6IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9IF9hLmZpZWxkLCBhcnJheSA9IF9hLmFycmF5LCBjb250ZXh0ID0gX2EuY29udGV4dDtcbiAgICAgICAgICAgICAgICBpZiAoc3VwcG9ydHNSZXN1bHRDYWNoaW5nKGNvbnRleHQuc3RvcmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnN0b3JlLm1ha2VDYWNoZUtleShmaWVsZCwgYXJyYXksIGNvbnRleHQudmFyU3RyaW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBTdG9yZVJlYWRlci5wcm90b3R5cGUucmVzZXRDYW5vbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jYW5vbiA9IG5ldyBPYmplY3RDYW5vbjtcbiAgICB9O1xuICAgIFN0b3JlUmVhZGVyLnByb3RvdHlwZS5kaWZmUXVlcnlBZ2FpbnN0U3RvcmUgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHN0b3JlID0gX2Euc3RvcmUsIHF1ZXJ5ID0gX2EucXVlcnksIF9iID0gX2Eucm9vdElkLCByb290SWQgPSBfYiA9PT0gdm9pZCAwID8gJ1JPT1RfUVVFUlknIDogX2IsIHZhcmlhYmxlcyA9IF9hLnZhcmlhYmxlcywgX2MgPSBfYS5yZXR1cm5QYXJ0aWFsRGF0YSwgcmV0dXJuUGFydGlhbERhdGEgPSBfYyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9jLCBfZCA9IF9hLmNhbm9uaXplUmVzdWx0cywgY2Fub25pemVSZXN1bHRzID0gX2QgPT09IHZvaWQgMCA/IHRoaXMuY29uZmlnLmNhbm9uaXplUmVzdWx0cyA6IF9kO1xuICAgICAgICB2YXIgcG9saWNpZXMgPSB0aGlzLmNvbmZpZy5jYWNoZS5wb2xpY2llcztcbiAgICAgICAgdmFyaWFibGVzID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGdldERlZmF1bHRWYWx1ZXMoZ2V0UXVlcnlEZWZpbml0aW9uKHF1ZXJ5KSkpLCB2YXJpYWJsZXMpO1xuICAgICAgICB2YXIgcm9vdFJlZiA9IG1ha2VSZWZlcmVuY2Uocm9vdElkKTtcbiAgICAgICAgdmFyIGV4ZWNSZXN1bHQgPSB0aGlzLmV4ZWN1dGVTZWxlY3Rpb25TZXQoe1xuICAgICAgICAgICAgc2VsZWN0aW9uU2V0OiBnZXRNYWluRGVmaW5pdGlvbihxdWVyeSkuc2VsZWN0aW9uU2V0LFxuICAgICAgICAgICAgb2JqZWN0T3JSZWZlcmVuY2U6IHJvb3RSZWYsXG4gICAgICAgICAgICBlbmNsb3NpbmdSZWY6IHJvb3RSZWYsXG4gICAgICAgICAgICBjb250ZXh0OiBfX2Fzc2lnbih7IHN0b3JlOiBzdG9yZSwgcXVlcnk6IHF1ZXJ5LCBwb2xpY2llczogcG9saWNpZXMsIHZhcmlhYmxlczogdmFyaWFibGVzLCB2YXJTdHJpbmc6IGNhbm9uaWNhbFN0cmluZ2lmeSh2YXJpYWJsZXMpLCBjYW5vbml6ZVJlc3VsdHM6IGNhbm9uaXplUmVzdWx0cyB9LCBleHRyYWN0RnJhZ21lbnRDb250ZXh0KHF1ZXJ5LCB0aGlzLmNvbmZpZy5mcmFnbWVudHMpKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBtaXNzaW5nO1xuICAgICAgICBpZiAoZXhlY1Jlc3VsdC5taXNzaW5nKSB7XG4gICAgICAgICAgICBtaXNzaW5nID0gW25ldyBNaXNzaW5nRmllbGRFcnJvcihmaXJzdE1pc3NpbmcoZXhlY1Jlc3VsdC5taXNzaW5nKSwgZXhlY1Jlc3VsdC5taXNzaW5nLCBxdWVyeSwgdmFyaWFibGVzKV07XG4gICAgICAgICAgICBpZiAoIXJldHVyblBhcnRpYWxEYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbWlzc2luZ1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdWx0OiBleGVjUmVzdWx0LnJlc3VsdCxcbiAgICAgICAgICAgIGNvbXBsZXRlOiAhbWlzc2luZyxcbiAgICAgICAgICAgIG1pc3Npbmc6IG1pc3NpbmcsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBTdG9yZVJlYWRlci5wcm90b3R5cGUuaXNGcmVzaCA9IGZ1bmN0aW9uIChyZXN1bHQsIHBhcmVudCwgc2VsZWN0aW9uU2V0LCBjb250ZXh0KSB7XG4gICAgICAgIGlmIChzdXBwb3J0c1Jlc3VsdENhY2hpbmcoY29udGV4dC5zdG9yZSkgJiZcbiAgICAgICAgICAgIHRoaXMua25vd25SZXN1bHRzLmdldChyZXN1bHQpID09PSBzZWxlY3Rpb25TZXQpIHtcbiAgICAgICAgICAgIHZhciBsYXRlc3QgPSB0aGlzLmV4ZWN1dGVTZWxlY3Rpb25TZXQucGVlayhzZWxlY3Rpb25TZXQsIHBhcmVudCwgY29udGV4dCwgdGhpcy5jYW5vbi5pc0tub3duKHJlc3VsdCkpO1xuICAgICAgICAgICAgaWYgKGxhdGVzdCAmJiByZXN1bHQgPT09IGxhdGVzdC5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBTdG9yZVJlYWRlci5wcm90b3R5cGUuZXhlY1NlbGVjdGlvblNldEltcGwgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHNlbGVjdGlvblNldCA9IF9hLnNlbGVjdGlvblNldCwgb2JqZWN0T3JSZWZlcmVuY2UgPSBfYS5vYmplY3RPclJlZmVyZW5jZSwgZW5jbG9zaW5nUmVmID0gX2EuZW5jbG9zaW5nUmVmLCBjb250ZXh0ID0gX2EuY29udGV4dDtcbiAgICAgICAgaWYgKGlzUmVmZXJlbmNlKG9iamVjdE9yUmVmZXJlbmNlKSAmJlxuICAgICAgICAgICAgIWNvbnRleHQucG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWRbb2JqZWN0T3JSZWZlcmVuY2UuX19yZWZdICYmXG4gICAgICAgICAgICAhY29udGV4dC5zdG9yZS5oYXMob2JqZWN0T3JSZWZlcmVuY2UuX19yZWYpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJlc3VsdDogdGhpcy5jYW5vbi5lbXB0eSxcbiAgICAgICAgICAgICAgICBtaXNzaW5nOiBcIkRhbmdsaW5nIHJlZmVyZW5jZSB0byBtaXNzaW5nIFwiLmNvbmNhdChvYmplY3RPclJlZmVyZW5jZS5fX3JlZiwgXCIgb2JqZWN0XCIpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdmFyaWFibGVzID0gY29udGV4dC52YXJpYWJsZXMsIHBvbGljaWVzID0gY29udGV4dC5wb2xpY2llcywgc3RvcmUgPSBjb250ZXh0LnN0b3JlO1xuICAgICAgICB2YXIgdHlwZW5hbWUgPSBzdG9yZS5nZXRGaWVsZFZhbHVlKG9iamVjdE9yUmVmZXJlbmNlLCBcIl9fdHlwZW5hbWVcIik7XG4gICAgICAgIHZhciBvYmplY3RzVG9NZXJnZSA9IFtdO1xuICAgICAgICB2YXIgbWlzc2luZztcbiAgICAgICAgdmFyIG1pc3NpbmdNZXJnZXIgPSBuZXcgRGVlcE1lcmdlcigpO1xuICAgICAgICBpZiAodGhpcy5jb25maWcuYWRkVHlwZW5hbWUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0eXBlbmFtZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgIXBvbGljaWVzLnJvb3RJZHNCeVR5cGVuYW1lW3R5cGVuYW1lXSkge1xuICAgICAgICAgICAgb2JqZWN0c1RvTWVyZ2UucHVzaCh7IF9fdHlwZW5hbWU6IHR5cGVuYW1lIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZU1pc3NpbmcocmVzdWx0LCByZXN1bHROYW1lKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBpZiAocmVzdWx0Lm1pc3NpbmcpIHtcbiAgICAgICAgICAgICAgICBtaXNzaW5nID0gbWlzc2luZ01lcmdlci5tZXJnZShtaXNzaW5nLCAoX2EgPSB7fSwgX2FbcmVzdWx0TmFtZV0gPSByZXN1bHQubWlzc2luZywgX2EpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHZhciB3b3JrU2V0ID0gbmV3IFNldChzZWxlY3Rpb25TZXQuc2VsZWN0aW9ucyk7XG4gICAgICAgIHdvcmtTZXQuZm9yRWFjaChmdW5jdGlvbiAoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgaWYgKCFzaG91bGRJbmNsdWRlKHNlbGVjdGlvbiwgdmFyaWFibGVzKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAoaXNGaWVsZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkVmFsdWUgPSBwb2xpY2llcy5yZWFkRmllbGQoe1xuICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWU6IHNlbGVjdGlvbi5uYW1lLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZDogc2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IGNvbnRleHQudmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBvYmplY3RPclJlZmVyZW5jZSxcbiAgICAgICAgICAgICAgICB9LCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0TmFtZSA9IHJlc3VsdEtleU5hbWVGcm9tRmllbGQoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGRWYWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYWRkVHlwZW5hbWVUb0RvY3VtZW50LmFkZGVkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pc3NpbmcgPSBtaXNzaW5nTWVyZ2VyLm1lcmdlKG1pc3NpbmcsIChfYSA9IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hW3Jlc3VsdE5hbWVdID0gXCJDYW4ndCBmaW5kIGZpZWxkICdcIi5jb25jYXQoc2VsZWN0aW9uLm5hbWUudmFsdWUsIFwiJyBvbiBcIikuY29uY2F0KGlzUmVmZXJlbmNlKG9iamVjdE9yUmVmZXJlbmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG9iamVjdE9yUmVmZXJlbmNlLl9fcmVmICsgXCIgb2JqZWN0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIm9iamVjdCBcIiArIEpTT04uc3RyaW5naWZ5KG9iamVjdE9yUmVmZXJlbmNlLCBudWxsLCAyKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0FycmF5KGZpZWxkVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWUgPSBoYW5kbGVNaXNzaW5nKF90aGlzLmV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiBzZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheTogZmllbGRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuY2xvc2luZ1JlZjogZW5jbG9zaW5nUmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgfSksIHJlc3VsdE5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghc2VsZWN0aW9uLnNlbGVjdGlvblNldCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5jYW5vbml6ZVJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWUgPSBfdGhpcy5jYW5vbi5wYXNzKGZpZWxkVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZpZWxkVmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gaGFuZGxlTWlzc2luZyhfdGhpcy5leGVjdXRlU2VsZWN0aW9uU2V0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvblNldDogc2VsZWN0aW9uLnNlbGVjdGlvblNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdE9yUmVmZXJlbmNlOiBmaWVsZFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5jbG9zaW5nUmVmOiBpc1JlZmVyZW5jZShmaWVsZFZhbHVlKSA/IGZpZWxkVmFsdWUgOiBlbmNsb3NpbmdSZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICB9KSwgcmVzdWx0TmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaWVsZFZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0c1RvTWVyZ2UucHVzaCgoX2IgPSB7fSwgX2JbcmVzdWx0TmFtZV0gPSBmaWVsZFZhbHVlLCBfYikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBmcmFnbWVudCA9IGdldEZyYWdtZW50RnJvbVNlbGVjdGlvbihzZWxlY3Rpb24sIGNvbnRleHQubG9va3VwRnJhZ21lbnQpO1xuICAgICAgICAgICAgICAgIGlmICghZnJhZ21lbnQgJiYgc2VsZWN0aW9uLmtpbmQgPT09IEtpbmQuRlJBR01FTlRfU1BSRUFEKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IF9fREVWX18gPyBuZXcgSW52YXJpYW50RXJyb3IoXCJObyBmcmFnbWVudCBuYW1lZCBcIi5jb25jYXQoc2VsZWN0aW9uLm5hbWUudmFsdWUpKSA6IG5ldyBJbnZhcmlhbnRFcnJvcig1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZyYWdtZW50ICYmIHBvbGljaWVzLmZyYWdtZW50TWF0Y2hlcyhmcmFnbWVudCwgdHlwZW5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50LnNlbGVjdGlvblNldC5zZWxlY3Rpb25zLmZvckVhY2god29ya1NldC5hZGQsIHdvcmtTZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciByZXN1bHQgPSBtZXJnZURlZXBBcnJheShvYmplY3RzVG9NZXJnZSk7XG4gICAgICAgIHZhciBmaW5hbFJlc3VsdCA9IHsgcmVzdWx0OiByZXN1bHQsIG1pc3Npbmc6IG1pc3NpbmcgfTtcbiAgICAgICAgdmFyIGZyb3plbiA9IGNvbnRleHQuY2Fub25pemVSZXN1bHRzXG4gICAgICAgICAgICA/IHRoaXMuY2Fub24uYWRtaXQoZmluYWxSZXN1bHQpXG4gICAgICAgICAgICA6IG1heWJlRGVlcEZyZWV6ZShmaW5hbFJlc3VsdCk7XG4gICAgICAgIGlmIChmcm96ZW4ucmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmtub3duUmVzdWx0cy5zZXQoZnJvemVuLnJlc3VsdCwgc2VsZWN0aW9uU2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnJvemVuO1xuICAgIH07XG4gICAgU3RvcmVSZWFkZXIucHJvdG90eXBlLmV4ZWNTdWJTZWxlY3RlZEFycmF5SW1wbCA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgZmllbGQgPSBfYS5maWVsZCwgYXJyYXkgPSBfYS5hcnJheSwgZW5jbG9zaW5nUmVmID0gX2EuZW5jbG9zaW5nUmVmLCBjb250ZXh0ID0gX2EuY29udGV4dDtcbiAgICAgICAgdmFyIG1pc3Npbmc7XG4gICAgICAgIHZhciBtaXNzaW5nTWVyZ2VyID0gbmV3IERlZXBNZXJnZXIoKTtcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlTWlzc2luZyhjaGlsZFJlc3VsdCwgaSkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgaWYgKGNoaWxkUmVzdWx0Lm1pc3NpbmcpIHtcbiAgICAgICAgICAgICAgICBtaXNzaW5nID0gbWlzc2luZ01lcmdlci5tZXJnZShtaXNzaW5nLCAoX2EgPSB7fSwgX2FbaV0gPSBjaGlsZFJlc3VsdC5taXNzaW5nLCBfYSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkUmVzdWx0LnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmllbGQuc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgICAgICBhcnJheSA9IGFycmF5LmZpbHRlcihjb250ZXh0LnN0b3JlLmNhblJlYWQpO1xuICAgICAgICB9XG4gICAgICAgIGFycmF5ID0gYXJyYXkubWFwKGZ1bmN0aW9uIChpdGVtLCBpKSB7XG4gICAgICAgICAgICBpZiAoaXRlbSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQXJyYXkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlTWlzc2luZyhfdGhpcy5leGVjdXRlU3ViU2VsZWN0ZWRBcnJheSh7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgYXJyYXk6IGl0ZW0sXG4gICAgICAgICAgICAgICAgICAgIGVuY2xvc2luZ1JlZjogZW5jbG9zaW5nUmVmLFxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICAgICAgICAgIH0pLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaWVsZC5zZWxlY3Rpb25TZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlTWlzc2luZyhfdGhpcy5leGVjdXRlU2VsZWN0aW9uU2V0KHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uU2V0OiBmaWVsZC5zZWxlY3Rpb25TZXQsXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdE9yUmVmZXJlbmNlOiBpdGVtLFxuICAgICAgICAgICAgICAgICAgICBlbmNsb3NpbmdSZWY6IGlzUmVmZXJlbmNlKGl0ZW0pID8gaXRlbSA6IGVuY2xvc2luZ1JlZixcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgICAgICAgICB9KSwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX19ERVZfXykge1xuICAgICAgICAgICAgICAgIGFzc2VydFNlbGVjdGlvblNldEZvcklkVmFsdWUoY29udGV4dC5zdG9yZSwgZmllbGQsIGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdWx0OiBjb250ZXh0LmNhbm9uaXplUmVzdWx0cyA/IHRoaXMuY2Fub24uYWRtaXQoYXJyYXkpIDogYXJyYXksXG4gICAgICAgICAgICBtaXNzaW5nOiBtaXNzaW5nLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIFN0b3JlUmVhZGVyO1xufSgpKTtcbmV4cG9ydCB7IFN0b3JlUmVhZGVyIH07XG5mdW5jdGlvbiBmaXJzdE1pc3NpbmcodHJlZSkge1xuICAgIHRyeSB7XG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHRyZWUsIGZ1bmN0aW9uIChfLCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICB0aHJvdyB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChyZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5mdW5jdGlvbiBhc3NlcnRTZWxlY3Rpb25TZXRGb3JJZFZhbHVlKHN0b3JlLCBmaWVsZCwgZmllbGRWYWx1ZSkge1xuICAgIGlmICghZmllbGQuc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgIHZhciB3b3JrU2V0XzEgPSBuZXcgU2V0KFtmaWVsZFZhbHVlXSk7XG4gICAgICAgIHdvcmtTZXRfMS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGlzTm9uTnVsbE9iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBfX0RFVl9fID8gaW52YXJpYW50KCFpc1JlZmVyZW5jZSh2YWx1ZSksIFwiTWlzc2luZyBzZWxlY3Rpb24gc2V0IGZvciBvYmplY3Qgb2YgdHlwZSBcIi5jb25jYXQoZ2V0VHlwZW5hbWVGcm9tU3RvcmVPYmplY3Qoc3RvcmUsIHZhbHVlKSwgXCIgcmV0dXJuZWQgZm9yIHF1ZXJ5IGZpZWxkIFwiKS5jb25jYXQoZmllbGQubmFtZS52YWx1ZSkpIDogaW52YXJpYW50KCFpc1JlZmVyZW5jZSh2YWx1ZSksIDYpO1xuICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXModmFsdWUpLmZvckVhY2god29ya1NldF8xLmFkZCwgd29ya1NldF8xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhZEZyb21TdG9yZS5qcy5tYXAiLCJpbXBvcnQgeyBkZXAgfSBmcm9tIFwib3B0aW1pc21cIjtcbmltcG9ydCB7IFNsb3QgfSBmcm9tIFwiQHdyeS9jb250ZXh0XCI7XG5leHBvcnQgdmFyIGNhY2hlU2xvdCA9IG5ldyBTbG90KCk7XG52YXIgY2FjaGVJbmZvTWFwID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIGdldENhY2hlSW5mbyhjYWNoZSkge1xuICAgIHZhciBpbmZvID0gY2FjaGVJbmZvTWFwLmdldChjYWNoZSk7XG4gICAgaWYgKCFpbmZvKSB7XG4gICAgICAgIGNhY2hlSW5mb01hcC5zZXQoY2FjaGUsIGluZm8gPSB7XG4gICAgICAgICAgICB2YXJzOiBuZXcgU2V0LFxuICAgICAgICAgICAgZGVwOiBkZXAoKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBpbmZvO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvcmdldENhY2hlKGNhY2hlKSB7XG4gICAgZ2V0Q2FjaGVJbmZvKGNhY2hlKS52YXJzLmZvckVhY2goZnVuY3Rpb24gKHJ2KSB7IHJldHVybiBydi5mb3JnZXRDYWNoZShjYWNoZSk7IH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlY2FsbENhY2hlKGNhY2hlKSB7XG4gICAgZ2V0Q2FjaGVJbmZvKGNhY2hlKS52YXJzLmZvckVhY2goZnVuY3Rpb24gKHJ2KSB7IHJldHVybiBydi5hdHRhY2hDYWNoZShjYWNoZSk7IH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VWYXIodmFsdWUpIHtcbiAgICB2YXIgY2FjaGVzID0gbmV3IFNldCgpO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBuZXcgU2V0KCk7XG4gICAgdmFyIHJ2ID0gZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgY2FjaGVzLmZvckVhY2goZnVuY3Rpb24gKGNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIGdldENhY2hlSW5mbyhjYWNoZSkuZGVwLmRpcnR5KHJ2KTtcbiAgICAgICAgICAgICAgICAgICAgYnJvYWRjYXN0KGNhY2hlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgb2xkTGlzdGVuZXJzID0gQXJyYXkuZnJvbShsaXN0ZW5lcnMpO1xuICAgICAgICAgICAgICAgIGxpc3RlbmVycy5jbGVhcigpO1xuICAgICAgICAgICAgICAgIG9sZExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgeyByZXR1cm4gbGlzdGVuZXIodmFsdWUpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBjYWNoZSA9IGNhY2hlU2xvdC5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgICAgICAgICAgYXR0YWNoKGNhY2hlKTtcbiAgICAgICAgICAgICAgICBnZXRDYWNoZUluZm8oY2FjaGUpLmRlcChydik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgcnYub25OZXh0Q2hhbmdlID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gICAgICAgIGxpc3RlbmVycy5hZGQobGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICB2YXIgYXR0YWNoID0gcnYuYXR0YWNoQ2FjaGUgPSBmdW5jdGlvbiAoY2FjaGUpIHtcbiAgICAgICAgY2FjaGVzLmFkZChjYWNoZSk7XG4gICAgICAgIGdldENhY2hlSW5mbyhjYWNoZSkudmFycy5hZGQocnYpO1xuICAgICAgICByZXR1cm4gcnY7XG4gICAgfTtcbiAgICBydi5mb3JnZXRDYWNoZSA9IGZ1bmN0aW9uIChjYWNoZSkgeyByZXR1cm4gY2FjaGVzLmRlbGV0ZShjYWNoZSk7IH07XG4gICAgcmV0dXJuIHJ2O1xufVxuZnVuY3Rpb24gYnJvYWRjYXN0KGNhY2hlKSB7XG4gICAgaWYgKGNhY2hlLmJyb2FkY2FzdFdhdGNoZXMpIHtcbiAgICAgICAgY2FjaGUuYnJvYWRjYXN0V2F0Y2hlcygpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWN0aXZlVmFycy5qcy5tYXAiLCJpbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2dsb2JhbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IGFyZ3VtZW50c09iamVjdEZyb21GaWVsZCwgRGVlcE1lcmdlciwgaXNOb25FbXB0eUFycmF5LCBpc05vbk51bGxPYmplY3QsIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgaGFzT3duLCBpc0FycmF5IH0gZnJvbSBcIi4vaGVscGVycy5qc1wiO1xudmFyIHNwZWNpZmllckluZm9DYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5mdW5jdGlvbiBsb29rdXBTcGVjaWZpZXJJbmZvKHNwZWMpIHtcbiAgICB2YXIgY2FjaGVLZXkgPSBKU09OLnN0cmluZ2lmeShzcGVjKTtcbiAgICByZXR1cm4gc3BlY2lmaWVySW5mb0NhY2hlW2NhY2hlS2V5XSB8fFxuICAgICAgICAoc3BlY2lmaWVySW5mb0NhY2hlW2NhY2hlS2V5XSA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGtleUZpZWxkc0ZuRnJvbVNwZWNpZmllcihzcGVjaWZpZXIpIHtcbiAgICB2YXIgaW5mbyA9IGxvb2t1cFNwZWNpZmllckluZm8oc3BlY2lmaWVyKTtcbiAgICByZXR1cm4gaW5mby5rZXlGaWVsZHNGbiB8fCAoaW5mby5rZXlGaWVsZHNGbiA9IGZ1bmN0aW9uIChvYmplY3QsIGNvbnRleHQpIHtcbiAgICAgICAgdmFyIGV4dHJhY3QgPSBmdW5jdGlvbiAoZnJvbSwga2V5KSB7IHJldHVybiBjb250ZXh0LnJlYWRGaWVsZChrZXksIGZyb20pOyB9O1xuICAgICAgICB2YXIga2V5T2JqZWN0ID0gY29udGV4dC5rZXlPYmplY3QgPSBjb2xsZWN0U3BlY2lmaWVyUGF0aHMoc3BlY2lmaWVyLCBmdW5jdGlvbiAoc2NoZW1hS2V5UGF0aCkge1xuICAgICAgICAgICAgdmFyIGV4dHJhY3RlZCA9IGV4dHJhY3RLZXlQYXRoKGNvbnRleHQuc3RvcmVPYmplY3QsIHNjaGVtYUtleVBhdGgsIGV4dHJhY3QpO1xuICAgICAgICAgICAgaWYgKGV4dHJhY3RlZCA9PT0gdm9pZCAwICYmXG4gICAgICAgICAgICAgICAgb2JqZWN0ICE9PSBjb250ZXh0LnN0b3JlT2JqZWN0ICYmXG4gICAgICAgICAgICAgICAgaGFzT3duLmNhbGwob2JqZWN0LCBzY2hlbWFLZXlQYXRoWzBdKSkge1xuICAgICAgICAgICAgICAgIGV4dHJhY3RlZCA9IGV4dHJhY3RLZXlQYXRoKG9iamVjdCwgc2NoZW1hS2V5UGF0aCwgZXh0cmFjdEtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfX0RFVl9fID8gaW52YXJpYW50KGV4dHJhY3RlZCAhPT0gdm9pZCAwLCBcIk1pc3NpbmcgZmllbGQgJ1wiLmNvbmNhdChzY2hlbWFLZXlQYXRoLmpvaW4oJy4nKSwgXCInIHdoaWxlIGV4dHJhY3Rpbmcga2V5RmllbGRzIGZyb20gXCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShvYmplY3QpKSkgOiBpbnZhcmlhbnQoZXh0cmFjdGVkICE9PSB2b2lkIDAsIDIpO1xuICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RlZDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBcIlwiLmNvbmNhdChjb250ZXh0LnR5cGVuYW1lLCBcIjpcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KGtleU9iamVjdCkpO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGtleUFyZ3NGbkZyb21TcGVjaWZpZXIoc3BlY2lmaWVyKSB7XG4gICAgdmFyIGluZm8gPSBsb29rdXBTcGVjaWZpZXJJbmZvKHNwZWNpZmllcik7XG4gICAgcmV0dXJuIGluZm8ua2V5QXJnc0ZuIHx8IChpbmZvLmtleUFyZ3NGbiA9IGZ1bmN0aW9uIChhcmdzLCBfYSkge1xuICAgICAgICB2YXIgZmllbGQgPSBfYS5maWVsZCwgdmFyaWFibGVzID0gX2EudmFyaWFibGVzLCBmaWVsZE5hbWUgPSBfYS5maWVsZE5hbWU7XG4gICAgICAgIHZhciBjb2xsZWN0ZWQgPSBjb2xsZWN0U3BlY2lmaWVyUGF0aHMoc3BlY2lmaWVyLCBmdW5jdGlvbiAoa2V5UGF0aCkge1xuICAgICAgICAgICAgdmFyIGZpcnN0S2V5ID0ga2V5UGF0aFswXTtcbiAgICAgICAgICAgIHZhciBmaXJzdENoYXIgPSBmaXJzdEtleS5jaGFyQXQoMCk7XG4gICAgICAgICAgICBpZiAoZmlyc3RDaGFyID09PSBcIkBcIikge1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZCAmJiBpc05vbkVtcHR5QXJyYXkoZmllbGQuZGlyZWN0aXZlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGl2ZU5hbWVfMSA9IGZpcnN0S2V5LnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGZpZWxkLmRpcmVjdGl2ZXMuZmluZChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5uYW1lLnZhbHVlID09PSBkaXJlY3RpdmVOYW1lXzE7IH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aXZlQXJncyA9IGQgJiYgYXJndW1lbnRzT2JqZWN0RnJvbUZpZWxkKGQsIHZhcmlhYmxlcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkaXJlY3RpdmVBcmdzICYmIGV4dHJhY3RLZXlQYXRoKGRpcmVjdGl2ZUFyZ3MsIGtleVBhdGguc2xpY2UoMSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlyc3RDaGFyID09PSBcIiRcIikge1xuICAgICAgICAgICAgICAgIHZhciB2YXJpYWJsZU5hbWUgPSBmaXJzdEtleS5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICBpZiAodmFyaWFibGVzICYmIGhhc093bi5jYWxsKHZhcmlhYmxlcywgdmFyaWFibGVOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFyS2V5UGF0aCA9IGtleVBhdGguc2xpY2UoMCk7XG4gICAgICAgICAgICAgICAgICAgIHZhcktleVBhdGhbMF0gPSB2YXJpYWJsZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleHRyYWN0S2V5UGF0aCh2YXJpYWJsZXMsIHZhcktleVBhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncykge1xuICAgICAgICAgICAgICAgIHJldHVybiBleHRyYWN0S2V5UGF0aChhcmdzLCBrZXlQYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBzdWZmaXggPSBKU09OLnN0cmluZ2lmeShjb2xsZWN0ZWQpO1xuICAgICAgICBpZiAoYXJncyB8fCBzdWZmaXggIT09IFwie31cIikge1xuICAgICAgICAgICAgZmllbGROYW1lICs9IFwiOlwiICsgc3VmZml4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaWVsZE5hbWU7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gY29sbGVjdFNwZWNpZmllclBhdGhzKHNwZWNpZmllciwgZXh0cmFjdG9yKSB7XG4gICAgdmFyIG1lcmdlciA9IG5ldyBEZWVwTWVyZ2VyO1xuICAgIHJldHVybiBnZXRTcGVjaWZpZXJQYXRocyhzcGVjaWZpZXIpLnJlZHVjZShmdW5jdGlvbiAoY29sbGVjdGVkLCBwYXRoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIHRvTWVyZ2UgPSBleHRyYWN0b3IocGF0aCk7XG4gICAgICAgIGlmICh0b01lcmdlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBwYXRoLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgICAgdG9NZXJnZSA9IChfYSA9IHt9LCBfYVtwYXRoW2ldXSA9IHRvTWVyZ2UsIF9hKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbGxlY3RlZCA9IG1lcmdlci5tZXJnZShjb2xsZWN0ZWQsIHRvTWVyZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xsZWN0ZWQ7XG4gICAgfSwgT2JqZWN0LmNyZWF0ZShudWxsKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0U3BlY2lmaWVyUGF0aHMoc3BlYykge1xuICAgIHZhciBpbmZvID0gbG9va3VwU3BlY2lmaWVySW5mbyhzcGVjKTtcbiAgICBpZiAoIWluZm8ucGF0aHMpIHtcbiAgICAgICAgdmFyIHBhdGhzXzEgPSBpbmZvLnBhdGhzID0gW107XG4gICAgICAgIHZhciBjdXJyZW50UGF0aF8xID0gW107XG4gICAgICAgIHNwZWMuZm9yRWFjaChmdW5jdGlvbiAocywgaSkge1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkocykpIHtcbiAgICAgICAgICAgICAgICBnZXRTcGVjaWZpZXJQYXRocyhzKS5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwYXRoc18xLnB1c2goY3VycmVudFBhdGhfMS5jb25jYXQocCkpOyB9KTtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aF8xLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aF8xLnB1c2gocyk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FycmF5KHNwZWNbaSArIDFdKSkge1xuICAgICAgICAgICAgICAgICAgICBwYXRoc18xLnB1c2goY3VycmVudFBhdGhfMS5zbGljZSgwKSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoXzEubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gaW5mby5wYXRocztcbn1cbmZ1bmN0aW9uIGV4dHJhY3RLZXkob2JqZWN0LCBrZXkpIHtcbiAgICByZXR1cm4gb2JqZWN0W2tleV07XG59XG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdEtleVBhdGgob2JqZWN0LCBwYXRoLCBleHRyYWN0KSB7XG4gICAgZXh0cmFjdCA9IGV4dHJhY3QgfHwgZXh0cmFjdEtleTtcbiAgICByZXR1cm4gbm9ybWFsaXplKHBhdGgucmVkdWNlKGZ1bmN0aW9uIHJlZHVjZXIob2JqLCBrZXkpIHtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkob2JqKVxuICAgICAgICAgICAgPyBvYmoubWFwKGZ1bmN0aW9uIChjaGlsZCkgeyByZXR1cm4gcmVkdWNlcihjaGlsZCwga2V5KTsgfSlcbiAgICAgICAgICAgIDogb2JqICYmIGV4dHJhY3Qob2JqLCBrZXkpO1xuICAgIH0sIG9iamVjdCkpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplKHZhbHVlKSB7XG4gICAgaWYgKGlzTm9uTnVsbE9iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUubWFwKG5vcm1hbGl6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbGxlY3RTcGVjaWZpZXJQYXRocyhPYmplY3Qua2V5cyh2YWx1ZSkuc29ydCgpLCBmdW5jdGlvbiAocGF0aCkgeyByZXR1cm4gZXh0cmFjdEtleVBhdGgodmFsdWUsIHBhdGgpOyB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a2V5LWV4dHJhY3Rvci5qcy5tYXAiLCJpbXBvcnQgeyBfX2Fzc2lnbiwgX19yZXN0IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQsIEludmFyaWFudEVycm9yIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9nbG9iYWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBzdG9yZUtleU5hbWVGcm9tRmllbGQsIGFyZ3VtZW50c09iamVjdEZyb21GaWVsZCwgaXNSZWZlcmVuY2UsIGdldFN0b3JlS2V5TmFtZSwgaXNOb25OdWxsT2JqZWN0LCBzdHJpbmdpZnlGb3JEaXNwbGF5LCB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGhhc093biwgZmllbGROYW1lRnJvbVN0b3JlTmFtZSwgc3RvcmVWYWx1ZUlzU3RvcmVPYmplY3QsIHNlbGVjdGlvblNldE1hdGNoZXNSZXN1bHQsIFR5cGVPckZpZWxkTmFtZVJlZ0V4cCwgZGVmYXVsdERhdGFJZEZyb21PYmplY3QsIGlzQXJyYXksIH0gZnJvbSBcIi4vaGVscGVycy5qc1wiO1xuaW1wb3J0IHsgY2FjaGVTbG90IH0gZnJvbSBcIi4vcmVhY3RpdmVWYXJzLmpzXCI7XG5pbXBvcnQgeyBjYW5vbmljYWxTdHJpbmdpZnkgfSBmcm9tIFwiLi9vYmplY3QtY2Fub24uanNcIjtcbmltcG9ydCB7IGtleUFyZ3NGbkZyb21TcGVjaWZpZXIsIGtleUZpZWxkc0ZuRnJvbVNwZWNpZmllciB9IGZyb20gXCIuL2tleS1leHRyYWN0b3IuanNcIjtcbmdldFN0b3JlS2V5TmFtZS5zZXRTdHJpbmdpZnkoY2Fub25pY2FsU3RyaW5naWZ5KTtcbmZ1bmN0aW9uIGFyZ3NGcm9tRmllbGRTcGVjaWZpZXIoc3BlYykge1xuICAgIHJldHVybiBzcGVjLmFyZ3MgIT09IHZvaWQgMCA/IHNwZWMuYXJncyA6XG4gICAgICAgIHNwZWMuZmllbGQgPyBhcmd1bWVudHNPYmplY3RGcm9tRmllbGQoc3BlYy5maWVsZCwgc3BlYy52YXJpYWJsZXMpIDogbnVsbDtcbn1cbnZhciBudWxsS2V5RmllbGRzRm4gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB2b2lkIDA7IH07XG52YXIgc2ltcGxlS2V5QXJnc0ZuID0gZnVuY3Rpb24gKF9hcmdzLCBjb250ZXh0KSB7IHJldHVybiBjb250ZXh0LmZpZWxkTmFtZTsgfTtcbnZhciBtZXJnZVRydWVGbiA9IGZ1bmN0aW9uIChleGlzdGluZywgaW5jb21pbmcsIF9hKSB7XG4gICAgdmFyIG1lcmdlT2JqZWN0cyA9IF9hLm1lcmdlT2JqZWN0cztcbiAgICByZXR1cm4gbWVyZ2VPYmplY3RzKGV4aXN0aW5nLCBpbmNvbWluZyk7XG59O1xudmFyIG1lcmdlRmFsc2VGbiA9IGZ1bmN0aW9uIChfLCBpbmNvbWluZykgeyByZXR1cm4gaW5jb21pbmc7IH07XG52YXIgUG9saWNpZXMgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBvbGljaWVzKGNvbmZpZykge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy50eXBlUG9saWNpZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLnRvQmVBZGRlZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMuc3VwZXJ0eXBlTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmZ1enp5U3VidHlwZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMucm9vdElkc0J5VHlwZW5hbWUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLnJvb3RUeXBlbmFtZXNCeUlkID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy51c2luZ1Bvc3NpYmxlVHlwZXMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb25maWcgPSBfX2Fzc2lnbih7IGRhdGFJZEZyb21PYmplY3Q6IGRlZmF1bHREYXRhSWRGcm9tT2JqZWN0IH0sIGNvbmZpZyk7XG4gICAgICAgIHRoaXMuY2FjaGUgPSB0aGlzLmNvbmZpZy5jYWNoZTtcbiAgICAgICAgdGhpcy5zZXRSb290VHlwZW5hbWUoXCJRdWVyeVwiKTtcbiAgICAgICAgdGhpcy5zZXRSb290VHlwZW5hbWUoXCJNdXRhdGlvblwiKTtcbiAgICAgICAgdGhpcy5zZXRSb290VHlwZW5hbWUoXCJTdWJzY3JpcHRpb25cIik7XG4gICAgICAgIGlmIChjb25maWcucG9zc2libGVUeXBlcykge1xuICAgICAgICAgICAgdGhpcy5hZGRQb3NzaWJsZVR5cGVzKGNvbmZpZy5wb3NzaWJsZVR5cGVzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZmlnLnR5cGVQb2xpY2llcykge1xuICAgICAgICAgICAgdGhpcy5hZGRUeXBlUG9saWNpZXMoY29uZmlnLnR5cGVQb2xpY2llcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUG9saWNpZXMucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24gKG9iamVjdCwgcGFydGlhbENvbnRleHQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgcG9saWNpZXMgPSB0aGlzO1xuICAgICAgICB2YXIgdHlwZW5hbWUgPSBwYXJ0aWFsQ29udGV4dCAmJiAocGFydGlhbENvbnRleHQudHlwZW5hbWUgfHxcbiAgICAgICAgICAgICgoX2EgPSBwYXJ0aWFsQ29udGV4dC5zdG9yZU9iamVjdCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9fdHlwZW5hbWUpKSB8fCBvYmplY3QuX190eXBlbmFtZTtcbiAgICAgICAgaWYgKHR5cGVuYW1lID09PSB0aGlzLnJvb3RUeXBlbmFtZXNCeUlkLlJPT1RfUVVFUlkpIHtcbiAgICAgICAgICAgIHJldHVybiBbXCJST09UX1FVRVJZXCJdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdG9yZU9iamVjdCA9IHBhcnRpYWxDb250ZXh0ICYmIHBhcnRpYWxDb250ZXh0LnN0b3JlT2JqZWN0IHx8IG9iamVjdDtcbiAgICAgICAgdmFyIGNvbnRleHQgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcGFydGlhbENvbnRleHQpLCB7IHR5cGVuYW1lOiB0eXBlbmFtZSwgc3RvcmVPYmplY3Q6IHN0b3JlT2JqZWN0LCByZWFkRmllbGQ6IHBhcnRpYWxDb250ZXh0ICYmIHBhcnRpYWxDb250ZXh0LnJlYWRGaWVsZCB8fCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBub3JtYWxpemVSZWFkRmllbGRPcHRpb25zKGFyZ3VtZW50cywgc3RvcmVPYmplY3QpO1xuICAgICAgICAgICAgICAgIHJldHVybiBwb2xpY2llcy5yZWFkRmllbGQob3B0aW9ucywge1xuICAgICAgICAgICAgICAgICAgICBzdG9yZTogcG9saWNpZXMuY2FjaGVbXCJkYXRhXCJdLFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IG9wdGlvbnMudmFyaWFibGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgdmFyIGlkO1xuICAgICAgICB2YXIgcG9saWN5ID0gdHlwZW5hbWUgJiYgdGhpcy5nZXRUeXBlUG9saWN5KHR5cGVuYW1lKTtcbiAgICAgICAgdmFyIGtleUZuID0gcG9saWN5ICYmIHBvbGljeS5rZXlGbiB8fCB0aGlzLmNvbmZpZy5kYXRhSWRGcm9tT2JqZWN0O1xuICAgICAgICB3aGlsZSAoa2V5Rm4pIHtcbiAgICAgICAgICAgIHZhciBzcGVjaWZpZXJPcklkID0ga2V5Rm4ob2JqZWN0LCBjb250ZXh0KTtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KHNwZWNpZmllck9ySWQpKSB7XG4gICAgICAgICAgICAgICAga2V5Rm4gPSBrZXlGaWVsZHNGbkZyb21TcGVjaWZpZXIoc3BlY2lmaWVyT3JJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZCA9IHNwZWNpZmllck9ySWQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWQgPSBpZCA/IFN0cmluZyhpZCkgOiB2b2lkIDA7XG4gICAgICAgIHJldHVybiBjb250ZXh0LmtleU9iamVjdCA/IFtpZCwgY29udGV4dC5rZXlPYmplY3RdIDogW2lkXTtcbiAgICB9O1xuICAgIFBvbGljaWVzLnByb3RvdHlwZS5hZGRUeXBlUG9saWNpZXMgPSBmdW5jdGlvbiAodHlwZVBvbGljaWVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIE9iamVjdC5rZXlzKHR5cGVQb2xpY2llcykuZm9yRWFjaChmdW5jdGlvbiAodHlwZW5hbWUpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IHR5cGVQb2xpY2llc1t0eXBlbmFtZV0sIHF1ZXJ5VHlwZSA9IF9hLnF1ZXJ5VHlwZSwgbXV0YXRpb25UeXBlID0gX2EubXV0YXRpb25UeXBlLCBzdWJzY3JpcHRpb25UeXBlID0gX2Euc3Vic2NyaXB0aW9uVHlwZSwgaW5jb21pbmcgPSBfX3Jlc3QoX2EsIFtcInF1ZXJ5VHlwZVwiLCBcIm11dGF0aW9uVHlwZVwiLCBcInN1YnNjcmlwdGlvblR5cGVcIl0pO1xuICAgICAgICAgICAgaWYgKHF1ZXJ5VHlwZSlcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRSb290VHlwZW5hbWUoXCJRdWVyeVwiLCB0eXBlbmFtZSk7XG4gICAgICAgICAgICBpZiAobXV0YXRpb25UeXBlKVxuICAgICAgICAgICAgICAgIF90aGlzLnNldFJvb3RUeXBlbmFtZShcIk11dGF0aW9uXCIsIHR5cGVuYW1lKTtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25UeXBlKVxuICAgICAgICAgICAgICAgIF90aGlzLnNldFJvb3RUeXBlbmFtZShcIlN1YnNjcmlwdGlvblwiLCB0eXBlbmFtZSk7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoX3RoaXMudG9CZUFkZGVkLCB0eXBlbmFtZSkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy50b0JlQWRkZWRbdHlwZW5hbWVdLnB1c2goaW5jb21pbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RoaXMudG9CZUFkZGVkW3R5cGVuYW1lXSA9IFtpbmNvbWluZ107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUG9saWNpZXMucHJvdG90eXBlLnVwZGF0ZVR5cGVQb2xpY3kgPSBmdW5jdGlvbiAodHlwZW5hbWUsIGluY29taW5nKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBleGlzdGluZyA9IHRoaXMuZ2V0VHlwZVBvbGljeSh0eXBlbmFtZSk7XG4gICAgICAgIHZhciBrZXlGaWVsZHMgPSBpbmNvbWluZy5rZXlGaWVsZHMsIGZpZWxkcyA9IGluY29taW5nLmZpZWxkcztcbiAgICAgICAgZnVuY3Rpb24gc2V0TWVyZ2UoZXhpc3RpbmcsIG1lcmdlKSB7XG4gICAgICAgICAgICBleGlzdGluZy5tZXJnZSA9XG4gICAgICAgICAgICAgICAgdHlwZW9mIG1lcmdlID09PSBcImZ1bmN0aW9uXCIgPyBtZXJnZSA6XG4gICAgICAgICAgICAgICAgICAgIG1lcmdlID09PSB0cnVlID8gbWVyZ2VUcnVlRm4gOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2UgPT09IGZhbHNlID8gbWVyZ2VGYWxzZUZuIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5tZXJnZTtcbiAgICAgICAgfVxuICAgICAgICBzZXRNZXJnZShleGlzdGluZywgaW5jb21pbmcubWVyZ2UpO1xuICAgICAgICBleGlzdGluZy5rZXlGbiA9XG4gICAgICAgICAgICBrZXlGaWVsZHMgPT09IGZhbHNlID8gbnVsbEtleUZpZWxkc0ZuIDpcbiAgICAgICAgICAgICAgICBpc0FycmF5KGtleUZpZWxkcykgPyBrZXlGaWVsZHNGbkZyb21TcGVjaWZpZXIoa2V5RmllbGRzKSA6XG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBrZXlGaWVsZHMgPT09IFwiZnVuY3Rpb25cIiA/IGtleUZpZWxkcyA6XG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5rZXlGbjtcbiAgICAgICAgaWYgKGZpZWxkcykge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoZmllbGRzKS5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZE5hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmcgPSBfdGhpcy5nZXRGaWVsZFBvbGljeSh0eXBlbmFtZSwgZmllbGROYW1lLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB2YXIgaW5jb21pbmcgPSBmaWVsZHNbZmllbGROYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGluY29taW5nID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcucmVhZCA9IGluY29taW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleUFyZ3MgPSBpbmNvbWluZy5rZXlBcmdzLCByZWFkID0gaW5jb21pbmcucmVhZCwgbWVyZ2UgPSBpbmNvbWluZy5tZXJnZTtcbiAgICAgICAgICAgICAgICAgICAgZXhpc3Rpbmcua2V5Rm4gPVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5QXJncyA9PT0gZmFsc2UgPyBzaW1wbGVLZXlBcmdzRm4gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQXJyYXkoa2V5QXJncykgPyBrZXlBcmdzRm5Gcm9tU3BlY2lmaWVyKGtleUFyZ3MpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGtleUFyZ3MgPT09IFwiZnVuY3Rpb25cIiA/IGtleUFyZ3MgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3Rpbmcua2V5Rm47XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVhZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5yZWFkID0gcmVhZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRNZXJnZShleGlzdGluZywgbWVyZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcucmVhZCAmJiBleGlzdGluZy5tZXJnZSkge1xuICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5rZXlGbiA9IGV4aXN0aW5nLmtleUZuIHx8IHNpbXBsZUtleUFyZ3NGbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUG9saWNpZXMucHJvdG90eXBlLnNldFJvb3RUeXBlbmFtZSA9IGZ1bmN0aW9uICh3aGljaCwgdHlwZW5hbWUpIHtcbiAgICAgICAgaWYgKHR5cGVuYW1lID09PSB2b2lkIDApIHsgdHlwZW5hbWUgPSB3aGljaDsgfVxuICAgICAgICB2YXIgcm9vdElkID0gXCJST09UX1wiICsgd2hpY2gudG9VcHBlckNhc2UoKTtcbiAgICAgICAgdmFyIG9sZCA9IHRoaXMucm9vdFR5cGVuYW1lc0J5SWRbcm9vdElkXTtcbiAgICAgICAgaWYgKHR5cGVuYW1lICE9PSBvbGQpIHtcbiAgICAgICAgICAgIF9fREVWX18gPyBpbnZhcmlhbnQoIW9sZCB8fCBvbGQgPT09IHdoaWNoLCBcIkNhbm5vdCBjaGFuZ2Ugcm9vdCBcIi5jb25jYXQod2hpY2gsIFwiIF9fdHlwZW5hbWUgbW9yZSB0aGFuIG9uY2VcIikpIDogaW52YXJpYW50KCFvbGQgfHwgb2xkID09PSB3aGljaCwgMyk7XG4gICAgICAgICAgICBpZiAob2xkKVxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnJvb3RJZHNCeVR5cGVuYW1lW29sZF07XG4gICAgICAgICAgICB0aGlzLnJvb3RJZHNCeVR5cGVuYW1lW3R5cGVuYW1lXSA9IHJvb3RJZDtcbiAgICAgICAgICAgIHRoaXMucm9vdFR5cGVuYW1lc0J5SWRbcm9vdElkXSA9IHR5cGVuYW1lO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBQb2xpY2llcy5wcm90b3R5cGUuYWRkUG9zc2libGVUeXBlcyA9IGZ1bmN0aW9uIChwb3NzaWJsZVR5cGVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMudXNpbmdQb3NzaWJsZVR5cGVzID0gdHJ1ZTtcbiAgICAgICAgT2JqZWN0LmtleXMocG9zc2libGVUeXBlcykuZm9yRWFjaChmdW5jdGlvbiAoc3VwZXJ0eXBlKSB7XG4gICAgICAgICAgICBfdGhpcy5nZXRTdXBlcnR5cGVTZXQoc3VwZXJ0eXBlLCB0cnVlKTtcbiAgICAgICAgICAgIHBvc3NpYmxlVHlwZXNbc3VwZXJ0eXBlXS5mb3JFYWNoKGZ1bmN0aW9uIChzdWJ0eXBlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0U3VwZXJ0eXBlU2V0KHN1YnR5cGUsIHRydWUpLmFkZChzdXBlcnR5cGUpO1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IHN1YnR5cGUubWF0Y2goVHlwZU9yRmllbGROYW1lUmVnRXhwKTtcbiAgICAgICAgICAgICAgICBpZiAoIW1hdGNoIHx8IG1hdGNoWzBdICE9PSBzdWJ0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmZ1enp5U3VidHlwZXMuc2V0KHN1YnR5cGUsIG5ldyBSZWdFeHAoc3VidHlwZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFBvbGljaWVzLnByb3RvdHlwZS5nZXRUeXBlUG9saWN5ID0gZnVuY3Rpb24gKHR5cGVuYW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghaGFzT3duLmNhbGwodGhpcy50eXBlUG9saWNpZXMsIHR5cGVuYW1lKSkge1xuICAgICAgICAgICAgdmFyIHBvbGljeV8xID0gdGhpcy50eXBlUG9saWNpZXNbdHlwZW5hbWVdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICAgIHBvbGljeV8xLmZpZWxkcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgICB2YXIgc3VwZXJ0eXBlcyA9IHRoaXMuc3VwZXJ0eXBlTWFwLmdldCh0eXBlbmFtZSk7XG4gICAgICAgICAgICBpZiAoc3VwZXJ0eXBlcyAmJiBzdXBlcnR5cGVzLnNpemUpIHtcbiAgICAgICAgICAgICAgICBzdXBlcnR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHN1cGVydHlwZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5nZXRUeXBlUG9saWN5KHN1cGVydHlwZSksIGZpZWxkcyA9IF9hLmZpZWxkcywgcmVzdCA9IF9fcmVzdChfYSwgW1wiZmllbGRzXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihwb2xpY3lfMSwgcmVzdCk7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocG9saWN5XzEuZmllbGRzLCBmaWVsZHMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBpbmJveCA9IHRoaXMudG9CZUFkZGVkW3R5cGVuYW1lXTtcbiAgICAgICAgaWYgKGluYm94ICYmIGluYm94Lmxlbmd0aCkge1xuICAgICAgICAgICAgaW5ib3guc3BsaWNlKDApLmZvckVhY2goZnVuY3Rpb24gKHBvbGljeSkge1xuICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZVR5cGVQb2xpY3kodHlwZW5hbWUsIHBvbGljeSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50eXBlUG9saWNpZXNbdHlwZW5hbWVdO1xuICAgIH07XG4gICAgUG9saWNpZXMucHJvdG90eXBlLmdldEZpZWxkUG9saWN5ID0gZnVuY3Rpb24gKHR5cGVuYW1lLCBmaWVsZE5hbWUsIGNyZWF0ZUlmTWlzc2luZykge1xuICAgICAgICBpZiAodHlwZW5hbWUpIHtcbiAgICAgICAgICAgIHZhciBmaWVsZFBvbGljaWVzID0gdGhpcy5nZXRUeXBlUG9saWN5KHR5cGVuYW1lKS5maWVsZHM7XG4gICAgICAgICAgICByZXR1cm4gZmllbGRQb2xpY2llc1tmaWVsZE5hbWVdIHx8IChjcmVhdGVJZk1pc3NpbmcgJiYgKGZpZWxkUG9saWNpZXNbZmllbGROYW1lXSA9IE9iamVjdC5jcmVhdGUobnVsbCkpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUG9saWNpZXMucHJvdG90eXBlLmdldFN1cGVydHlwZVNldCA9IGZ1bmN0aW9uIChzdWJ0eXBlLCBjcmVhdGVJZk1pc3NpbmcpIHtcbiAgICAgICAgdmFyIHN1cGVydHlwZVNldCA9IHRoaXMuc3VwZXJ0eXBlTWFwLmdldChzdWJ0eXBlKTtcbiAgICAgICAgaWYgKCFzdXBlcnR5cGVTZXQgJiYgY3JlYXRlSWZNaXNzaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnN1cGVydHlwZU1hcC5zZXQoc3VidHlwZSwgc3VwZXJ0eXBlU2V0ID0gbmV3IFNldCgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwZXJ0eXBlU2V0O1xuICAgIH07XG4gICAgUG9saWNpZXMucHJvdG90eXBlLmZyYWdtZW50TWF0Y2hlcyA9IGZ1bmN0aW9uIChmcmFnbWVudCwgdHlwZW5hbWUsIHJlc3VsdCwgdmFyaWFibGVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghZnJhZ21lbnQudHlwZUNvbmRpdGlvbilcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoIXR5cGVuYW1lKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgc3VwZXJ0eXBlID0gZnJhZ21lbnQudHlwZUNvbmRpdGlvbi5uYW1lLnZhbHVlO1xuICAgICAgICBpZiAodHlwZW5hbWUgPT09IHN1cGVydHlwZSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAodGhpcy51c2luZ1Bvc3NpYmxlVHlwZXMgJiZcbiAgICAgICAgICAgIHRoaXMuc3VwZXJ0eXBlTWFwLmhhcyhzdXBlcnR5cGUpKSB7XG4gICAgICAgICAgICB2YXIgdHlwZW5hbWVTdXBlcnR5cGVTZXQgPSB0aGlzLmdldFN1cGVydHlwZVNldCh0eXBlbmFtZSwgdHJ1ZSk7XG4gICAgICAgICAgICB2YXIgd29ya1F1ZXVlXzEgPSBbdHlwZW5hbWVTdXBlcnR5cGVTZXRdO1xuICAgICAgICAgICAgdmFyIG1heWJlRW5xdWV1ZV8xID0gZnVuY3Rpb24gKHN1YnR5cGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VwZXJ0eXBlU2V0ID0gX3RoaXMuZ2V0U3VwZXJ0eXBlU2V0KHN1YnR5cGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAoc3VwZXJ0eXBlU2V0ICYmXG4gICAgICAgICAgICAgICAgICAgIHN1cGVydHlwZVNldC5zaXplICYmXG4gICAgICAgICAgICAgICAgICAgIHdvcmtRdWV1ZV8xLmluZGV4T2Yoc3VwZXJ0eXBlU2V0KSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgd29ya1F1ZXVlXzEucHVzaChzdXBlcnR5cGVTZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgbmVlZFRvQ2hlY2tGdXp6eVN1YnR5cGVzID0gISEocmVzdWx0ICYmIHRoaXMuZnV6enlTdWJ0eXBlcy5zaXplKTtcbiAgICAgICAgICAgIHZhciBjaGVja2luZ0Z1enp5U3VidHlwZXMgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd29ya1F1ZXVlXzEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VwZXJ0eXBlU2V0ID0gd29ya1F1ZXVlXzFbaV07XG4gICAgICAgICAgICAgICAgaWYgKHN1cGVydHlwZVNldC5oYXMoc3VwZXJ0eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXR5cGVuYW1lU3VwZXJ0eXBlU2V0LmhhcyhzdXBlcnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tpbmdGdXp6eVN1YnR5cGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX19ERVZfXyAmJiBpbnZhcmlhbnQud2FybihcIkluZmVycmluZyBzdWJ0eXBlIFwiLmNvbmNhdCh0eXBlbmFtZSwgXCIgb2Ygc3VwZXJ0eXBlIFwiKS5jb25jYXQoc3VwZXJ0eXBlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlbmFtZVN1cGVydHlwZVNldC5hZGQoc3VwZXJ0eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3VwZXJ0eXBlU2V0LmZvckVhY2gobWF5YmVFbnF1ZXVlXzEpO1xuICAgICAgICAgICAgICAgIGlmIChuZWVkVG9DaGVja0Z1enp5U3VidHlwZXMgJiZcbiAgICAgICAgICAgICAgICAgICAgaSA9PT0gd29ya1F1ZXVlXzEubGVuZ3RoIC0gMSAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25TZXRNYXRjaGVzUmVzdWx0KGZyYWdtZW50LnNlbGVjdGlvblNldCwgcmVzdWx0LCB2YXJpYWJsZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5lZWRUb0NoZWNrRnV6enlTdWJ0eXBlcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBjaGVja2luZ0Z1enp5U3VidHlwZXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZ1enp5U3VidHlwZXMuZm9yRWFjaChmdW5jdGlvbiAocmVnRXhwLCBmdXp6eVN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gdHlwZW5hbWUubWF0Y2gocmVnRXhwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFswXSA9PT0gdHlwZW5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXliZUVucXVldWVfMShmdXp6eVN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBQb2xpY2llcy5wcm90b3R5cGUuaGFzS2V5QXJncyA9IGZ1bmN0aW9uICh0eXBlbmFtZSwgZmllbGROYW1lKSB7XG4gICAgICAgIHZhciBwb2xpY3kgPSB0aGlzLmdldEZpZWxkUG9saWN5KHR5cGVuYW1lLCBmaWVsZE5hbWUsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuICEhKHBvbGljeSAmJiBwb2xpY3kua2V5Rm4pO1xuICAgIH07XG4gICAgUG9saWNpZXMucHJvdG90eXBlLmdldFN0b3JlRmllbGROYW1lID0gZnVuY3Rpb24gKGZpZWxkU3BlYykge1xuICAgICAgICB2YXIgdHlwZW5hbWUgPSBmaWVsZFNwZWMudHlwZW5hbWUsIGZpZWxkTmFtZSA9IGZpZWxkU3BlYy5maWVsZE5hbWU7XG4gICAgICAgIHZhciBwb2xpY3kgPSB0aGlzLmdldEZpZWxkUG9saWN5KHR5cGVuYW1lLCBmaWVsZE5hbWUsIGZhbHNlKTtcbiAgICAgICAgdmFyIHN0b3JlRmllbGROYW1lO1xuICAgICAgICB2YXIga2V5Rm4gPSBwb2xpY3kgJiYgcG9saWN5LmtleUZuO1xuICAgICAgICBpZiAoa2V5Rm4gJiYgdHlwZW5hbWUpIHtcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0ge1xuICAgICAgICAgICAgICAgIHR5cGVuYW1lOiB0eXBlbmFtZSxcbiAgICAgICAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkTmFtZSxcbiAgICAgICAgICAgICAgICBmaWVsZDogZmllbGRTcGVjLmZpZWxkIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgdmFyaWFibGVzOiBmaWVsZFNwZWMudmFyaWFibGVzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBhcmdzID0gYXJnc0Zyb21GaWVsZFNwZWNpZmllcihmaWVsZFNwZWMpO1xuICAgICAgICAgICAgd2hpbGUgKGtleUZuKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwZWNpZmllck9yU3RyaW5nID0ga2V5Rm4oYXJncywgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkoc3BlY2lmaWVyT3JTdHJpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleUZuID0ga2V5QXJnc0ZuRnJvbVNwZWNpZmllcihzcGVjaWZpZXJPclN0cmluZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdG9yZUZpZWxkTmFtZSA9IHNwZWNpZmllck9yU3RyaW5nIHx8IGZpZWxkTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdG9yZUZpZWxkTmFtZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBzdG9yZUZpZWxkTmFtZSA9IGZpZWxkU3BlYy5maWVsZFxuICAgICAgICAgICAgICAgID8gc3RvcmVLZXlOYW1lRnJvbUZpZWxkKGZpZWxkU3BlYy5maWVsZCwgZmllbGRTcGVjLnZhcmlhYmxlcylcbiAgICAgICAgICAgICAgICA6IGdldFN0b3JlS2V5TmFtZShmaWVsZE5hbWUsIGFyZ3NGcm9tRmllbGRTcGVjaWZpZXIoZmllbGRTcGVjKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0b3JlRmllbGROYW1lID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZpZWxkTmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmllbGROYW1lID09PSBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKVxuICAgICAgICAgICAgPyBzdG9yZUZpZWxkTmFtZVxuICAgICAgICAgICAgOiBmaWVsZE5hbWUgKyBcIjpcIiArIHN0b3JlRmllbGROYW1lO1xuICAgIH07XG4gICAgUG9saWNpZXMucHJvdG90eXBlLnJlYWRGaWVsZCA9IGZ1bmN0aW9uIChvcHRpb25zLCBjb250ZXh0KSB7XG4gICAgICAgIHZhciBvYmplY3RPclJlZmVyZW5jZSA9IG9wdGlvbnMuZnJvbTtcbiAgICAgICAgaWYgKCFvYmplY3RPclJlZmVyZW5jZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIG5hbWVPckZpZWxkID0gb3B0aW9ucy5maWVsZCB8fCBvcHRpb25zLmZpZWxkTmFtZTtcbiAgICAgICAgaWYgKCFuYW1lT3JGaWVsZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKG9wdGlvbnMudHlwZW5hbWUgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdmFyIHR5cGVuYW1lID0gY29udGV4dC5zdG9yZS5nZXRGaWVsZFZhbHVlKG9iamVjdE9yUmVmZXJlbmNlLCBcIl9fdHlwZW5hbWVcIik7XG4gICAgICAgICAgICBpZiAodHlwZW5hbWUpXG4gICAgICAgICAgICAgICAgb3B0aW9ucy50eXBlbmFtZSA9IHR5cGVuYW1lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdG9yZUZpZWxkTmFtZSA9IHRoaXMuZ2V0U3RvcmVGaWVsZE5hbWUob3B0aW9ucyk7XG4gICAgICAgIHZhciBmaWVsZE5hbWUgPSBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgdmFyIGV4aXN0aW5nID0gY29udGV4dC5zdG9yZS5nZXRGaWVsZFZhbHVlKG9iamVjdE9yUmVmZXJlbmNlLCBzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgIHZhciBwb2xpY3kgPSB0aGlzLmdldEZpZWxkUG9saWN5KG9wdGlvbnMudHlwZW5hbWUsIGZpZWxkTmFtZSwgZmFsc2UpO1xuICAgICAgICB2YXIgcmVhZCA9IHBvbGljeSAmJiBwb2xpY3kucmVhZDtcbiAgICAgICAgaWYgKHJlYWQpIHtcbiAgICAgICAgICAgIHZhciByZWFkT3B0aW9ucyA9IG1ha2VGaWVsZEZ1bmN0aW9uT3B0aW9ucyh0aGlzLCBvYmplY3RPclJlZmVyZW5jZSwgb3B0aW9ucywgY29udGV4dCwgY29udGV4dC5zdG9yZS5nZXRTdG9yYWdlKGlzUmVmZXJlbmNlKG9iamVjdE9yUmVmZXJlbmNlKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0T3JSZWZlcmVuY2UuX19yZWZcbiAgICAgICAgICAgICAgICA6IG9iamVjdE9yUmVmZXJlbmNlLCBzdG9yZUZpZWxkTmFtZSkpO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlU2xvdC53aXRoVmFsdWUodGhpcy5jYWNoZSwgcmVhZCwgW2V4aXN0aW5nLCByZWFkT3B0aW9uc10pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBleGlzdGluZztcbiAgICB9O1xuICAgIFBvbGljaWVzLnByb3RvdHlwZS5nZXRSZWFkRnVuY3Rpb24gPSBmdW5jdGlvbiAodHlwZW5hbWUsIGZpZWxkTmFtZSkge1xuICAgICAgICB2YXIgcG9saWN5ID0gdGhpcy5nZXRGaWVsZFBvbGljeSh0eXBlbmFtZSwgZmllbGROYW1lLCBmYWxzZSk7XG4gICAgICAgIHJldHVybiBwb2xpY3kgJiYgcG9saWN5LnJlYWQ7XG4gICAgfTtcbiAgICBQb2xpY2llcy5wcm90b3R5cGUuZ2V0TWVyZ2VGdW5jdGlvbiA9IGZ1bmN0aW9uIChwYXJlbnRUeXBlbmFtZSwgZmllbGROYW1lLCBjaGlsZFR5cGVuYW1lKSB7XG4gICAgICAgIHZhciBwb2xpY3kgPSB0aGlzLmdldEZpZWxkUG9saWN5KHBhcmVudFR5cGVuYW1lLCBmaWVsZE5hbWUsIGZhbHNlKTtcbiAgICAgICAgdmFyIG1lcmdlID0gcG9saWN5ICYmIHBvbGljeS5tZXJnZTtcbiAgICAgICAgaWYgKCFtZXJnZSAmJiBjaGlsZFR5cGVuYW1lKSB7XG4gICAgICAgICAgICBwb2xpY3kgPSB0aGlzLmdldFR5cGVQb2xpY3koY2hpbGRUeXBlbmFtZSk7XG4gICAgICAgICAgICBtZXJnZSA9IHBvbGljeSAmJiBwb2xpY3kubWVyZ2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lcmdlO1xuICAgIH07XG4gICAgUG9saWNpZXMucHJvdG90eXBlLnJ1bk1lcmdlRnVuY3Rpb24gPSBmdW5jdGlvbiAoZXhpc3RpbmcsIGluY29taW5nLCBfYSwgY29udGV4dCwgc3RvcmFnZSkge1xuICAgICAgICB2YXIgZmllbGQgPSBfYS5maWVsZCwgdHlwZW5hbWUgPSBfYS50eXBlbmFtZSwgbWVyZ2UgPSBfYS5tZXJnZTtcbiAgICAgICAgaWYgKG1lcmdlID09PSBtZXJnZVRydWVGbikge1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VNZXJnZU9iamVjdHNGdW5jdGlvbihjb250ZXh0LnN0b3JlKShleGlzdGluZywgaW5jb21pbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXJnZSA9PT0gbWVyZ2VGYWxzZUZuKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5jb21pbmc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRleHQub3ZlcndyaXRlKSB7XG4gICAgICAgICAgICBleGlzdGluZyA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVyZ2UoZXhpc3RpbmcsIGluY29taW5nLCBtYWtlRmllbGRGdW5jdGlvbk9wdGlvbnModGhpcywgdm9pZCAwLCB7IHR5cGVuYW1lOiB0eXBlbmFtZSwgZmllbGROYW1lOiBmaWVsZC5uYW1lLnZhbHVlLCBmaWVsZDogZmllbGQsIHZhcmlhYmxlczogY29udGV4dC52YXJpYWJsZXMgfSwgY29udGV4dCwgc3RvcmFnZSB8fCBPYmplY3QuY3JlYXRlKG51bGwpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gUG9saWNpZXM7XG59KCkpO1xuZXhwb3J0IHsgUG9saWNpZXMgfTtcbmZ1bmN0aW9uIG1ha2VGaWVsZEZ1bmN0aW9uT3B0aW9ucyhwb2xpY2llcywgb2JqZWN0T3JSZWZlcmVuY2UsIGZpZWxkU3BlYywgY29udGV4dCwgc3RvcmFnZSkge1xuICAgIHZhciBzdG9yZUZpZWxkTmFtZSA9IHBvbGljaWVzLmdldFN0b3JlRmllbGROYW1lKGZpZWxkU3BlYyk7XG4gICAgdmFyIGZpZWxkTmFtZSA9IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpO1xuICAgIHZhciB2YXJpYWJsZXMgPSBmaWVsZFNwZWMudmFyaWFibGVzIHx8IGNvbnRleHQudmFyaWFibGVzO1xuICAgIHZhciBfYSA9IGNvbnRleHQuc3RvcmUsIHRvUmVmZXJlbmNlID0gX2EudG9SZWZlcmVuY2UsIGNhblJlYWQgPSBfYS5jYW5SZWFkO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFyZ3M6IGFyZ3NGcm9tRmllbGRTcGVjaWZpZXIoZmllbGRTcGVjKSxcbiAgICAgICAgZmllbGQ6IGZpZWxkU3BlYy5maWVsZCB8fCBudWxsLFxuICAgICAgICBmaWVsZE5hbWU6IGZpZWxkTmFtZSxcbiAgICAgICAgc3RvcmVGaWVsZE5hbWU6IHN0b3JlRmllbGROYW1lLFxuICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgaXNSZWZlcmVuY2U6IGlzUmVmZXJlbmNlLFxuICAgICAgICB0b1JlZmVyZW5jZTogdG9SZWZlcmVuY2UsXG4gICAgICAgIHN0b3JhZ2U6IHN0b3JhZ2UsXG4gICAgICAgIGNhY2hlOiBwb2xpY2llcy5jYWNoZSxcbiAgICAgICAgY2FuUmVhZDogY2FuUmVhZCxcbiAgICAgICAgcmVhZEZpZWxkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gcG9saWNpZXMucmVhZEZpZWxkKG5vcm1hbGl6ZVJlYWRGaWVsZE9wdGlvbnMoYXJndW1lbnRzLCBvYmplY3RPclJlZmVyZW5jZSwgdmFyaWFibGVzKSwgY29udGV4dCk7XG4gICAgICAgIH0sXG4gICAgICAgIG1lcmdlT2JqZWN0czogbWFrZU1lcmdlT2JqZWN0c0Z1bmN0aW9uKGNvbnRleHQuc3RvcmUpLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplUmVhZEZpZWxkT3B0aW9ucyhyZWFkRmllbGRBcmdzLCBvYmplY3RPclJlZmVyZW5jZSwgdmFyaWFibGVzKSB7XG4gICAgdmFyIGZpZWxkTmFtZU9yT3B0aW9ucyA9IHJlYWRGaWVsZEFyZ3NbMF0sIGZyb20gPSByZWFkRmllbGRBcmdzWzFdLCBhcmdjID0gcmVhZEZpZWxkQXJncy5sZW5ndGg7XG4gICAgdmFyIG9wdGlvbnM7XG4gICAgaWYgKHR5cGVvZiBmaWVsZE5hbWVPck9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZpZWxkTmFtZTogZmllbGROYW1lT3JPcHRpb25zLFxuICAgICAgICAgICAgZnJvbTogYXJnYyA+IDEgPyBmcm9tIDogb2JqZWN0T3JSZWZlcmVuY2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBvcHRpb25zID0gX19hc3NpZ24oe30sIGZpZWxkTmFtZU9yT3B0aW9ucyk7XG4gICAgICAgIGlmICghaGFzT3duLmNhbGwob3B0aW9ucywgXCJmcm9tXCIpKSB7XG4gICAgICAgICAgICBvcHRpb25zLmZyb20gPSBvYmplY3RPclJlZmVyZW5jZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoX19ERVZfXyAmJiBvcHRpb25zLmZyb20gPT09IHZvaWQgMCkge1xuICAgICAgICBfX0RFVl9fICYmIGludmFyaWFudC53YXJuKFwiVW5kZWZpbmVkICdmcm9tJyBwYXNzZWQgdG8gcmVhZEZpZWxkIHdpdGggYXJndW1lbnRzIFwiLmNvbmNhdChzdHJpbmdpZnlGb3JEaXNwbGF5KEFycmF5LmZyb20ocmVhZEZpZWxkQXJncykpKSk7XG4gICAgfVxuICAgIGlmICh2b2lkIDAgPT09IG9wdGlvbnMudmFyaWFibGVzKSB7XG4gICAgICAgIG9wdGlvbnMudmFyaWFibGVzID0gdmFyaWFibGVzO1xuICAgIH1cbiAgICByZXR1cm4gb3B0aW9ucztcbn1cbmZ1bmN0aW9uIG1ha2VNZXJnZU9iamVjdHNGdW5jdGlvbihzdG9yZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZU9iamVjdHMoZXhpc3RpbmcsIGluY29taW5nKSB7XG4gICAgICAgIGlmIChpc0FycmF5KGV4aXN0aW5nKSB8fCBpc0FycmF5KGluY29taW5nKSkge1xuICAgICAgICAgICAgdGhyb3cgX19ERVZfXyA/IG5ldyBJbnZhcmlhbnRFcnJvcihcIkNhbm5vdCBhdXRvbWF0aWNhbGx5IG1lcmdlIGFycmF5c1wiKSA6IG5ldyBJbnZhcmlhbnRFcnJvcig0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOb25OdWxsT2JqZWN0KGV4aXN0aW5nKSAmJlxuICAgICAgICAgICAgaXNOb25OdWxsT2JqZWN0KGluY29taW5nKSkge1xuICAgICAgICAgICAgdmFyIGVUeXBlID0gc3RvcmUuZ2V0RmllbGRWYWx1ZShleGlzdGluZywgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgICAgICAgdmFyIGlUeXBlID0gc3RvcmUuZ2V0RmllbGRWYWx1ZShpbmNvbWluZywgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgICAgICAgdmFyIHR5cGVzRGlmZmVyID0gZVR5cGUgJiYgaVR5cGUgJiYgZVR5cGUgIT09IGlUeXBlO1xuICAgICAgICAgICAgaWYgKHR5cGVzRGlmZmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluY29taW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzUmVmZXJlbmNlKGV4aXN0aW5nKSAmJlxuICAgICAgICAgICAgICAgIHN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0KGluY29taW5nKSkge1xuICAgICAgICAgICAgICAgIHN0b3JlLm1lcmdlKGV4aXN0aW5nLl9fcmVmLCBpbmNvbWluZyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0KGV4aXN0aW5nKSAmJlxuICAgICAgICAgICAgICAgIGlzUmVmZXJlbmNlKGluY29taW5nKSkge1xuICAgICAgICAgICAgICAgIHN0b3JlLm1lcmdlKGV4aXN0aW5nLCBpbmNvbWluZy5fX3JlZik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluY29taW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0KGV4aXN0aW5nKSAmJlxuICAgICAgICAgICAgICAgIHN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0KGluY29taW5nKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZXhpc3RpbmcpLCBpbmNvbWluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluY29taW5nO1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wb2xpY2llcy5qcy5tYXAiLCJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaW52YXJpYW50LCBJbnZhcmlhbnRFcnJvciB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZXF1YWwgfSBmcm9tICdAd3J5L2VxdWFsaXR5JztcbmltcG9ydCB7IFRyaWUgfSBmcm9tICdAd3J5L3RyaWUnO1xuaW1wb3J0IHsgS2luZCwgfSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IGdldEZyYWdtZW50RnJvbVNlbGVjdGlvbiwgZ2V0RGVmYXVsdFZhbHVlcywgZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbiwgZ2V0VHlwZW5hbWVGcm9tUmVzdWx0LCBtYWtlUmVmZXJlbmNlLCBpc0ZpZWxkLCByZXN1bHRLZXlOYW1lRnJvbUZpZWxkLCBpc1JlZmVyZW5jZSwgc2hvdWxkSW5jbHVkZSwgY2xvbmVEZWVwLCBhZGRUeXBlbmFtZVRvRG9jdW1lbnQsIGlzTm9uRW1wdHlBcnJheSwgYXJndW1lbnRzT2JqZWN0RnJvbUZpZWxkLCB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGlzQXJyYXksIG1ha2VQcm9jZXNzZWRGaWVsZHNNZXJnZXIsIGZpZWxkTmFtZUZyb21TdG9yZU5hbWUsIHN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0LCBleHRyYWN0RnJhZ21lbnRDb250ZXh0IH0gZnJvbSBcIi4vaGVscGVycy5qc1wiO1xuaW1wb3J0IHsgY2Fub25pY2FsU3RyaW5naWZ5IH0gZnJvbSBcIi4vb2JqZWN0LWNhbm9uLmpzXCI7XG5pbXBvcnQgeyBub3JtYWxpemVSZWFkRmllbGRPcHRpb25zIH0gZnJvbSBcIi4vcG9saWNpZXMuanNcIjtcbjtcbmZ1bmN0aW9uIGdldENvbnRleHRGbGF2b3IoY29udGV4dCwgY2xpZW50T25seSwgZGVmZXJyZWQpIHtcbiAgICB2YXIga2V5ID0gXCJcIi5jb25jYXQoY2xpZW50T25seSkuY29uY2F0KGRlZmVycmVkKTtcbiAgICB2YXIgZmxhdm9yZWQgPSBjb250ZXh0LmZsYXZvcnMuZ2V0KGtleSk7XG4gICAgaWYgKCFmbGF2b3JlZCkge1xuICAgICAgICBjb250ZXh0LmZsYXZvcnMuc2V0KGtleSwgZmxhdm9yZWQgPSAoY29udGV4dC5jbGllbnRPbmx5ID09PSBjbGllbnRPbmx5ICYmXG4gICAgICAgICAgICBjb250ZXh0LmRlZmVycmVkID09PSBkZWZlcnJlZCkgPyBjb250ZXh0IDogX19hc3NpZ24oX19hc3NpZ24oe30sIGNvbnRleHQpLCB7IGNsaWVudE9ubHk6IGNsaWVudE9ubHksIGRlZmVycmVkOiBkZWZlcnJlZCB9KSk7XG4gICAgfVxuICAgIHJldHVybiBmbGF2b3JlZDtcbn1cbnZhciBTdG9yZVdyaXRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RvcmVXcml0ZXIoY2FjaGUsIHJlYWRlciwgZnJhZ21lbnRzKSB7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBjYWNoZTtcbiAgICAgICAgdGhpcy5yZWFkZXIgPSByZWFkZXI7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzO1xuICAgIH1cbiAgICBTdG9yZVdyaXRlci5wcm90b3R5cGUud3JpdGVUb1N0b3JlID0gZnVuY3Rpb24gKHN0b3JlLCBfYSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcXVlcnkgPSBfYS5xdWVyeSwgcmVzdWx0ID0gX2EucmVzdWx0LCBkYXRhSWQgPSBfYS5kYXRhSWQsIHZhcmlhYmxlcyA9IF9hLnZhcmlhYmxlcywgb3ZlcndyaXRlID0gX2Eub3ZlcndyaXRlO1xuICAgICAgICB2YXIgb3BlcmF0aW9uRGVmaW5pdGlvbiA9IGdldE9wZXJhdGlvbkRlZmluaXRpb24ocXVlcnkpO1xuICAgICAgICB2YXIgbWVyZ2VyID0gbWFrZVByb2Nlc3NlZEZpZWxkc01lcmdlcigpO1xuICAgICAgICB2YXJpYWJsZXMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZ2V0RGVmYXVsdFZhbHVlcyhvcGVyYXRpb25EZWZpbml0aW9uKSksIHZhcmlhYmxlcyk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gX19hc3NpZ24oX19hc3NpZ24oeyBzdG9yZTogc3RvcmUsIHdyaXR0ZW46IE9iamVjdC5jcmVhdGUobnVsbCksIG1lcmdlOiBmdW5jdGlvbiAoZXhpc3RpbmcsIGluY29taW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lcmdlci5tZXJnZShleGlzdGluZywgaW5jb21pbmcpO1xuICAgICAgICAgICAgfSwgdmFyaWFibGVzOiB2YXJpYWJsZXMsIHZhclN0cmluZzogY2Fub25pY2FsU3RyaW5naWZ5KHZhcmlhYmxlcykgfSwgZXh0cmFjdEZyYWdtZW50Q29udGV4dChxdWVyeSwgdGhpcy5mcmFnbWVudHMpKSwgeyBvdmVyd3JpdGU6ICEhb3ZlcndyaXRlLCBpbmNvbWluZ0J5SWQ6IG5ldyBNYXAsIGNsaWVudE9ubHk6IGZhbHNlLCBkZWZlcnJlZDogZmFsc2UsIGZsYXZvcnM6IG5ldyBNYXAgfSk7XG4gICAgICAgIHZhciByZWYgPSB0aGlzLnByb2Nlc3NTZWxlY3Rpb25TZXQoe1xuICAgICAgICAgICAgcmVzdWx0OiByZXN1bHQgfHwgT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgICAgICAgIGRhdGFJZDogZGF0YUlkLFxuICAgICAgICAgICAgc2VsZWN0aW9uU2V0OiBvcGVyYXRpb25EZWZpbml0aW9uLnNlbGVjdGlvblNldCxcbiAgICAgICAgICAgIG1lcmdlVHJlZTogeyBtYXA6IG5ldyBNYXAgfSxcbiAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWlzUmVmZXJlbmNlKHJlZikpIHtcbiAgICAgICAgICAgIHRocm93IF9fREVWX18gPyBuZXcgSW52YXJpYW50RXJyb3IoXCJDb3VsZCBub3QgaWRlbnRpZnkgb2JqZWN0IFwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShyZXN1bHQpKSkgOiBuZXcgSW52YXJpYW50RXJyb3IoNyk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5pbmNvbWluZ0J5SWQuZm9yRWFjaChmdW5jdGlvbiAoX2EsIGRhdGFJZCkge1xuICAgICAgICAgICAgdmFyIHN0b3JlT2JqZWN0ID0gX2Euc3RvcmVPYmplY3QsIG1lcmdlVHJlZSA9IF9hLm1lcmdlVHJlZSwgZmllbGROb2RlU2V0ID0gX2EuZmllbGROb2RlU2V0O1xuICAgICAgICAgICAgdmFyIGVudGl0eVJlZiA9IG1ha2VSZWZlcmVuY2UoZGF0YUlkKTtcbiAgICAgICAgICAgIGlmIChtZXJnZVRyZWUgJiYgbWVyZ2VUcmVlLm1hcC5zaXplKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFwcGxpZWQgPSBfdGhpcy5hcHBseU1lcmdlcyhtZXJnZVRyZWUsIGVudGl0eVJlZiwgc3RvcmVPYmplY3QsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgIGlmIChpc1JlZmVyZW5jZShhcHBsaWVkKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0b3JlT2JqZWN0ID0gYXBwbGllZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfX0RFVl9fICYmICFjb250ZXh0Lm92ZXJ3cml0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZHNXaXRoU2VsZWN0aW9uU2V0c18xID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICAgICAgICBmaWVsZE5vZGVTZXQuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLnNlbGVjdGlvblNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzV2l0aFNlbGVjdGlvblNldHNfMVtmaWVsZC5uYW1lLnZhbHVlXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgaGFzU2VsZWN0aW9uU2V0XzEgPSBmdW5jdGlvbiAoc3RvcmVGaWVsZE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkc1dpdGhTZWxlY3Rpb25TZXRzXzFbZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZSldID09PSB0cnVlO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIGhhc01lcmdlRnVuY3Rpb25fMSA9IGZ1bmN0aW9uIChzdG9yZUZpZWxkTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRUcmVlID0gbWVyZ2VUcmVlICYmIG1lcmdlVHJlZS5tYXAuZ2V0KHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4oY2hpbGRUcmVlICYmIGNoaWxkVHJlZS5pbmZvICYmIGNoaWxkVHJlZS5pbmZvLm1lcmdlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0b3JlT2JqZWN0KS5mb3JFYWNoKGZ1bmN0aW9uIChzdG9yZUZpZWxkTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzU2VsZWN0aW9uU2V0XzEoc3RvcmVGaWVsZE5hbWUpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhaGFzTWVyZ2VGdW5jdGlvbl8xKHN0b3JlRmllbGROYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybkFib3V0RGF0YUxvc3MoZW50aXR5UmVmLCBzdG9yZU9iamVjdCwgc3RvcmVGaWVsZE5hbWUsIGNvbnRleHQuc3RvcmUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdG9yZS5tZXJnZShkYXRhSWQsIHN0b3JlT2JqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHN0b3JlLnJldGFpbihyZWYuX19yZWYpO1xuICAgICAgICByZXR1cm4gcmVmO1xuICAgIH07XG4gICAgU3RvcmVXcml0ZXIucHJvdG90eXBlLnByb2Nlc3NTZWxlY3Rpb25TZXQgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGRhdGFJZCA9IF9hLmRhdGFJZCwgcmVzdWx0ID0gX2EucmVzdWx0LCBzZWxlY3Rpb25TZXQgPSBfYS5zZWxlY3Rpb25TZXQsIGNvbnRleHQgPSBfYS5jb250ZXh0LCBtZXJnZVRyZWUgPSBfYS5tZXJnZVRyZWU7XG4gICAgICAgIHZhciBwb2xpY2llcyA9IHRoaXMuY2FjaGUucG9saWNpZXM7XG4gICAgICAgIHZhciBpbmNvbWluZyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHZhciB0eXBlbmFtZSA9IChkYXRhSWQgJiYgcG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWRbZGF0YUlkXSkgfHxcbiAgICAgICAgICAgIGdldFR5cGVuYW1lRnJvbVJlc3VsdChyZXN1bHQsIHNlbGVjdGlvblNldCwgY29udGV4dC5mcmFnbWVudE1hcCkgfHxcbiAgICAgICAgICAgIChkYXRhSWQgJiYgY29udGV4dC5zdG9yZS5nZXQoZGF0YUlkLCBcIl9fdHlwZW5hbWVcIikpO1xuICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHR5cGVuYW1lKSB7XG4gICAgICAgICAgICBpbmNvbWluZy5fX3R5cGVuYW1lID0gdHlwZW5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlYWRGaWVsZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gbm9ybWFsaXplUmVhZEZpZWxkT3B0aW9ucyhhcmd1bWVudHMsIGluY29taW5nLCBjb250ZXh0LnZhcmlhYmxlcyk7XG4gICAgICAgICAgICBpZiAoaXNSZWZlcmVuY2Uob3B0aW9ucy5mcm9tKSkge1xuICAgICAgICAgICAgICAgIHZhciBpbmZvID0gY29udGV4dC5pbmNvbWluZ0J5SWQuZ2V0KG9wdGlvbnMuZnJvbS5fX3JlZik7XG4gICAgICAgICAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdF8xID0gcG9saWNpZXMucmVhZEZpZWxkKF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgeyBmcm9tOiBpbmZvLnN0b3JlT2JqZWN0IH0pLCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdF8xICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRfMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwb2xpY2llcy5yZWFkRmllbGQob3B0aW9ucywgY29udGV4dCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBmaWVsZE5vZGVTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMuZmxhdHRlbkZpZWxkcyhzZWxlY3Rpb25TZXQsIHJlc3VsdCwgY29udGV4dCwgdHlwZW5hbWUpLmZvckVhY2goZnVuY3Rpb24gKGNvbnRleHQsIGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICB2YXIgcmVzdWx0RmllbGRLZXkgPSByZXN1bHRLZXlOYW1lRnJvbUZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdFtyZXN1bHRGaWVsZEtleV07XG4gICAgICAgICAgICBmaWVsZE5vZGVTZXQuYWRkKGZpZWxkKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0b3JlRmllbGROYW1lID0gcG9saWNpZXMuZ2V0U3RvcmVGaWVsZE5hbWUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlbmFtZTogdHlwZW5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTmFtZTogZmllbGQubmFtZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IGNvbnRleHQudmFyaWFibGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZFRyZWUgPSBnZXRDaGlsZE1lcmdlVHJlZShtZXJnZVRyZWUsIHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICB2YXIgaW5jb21pbmdWYWx1ZSA9IF90aGlzLnByb2Nlc3NGaWVsZFZhbHVlKHZhbHVlLCBmaWVsZCwgZmllbGQuc2VsZWN0aW9uU2V0XG4gICAgICAgICAgICAgICAgICAgID8gZ2V0Q29udGV4dEZsYXZvcihjb250ZXh0LCBmYWxzZSwgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIDogY29udGV4dCwgY2hpbGRUcmVlKTtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRUeXBlbmFtZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQuc2VsZWN0aW9uU2V0ICYmXG4gICAgICAgICAgICAgICAgICAgIChpc1JlZmVyZW5jZShpbmNvbWluZ1ZhbHVlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVWYWx1ZUlzU3RvcmVPYmplY3QoaW5jb21pbmdWYWx1ZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkVHlwZW5hbWUgPSByZWFkRmllbGQoXCJfX3R5cGVuYW1lXCIsIGluY29taW5nVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbWVyZ2UgPSBwb2xpY2llcy5nZXRNZXJnZUZ1bmN0aW9uKHR5cGVuYW1lLCBmaWVsZC5uYW1lLnZhbHVlLCBjaGlsZFR5cGVuYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAobWVyZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRUcmVlLmluZm8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlbmFtZTogdHlwZW5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXJnZTogbWVyZ2UsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtYXliZVJlY3ljbGVDaGlsZE1lcmdlVHJlZShtZXJnZVRyZWUsIHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5jb21pbmcgPSBjb250ZXh0Lm1lcmdlKGluY29taW5nLCAoX2EgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgX2Fbc3RvcmVGaWVsZE5hbWVdID0gaW5jb21pbmdWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgX2EpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKF9fREVWX18gJiZcbiAgICAgICAgICAgICAgICAhY29udGV4dC5jbGllbnRPbmx5ICYmXG4gICAgICAgICAgICAgICAgIWNvbnRleHQuZGVmZXJyZWQgJiZcbiAgICAgICAgICAgICAgICAhYWRkVHlwZW5hbWVUb0RvY3VtZW50LmFkZGVkKGZpZWxkKSAmJlxuICAgICAgICAgICAgICAgICFwb2xpY2llcy5nZXRSZWFkRnVuY3Rpb24odHlwZW5hbWUsIGZpZWxkLm5hbWUudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgX19ERVZfXyAmJiBpbnZhcmlhbnQuZXJyb3IoXCJNaXNzaW5nIGZpZWxkICdcIi5jb25jYXQocmVzdWx0S2V5TmFtZUZyb21GaWVsZChmaWVsZCksIFwiJyB3aGlsZSB3cml0aW5nIHJlc3VsdCBcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KHJlc3VsdCwgbnVsbCwgMikpLnN1YnN0cmluZygwLCAxMDAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIF9iID0gcG9saWNpZXMuaWRlbnRpZnkocmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgdHlwZW5hbWU6IHR5cGVuYW1lLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvblNldDogc2VsZWN0aW9uU2V0LFxuICAgICAgICAgICAgICAgIGZyYWdtZW50TWFwOiBjb250ZXh0LmZyYWdtZW50TWFwLFxuICAgICAgICAgICAgICAgIHN0b3JlT2JqZWN0OiBpbmNvbWluZyxcbiAgICAgICAgICAgICAgICByZWFkRmllbGQ6IHJlYWRGaWVsZCxcbiAgICAgICAgICAgIH0pLCBpZCA9IF9iWzBdLCBrZXlPYmplY3QgPSBfYlsxXTtcbiAgICAgICAgICAgIGRhdGFJZCA9IGRhdGFJZCB8fCBpZDtcbiAgICAgICAgICAgIGlmIChrZXlPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpbmNvbWluZyA9IGNvbnRleHQubWVyZ2UoaW5jb21pbmcsIGtleU9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmICghZGF0YUlkKVxuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiBkYXRhSWQpIHtcbiAgICAgICAgICAgIHZhciBkYXRhUmVmID0gbWFrZVJlZmVyZW5jZShkYXRhSWQpO1xuICAgICAgICAgICAgdmFyIHNldHMgPSBjb250ZXh0LndyaXR0ZW5bZGF0YUlkXSB8fCAoY29udGV4dC53cml0dGVuW2RhdGFJZF0gPSBbXSk7XG4gICAgICAgICAgICBpZiAoc2V0cy5pbmRleE9mKHNlbGVjdGlvblNldCkgPj0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVJlZjtcbiAgICAgICAgICAgIHNldHMucHVzaChzZWxlY3Rpb25TZXQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZGVyICYmIHRoaXMucmVhZGVyLmlzRnJlc2gocmVzdWx0LCBkYXRhUmVmLCBzZWxlY3Rpb25TZXQsIGNvbnRleHQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFSZWY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJldmlvdXNfMSA9IGNvbnRleHQuaW5jb21pbmdCeUlkLmdldChkYXRhSWQpO1xuICAgICAgICAgICAgaWYgKHByZXZpb3VzXzEpIHtcbiAgICAgICAgICAgICAgICBwcmV2aW91c18xLnN0b3JlT2JqZWN0ID0gY29udGV4dC5tZXJnZShwcmV2aW91c18xLnN0b3JlT2JqZWN0LCBpbmNvbWluZyk7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNfMS5tZXJnZVRyZWUgPSBtZXJnZU1lcmdlVHJlZXMocHJldmlvdXNfMS5tZXJnZVRyZWUsIG1lcmdlVHJlZSk7XG4gICAgICAgICAgICAgICAgZmllbGROb2RlU2V0LmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7IHJldHVybiBwcmV2aW91c18xLmZpZWxkTm9kZVNldC5hZGQoZmllbGQpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuaW5jb21pbmdCeUlkLnNldChkYXRhSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgc3RvcmVPYmplY3Q6IGluY29taW5nLFxuICAgICAgICAgICAgICAgICAgICBtZXJnZVRyZWU6IG1lcmdlVHJlZUlzRW1wdHkobWVyZ2VUcmVlKSA/IHZvaWQgMCA6IG1lcmdlVHJlZSxcbiAgICAgICAgICAgICAgICAgICAgZmllbGROb2RlU2V0OiBmaWVsZE5vZGVTZXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0YVJlZjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5jb21pbmc7XG4gICAgfTtcbiAgICBTdG9yZVdyaXRlci5wcm90b3R5cGUucHJvY2Vzc0ZpZWxkVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUsIGZpZWxkLCBjb250ZXh0LCBtZXJnZVRyZWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCFmaWVsZC5zZWxlY3Rpb25TZXQgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBfX0RFVl9fID8gY2xvbmVEZWVwKHZhbHVlKSA6IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLm1hcChmdW5jdGlvbiAoaXRlbSwgaSkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF90aGlzLnByb2Nlc3NGaWVsZFZhbHVlKGl0ZW0sIGZpZWxkLCBjb250ZXh0LCBnZXRDaGlsZE1lcmdlVHJlZShtZXJnZVRyZWUsIGkpKTtcbiAgICAgICAgICAgICAgICBtYXliZVJlY3ljbGVDaGlsZE1lcmdlVHJlZShtZXJnZVRyZWUsIGkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NTZWxlY3Rpb25TZXQoe1xuICAgICAgICAgICAgcmVzdWx0OiB2YWx1ZSxcbiAgICAgICAgICAgIHNlbGVjdGlvblNldDogZmllbGQuc2VsZWN0aW9uU2V0LFxuICAgICAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgICAgIG1lcmdlVHJlZTogbWVyZ2VUcmVlLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFN0b3JlV3JpdGVyLnByb3RvdHlwZS5mbGF0dGVuRmllbGRzID0gZnVuY3Rpb24gKHNlbGVjdGlvblNldCwgcmVzdWx0LCBjb250ZXh0LCB0eXBlbmFtZSkge1xuICAgICAgICBpZiAodHlwZW5hbWUgPT09IHZvaWQgMCkgeyB0eXBlbmFtZSA9IGdldFR5cGVuYW1lRnJvbVJlc3VsdChyZXN1bHQsIHNlbGVjdGlvblNldCwgY29udGV4dC5mcmFnbWVudE1hcCk7IH1cbiAgICAgICAgdmFyIGZpZWxkTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB2YXIgcG9saWNpZXMgPSB0aGlzLmNhY2hlLnBvbGljaWVzO1xuICAgICAgICB2YXIgbGltaXRpbmdUcmllID0gbmV3IFRyaWUoZmFsc2UpO1xuICAgICAgICAoZnVuY3Rpb24gZmxhdHRlbihzZWxlY3Rpb25TZXQsIGluaGVyaXRlZENvbnRleHQpIHtcbiAgICAgICAgICAgIHZhciB2aXNpdGVkTm9kZSA9IGxpbWl0aW5nVHJpZS5sb29rdXAoc2VsZWN0aW9uU2V0LCBpbmhlcml0ZWRDb250ZXh0LmNsaWVudE9ubHksIGluaGVyaXRlZENvbnRleHQuZGVmZXJyZWQpO1xuICAgICAgICAgICAgaWYgKHZpc2l0ZWROb2RlLnZpc2l0ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmlzaXRlZE5vZGUudmlzaXRlZCA9IHRydWU7XG4gICAgICAgICAgICBzZWxlY3Rpb25TZXQuc2VsZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNob3VsZEluY2x1ZGUoc2VsZWN0aW9uLCBjb250ZXh0LnZhcmlhYmxlcykpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgY2xpZW50T25seSA9IGluaGVyaXRlZENvbnRleHQuY2xpZW50T25seSwgZGVmZXJyZWQgPSBpbmhlcml0ZWRDb250ZXh0LmRlZmVycmVkO1xuICAgICAgICAgICAgICAgIGlmICghKGNsaWVudE9ubHkgJiYgZGVmZXJyZWQpICYmXG4gICAgICAgICAgICAgICAgICAgIGlzTm9uRW1wdHlBcnJheShzZWxlY3Rpb24uZGlyZWN0aXZlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uLmRpcmVjdGl2ZXMuZm9yRWFjaChmdW5jdGlvbiAoZGlyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGRpci5uYW1lLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09IFwiY2xpZW50XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50T25seSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gXCJkZWZlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHNPYmplY3RGcm9tRmllbGQoZGlyLCBjb250ZXh0LnZhcmlhYmxlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhcmdzIHx8IGFyZ3MuaWYgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNGaWVsZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBleGlzdGluZyA9IGZpZWxkTWFwLmdldChzZWxlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudE9ubHkgPSBjbGllbnRPbmx5ICYmIGV4aXN0aW5nLmNsaWVudE9ubHk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZCA9IGRlZmVycmVkICYmIGV4aXN0aW5nLmRlZmVycmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTWFwLnNldChzZWxlY3Rpb24sIGdldENvbnRleHRGbGF2b3IoY29udGV4dCwgY2xpZW50T25seSwgZGVmZXJyZWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmcmFnbWVudCA9IGdldEZyYWdtZW50RnJvbVNlbGVjdGlvbihzZWxlY3Rpb24sIGNvbnRleHQubG9va3VwRnJhZ21lbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZyYWdtZW50ICYmIHNlbGVjdGlvbi5raW5kID09PSBLaW5kLkZSQUdNRU5UX1NQUkVBRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX19ERVZfXyA/IG5ldyBJbnZhcmlhbnRFcnJvcihcIk5vIGZyYWdtZW50IG5hbWVkIFwiLmNvbmNhdChzZWxlY3Rpb24ubmFtZS52YWx1ZSkpIDogbmV3IEludmFyaWFudEVycm9yKDgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChmcmFnbWVudCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgcG9saWNpZXMuZnJhZ21lbnRNYXRjaGVzKGZyYWdtZW50LCB0eXBlbmFtZSwgcmVzdWx0LCBjb250ZXh0LnZhcmlhYmxlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYXR0ZW4oZnJhZ21lbnQuc2VsZWN0aW9uU2V0LCBnZXRDb250ZXh0Rmxhdm9yKGNvbnRleHQsIGNsaWVudE9ubHksIGRlZmVycmVkKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkoc2VsZWN0aW9uU2V0LCBjb250ZXh0KTtcbiAgICAgICAgcmV0dXJuIGZpZWxkTWFwO1xuICAgIH07XG4gICAgU3RvcmVXcml0ZXIucHJvdG90eXBlLmFwcGx5TWVyZ2VzID0gZnVuY3Rpb24gKG1lcmdlVHJlZSwgZXhpc3RpbmcsIGluY29taW5nLCBjb250ZXh0LCBnZXRTdG9yYWdlQXJncykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChtZXJnZVRyZWUubWFwLnNpemUgJiYgIWlzUmVmZXJlbmNlKGluY29taW5nKSkge1xuICAgICAgICAgICAgdmFyIGVfMSA9ICghaXNBcnJheShpbmNvbWluZykgJiZcbiAgICAgICAgICAgICAgICAoaXNSZWZlcmVuY2UoZXhpc3RpbmcpIHx8IHN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0KGV4aXN0aW5nKSkpID8gZXhpc3RpbmcgOiB2b2lkIDA7XG4gICAgICAgICAgICB2YXIgaV8xID0gaW5jb21pbmc7XG4gICAgICAgICAgICBpZiAoZV8xICYmICFnZXRTdG9yYWdlQXJncykge1xuICAgICAgICAgICAgICAgIGdldFN0b3JhZ2VBcmdzID0gW2lzUmVmZXJlbmNlKGVfMSkgPyBlXzEuX19yZWYgOiBlXzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNoYW5nZWRGaWVsZHNfMTtcbiAgICAgICAgICAgIHZhciBnZXRWYWx1ZV8xID0gZnVuY3Rpb24gKGZyb20sIG5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNBcnJheShmcm9tKVxuICAgICAgICAgICAgICAgICAgICA/ICh0eXBlb2YgbmFtZSA9PT0gXCJudW1iZXJcIiA/IGZyb21bbmFtZV0gOiB2b2lkIDApXG4gICAgICAgICAgICAgICAgICAgIDogY29udGV4dC5zdG9yZS5nZXRGaWVsZFZhbHVlKGZyb20sIFN0cmluZyhuYW1lKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbWVyZ2VUcmVlLm1hcC5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZFRyZWUsIHN0b3JlRmllbGROYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVWYWwgPSBnZXRWYWx1ZV8xKGVfMSwgc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgIHZhciBpVmFsID0gZ2V0VmFsdWVfMShpXzEsIHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBpVmFsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKGdldFN0b3JhZ2VBcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGdldFN0b3JhZ2VBcmdzLnB1c2goc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgYVZhbCA9IF90aGlzLmFwcGx5TWVyZ2VzKGNoaWxkVHJlZSwgZVZhbCwgaVZhbCwgY29udGV4dCwgZ2V0U3RvcmFnZUFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChhVmFsICE9PSBpVmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWRGaWVsZHNfMSA9IGNoYW5nZWRGaWVsZHNfMSB8fCBuZXcgTWFwO1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkRmllbGRzXzEuc2V0KHN0b3JlRmllbGROYW1lLCBhVmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdldFN0b3JhZ2VBcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFyaWFudChnZXRTdG9yYWdlQXJncy5wb3AoKSA9PT0gc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNoYW5nZWRGaWVsZHNfMSkge1xuICAgICAgICAgICAgICAgIGluY29taW5nID0gKGlzQXJyYXkoaV8xKSA/IGlfMS5zbGljZSgwKSA6IF9fYXNzaWduKHt9LCBpXzEpKTtcbiAgICAgICAgICAgICAgICBjaGFuZ2VkRmllbGRzXzEuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5jb21pbmdbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVyZ2VUcmVlLmluZm8pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlLnBvbGljaWVzLnJ1bk1lcmdlRnVuY3Rpb24oZXhpc3RpbmcsIGluY29taW5nLCBtZXJnZVRyZWUuaW5mbywgY29udGV4dCwgZ2V0U3RvcmFnZUFyZ3MgJiYgKF9hID0gY29udGV4dC5zdG9yZSkuZ2V0U3RvcmFnZS5hcHBseShfYSwgZ2V0U3RvcmFnZUFyZ3MpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5jb21pbmc7XG4gICAgfTtcbiAgICByZXR1cm4gU3RvcmVXcml0ZXI7XG59KCkpO1xuZXhwb3J0IHsgU3RvcmVXcml0ZXIgfTtcbnZhciBlbXB0eU1lcmdlVHJlZVBvb2wgPSBbXTtcbmZ1bmN0aW9uIGdldENoaWxkTWVyZ2VUcmVlKF9hLCBuYW1lKSB7XG4gICAgdmFyIG1hcCA9IF9hLm1hcDtcbiAgICBpZiAoIW1hcC5oYXMobmFtZSkpIHtcbiAgICAgICAgbWFwLnNldChuYW1lLCBlbXB0eU1lcmdlVHJlZVBvb2wucG9wKCkgfHwgeyBtYXA6IG5ldyBNYXAgfSk7XG4gICAgfVxuICAgIHJldHVybiBtYXAuZ2V0KG5hbWUpO1xufVxuZnVuY3Rpb24gbWVyZ2VNZXJnZVRyZWVzKGxlZnQsIHJpZ2h0KSB7XG4gICAgaWYgKGxlZnQgPT09IHJpZ2h0IHx8ICFyaWdodCB8fCBtZXJnZVRyZWVJc0VtcHR5KHJpZ2h0KSlcbiAgICAgICAgcmV0dXJuIGxlZnQ7XG4gICAgaWYgKCFsZWZ0IHx8IG1lcmdlVHJlZUlzRW1wdHkobGVmdCkpXG4gICAgICAgIHJldHVybiByaWdodDtcbiAgICB2YXIgaW5mbyA9IGxlZnQuaW5mbyAmJiByaWdodC5pbmZvID8gX19hc3NpZ24oX19hc3NpZ24oe30sIGxlZnQuaW5mbyksIHJpZ2h0LmluZm8pIDogbGVmdC5pbmZvIHx8IHJpZ2h0LmluZm87XG4gICAgdmFyIG5lZWRUb01lcmdlTWFwcyA9IGxlZnQubWFwLnNpemUgJiYgcmlnaHQubWFwLnNpemU7XG4gICAgdmFyIG1hcCA9IG5lZWRUb01lcmdlTWFwcyA/IG5ldyBNYXAgOlxuICAgICAgICBsZWZ0Lm1hcC5zaXplID8gbGVmdC5tYXAgOiByaWdodC5tYXA7XG4gICAgdmFyIG1lcmdlZCA9IHsgaW5mbzogaW5mbywgbWFwOiBtYXAgfTtcbiAgICBpZiAobmVlZFRvTWVyZ2VNYXBzKSB7XG4gICAgICAgIHZhciByZW1haW5pbmdSaWdodEtleXNfMSA9IG5ldyBTZXQocmlnaHQubWFwLmtleXMoKSk7XG4gICAgICAgIGxlZnQubWFwLmZvckVhY2goZnVuY3Rpb24gKGxlZnRUcmVlLCBrZXkpIHtcbiAgICAgICAgICAgIG1lcmdlZC5tYXAuc2V0KGtleSwgbWVyZ2VNZXJnZVRyZWVzKGxlZnRUcmVlLCByaWdodC5tYXAuZ2V0KGtleSkpKTtcbiAgICAgICAgICAgIHJlbWFpbmluZ1JpZ2h0S2V5c18xLmRlbGV0ZShrZXkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVtYWluaW5nUmlnaHRLZXlzXzEuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBtZXJnZWQubWFwLnNldChrZXksIG1lcmdlTWVyZ2VUcmVlcyhyaWdodC5tYXAuZ2V0KGtleSksIGxlZnQubWFwLmdldChrZXkpKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VkO1xufVxuZnVuY3Rpb24gbWVyZ2VUcmVlSXNFbXB0eSh0cmVlKSB7XG4gICAgcmV0dXJuICF0cmVlIHx8ICEodHJlZS5pbmZvIHx8IHRyZWUubWFwLnNpemUpO1xufVxuZnVuY3Rpb24gbWF5YmVSZWN5Y2xlQ2hpbGRNZXJnZVRyZWUoX2EsIG5hbWUpIHtcbiAgICB2YXIgbWFwID0gX2EubWFwO1xuICAgIHZhciBjaGlsZFRyZWUgPSBtYXAuZ2V0KG5hbWUpO1xuICAgIGlmIChjaGlsZFRyZWUgJiYgbWVyZ2VUcmVlSXNFbXB0eShjaGlsZFRyZWUpKSB7XG4gICAgICAgIGVtcHR5TWVyZ2VUcmVlUG9vbC5wdXNoKGNoaWxkVHJlZSk7XG4gICAgICAgIG1hcC5kZWxldGUobmFtZSk7XG4gICAgfVxufVxudmFyIHdhcm5pbmdzID0gbmV3IFNldCgpO1xuZnVuY3Rpb24gd2FybkFib3V0RGF0YUxvc3MoZXhpc3RpbmdSZWYsIGluY29taW5nT2JqLCBzdG9yZUZpZWxkTmFtZSwgc3RvcmUpIHtcbiAgICB2YXIgZ2V0Q2hpbGQgPSBmdW5jdGlvbiAob2JqT3JSZWYpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gc3RvcmUuZ2V0RmllbGRWYWx1ZShvYmpPclJlZiwgc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICByZXR1cm4gdHlwZW9mIGNoaWxkID09PSBcIm9iamVjdFwiICYmIGNoaWxkO1xuICAgIH07XG4gICAgdmFyIGV4aXN0aW5nID0gZ2V0Q2hpbGQoZXhpc3RpbmdSZWYpO1xuICAgIGlmICghZXhpc3RpbmcpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgaW5jb21pbmcgPSBnZXRDaGlsZChpbmNvbWluZ09iaik7XG4gICAgaWYgKCFpbmNvbWluZylcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmIChpc1JlZmVyZW5jZShleGlzdGluZykpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAoZXF1YWwoZXhpc3RpbmcsIGluY29taW5nKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmIChPYmplY3Qua2V5cyhleGlzdGluZykuZXZlcnkoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gc3RvcmUuZ2V0RmllbGRWYWx1ZShpbmNvbWluZywga2V5KSAhPT0gdm9pZCAwOyB9KSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBwYXJlbnRUeXBlID0gc3RvcmUuZ2V0RmllbGRWYWx1ZShleGlzdGluZ1JlZiwgXCJfX3R5cGVuYW1lXCIpIHx8XG4gICAgICAgIHN0b3JlLmdldEZpZWxkVmFsdWUoaW5jb21pbmdPYmosIFwiX190eXBlbmFtZVwiKTtcbiAgICB2YXIgZmllbGROYW1lID0gZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZSk7XG4gICAgdmFyIHR5cGVEb3ROYW1lID0gXCJcIi5jb25jYXQocGFyZW50VHlwZSwgXCIuXCIpLmNvbmNhdChmaWVsZE5hbWUpO1xuICAgIGlmICh3YXJuaW5ncy5oYXModHlwZURvdE5hbWUpKVxuICAgICAgICByZXR1cm47XG4gICAgd2FybmluZ3MuYWRkKHR5cGVEb3ROYW1lKTtcbiAgICB2YXIgY2hpbGRUeXBlbmFtZXMgPSBbXTtcbiAgICBpZiAoIWlzQXJyYXkoZXhpc3RpbmcpICYmXG4gICAgICAgICFpc0FycmF5KGluY29taW5nKSkge1xuICAgICAgICBbZXhpc3RpbmcsIGluY29taW5nXS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgICAgdmFyIHR5cGVuYW1lID0gc3RvcmUuZ2V0RmllbGRWYWx1ZShjaGlsZCwgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0eXBlbmFtZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgICFjaGlsZFR5cGVuYW1lcy5pbmNsdWRlcyh0eXBlbmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjaGlsZFR5cGVuYW1lcy5wdXNoKHR5cGVuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9fREVWX18gJiYgaW52YXJpYW50Lndhcm4oXCJDYWNoZSBkYXRhIG1heSBiZSBsb3N0IHdoZW4gcmVwbGFjaW5nIHRoZSBcIi5jb25jYXQoZmllbGROYW1lLCBcIiBmaWVsZCBvZiBhIFwiKS5jb25jYXQocGFyZW50VHlwZSwgXCIgb2JqZWN0LlxcblxcblRvIGFkZHJlc3MgdGhpcyBwcm9ibGVtICh3aGljaCBpcyBub3QgYSBidWcgaW4gQXBvbGxvIENsaWVudCksIFwiKS5jb25jYXQoY2hpbGRUeXBlbmFtZXMubGVuZ3RoXG4gICAgICAgID8gXCJlaXRoZXIgZW5zdXJlIGFsbCBvYmplY3RzIG9mIHR5cGUgXCIgK1xuICAgICAgICAgICAgY2hpbGRUeXBlbmFtZXMuam9pbihcIiBhbmQgXCIpICsgXCIgaGF2ZSBhbiBJRCBvciBhIGN1c3RvbSBtZXJnZSBmdW5jdGlvbiwgb3IgXCJcbiAgICAgICAgOiBcIlwiLCBcImRlZmluZSBhIGN1c3RvbSBtZXJnZSBmdW5jdGlvbiBmb3IgdGhlIFwiKS5jb25jYXQodHlwZURvdE5hbWUsIFwiIGZpZWxkLCBzbyBJbk1lbW9yeUNhY2hlIGNhbiBzYWZlbHkgbWVyZ2UgdGhlc2Ugb2JqZWN0czpcXG5cXG4gIGV4aXN0aW5nOiBcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nKS5zbGljZSgwLCAxMDAwKSwgXCJcXG4gIGluY29taW5nOiBcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KGluY29taW5nKS5zbGljZSgwLCAxMDAwKSwgXCJcXG5cXG5Gb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGVzZSBvcHRpb25zLCBwbGVhc2UgcmVmZXIgdG8gdGhlIGRvY3VtZW50YXRpb246XFxuXFxuICAqIEVuc3VyaW5nIGVudGl0eSBvYmplY3RzIGhhdmUgSURzOiBodHRwczovL2dvLmFwb2xsby5kZXYvYy9nZW5lcmF0aW5nLXVuaXF1ZS1pZGVudGlmaWVyc1xcbiAgKiBEZWZpbmluZyBjdXN0b20gbWVyZ2UgZnVuY3Rpb25zOiBodHRwczovL2dvLmFwb2xsby5kZXYvYy9tZXJnaW5nLW5vbi1ub3JtYWxpemVkLW9iamVjdHNcXG5cIikpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d3JpdGVUb1N0b3JlLmpzLm1hcCIsImltcG9ydCB7IF9fYXNzaWduLCBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuaW1wb3J0IFwiLi9maXhQb2x5ZmlsbHMuanNcIjtcbmltcG9ydCB7IHdyYXAgfSBmcm9tICdvcHRpbWlzbSc7XG5pbXBvcnQgeyBlcXVhbCB9IGZyb20gJ0B3cnkvZXF1YWxpdHknO1xuaW1wb3J0IHsgQXBvbGxvQ2FjaGUgfSBmcm9tIFwiLi4vY29yZS9jYWNoZS5qc1wiO1xuaW1wb3J0IHsgTWlzc2luZ0ZpZWxkRXJyb3IgfSBmcm9tIFwiLi4vY29yZS90eXBlcy9jb21tb24uanNcIjtcbmltcG9ydCB7IGFkZFR5cGVuYW1lVG9Eb2N1bWVudCwgaXNSZWZlcmVuY2UsIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgU3RvcmVSZWFkZXIgfSBmcm9tIFwiLi9yZWFkRnJvbVN0b3JlLmpzXCI7XG5pbXBvcnQgeyBTdG9yZVdyaXRlciB9IGZyb20gXCIuL3dyaXRlVG9TdG9yZS5qc1wiO1xuaW1wb3J0IHsgRW50aXR5U3RvcmUsIHN1cHBvcnRzUmVzdWx0Q2FjaGluZyB9IGZyb20gXCIuL2VudGl0eVN0b3JlLmpzXCI7XG5pbXBvcnQgeyBtYWtlVmFyLCBmb3JnZXRDYWNoZSwgcmVjYWxsQ2FjaGUgfSBmcm9tIFwiLi9yZWFjdGl2ZVZhcnMuanNcIjtcbmltcG9ydCB7IFBvbGljaWVzIH0gZnJvbSBcIi4vcG9saWNpZXMuanNcIjtcbmltcG9ydCB7IGhhc093biwgbm9ybWFsaXplQ29uZmlnLCBzaG91bGRDYW5vbml6ZVJlc3VsdHMgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5pbXBvcnQgeyBjYW5vbmljYWxTdHJpbmdpZnkgfSBmcm9tIFwiLi9vYmplY3QtY2Fub24uanNcIjtcbnZhciBJbk1lbW9yeUNhY2hlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW5NZW1vcnlDYWNoZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBJbk1lbW9yeUNhY2hlKGNvbmZpZykge1xuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMud2F0Y2hlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgX3RoaXMudHlwZW5hbWVEb2N1bWVudENhY2hlID0gbmV3IE1hcCgpO1xuICAgICAgICBfdGhpcy5tYWtlVmFyID0gbWFrZVZhcjtcbiAgICAgICAgX3RoaXMudHhDb3VudCA9IDA7XG4gICAgICAgIF90aGlzLmNvbmZpZyA9IG5vcm1hbGl6ZUNvbmZpZyhjb25maWcpO1xuICAgICAgICBfdGhpcy5hZGRUeXBlbmFtZSA9ICEhX3RoaXMuY29uZmlnLmFkZFR5cGVuYW1lO1xuICAgICAgICBfdGhpcy5wb2xpY2llcyA9IG5ldyBQb2xpY2llcyh7XG4gICAgICAgICAgICBjYWNoZTogX3RoaXMsXG4gICAgICAgICAgICBkYXRhSWRGcm9tT2JqZWN0OiBfdGhpcy5jb25maWcuZGF0YUlkRnJvbU9iamVjdCxcbiAgICAgICAgICAgIHBvc3NpYmxlVHlwZXM6IF90aGlzLmNvbmZpZy5wb3NzaWJsZVR5cGVzLFxuICAgICAgICAgICAgdHlwZVBvbGljaWVzOiBfdGhpcy5jb25maWcudHlwZVBvbGljaWVzLFxuICAgICAgICB9KTtcbiAgICAgICAgX3RoaXMuaW5pdCgpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEluTWVtb3J5Q2FjaGUucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByb290U3RvcmUgPSB0aGlzLmRhdGEgPSBuZXcgRW50aXR5U3RvcmUuUm9vdCh7XG4gICAgICAgICAgICBwb2xpY2llczogdGhpcy5wb2xpY2llcyxcbiAgICAgICAgICAgIHJlc3VsdENhY2hpbmc6IHRoaXMuY29uZmlnLnJlc3VsdENhY2hpbmcsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9wdGltaXN0aWNEYXRhID0gcm9vdFN0b3JlLnN0dW1wO1xuICAgICAgICB0aGlzLnJlc2V0UmVzdWx0Q2FjaGUoKTtcbiAgICB9O1xuICAgIEluTWVtb3J5Q2FjaGUucHJvdG90eXBlLnJlc2V0UmVzdWx0Q2FjaGUgPSBmdW5jdGlvbiAocmVzZXRSZXN1bHRJZGVudGl0aWVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBwcmV2aW91c1JlYWRlciA9IHRoaXMuc3RvcmVSZWFkZXI7XG4gICAgICAgIHZhciBmcmFnbWVudHMgPSB0aGlzLmNvbmZpZy5mcmFnbWVudHM7XG4gICAgICAgIHRoaXMuc3RvcmVXcml0ZXIgPSBuZXcgU3RvcmVXcml0ZXIodGhpcywgdGhpcy5zdG9yZVJlYWRlciA9IG5ldyBTdG9yZVJlYWRlcih7XG4gICAgICAgICAgICBjYWNoZTogdGhpcyxcbiAgICAgICAgICAgIGFkZFR5cGVuYW1lOiB0aGlzLmFkZFR5cGVuYW1lLFxuICAgICAgICAgICAgcmVzdWx0Q2FjaGVNYXhTaXplOiB0aGlzLmNvbmZpZy5yZXN1bHRDYWNoZU1heFNpemUsXG4gICAgICAgICAgICBjYW5vbml6ZVJlc3VsdHM6IHNob3VsZENhbm9uaXplUmVzdWx0cyh0aGlzLmNvbmZpZyksXG4gICAgICAgICAgICBjYW5vbjogcmVzZXRSZXN1bHRJZGVudGl0aWVzXG4gICAgICAgICAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgICAgICAgICA6IHByZXZpb3VzUmVhZGVyICYmIHByZXZpb3VzUmVhZGVyLmNhbm9uLFxuICAgICAgICAgICAgZnJhZ21lbnRzOiBmcmFnbWVudHMsXG4gICAgICAgIH0pLCBmcmFnbWVudHMpO1xuICAgICAgICB0aGlzLm1heWJlQnJvYWRjYXN0V2F0Y2ggPSB3cmFwKGZ1bmN0aW9uIChjLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuYnJvYWRjYXN0V2F0Y2goYywgb3B0aW9ucyk7XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1heDogdGhpcy5jb25maWcucmVzdWx0Q2FjaGVNYXhTaXplLFxuICAgICAgICAgICAgbWFrZUNhY2hlS2V5OiBmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IGMub3B0aW1pc3RpYyA/IF90aGlzLm9wdGltaXN0aWNEYXRhIDogX3RoaXMuZGF0YTtcbiAgICAgICAgICAgICAgICBpZiAoc3VwcG9ydHNSZXN1bHRDYWNoaW5nKHN0b3JlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW1pc3RpYyA9IGMub3B0aW1pc3RpYywgaWQgPSBjLmlkLCB2YXJpYWJsZXMgPSBjLnZhcmlhYmxlcztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLm1ha2VDYWNoZUtleShjLnF1ZXJ5LCBjLmNhbGxiYWNrLCBjYW5vbmljYWxTdHJpbmdpZnkoeyBvcHRpbWlzdGljOiBvcHRpbWlzdGljLCBpZDogaWQsIHZhcmlhYmxlczogdmFyaWFibGVzIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBuZXcgU2V0KFtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5ncm91cCxcbiAgICAgICAgICAgIHRoaXMub3B0aW1pc3RpY0RhdGEuZ3JvdXAsXG4gICAgICAgIF0pLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwKSB7IHJldHVybiBncm91cC5yZXNldENhY2hpbmcoKTsgfSk7XG4gICAgfTtcbiAgICBJbk1lbW9yeUNhY2hlLnByb3RvdHlwZS5yZXN0b3JlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgIGlmIChkYXRhKVxuICAgICAgICAgICAgdGhpcy5kYXRhLnJlcGxhY2UoZGF0YSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUuZXh0cmFjdCA9IGZ1bmN0aW9uIChvcHRpbWlzdGljKSB7XG4gICAgICAgIGlmIChvcHRpbWlzdGljID09PSB2b2lkIDApIHsgb3B0aW1pc3RpYyA9IGZhbHNlOyB9XG4gICAgICAgIHJldHVybiAob3B0aW1pc3RpYyA/IHRoaXMub3B0aW1pc3RpY0RhdGEgOiB0aGlzLmRhdGEpLmV4dHJhY3QoKTtcbiAgICB9O1xuICAgIEluTWVtb3J5Q2FjaGUucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgX2EgPSBvcHRpb25zLnJldHVyblBhcnRpYWxEYXRhLCByZXR1cm5QYXJ0aWFsRGF0YSA9IF9hID09PSB2b2lkIDAgPyBmYWxzZSA6IF9hO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmVSZWFkZXIuZGlmZlF1ZXJ5QWdhaW5zdFN0b3JlKF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgeyBzdG9yZTogb3B0aW9ucy5vcHRpbWlzdGljID8gdGhpcy5vcHRpbWlzdGljRGF0YSA6IHRoaXMuZGF0YSwgY29uZmlnOiB0aGlzLmNvbmZpZywgcmV0dXJuUGFydGlhbERhdGE6IHJldHVyblBhcnRpYWxEYXRhIH0pKS5yZXN1bHQgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBNaXNzaW5nRmllbGRFcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgKyt0aGlzLnR4Q291bnQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdG9yZVdyaXRlci53cml0ZVRvU3RvcmUodGhpcy5kYXRhLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmICghLS10aGlzLnR4Q291bnQgJiYgb3B0aW9ucy5icm9hZGNhc3QgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RXYXRjaGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEluTWVtb3J5Q2FjaGUucHJvdG90eXBlLm1vZGlmeSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIGlmIChoYXNPd24uY2FsbChvcHRpb25zLCBcImlkXCIpICYmICFvcHRpb25zLmlkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0b3JlID0gb3B0aW9ucy5vcHRpbWlzdGljXG4gICAgICAgICAgICA/IHRoaXMub3B0aW1pc3RpY0RhdGFcbiAgICAgICAgICAgIDogdGhpcy5kYXRhO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgKyt0aGlzLnR4Q291bnQ7XG4gICAgICAgICAgICByZXR1cm4gc3RvcmUubW9kaWZ5KG9wdGlvbnMuaWQgfHwgXCJST09UX1FVRVJZXCIsIG9wdGlvbnMuZmllbGRzKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmICghLS10aGlzLnR4Q291bnQgJiYgb3B0aW9ucy5icm9hZGNhc3QgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RXYXRjaGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEluTWVtb3J5Q2FjaGUucHJvdG90eXBlLmRpZmYgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZVJlYWRlci5kaWZmUXVlcnlBZ2FpbnN0U3RvcmUoX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IHN0b3JlOiBvcHRpb25zLm9wdGltaXN0aWMgPyB0aGlzLm9wdGltaXN0aWNEYXRhIDogdGhpcy5kYXRhLCByb290SWQ6IG9wdGlvbnMuaWQgfHwgXCJST09UX1FVRVJZXCIsIGNvbmZpZzogdGhpcy5jb25maWcgfSkpO1xuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUud2F0Y2ggPSBmdW5jdGlvbiAod2F0Y2gpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLndhdGNoZXMuc2l6ZSkge1xuICAgICAgICAgICAgcmVjYWxsQ2FjaGUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53YXRjaGVzLmFkZCh3YXRjaCk7XG4gICAgICAgIGlmICh3YXRjaC5pbW1lZGlhdGUpIHtcbiAgICAgICAgICAgIHRoaXMubWF5YmVCcm9hZGNhc3RXYXRjaCh3YXRjaCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy53YXRjaGVzLmRlbGV0ZSh3YXRjaCkgJiYgIV90aGlzLndhdGNoZXMuc2l6ZSkge1xuICAgICAgICAgICAgICAgIGZvcmdldENhY2hlKF90aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLm1heWJlQnJvYWRjYXN0V2F0Y2guZm9yZ2V0KHdhdGNoKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIEluTWVtb3J5Q2FjaGUucHJvdG90eXBlLmdjID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgY2Fub25pY2FsU3RyaW5naWZ5LnJlc2V0KCk7XG4gICAgICAgIHZhciBpZHMgPSB0aGlzLm9wdGltaXN0aWNEYXRhLmdjKCk7XG4gICAgICAgIGlmIChvcHRpb25zICYmICF0aGlzLnR4Q291bnQpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnJlc2V0UmVzdWx0Q2FjaGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0UmVzdWx0Q2FjaGUob3B0aW9ucy5yZXNldFJlc3VsdElkZW50aXRpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5yZXNldFJlc3VsdElkZW50aXRpZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JlUmVhZGVyLnJlc2V0Q2Fub24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaWRzO1xuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUucmV0YWluID0gZnVuY3Rpb24gKHJvb3RJZCwgb3B0aW1pc3RpYykge1xuICAgICAgICByZXR1cm4gKG9wdGltaXN0aWMgPyB0aGlzLm9wdGltaXN0aWNEYXRhIDogdGhpcy5kYXRhKS5yZXRhaW4ocm9vdElkKTtcbiAgICB9O1xuICAgIEluTWVtb3J5Q2FjaGUucHJvdG90eXBlLnJlbGVhc2UgPSBmdW5jdGlvbiAocm9vdElkLCBvcHRpbWlzdGljKSB7XG4gICAgICAgIHJldHVybiAob3B0aW1pc3RpYyA/IHRoaXMub3B0aW1pc3RpY0RhdGEgOiB0aGlzLmRhdGEpLnJlbGVhc2Uocm9vdElkKTtcbiAgICB9O1xuICAgIEluTWVtb3J5Q2FjaGUucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICBpZiAoaXNSZWZlcmVuY2Uob2JqZWN0KSlcbiAgICAgICAgICAgIHJldHVybiBvYmplY3QuX19yZWY7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb2xpY2llcy5pZGVudGlmeShvYmplY3QpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBfX0RFVl9fICYmIGludmFyaWFudC53YXJuKGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBJbk1lbW9yeUNhY2hlLnByb3RvdHlwZS5ldmljdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucy5pZCkge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKG9wdGlvbnMsIFwiaWRcIikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IGlkOiBcIlJPT1RfUVVFUllcIiB9KTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgKyt0aGlzLnR4Q291bnQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpbWlzdGljRGF0YS5ldmljdChvcHRpb25zLCB0aGlzLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKCEtLXRoaXMudHhDb3VudCAmJiBvcHRpb25zLmJyb2FkY2FzdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgY2Fub25pY2FsU3RyaW5naWZ5LnJlc2V0KCk7XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZGlzY2FyZFdhdGNoZXMpIHtcbiAgICAgICAgICAgIHRoaXMud2F0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uICh3YXRjaCkgeyByZXR1cm4gX3RoaXMubWF5YmVCcm9hZGNhc3RXYXRjaC5mb3JnZXQod2F0Y2gpOyB9KTtcbiAgICAgICAgICAgIHRoaXMud2F0Y2hlcy5jbGVhcigpO1xuICAgICAgICAgICAgZm9yZ2V0Q2FjaGUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfTtcbiAgICBJbk1lbW9yeUNhY2hlLnByb3RvdHlwZS5yZW1vdmVPcHRpbWlzdGljID0gZnVuY3Rpb24gKGlkVG9SZW1vdmUpIHtcbiAgICAgICAgdmFyIG5ld09wdGltaXN0aWNEYXRhID0gdGhpcy5vcHRpbWlzdGljRGF0YS5yZW1vdmVMYXllcihpZFRvUmVtb3ZlKTtcbiAgICAgICAgaWYgKG5ld09wdGltaXN0aWNEYXRhICE9PSB0aGlzLm9wdGltaXN0aWNEYXRhKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGltaXN0aWNEYXRhID0gbmV3T3B0aW1pc3RpY0RhdGE7XG4gICAgICAgICAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUuYmF0Y2ggPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgdXBkYXRlID0gb3B0aW9ucy51cGRhdGUsIF9hID0gb3B0aW9ucy5vcHRpbWlzdGljLCBvcHRpbWlzdGljID0gX2EgPT09IHZvaWQgMCA/IHRydWUgOiBfYSwgcmVtb3ZlT3B0aW1pc3RpYyA9IG9wdGlvbnMucmVtb3ZlT3B0aW1pc3RpYywgb25XYXRjaFVwZGF0ZWQgPSBvcHRpb25zLm9uV2F0Y2hVcGRhdGVkO1xuICAgICAgICB2YXIgdXBkYXRlUmVzdWx0O1xuICAgICAgICB2YXIgcGVyZm9ybSA9IGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMsIGRhdGEgPSBfYS5kYXRhLCBvcHRpbWlzdGljRGF0YSA9IF9hLm9wdGltaXN0aWNEYXRhO1xuICAgICAgICAgICAgKytfdGhpcy50eENvdW50O1xuICAgICAgICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZGF0YSA9IF90aGlzLm9wdGltaXN0aWNEYXRhID0gbGF5ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVSZXN1bHQgPSB1cGRhdGUoX3RoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgLS1fdGhpcy50eENvdW50O1xuICAgICAgICAgICAgICAgIF90aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgICAgIF90aGlzLm9wdGltaXN0aWNEYXRhID0gb3B0aW1pc3RpY0RhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciBhbHJlYWR5RGlydHkgPSBuZXcgU2V0KCk7XG4gICAgICAgIGlmIChvbldhdGNoVXBkYXRlZCAmJiAhdGhpcy50eENvdW50KSB7XG4gICAgICAgICAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IG9uV2F0Y2hVcGRhdGVkOiBmdW5jdGlvbiAod2F0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxyZWFkeURpcnR5LmFkZCh3YXRjaCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG9wdGltaXN0aWMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGltaXN0aWNEYXRhID0gdGhpcy5vcHRpbWlzdGljRGF0YS5hZGRMYXllcihvcHRpbWlzdGljLCBwZXJmb3JtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpbWlzdGljID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcGVyZm9ybSh0aGlzLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGVyZm9ybSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcmVtb3ZlT3B0aW1pc3RpYyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhpcy5vcHRpbWlzdGljRGF0YSA9IHRoaXMub3B0aW1pc3RpY0RhdGEucmVtb3ZlTGF5ZXIocmVtb3ZlT3B0aW1pc3RpYyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9uV2F0Y2hVcGRhdGVkICYmIGFscmVhZHlEaXJ0eS5zaXplKSB7XG4gICAgICAgICAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IG9uV2F0Y2hVcGRhdGVkOiBmdW5jdGlvbiAod2F0Y2gsIGRpZmYpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG9uV2F0Y2hVcGRhdGVkLmNhbGwodGhpcywgd2F0Y2gsIGRpZmYpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxyZWFkeURpcnR5LmRlbGV0ZSh3YXRjaCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9IH0pKTtcbiAgICAgICAgICAgIGlmIChhbHJlYWR5RGlydHkuc2l6ZSkge1xuICAgICAgICAgICAgICAgIGFscmVhZHlEaXJ0eS5mb3JFYWNoKGZ1bmN0aW9uICh3YXRjaCkgeyByZXR1cm4gX3RoaXMubWF5YmVCcm9hZGNhc3RXYXRjaC5kaXJ0eSh3YXRjaCk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RXYXRjaGVzKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cGRhdGVSZXN1bHQ7XG4gICAgfTtcbiAgICBJbk1lbW9yeUNhY2hlLnByb3RvdHlwZS5wZXJmb3JtVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAodXBkYXRlLCBvcHRpbWlzdGljSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2goe1xuICAgICAgICAgICAgdXBkYXRlOiB1cGRhdGUsXG4gICAgICAgICAgICBvcHRpbWlzdGljOiBvcHRpbWlzdGljSWQgfHwgKG9wdGltaXN0aWNJZCAhPT0gbnVsbCksXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUudHJhbnNmb3JtRG9jdW1lbnQgPSBmdW5jdGlvbiAoZG9jdW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuYWRkVHlwZW5hbWUpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnR5cGVuYW1lRG9jdW1lbnRDYWNoZS5nZXQoZG9jdW1lbnQpO1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhZGRUeXBlbmFtZVRvRG9jdW1lbnQoZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMudHlwZW5hbWVEb2N1bWVudENhY2hlLnNldChkb2N1bWVudCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGVuYW1lRG9jdW1lbnRDYWNoZS5zZXQocmVzdWx0LCByZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9jdW1lbnQ7XG4gICAgfTtcbiAgICBJbk1lbW9yeUNhY2hlLnByb3RvdHlwZS50cmFuc2Zvcm1Gb3JMaW5rID0gZnVuY3Rpb24gKGRvY3VtZW50KSB7XG4gICAgICAgIHZhciBmcmFnbWVudHMgPSB0aGlzLmNvbmZpZy5mcmFnbWVudHM7XG4gICAgICAgIHJldHVybiBmcmFnbWVudHNcbiAgICAgICAgICAgID8gZnJhZ21lbnRzLnRyYW5zZm9ybShkb2N1bWVudClcbiAgICAgICAgICAgIDogZG9jdW1lbnQ7XG4gICAgfTtcbiAgICBJbk1lbW9yeUNhY2hlLnByb3RvdHlwZS5icm9hZGNhc3RXYXRjaGVzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLnR4Q291bnQpIHtcbiAgICAgICAgICAgIHRoaXMud2F0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7IHJldHVybiBfdGhpcy5tYXliZUJyb2FkY2FzdFdhdGNoKGMsIG9wdGlvbnMpOyB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUuYnJvYWRjYXN0V2F0Y2ggPSBmdW5jdGlvbiAoYywgb3B0aW9ucykge1xuICAgICAgICB2YXIgbGFzdERpZmYgPSBjLmxhc3REaWZmO1xuICAgICAgICB2YXIgZGlmZiA9IHRoaXMuZGlmZihjKTtcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChjLm9wdGltaXN0aWMgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5vcHRpbWlzdGljID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgZGlmZi5mcm9tT3B0aW1pc3RpY1RyYW5zYWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLm9uV2F0Y2hVcGRhdGVkICYmXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5vbldhdGNoVXBkYXRlZC5jYWxsKHRoaXMsIGMsIGRpZmYsIGxhc3REaWZmKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsYXN0RGlmZiB8fCAhZXF1YWwobGFzdERpZmYucmVzdWx0LCBkaWZmLnJlc3VsdCkpIHtcbiAgICAgICAgICAgIGMuY2FsbGJhY2soYy5sYXN0RGlmZiA9IGRpZmYsIGxhc3REaWZmKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEluTWVtb3J5Q2FjaGU7XG59KEFwb2xsb0NhY2hlKSk7XG5leHBvcnQgeyBJbk1lbW9yeUNhY2hlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbk1lbW9yeUNhY2hlLmpzLm1hcCIsImV4cG9ydCB2YXIgTmV0d29ya1N0YXR1cztcbihmdW5jdGlvbiAoTmV0d29ya1N0YXR1cykge1xuICAgIE5ldHdvcmtTdGF0dXNbTmV0d29ya1N0YXR1c1tcImxvYWRpbmdcIl0gPSAxXSA9IFwibG9hZGluZ1wiO1xuICAgIE5ldHdvcmtTdGF0dXNbTmV0d29ya1N0YXR1c1tcInNldFZhcmlhYmxlc1wiXSA9IDJdID0gXCJzZXRWYXJpYWJsZXNcIjtcbiAgICBOZXR3b3JrU3RhdHVzW05ldHdvcmtTdGF0dXNbXCJmZXRjaE1vcmVcIl0gPSAzXSA9IFwiZmV0Y2hNb3JlXCI7XG4gICAgTmV0d29ya1N0YXR1c1tOZXR3b3JrU3RhdHVzW1wicmVmZXRjaFwiXSA9IDRdID0gXCJyZWZldGNoXCI7XG4gICAgTmV0d29ya1N0YXR1c1tOZXR3b3JrU3RhdHVzW1wicG9sbFwiXSA9IDZdID0gXCJwb2xsXCI7XG4gICAgTmV0d29ya1N0YXR1c1tOZXR3b3JrU3RhdHVzW1wicmVhZHlcIl0gPSA3XSA9IFwicmVhZHlcIjtcbiAgICBOZXR3b3JrU3RhdHVzW05ldHdvcmtTdGF0dXNbXCJlcnJvclwiXSA9IDhdID0gXCJlcnJvclwiO1xufSkoTmV0d29ya1N0YXR1cyB8fCAoTmV0d29ya1N0YXR1cyA9IHt9KSk7XG5leHBvcnQgZnVuY3Rpb24gaXNOZXR3b3JrUmVxdWVzdEluRmxpZ2h0KG5ldHdvcmtTdGF0dXMpIHtcbiAgICByZXR1cm4gbmV0d29ya1N0YXR1cyA/IG5ldHdvcmtTdGF0dXMgPCA3IDogZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uZXR3b3JrU3RhdHVzLmpzLm1hcCIsImltcG9ydCB7IF9fYXNzaWduLCBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCIuLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZXF1YWwgfSBmcm9tICdAd3J5L2VxdWFsaXR5JztcbmltcG9ydCB7IE5ldHdvcmtTdGF0dXMsIGlzTmV0d29ya1JlcXVlc3RJbkZsaWdodCB9IGZyb20gXCIuL25ldHdvcmtTdGF0dXMuanNcIjtcbmltcG9ydCB7IGNsb25lRGVlcCwgY29tcGFjdCwgZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbiwgT2JzZXJ2YWJsZSwgaXRlcmF0ZU9ic2VydmVyc1NhZmVseSwgaXNOb25FbXB0eUFycmF5LCBmaXhPYnNlcnZhYmxlU3ViY2xhc3MsIGdldFF1ZXJ5RGVmaW5pdGlvbiwgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG52YXIgYXNzaWduID0gT2JqZWN0LmFzc2lnbiwgaGFzT3duUHJvcGVydHkgPSBPYmplY3QuaGFzT3duUHJvcGVydHk7XG52YXIgT2JzZXJ2YWJsZVF1ZXJ5ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoT2JzZXJ2YWJsZVF1ZXJ5LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE9ic2VydmFibGVRdWVyeShfYSkge1xuICAgICAgICB2YXIgcXVlcnlNYW5hZ2VyID0gX2EucXVlcnlNYW5hZ2VyLCBxdWVyeUluZm8gPSBfYS5xdWVyeUluZm8sIG9wdGlvbnMgPSBfYS5vcHRpb25zO1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1Yk9ic2VydmVyID0gb2JzZXJ2ZXIuX3N1YnNjcmlwdGlvbi5fb2JzZXJ2ZXI7XG4gICAgICAgICAgICAgICAgaWYgKHN1Yk9ic2VydmVyICYmICFzdWJPYnNlcnZlci5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBzdWJPYnNlcnZlci5lcnJvciA9IGRlZmF1bHRTdWJzY3JpcHRpb25PYnNlcnZlckVycm9yQ2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgICAgIHZhciBmaXJzdCA9ICFfdGhpcy5vYnNlcnZlcnMuc2l6ZTtcbiAgICAgICAgICAgIF90aGlzLm9ic2VydmVycy5hZGQob2JzZXJ2ZXIpO1xuICAgICAgICAgICAgdmFyIGxhc3QgPSBfdGhpcy5sYXN0O1xuICAgICAgICAgICAgaWYgKGxhc3QgJiYgbGFzdC5lcnJvcikge1xuICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yICYmIG9ic2VydmVyLmVycm9yKGxhc3QuZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGFzdCAmJiBsYXN0LnJlc3VsdCkge1xuICAgICAgICAgICAgICAgIG9ic2VydmVyLm5leHQgJiYgb2JzZXJ2ZXIubmV4dChsYXN0LnJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlyc3QpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5yZW9ic2VydmUoKS5jYXRjaChmdW5jdGlvbiAoKSB7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMub2JzZXJ2ZXJzLmRlbGV0ZShvYnNlcnZlcikgJiYgIV90aGlzLm9ic2VydmVycy5zaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRlYXJEb3duUXVlcnkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5vYnNlcnZlcnMgPSBuZXcgU2V0KCk7XG4gICAgICAgIF90aGlzLnN1YnNjcmlwdGlvbnMgPSBuZXcgU2V0KCk7XG4gICAgICAgIF90aGlzLnF1ZXJ5SW5mbyA9IHF1ZXJ5SW5mbztcbiAgICAgICAgX3RoaXMucXVlcnlNYW5hZ2VyID0gcXVlcnlNYW5hZ2VyO1xuICAgICAgICBfdGhpcy5pc1Rvcm5Eb3duID0gZmFsc2U7XG4gICAgICAgIHZhciBfYiA9IHF1ZXJ5TWFuYWdlci5kZWZhdWx0T3B0aW9ucy53YXRjaFF1ZXJ5LCBfYyA9IF9iID09PSB2b2lkIDAgPyB7fSA6IF9iLCBfZCA9IF9jLmZldGNoUG9saWN5LCBkZWZhdWx0RmV0Y2hQb2xpY3kgPSBfZCA9PT0gdm9pZCAwID8gXCJjYWNoZS1maXJzdFwiIDogX2Q7XG4gICAgICAgIHZhciBfZSA9IG9wdGlvbnMuZmV0Y2hQb2xpY3ksIGZldGNoUG9saWN5ID0gX2UgPT09IHZvaWQgMCA/IGRlZmF1bHRGZXRjaFBvbGljeSA6IF9lLCBfZiA9IG9wdGlvbnMuaW5pdGlhbEZldGNoUG9saWN5LCBpbml0aWFsRmV0Y2hQb2xpY3kgPSBfZiA9PT0gdm9pZCAwID8gKGZldGNoUG9saWN5ID09PSBcInN0YW5kYnlcIiA/IGRlZmF1bHRGZXRjaFBvbGljeSA6IGZldGNoUG9saWN5KSA6IF9mO1xuICAgICAgICBfdGhpcy5vcHRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IGluaXRpYWxGZXRjaFBvbGljeTogaW5pdGlhbEZldGNoUG9saWN5LCBmZXRjaFBvbGljeTogZmV0Y2hQb2xpY3kgfSk7XG4gICAgICAgIF90aGlzLnF1ZXJ5SWQgPSBxdWVyeUluZm8ucXVlcnlJZCB8fCBxdWVyeU1hbmFnZXIuZ2VuZXJhdGVRdWVyeUlkKCk7XG4gICAgICAgIHZhciBvcERlZiA9IGdldE9wZXJhdGlvbkRlZmluaXRpb24oX3RoaXMucXVlcnkpO1xuICAgICAgICBfdGhpcy5xdWVyeU5hbWUgPSBvcERlZiAmJiBvcERlZi5uYW1lICYmIG9wRGVmLm5hbWUudmFsdWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUsIFwicXVlcnlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5TWFuYWdlci50cmFuc2Zvcm0odGhpcy5vcHRpb25zLnF1ZXJ5KS5kb2N1bWVudDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLCBcInZhcmlhYmxlc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy52YXJpYWJsZXM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnJlc3VsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhciBvYnNlcnZlciA9IHtcbiAgICAgICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub2JzZXJ2ZXJzLmRlbGV0ZShvYnNlcnZlcik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMub2JzZXJ2ZXJzLnNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnF1ZXJ5TWFuYWdlci5yZW1vdmVRdWVyeShfdGhpcy5xdWVyeUlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiByZWplY3QsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF90aGlzLnN1YnNjcmliZShvYnNlcnZlcik7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5nZXRDdXJyZW50UmVzdWx0ID0gZnVuY3Rpb24gKHNhdmVBc0xhc3RSZXN1bHQpIHtcbiAgICAgICAgaWYgKHNhdmVBc0xhc3RSZXN1bHQgPT09IHZvaWQgMCkgeyBzYXZlQXNMYXN0UmVzdWx0ID0gdHJ1ZTsgfVxuICAgICAgICB2YXIgbGFzdFJlc3VsdCA9IHRoaXMuZ2V0TGFzdFJlc3VsdCh0cnVlKTtcbiAgICAgICAgdmFyIG5ldHdvcmtTdGF0dXMgPSB0aGlzLnF1ZXJ5SW5mby5uZXR3b3JrU3RhdHVzIHx8XG4gICAgICAgICAgICAobGFzdFJlc3VsdCAmJiBsYXN0UmVzdWx0Lm5ldHdvcmtTdGF0dXMpIHx8XG4gICAgICAgICAgICBOZXR3b3JrU3RhdHVzLnJlYWR5O1xuICAgICAgICB2YXIgcmVzdWx0ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGxhc3RSZXN1bHQpLCB7IGxvYWRpbmc6IGlzTmV0d29ya1JlcXVlc3RJbkZsaWdodChuZXR3b3JrU3RhdHVzKSwgbmV0d29ya1N0YXR1czogbmV0d29ya1N0YXR1cyB9KTtcbiAgICAgICAgdmFyIF9hID0gdGhpcy5vcHRpb25zLmZldGNoUG9saWN5LCBmZXRjaFBvbGljeSA9IF9hID09PSB2b2lkIDAgPyBcImNhY2hlLWZpcnN0XCIgOiBfYTtcbiAgICAgICAgaWYgKGZldGNoUG9saWN5ID09PSAnbmV0d29yay1vbmx5JyB8fFxuICAgICAgICAgICAgZmV0Y2hQb2xpY3kgPT09ICduby1jYWNoZScgfHxcbiAgICAgICAgICAgIGZldGNoUG9saWN5ID09PSAnc3RhbmRieScgfHxcbiAgICAgICAgICAgIHRoaXMucXVlcnlNYW5hZ2VyLnRyYW5zZm9ybSh0aGlzLm9wdGlvbnMucXVlcnkpLmhhc0ZvcmNlZFJlc29sdmVycykge1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGRpZmYgPSB0aGlzLnF1ZXJ5SW5mby5nZXREaWZmKCk7XG4gICAgICAgICAgICBpZiAoZGlmZi5jb21wbGV0ZSB8fCB0aGlzLm9wdGlvbnMucmV0dXJuUGFydGlhbERhdGEpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuZGF0YSA9IGRpZmYucmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVxdWFsKHJlc3VsdC5kYXRhLCB7fSkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuZGF0YSA9IHZvaWQgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaWZmLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdC5wYXJ0aWFsO1xuICAgICAgICAgICAgICAgIGlmIChkaWZmLmNvbXBsZXRlICYmXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5uZXR3b3JrU3RhdHVzID09PSBOZXR3b3JrU3RhdHVzLmxvYWRpbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgKGZldGNoUG9saWN5ID09PSAnY2FjaGUtZmlyc3QnIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaFBvbGljeSA9PT0gJ2NhY2hlLW9ubHknKSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQubmV0d29ya1N0YXR1cyA9IE5ldHdvcmtTdGF0dXMucmVhZHk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnBhcnRpYWwgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF9fREVWX18gJiZcbiAgICAgICAgICAgICAgICAhZGlmZi5jb21wbGV0ZSAmJlxuICAgICAgICAgICAgICAgICF0aGlzLm9wdGlvbnMucGFydGlhbFJlZmV0Y2ggJiZcbiAgICAgICAgICAgICAgICAhcmVzdWx0LmxvYWRpbmcgJiZcbiAgICAgICAgICAgICAgICAhcmVzdWx0LmRhdGEgJiZcbiAgICAgICAgICAgICAgICAhcmVzdWx0LmVycm9yKSB7XG4gICAgICAgICAgICAgICAgbG9nTWlzc2luZ0ZpZWxkRXJyb3JzKGRpZmYubWlzc2luZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNhdmVBc0xhc3RSZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTGFzdFJlc3VsdChyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLmlzRGlmZmVyZW50RnJvbUxhc3RSZXN1bHQgPSBmdW5jdGlvbiAobmV3UmVzdWx0LCB2YXJpYWJsZXMpIHtcbiAgICAgICAgcmV0dXJuICghdGhpcy5sYXN0IHx8XG4gICAgICAgICAgICAhZXF1YWwodGhpcy5sYXN0LnJlc3VsdCwgbmV3UmVzdWx0KSB8fFxuICAgICAgICAgICAgKHZhcmlhYmxlcyAmJiAhZXF1YWwodGhpcy5sYXN0LnZhcmlhYmxlcywgdmFyaWFibGVzKSkpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5nZXRMYXN0ID0gZnVuY3Rpb24gKGtleSwgdmFyaWFibGVzTXVzdE1hdGNoKSB7XG4gICAgICAgIHZhciBsYXN0ID0gdGhpcy5sYXN0O1xuICAgICAgICBpZiAobGFzdCAmJlxuICAgICAgICAgICAgbGFzdFtrZXldICYmXG4gICAgICAgICAgICAoIXZhcmlhYmxlc011c3RNYXRjaCB8fCBlcXVhbChsYXN0LnZhcmlhYmxlcywgdGhpcy52YXJpYWJsZXMpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGxhc3Rba2V5XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5nZXRMYXN0UmVzdWx0ID0gZnVuY3Rpb24gKHZhcmlhYmxlc011c3RNYXRjaCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMYXN0KFwicmVzdWx0XCIsIHZhcmlhYmxlc011c3RNYXRjaCk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLmdldExhc3RFcnJvciA9IGZ1bmN0aW9uICh2YXJpYWJsZXNNdXN0TWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGFzdChcImVycm9yXCIsIHZhcmlhYmxlc011c3RNYXRjaCk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnJlc2V0TGFzdFJlc3VsdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmxhc3Q7XG4gICAgICAgIHRoaXMuaXNUb3JuRG93biA9IGZhbHNlO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5yZXNldFF1ZXJ5U3RvcmVFcnJvcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucXVlcnlNYW5hZ2VyLnJlc2V0RXJyb3JzKHRoaXMucXVlcnlJZCk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnJlZmV0Y2ggPSBmdW5jdGlvbiAodmFyaWFibGVzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIHJlb2JzZXJ2ZU9wdGlvbnMgPSB7XG4gICAgICAgICAgICBwb2xsSW50ZXJ2YWw6IDAsXG4gICAgICAgIH07XG4gICAgICAgIHZhciBmZXRjaFBvbGljeSA9IHRoaXMub3B0aW9ucy5mZXRjaFBvbGljeTtcbiAgICAgICAgaWYgKGZldGNoUG9saWN5ID09PSAnY2FjaGUtYW5kLW5ldHdvcmsnKSB7XG4gICAgICAgICAgICByZW9ic2VydmVPcHRpb25zLmZldGNoUG9saWN5ID0gZmV0Y2hQb2xpY3k7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZmV0Y2hQb2xpY3kgPT09ICduby1jYWNoZScpIHtcbiAgICAgICAgICAgIHJlb2JzZXJ2ZU9wdGlvbnMuZmV0Y2hQb2xpY3kgPSAnbm8tY2FjaGUnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVvYnNlcnZlT3B0aW9ucy5mZXRjaFBvbGljeSA9ICduZXR3b3JrLW9ubHknO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfX0RFVl9fICYmIHZhcmlhYmxlcyAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhcmlhYmxlcywgXCJ2YXJpYWJsZXNcIikpIHtcbiAgICAgICAgICAgIHZhciBxdWVyeURlZiA9IGdldFF1ZXJ5RGVmaW5pdGlvbih0aGlzLnF1ZXJ5KTtcbiAgICAgICAgICAgIHZhciB2YXJzID0gcXVlcnlEZWYudmFyaWFibGVEZWZpbml0aW9ucztcbiAgICAgICAgICAgIGlmICghdmFycyB8fCAhdmFycy5zb21lKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2LnZhcmlhYmxlLm5hbWUudmFsdWUgPT09IFwidmFyaWFibGVzXCI7IH0pKSB7XG4gICAgICAgICAgICAgICAgX19ERVZfXyAmJiBpbnZhcmlhbnQud2FybihcIkNhbGxlZCByZWZldGNoKFwiLmNvbmNhdChKU09OLnN0cmluZ2lmeSh2YXJpYWJsZXMpLCBcIikgZm9yIHF1ZXJ5IFwiKS5jb25jYXQoKChfYSA9IHF1ZXJ5RGVmLm5hbWUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS52YWx1ZSkgfHwgSlNPTi5zdHJpbmdpZnkocXVlcnlEZWYpLCBcIiwgd2hpY2ggZG9lcyBub3QgZGVjbGFyZSBhICR2YXJpYWJsZXMgdmFyaWFibGUuXFxuRGlkIHlvdSBtZWFuIHRvIGNhbGwgcmVmZXRjaCh2YXJpYWJsZXMpIGluc3RlYWQgb2YgcmVmZXRjaCh7IHZhcmlhYmxlcyB9KT9cIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh2YXJpYWJsZXMgJiYgIWVxdWFsKHRoaXMub3B0aW9ucy52YXJpYWJsZXMsIHZhcmlhYmxlcykpIHtcbiAgICAgICAgICAgIHJlb2JzZXJ2ZU9wdGlvbnMudmFyaWFibGVzID0gdGhpcy5vcHRpb25zLnZhcmlhYmxlcyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMudmFyaWFibGVzKSwgdmFyaWFibGVzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXJ5SW5mby5yZXNldExhc3RXcml0ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW9ic2VydmUocmVvYnNlcnZlT3B0aW9ucywgTmV0d29ya1N0YXR1cy5yZWZldGNoKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUuZmV0Y2hNb3JlID0gZnVuY3Rpb24gKGZldGNoTW9yZU9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGNvbWJpbmVkT3B0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCAoZmV0Y2hNb3JlT3B0aW9ucy5xdWVyeSA/IGZldGNoTW9yZU9wdGlvbnMgOiBfX2Fzc2lnbihfX2Fzc2lnbihfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5vcHRpb25zKSwgeyBxdWVyeTogdGhpcy5xdWVyeSB9KSwgZmV0Y2hNb3JlT3B0aW9ucyksIHsgdmFyaWFibGVzOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5vcHRpb25zLnZhcmlhYmxlcyksIGZldGNoTW9yZU9wdGlvbnMudmFyaWFibGVzKSB9KSkpLCB7IGZldGNoUG9saWN5OiBcIm5vLWNhY2hlXCIgfSk7XG4gICAgICAgIHZhciBxaWQgPSB0aGlzLnF1ZXJ5TWFuYWdlci5nZW5lcmF0ZVF1ZXJ5SWQoKTtcbiAgICAgICAgdmFyIHF1ZXJ5SW5mbyA9IHRoaXMucXVlcnlJbmZvO1xuICAgICAgICB2YXIgb3JpZ2luYWxOZXR3b3JrU3RhdHVzID0gcXVlcnlJbmZvLm5ldHdvcmtTdGF0dXM7XG4gICAgICAgIHF1ZXJ5SW5mby5uZXR3b3JrU3RhdHVzID0gTmV0d29ya1N0YXR1cy5mZXRjaE1vcmU7XG4gICAgICAgIGlmIChjb21iaW5lZE9wdGlvbnMubm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmUoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXBkYXRlZFF1ZXJ5U2V0ID0gbmV3IFNldCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeU1hbmFnZXIuZmV0Y2hRdWVyeShxaWQsIGNvbWJpbmVkT3B0aW9ucywgTmV0d29ya1N0YXR1cy5mZXRjaE1vcmUpLnRoZW4oZnVuY3Rpb24gKGZldGNoTW9yZVJlc3VsdCkge1xuICAgICAgICAgICAgX3RoaXMucXVlcnlNYW5hZ2VyLnJlbW92ZVF1ZXJ5KHFpZCk7XG4gICAgICAgICAgICBpZiAocXVlcnlJbmZvLm5ldHdvcmtTdGF0dXMgPT09IE5ldHdvcmtTdGF0dXMuZmV0Y2hNb3JlKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlJbmZvLm5ldHdvcmtTdGF0dXMgPSBvcmlnaW5hbE5ldHdvcmtTdGF0dXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5xdWVyeU1hbmFnZXIuY2FjaGUuYmF0Y2goe1xuICAgICAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gKGNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVRdWVyeSA9IGZldGNoTW9yZU9wdGlvbnMudXBkYXRlUXVlcnk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVRdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUudXBkYXRlUXVlcnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBfdGhpcy5xdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IF90aGlzLnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5QYXJ0aWFsRGF0YTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpbWlzdGljOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChwcmV2aW91cykgeyByZXR1cm4gdXBkYXRlUXVlcnkocHJldmlvdXMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaE1vcmVSZXN1bHQ6IGZldGNoTW9yZVJlc3VsdC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogY29tYmluZWRPcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlLndyaXRlUXVlcnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBjb21iaW5lZE9wdGlvbnMucXVlcnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiBjb21iaW5lZE9wdGlvbnMudmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGZldGNoTW9yZVJlc3VsdC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uV2F0Y2hVcGRhdGVkOiBmdW5jdGlvbiAod2F0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFF1ZXJ5U2V0LmFkZCh3YXRjaC5xdWVyeSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGZldGNoTW9yZVJlc3VsdDtcbiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXVwZGF0ZWRRdWVyeVNldC5oYXMoX3RoaXMucXVlcnkpKSB7XG4gICAgICAgICAgICAgICAgcmVvYnNlcnZlQ2FjaGVGaXJzdChfdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5zdWJzY3JpYmVUb01vcmUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5xdWVyeU1hbmFnZXJcbiAgICAgICAgICAgIC5zdGFydEdyYXBoUUxTdWJzY3JpcHRpb24oe1xuICAgICAgICAgICAgcXVlcnk6IG9wdGlvbnMuZG9jdW1lbnQsXG4gICAgICAgICAgICB2YXJpYWJsZXM6IG9wdGlvbnMudmFyaWFibGVzLFxuICAgICAgICAgICAgY29udGV4dDogb3B0aW9ucy5jb250ZXh0LFxuICAgICAgICB9KVxuICAgICAgICAgICAgLnN1YnNjcmliZSh7XG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uRGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciB1cGRhdGVRdWVyeSA9IG9wdGlvbnMudXBkYXRlUXVlcnk7XG4gICAgICAgICAgICAgICAgaWYgKHVwZGF0ZVF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZVF1ZXJ5KGZ1bmN0aW9uIChwcmV2aW91cywgX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YXJpYWJsZXMgPSBfYS52YXJpYWJsZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlUXVlcnkocHJldmlvdXMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25EYXRhOiBzdWJzY3JpcHRpb25EYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5vbkVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX19ERVZfXyAmJiBpbnZhcmlhbnQuZXJyb3IoJ1VuaGFuZGxlZCBHcmFwaFFMIHN1YnNjcmlwdGlvbiBlcnJvcicsIGVycik7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZChzdWJzY3JpcHRpb24pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLnN1YnNjcmlwdGlvbnMuZGVsZXRlKHN1YnNjcmlwdGlvbikpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIChuZXdPcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlb2JzZXJ2ZShuZXdPcHRpb25zKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUuc2V0VmFyaWFibGVzID0gZnVuY3Rpb24gKHZhcmlhYmxlcykge1xuICAgICAgICBpZiAoZXF1YWwodGhpcy52YXJpYWJsZXMsIHZhcmlhYmxlcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9ic2VydmVycy5zaXplXG4gICAgICAgICAgICAgICAgPyB0aGlzLnJlc3VsdCgpXG4gICAgICAgICAgICAgICAgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbnMudmFyaWFibGVzID0gdmFyaWFibGVzO1xuICAgICAgICBpZiAoIXRoaXMub2JzZXJ2ZXJzLnNpemUpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZW9ic2VydmUoe1xuICAgICAgICAgICAgZmV0Y2hQb2xpY3k6IHRoaXMub3B0aW9ucy5pbml0aWFsRmV0Y2hQb2xpY3ksXG4gICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgfSwgTmV0d29ya1N0YXR1cy5zZXRWYXJpYWJsZXMpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS51cGRhdGVRdWVyeSA9IGZ1bmN0aW9uIChtYXBGbikge1xuICAgICAgICB2YXIgcXVlcnlNYW5hZ2VyID0gdGhpcy5xdWVyeU1hbmFnZXI7XG4gICAgICAgIHZhciByZXN1bHQgPSBxdWVyeU1hbmFnZXIuY2FjaGUuZGlmZih7XG4gICAgICAgICAgICBxdWVyeTogdGhpcy5vcHRpb25zLnF1ZXJ5LFxuICAgICAgICAgICAgdmFyaWFibGVzOiB0aGlzLnZhcmlhYmxlcyxcbiAgICAgICAgICAgIHJldHVyblBhcnRpYWxEYXRhOiB0cnVlLFxuICAgICAgICAgICAgb3B0aW1pc3RpYzogZmFsc2UsXG4gICAgICAgIH0pLnJlc3VsdDtcbiAgICAgICAgdmFyIG5ld1Jlc3VsdCA9IG1hcEZuKHJlc3VsdCwge1xuICAgICAgICAgICAgdmFyaWFibGVzOiB0aGlzLnZhcmlhYmxlcyxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChuZXdSZXN1bHQpIHtcbiAgICAgICAgICAgIHF1ZXJ5TWFuYWdlci5jYWNoZS53cml0ZVF1ZXJ5KHtcbiAgICAgICAgICAgICAgICBxdWVyeTogdGhpcy5vcHRpb25zLnF1ZXJ5LFxuICAgICAgICAgICAgICAgIGRhdGE6IG5ld1Jlc3VsdCxcbiAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHRoaXMudmFyaWFibGVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBxdWVyeU1hbmFnZXIuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnN0YXJ0UG9sbGluZyA9IGZ1bmN0aW9uIChwb2xsSW50ZXJ2YWwpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnBvbGxJbnRlcnZhbCA9IHBvbGxJbnRlcnZhbDtcbiAgICAgICAgdGhpcy51cGRhdGVQb2xsaW5nKCk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnN0b3BQb2xsaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMucG9sbEludGVydmFsID0gMDtcbiAgICAgICAgdGhpcy51cGRhdGVQb2xsaW5nKCk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLmFwcGx5TmV4dEZldGNoUG9saWN5ID0gZnVuY3Rpb24gKHJlYXNvbiwgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucy5uZXh0RmV0Y2hQb2xpY3kpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IG9wdGlvbnMuZmV0Y2hQb2xpY3ksIGZldGNoUG9saWN5ID0gX2EgPT09IHZvaWQgMCA/IFwiY2FjaGUtZmlyc3RcIiA6IF9hLCBfYiA9IG9wdGlvbnMuaW5pdGlhbEZldGNoUG9saWN5LCBpbml0aWFsRmV0Y2hQb2xpY3kgPSBfYiA9PT0gdm9pZCAwID8gZmV0Y2hQb2xpY3kgOiBfYjtcbiAgICAgICAgICAgIGlmIChmZXRjaFBvbGljeSA9PT0gXCJzdGFuZGJ5XCIpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLm5leHRGZXRjaFBvbGljeSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5mZXRjaFBvbGljeSA9IG9wdGlvbnMubmV4dEZldGNoUG9saWN5KGZldGNoUG9saWN5LCB7XG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbjogcmVhc29uLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZhYmxlOiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsRmV0Y2hQb2xpY3k6IGluaXRpYWxGZXRjaFBvbGljeSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJlYXNvbiA9PT0gXCJ2YXJpYWJsZXMtY2hhbmdlZFwiKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5mZXRjaFBvbGljeSA9IGluaXRpYWxGZXRjaFBvbGljeTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZmV0Y2hQb2xpY3kgPSBvcHRpb25zLm5leHRGZXRjaFBvbGljeTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3B0aW9ucy5mZXRjaFBvbGljeTtcbiAgICB9O1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbiAob3B0aW9ucywgbmV3TmV0d29ya1N0YXR1cykge1xuICAgICAgICB0aGlzLnF1ZXJ5TWFuYWdlci5zZXRPYnNlcnZhYmxlUXVlcnkodGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5TWFuYWdlclsnZmV0Y2hDb25jYXN0V2l0aEluZm8nXSh0aGlzLnF1ZXJ5SWQsIG9wdGlvbnMsIG5ld05ldHdvcmtTdGF0dXMpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS51cGRhdGVQb2xsaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5xdWVyeU1hbmFnZXIuc3NyTW9kZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIHBvbGxpbmdJbmZvID0gX2EucG9sbGluZ0luZm8sIHBvbGxJbnRlcnZhbCA9IF9hLm9wdGlvbnMucG9sbEludGVydmFsO1xuICAgICAgICBpZiAoIXBvbGxJbnRlcnZhbCkge1xuICAgICAgICAgICAgaWYgKHBvbGxpbmdJbmZvKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHBvbGxpbmdJbmZvLnRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnBvbGxpbmdJbmZvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb2xsaW5nSW5mbyAmJlxuICAgICAgICAgICAgcG9sbGluZ0luZm8uaW50ZXJ2YWwgPT09IHBvbGxJbnRlcnZhbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIF9fREVWX18gPyBpbnZhcmlhbnQocG9sbEludGVydmFsLCAnQXR0ZW1wdGVkIHRvIHN0YXJ0IGEgcG9sbGluZyBxdWVyeSB3aXRob3V0IGEgcG9sbGluZyBpbnRlcnZhbC4nKSA6IGludmFyaWFudChwb2xsSW50ZXJ2YWwsIDEzKTtcbiAgICAgICAgdmFyIGluZm8gPSBwb2xsaW5nSW5mbyB8fCAodGhpcy5wb2xsaW5nSW5mbyA9IHt9KTtcbiAgICAgICAgaW5mby5pbnRlcnZhbCA9IHBvbGxJbnRlcnZhbDtcbiAgICAgICAgdmFyIG1heWJlRmV0Y2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMucG9sbGluZ0luZm8pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmV0d29ya1JlcXVlc3RJbkZsaWdodChfdGhpcy5xdWVyeUluZm8ubmV0d29ya1N0YXR1cykpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVvYnNlcnZlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoUG9saWN5OiBfdGhpcy5vcHRpb25zLmluaXRpYWxGZXRjaFBvbGljeSA9PT0gJ25vLWNhY2hlJyA/ICduby1jYWNoZScgOiAnbmV0d29yay1vbmx5JyxcbiAgICAgICAgICAgICAgICAgICAgfSwgTmV0d29ya1N0YXR1cy5wb2xsKS50aGVuKHBvbGwsIHBvbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcG9sbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHBvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IF90aGlzLnBvbGxpbmdJbmZvO1xuICAgICAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaW5mby50aW1lb3V0KTtcbiAgICAgICAgICAgICAgICBpbmZvLnRpbWVvdXQgPSBzZXRUaW1lb3V0KG1heWJlRmV0Y2gsIGluZm8uaW50ZXJ2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBwb2xsKCk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnVwZGF0ZUxhc3RSZXN1bHQgPSBmdW5jdGlvbiAobmV3UmVzdWx0LCB2YXJpYWJsZXMpIHtcbiAgICAgICAgaWYgKHZhcmlhYmxlcyA9PT0gdm9pZCAwKSB7IHZhcmlhYmxlcyA9IHRoaXMudmFyaWFibGVzOyB9XG4gICAgICAgIHRoaXMubGFzdCA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLmxhc3QpLCB7IHJlc3VsdDogdGhpcy5xdWVyeU1hbmFnZXIuYXNzdW1lSW1tdXRhYmxlUmVzdWx0c1xuICAgICAgICAgICAgICAgID8gbmV3UmVzdWx0XG4gICAgICAgICAgICAgICAgOiBjbG9uZURlZXAobmV3UmVzdWx0KSwgdmFyaWFibGVzOiB2YXJpYWJsZXMgfSk7XG4gICAgICAgIGlmICghaXNOb25FbXB0eUFycmF5KG5ld1Jlc3VsdC5lcnJvcnMpKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5sYXN0LmVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxhc3Q7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnJlb2JzZXJ2ZUFzQ29uY2FzdCA9IGZ1bmN0aW9uIChuZXdPcHRpb25zLCBuZXdOZXR3b3JrU3RhdHVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuaXNUb3JuRG93biA9IGZhbHNlO1xuICAgICAgICB2YXIgdXNlRGlzcG9zYWJsZUNvbmNhc3QgPSBuZXdOZXR3b3JrU3RhdHVzID09PSBOZXR3b3JrU3RhdHVzLnJlZmV0Y2ggfHxcbiAgICAgICAgICAgIG5ld05ldHdvcmtTdGF0dXMgPT09IE5ldHdvcmtTdGF0dXMuZmV0Y2hNb3JlIHx8XG4gICAgICAgICAgICBuZXdOZXR3b3JrU3RhdHVzID09PSBOZXR3b3JrU3RhdHVzLnBvbGw7XG4gICAgICAgIHZhciBvbGRWYXJpYWJsZXMgPSB0aGlzLm9wdGlvbnMudmFyaWFibGVzO1xuICAgICAgICB2YXIgb2xkRmV0Y2hQb2xpY3kgPSB0aGlzLm9wdGlvbnMuZmV0Y2hQb2xpY3k7XG4gICAgICAgIHZhciBtZXJnZWRPcHRpb25zID0gY29tcGFjdCh0aGlzLm9wdGlvbnMsIG5ld09wdGlvbnMgfHwge30pO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHVzZURpc3Bvc2FibGVDb25jYXN0XG4gICAgICAgICAgICA/IG1lcmdlZE9wdGlvbnNcbiAgICAgICAgICAgIDogYXNzaWduKHRoaXMub3B0aW9ucywgbWVyZ2VkT3B0aW9ucyk7XG4gICAgICAgIGlmICghdXNlRGlzcG9zYWJsZUNvbmNhc3QpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUG9sbGluZygpO1xuICAgICAgICAgICAgaWYgKG5ld09wdGlvbnMgJiZcbiAgICAgICAgICAgICAgICBuZXdPcHRpb25zLnZhcmlhYmxlcyAmJlxuICAgICAgICAgICAgICAgICFlcXVhbChuZXdPcHRpb25zLnZhcmlhYmxlcywgb2xkVmFyaWFibGVzKSAmJlxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZmV0Y2hQb2xpY3kgIT09IFwic3RhbmRieVwiICYmXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5mZXRjaFBvbGljeSA9PT0gb2xkRmV0Y2hQb2xpY3kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5TmV4dEZldGNoUG9saWN5KFwidmFyaWFibGVzLWNoYW5nZWRcIiwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld05ldHdvcmtTdGF0dXMgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBuZXdOZXR3b3JrU3RhdHVzID0gTmV0d29ya1N0YXR1cy5zZXRWYXJpYWJsZXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciB2YXJpYWJsZXMgPSBvcHRpb25zLnZhcmlhYmxlcyAmJiBfX2Fzc2lnbih7fSwgb3B0aW9ucy52YXJpYWJsZXMpO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLmZldGNoKG9wdGlvbnMsIG5ld05ldHdvcmtTdGF0dXMpLCBjb25jYXN0ID0gX2EuY29uY2FzdCwgZnJvbUxpbmsgPSBfYS5mcm9tTGluaztcbiAgICAgICAgdmFyIG9ic2VydmVyID0ge1xuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnJlcG9ydFJlc3VsdChyZXN1bHQsIHZhcmlhYmxlcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIF90aGlzLnJlcG9ydEVycm9yKGVycm9yLCB2YXJpYWJsZXMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCF1c2VEaXNwb3NhYmxlQ29uY2FzdCAmJiBmcm9tTGluaykge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uY2FzdCAmJiB0aGlzLm9ic2VydmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25jYXN0LnJlbW92ZU9ic2VydmVyKHRoaXMub2JzZXJ2ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb25jYXN0ID0gY29uY2FzdDtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICAgICAgfVxuICAgICAgICBjb25jYXN0LmFkZE9ic2VydmVyKG9ic2VydmVyKTtcbiAgICAgICAgcmV0dXJuIGNvbmNhc3Q7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnJlb2JzZXJ2ZSA9IGZ1bmN0aW9uIChuZXdPcHRpb25zLCBuZXdOZXR3b3JrU3RhdHVzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlb2JzZXJ2ZUFzQ29uY2FzdChuZXdPcHRpb25zLCBuZXdOZXR3b3JrU3RhdHVzKS5wcm9taXNlO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlcG9ydFJlc3VsdCh0aGlzLmdldEN1cnJlbnRSZXN1bHQoZmFsc2UpLCB0aGlzLnZhcmlhYmxlcyk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnJlcG9ydFJlc3VsdCA9IGZ1bmN0aW9uIChyZXN1bHQsIHZhcmlhYmxlcykge1xuICAgICAgICB2YXIgbGFzdEVycm9yID0gdGhpcy5nZXRMYXN0RXJyb3IoKTtcbiAgICAgICAgaWYgKGxhc3RFcnJvciB8fCB0aGlzLmlzRGlmZmVyZW50RnJvbUxhc3RSZXN1bHQocmVzdWx0LCB2YXJpYWJsZXMpKSB7XG4gICAgICAgICAgICBpZiAobGFzdEVycm9yIHx8ICFyZXN1bHQucGFydGlhbCB8fCB0aGlzLm9wdGlvbnMucmV0dXJuUGFydGlhbERhdGEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxhc3RSZXN1bHQocmVzdWx0LCB2YXJpYWJsZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlcmF0ZU9ic2VydmVyc1NhZmVseSh0aGlzLm9ic2VydmVycywgJ25leHQnLCByZXN1bHQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnJlcG9ydEVycm9yID0gZnVuY3Rpb24gKGVycm9yLCB2YXJpYWJsZXMpIHtcbiAgICAgICAgdmFyIGVycm9yUmVzdWx0ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuZ2V0TGFzdFJlc3VsdCgpKSwgeyBlcnJvcjogZXJyb3IsIGVycm9yczogZXJyb3IuZ3JhcGhRTEVycm9ycywgbmV0d29ya1N0YXR1czogTmV0d29ya1N0YXR1cy5lcnJvciwgbG9hZGluZzogZmFsc2UgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlTGFzdFJlc3VsdChlcnJvclJlc3VsdCwgdmFyaWFibGVzKTtcbiAgICAgICAgaXRlcmF0ZU9ic2VydmVyc1NhZmVseSh0aGlzLm9ic2VydmVycywgJ2Vycm9yJywgdGhpcy5sYXN0LmVycm9yID0gZXJyb3IpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5oYXNPYnNlcnZlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9ic2VydmVycy5zaXplID4gMDtcbiAgICB9O1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUudGVhckRvd25RdWVyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNUb3JuRG93bilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMuY29uY2FzdCAmJiB0aGlzLm9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmNhc3QucmVtb3ZlT2JzZXJ2ZXIodGhpcy5vYnNlcnZlcik7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5jb25jYXN0O1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoc3ViKSB7IHJldHVybiBzdWIudW5zdWJzY3JpYmUoKTsgfSk7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5jbGVhcigpO1xuICAgICAgICB0aGlzLnF1ZXJ5TWFuYWdlci5zdG9wUXVlcnkodGhpcy5xdWVyeUlkKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5pc1Rvcm5Eb3duID0gdHJ1ZTtcbiAgICB9O1xuICAgIHJldHVybiBPYnNlcnZhYmxlUXVlcnk7XG59KE9ic2VydmFibGUpKTtcbmV4cG9ydCB7IE9ic2VydmFibGVRdWVyeSB9O1xuZml4T2JzZXJ2YWJsZVN1YmNsYXNzKE9ic2VydmFibGVRdWVyeSk7XG5leHBvcnQgZnVuY3Rpb24gcmVvYnNlcnZlQ2FjaGVGaXJzdChvYnNRdWVyeSkge1xuICAgIHZhciBfYSA9IG9ic1F1ZXJ5Lm9wdGlvbnMsIGZldGNoUG9saWN5ID0gX2EuZmV0Y2hQb2xpY3ksIG5leHRGZXRjaFBvbGljeSA9IF9hLm5leHRGZXRjaFBvbGljeTtcbiAgICBpZiAoZmV0Y2hQb2xpY3kgPT09IFwiY2FjaGUtYW5kLW5ldHdvcmtcIiB8fFxuICAgICAgICBmZXRjaFBvbGljeSA9PT0gXCJuZXR3b3JrLW9ubHlcIikge1xuICAgICAgICByZXR1cm4gb2JzUXVlcnkucmVvYnNlcnZlKHtcbiAgICAgICAgICAgIGZldGNoUG9saWN5OiBcImNhY2hlLWZpcnN0XCIsXG4gICAgICAgICAgICBuZXh0RmV0Y2hQb2xpY3k6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRGZXRjaFBvbGljeSA9IG5leHRGZXRjaFBvbGljeTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5leHRGZXRjaFBvbGljeSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0RmV0Y2hQb2xpY3kuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoUG9saWN5O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBvYnNRdWVyeS5yZW9ic2VydmUoKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRTdWJzY3JpcHRpb25PYnNlcnZlckVycm9yQ2FsbGJhY2soZXJyb3IpIHtcbiAgICBfX0RFVl9fICYmIGludmFyaWFudC5lcnJvcignVW5oYW5kbGVkIGVycm9yJywgZXJyb3IubWVzc2FnZSwgZXJyb3Iuc3RhY2spO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxvZ01pc3NpbmdGaWVsZEVycm9ycyhtaXNzaW5nKSB7XG4gICAgaWYgKF9fREVWX18gJiYgbWlzc2luZykge1xuICAgICAgICBfX0RFVl9fICYmIGludmFyaWFudC5kZWJ1ZyhcIk1pc3NpbmcgY2FjaGUgcmVzdWx0IGZpZWxkczogXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KG1pc3NpbmcpKSwgbWlzc2luZyk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JzZXJ2YWJsZVF1ZXJ5LmpzLm1hcCIsImltcG9ydCB7IF9fYXNzaWduLCBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2dsb2JhbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IHZpc2l0LCBCUkVBSywgaXNTZWxlY3Rpb25Ob2RlLCB9IGZyb20gJ2dyYXBocWwnO1xuaW1wb3J0IHsgYXJndW1lbnRzT2JqZWN0RnJvbUZpZWxkLCBidWlsZFF1ZXJ5RnJvbVNlbGVjdGlvblNldCwgY3JlYXRlRnJhZ21lbnRNYXAsIGdldEZyYWdtZW50RGVmaW5pdGlvbnMsIGdldE1haW5EZWZpbml0aW9uLCBoYXNEaXJlY3RpdmVzLCBpc0ZpZWxkLCBpc0lubGluZUZyYWdtZW50LCBtZXJnZURlZXAsIG1lcmdlRGVlcEFycmF5LCByZW1vdmVDbGllbnRTZXRzRnJvbURvY3VtZW50LCByZXN1bHRLZXlOYW1lRnJvbUZpZWxkLCBzaG91bGRJbmNsdWRlLCB9IGZyb20gXCIuLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGNhY2hlU2xvdCB9IGZyb20gXCIuLi9jYWNoZS9pbmRleC5qc1wiO1xudmFyIExvY2FsU3RhdGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIExvY2FsU3RhdGUoX2EpIHtcbiAgICAgICAgdmFyIGNhY2hlID0gX2EuY2FjaGUsIGNsaWVudCA9IF9hLmNsaWVudCwgcmVzb2x2ZXJzID0gX2EucmVzb2x2ZXJzLCBmcmFnbWVudE1hdGNoZXIgPSBfYS5mcmFnbWVudE1hdGNoZXI7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uc1RvUmVzb2x2ZUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdGhpcy5jYWNoZSA9IGNhY2hlO1xuICAgICAgICBpZiAoY2xpZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudCA9IGNsaWVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzb2x2ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFJlc29sdmVycyhyZXNvbHZlcnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmcmFnbWVudE1hdGNoZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RnJhZ21lbnRNYXRjaGVyKGZyYWdtZW50TWF0Y2hlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgTG9jYWxTdGF0ZS5wcm90b3R5cGUuYWRkUmVzb2x2ZXJzID0gZnVuY3Rpb24gKHJlc29sdmVycykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnJlc29sdmVycyA9IHRoaXMucmVzb2x2ZXJzIHx8IHt9O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXNvbHZlcnMpKSB7XG4gICAgICAgICAgICByZXNvbHZlcnMuZm9yRWFjaChmdW5jdGlvbiAocmVzb2x2ZXJHcm91cCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnJlc29sdmVycyA9IG1lcmdlRGVlcChfdGhpcy5yZXNvbHZlcnMsIHJlc29sdmVyR3JvdXApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVycyA9IG1lcmdlRGVlcCh0aGlzLnJlc29sdmVycywgcmVzb2x2ZXJzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTG9jYWxTdGF0ZS5wcm90b3R5cGUuc2V0UmVzb2x2ZXJzID0gZnVuY3Rpb24gKHJlc29sdmVycykge1xuICAgICAgICB0aGlzLnJlc29sdmVycyA9IHt9O1xuICAgICAgICB0aGlzLmFkZFJlc29sdmVycyhyZXNvbHZlcnMpO1xuICAgIH07XG4gICAgTG9jYWxTdGF0ZS5wcm90b3R5cGUuZ2V0UmVzb2x2ZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlcnMgfHwge307XG4gICAgfTtcbiAgICBMb2NhbFN0YXRlLnByb3RvdHlwZS5ydW5SZXNvbHZlcnMgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGRvY3VtZW50ID0gX2EuZG9jdW1lbnQsIHJlbW90ZVJlc3VsdCA9IF9hLnJlbW90ZVJlc3VsdCwgY29udGV4dCA9IF9hLmNvbnRleHQsIHZhcmlhYmxlcyA9IF9hLnZhcmlhYmxlcywgX2IgPSBfYS5vbmx5UnVuRm9yY2VkUmVzb2x2ZXJzLCBvbmx5UnVuRm9yY2VkUmVzb2x2ZXJzID0gX2IgPT09IHZvaWQgMCA/IGZhbHNlIDogX2I7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCB0aGlzLnJlc29sdmVEb2N1bWVudChkb2N1bWVudCwgcmVtb3RlUmVzdWx0LmRhdGEsIGNvbnRleHQsIHZhcmlhYmxlcywgdGhpcy5mcmFnbWVudE1hdGNoZXIsIG9ubHlSdW5Gb3JjZWRSZXNvbHZlcnMpLnRoZW4oZnVuY3Rpb24gKGxvY2FsUmVzdWx0KSB7IHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIHJlbW90ZVJlc3VsdCksIHsgZGF0YTogbG9jYWxSZXN1bHQucmVzdWx0IH0pKTsgfSldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gWzIsIHJlbW90ZVJlc3VsdF07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMb2NhbFN0YXRlLnByb3RvdHlwZS5zZXRGcmFnbWVudE1hdGNoZXIgPSBmdW5jdGlvbiAoZnJhZ21lbnRNYXRjaGVyKSB7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRNYXRjaGVyID0gZnJhZ21lbnRNYXRjaGVyO1xuICAgIH07XG4gICAgTG9jYWxTdGF0ZS5wcm90b3R5cGUuZ2V0RnJhZ21lbnRNYXRjaGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mcmFnbWVudE1hdGNoZXI7XG4gICAgfTtcbiAgICBMb2NhbFN0YXRlLnByb3RvdHlwZS5jbGllbnRRdWVyeSA9IGZ1bmN0aW9uIChkb2N1bWVudCkge1xuICAgICAgICBpZiAoaGFzRGlyZWN0aXZlcyhbJ2NsaWVudCddLCBkb2N1bWVudCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc29sdmVycykge1xuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIExvY2FsU3RhdGUucHJvdG90eXBlLnNlcnZlclF1ZXJ5ID0gZnVuY3Rpb24gKGRvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiByZW1vdmVDbGllbnRTZXRzRnJvbURvY3VtZW50KGRvY3VtZW50KTtcbiAgICB9O1xuICAgIExvY2FsU3RhdGUucHJvdG90eXBlLnByZXBhcmVDb250ZXh0ID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZTtcbiAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb250ZXh0KSwgeyBjYWNoZTogY2FjaGUsIGdldENhY2hlS2V5OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlLmlkZW50aWZ5KG9iaik7XG4gICAgICAgICAgICB9IH0pO1xuICAgIH07XG4gICAgTG9jYWxTdGF0ZS5wcm90b3R5cGUuYWRkRXhwb3J0ZWRWYXJpYWJsZXMgPSBmdW5jdGlvbiAoZG9jdW1lbnQsIHZhcmlhYmxlcywgY29udGV4dCkge1xuICAgICAgICBpZiAodmFyaWFibGVzID09PSB2b2lkIDApIHsgdmFyaWFibGVzID0ge307IH1cbiAgICAgICAgaWYgKGNvbnRleHQgPT09IHZvaWQgMCkgeyBjb250ZXh0ID0ge307IH1cbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIsIHRoaXMucmVzb2x2ZURvY3VtZW50KGRvY3VtZW50LCB0aGlzLmJ1aWxkUm9vdFZhbHVlRnJvbUNhY2hlKGRvY3VtZW50LCB2YXJpYWJsZXMpIHx8IHt9LCB0aGlzLnByZXBhcmVDb250ZXh0KGNvbnRleHQpLCB2YXJpYWJsZXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdmFyaWFibGVzKSwgZGF0YS5leHBvcnRlZFZhcmlhYmxlcykpOyB9KV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiwgX19hc3NpZ24oe30sIHZhcmlhYmxlcyldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTG9jYWxTdGF0ZS5wcm90b3R5cGUuc2hvdWxkRm9yY2VSZXNvbHZlcnMgPSBmdW5jdGlvbiAoZG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIGZvcmNlUmVzb2x2ZXJzID0gZmFsc2U7XG4gICAgICAgIHZpc2l0KGRvY3VtZW50LCB7XG4gICAgICAgICAgICBEaXJlY3RpdmU6IHtcbiAgICAgICAgICAgICAgICBlbnRlcjogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUubmFtZS52YWx1ZSA9PT0gJ2NsaWVudCcgJiYgbm9kZS5hcmd1bWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmNlUmVzb2x2ZXJzID0gbm9kZS5hcmd1bWVudHMuc29tZShmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5uYW1lLnZhbHVlID09PSAnYWx3YXlzJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmcudmFsdWUua2luZCA9PT0gJ0Jvb2xlYW5WYWx1ZScgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnLnZhbHVlLnZhbHVlID09PSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9yY2VSZXNvbHZlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQlJFQUs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmb3JjZVJlc29sdmVycztcbiAgICB9O1xuICAgIExvY2FsU3RhdGUucHJvdG90eXBlLmJ1aWxkUm9vdFZhbHVlRnJvbUNhY2hlID0gZnVuY3Rpb24gKGRvY3VtZW50LCB2YXJpYWJsZXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUuZGlmZih7XG4gICAgICAgICAgICBxdWVyeTogYnVpbGRRdWVyeUZyb21TZWxlY3Rpb25TZXQoZG9jdW1lbnQpLFxuICAgICAgICAgICAgdmFyaWFibGVzOiB2YXJpYWJsZXMsXG4gICAgICAgICAgICByZXR1cm5QYXJ0aWFsRGF0YTogdHJ1ZSxcbiAgICAgICAgICAgIG9wdGltaXN0aWM6IGZhbHNlLFxuICAgICAgICB9KS5yZXN1bHQ7XG4gICAgfTtcbiAgICBMb2NhbFN0YXRlLnByb3RvdHlwZS5yZXNvbHZlRG9jdW1lbnQgPSBmdW5jdGlvbiAoZG9jdW1lbnQsIHJvb3RWYWx1ZSwgY29udGV4dCwgdmFyaWFibGVzLCBmcmFnbWVudE1hdGNoZXIsIG9ubHlSdW5Gb3JjZWRSZXNvbHZlcnMpIHtcbiAgICAgICAgaWYgKGNvbnRleHQgPT09IHZvaWQgMCkgeyBjb250ZXh0ID0ge307IH1cbiAgICAgICAgaWYgKHZhcmlhYmxlcyA9PT0gdm9pZCAwKSB7IHZhcmlhYmxlcyA9IHt9OyB9XG4gICAgICAgIGlmIChmcmFnbWVudE1hdGNoZXIgPT09IHZvaWQgMCkgeyBmcmFnbWVudE1hdGNoZXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9OyB9XG4gICAgICAgIGlmIChvbmx5UnVuRm9yY2VkUmVzb2x2ZXJzID09PSB2b2lkIDApIHsgb25seVJ1bkZvcmNlZFJlc29sdmVycyA9IGZhbHNlOyB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtYWluRGVmaW5pdGlvbiwgZnJhZ21lbnRzLCBmcmFnbWVudE1hcCwgc2VsZWN0aW9uc1RvUmVzb2x2ZSwgZGVmaW5pdGlvbk9wZXJhdGlvbiwgZGVmYXVsdE9wZXJhdGlvblR5cGUsIF9hLCBjYWNoZSwgY2xpZW50LCBleGVjQ29udGV4dCwgaXNDbGllbnRGaWVsZERlc2NlbmRhbnQ7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgbWFpbkRlZmluaXRpb24gPSBnZXRNYWluRGVmaW5pdGlvbihkb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgZnJhZ21lbnRzID0gZ2V0RnJhZ21lbnREZWZpbml0aW9ucyhkb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgZnJhZ21lbnRNYXAgPSBjcmVhdGVGcmFnbWVudE1hcChmcmFnbWVudHMpO1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvbnNUb1Jlc29sdmUgPSB0aGlzLmNvbGxlY3RTZWxlY3Rpb25zVG9SZXNvbHZlKG1haW5EZWZpbml0aW9uLCBmcmFnbWVudE1hcCk7XG4gICAgICAgICAgICAgICAgZGVmaW5pdGlvbk9wZXJhdGlvbiA9IG1haW5EZWZpbml0aW9uLm9wZXJhdGlvbjtcbiAgICAgICAgICAgICAgICBkZWZhdWx0T3BlcmF0aW9uVHlwZSA9IGRlZmluaXRpb25PcGVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgPyBkZWZpbml0aW9uT3BlcmF0aW9uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluaXRpb25PcGVyYXRpb24uc2xpY2UoMSlcbiAgICAgICAgICAgICAgICAgICAgOiAnUXVlcnknO1xuICAgICAgICAgICAgICAgIF9hID0gdGhpcywgY2FjaGUgPSBfYS5jYWNoZSwgY2xpZW50ID0gX2EuY2xpZW50O1xuICAgICAgICAgICAgICAgIGV4ZWNDb250ZXh0ID0ge1xuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudE1hcDogZnJhZ21lbnRNYXAsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb250ZXh0KSwgeyBjYWNoZTogY2FjaGUsIGNsaWVudDogY2xpZW50IH0pLFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnRNYXRjaGVyOiBmcmFnbWVudE1hdGNoZXIsXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRPcGVyYXRpb25UeXBlOiBkZWZhdWx0T3BlcmF0aW9uVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgZXhwb3J0ZWRWYXJpYWJsZXM6IHt9LFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25zVG9SZXNvbHZlOiBzZWxlY3Rpb25zVG9SZXNvbHZlLFxuICAgICAgICAgICAgICAgICAgICBvbmx5UnVuRm9yY2VkUmVzb2x2ZXJzOiBvbmx5UnVuRm9yY2VkUmVzb2x2ZXJzLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaXNDbGllbnRGaWVsZERlc2NlbmRhbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIsIHRoaXMucmVzb2x2ZVNlbGVjdGlvblNldChtYWluRGVmaW5pdGlvbi5zZWxlY3Rpb25TZXQsIGlzQ2xpZW50RmllbGREZXNjZW5kYW50LCByb290VmFsdWUsIGV4ZWNDb250ZXh0KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsgcmV0dXJuICh7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydGVkVmFyaWFibGVzOiBleGVjQ29udGV4dC5leHBvcnRlZFZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgfSk7IH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExvY2FsU3RhdGUucHJvdG90eXBlLnJlc29sdmVTZWxlY3Rpb25TZXQgPSBmdW5jdGlvbiAoc2VsZWN0aW9uU2V0LCBpc0NsaWVudEZpZWxkRGVzY2VuZGFudCwgcm9vdFZhbHVlLCBleGVjQ29udGV4dCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZnJhZ21lbnRNYXAsIGNvbnRleHQsIHZhcmlhYmxlcywgcmVzdWx0c1RvTWVyZ2UsIGV4ZWN1dGU7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGZyYWdtZW50TWFwID0gZXhlY0NvbnRleHQuZnJhZ21lbnRNYXAsIGNvbnRleHQgPSBleGVjQ29udGV4dC5jb250ZXh0LCB2YXJpYWJsZXMgPSBleGVjQ29udGV4dC52YXJpYWJsZXM7XG4gICAgICAgICAgICAgICAgcmVzdWx0c1RvTWVyZ2UgPSBbcm9vdFZhbHVlXTtcbiAgICAgICAgICAgICAgICBleGVjdXRlID0gZnVuY3Rpb24gKHNlbGVjdGlvbikgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZnJhZ21lbnQsIHR5cGVDb25kaXRpb247XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNDbGllbnRGaWVsZERlc2NlbmRhbnQgJiYgIWV4ZWNDb250ZXh0LnNlbGVjdGlvbnNUb1Jlc29sdmUuaGFzKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzaG91bGRJbmNsdWRlKHNlbGVjdGlvbiwgdmFyaWFibGVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNGaWVsZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCB0aGlzLnJlc29sdmVGaWVsZChzZWxlY3Rpb24sIGlzQ2xpZW50RmllbGREZXNjZW5kYW50LCByb290VmFsdWUsIGV4ZWNDb250ZXh0KS50aGVuKGZ1bmN0aW9uIChmaWVsZFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWVsZFJlc3VsdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzVG9NZXJnZS5wdXNoKChfYSA9IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYVtyZXN1bHRLZXlOYW1lRnJvbUZpZWxkKHNlbGVjdGlvbildID0gZmllbGRSZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0lubGluZUZyYWdtZW50KHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFnbWVudCA9IHNlbGVjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYWdtZW50ID0gZnJhZ21lbnRNYXBbc2VsZWN0aW9uLm5hbWUudmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fREVWX18gPyBpbnZhcmlhbnQoZnJhZ21lbnQsIFwiTm8gZnJhZ21lbnQgbmFtZWQgXCIuY29uY2F0KHNlbGVjdGlvbi5uYW1lLnZhbHVlKSkgOiBpbnZhcmlhbnQoZnJhZ21lbnQsIDExKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcmFnbWVudCAmJiBmcmFnbWVudC50eXBlQ29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZUNvbmRpdGlvbiA9IGZyYWdtZW50LnR5cGVDb25kaXRpb24ubmFtZS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhlY0NvbnRleHQuZnJhZ21lbnRNYXRjaGVyKHJvb3RWYWx1ZSwgdHlwZUNvbmRpdGlvbiwgY29udGV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCB0aGlzLnJlc29sdmVTZWxlY3Rpb25TZXQoZnJhZ21lbnQuc2VsZWN0aW9uU2V0LCBpc0NsaWVudEZpZWxkRGVzY2VuZGFudCwgcm9vdFZhbHVlLCBleGVjQ29udGV4dCkudGhlbihmdW5jdGlvbiAoZnJhZ21lbnRSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzVG9NZXJnZS5wdXNoKGZyYWdtZW50UmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzJdO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTsgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIsIFByb21pc2UuYWxsKHNlbGVjdGlvblNldC5zZWxlY3Rpb25zLm1hcChleGVjdXRlKSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVyZ2VEZWVwQXJyYXkocmVzdWx0c1RvTWVyZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMb2NhbFN0YXRlLnByb3RvdHlwZS5yZXNvbHZlRmllbGQgPSBmdW5jdGlvbiAoZmllbGQsIGlzQ2xpZW50RmllbGREZXNjZW5kYW50LCByb290VmFsdWUsIGV4ZWNDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2YXJpYWJsZXMsIGZpZWxkTmFtZSwgYWxpYXNlZEZpZWxkTmFtZSwgYWxpYXNVc2VkLCBkZWZhdWx0UmVzdWx0LCByZXN1bHRQcm9taXNlLCByZXNvbHZlclR5cGUsIHJlc29sdmVyTWFwLCByZXNvbHZlO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJvb3RWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIsIG51bGxdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXJpYWJsZXMgPSBleGVjQ29udGV4dC52YXJpYWJsZXM7XG4gICAgICAgICAgICAgICAgZmllbGROYW1lID0gZmllbGQubmFtZS52YWx1ZTtcbiAgICAgICAgICAgICAgICBhbGlhc2VkRmllbGROYW1lID0gcmVzdWx0S2V5TmFtZUZyb21GaWVsZChmaWVsZCk7XG4gICAgICAgICAgICAgICAgYWxpYXNVc2VkID0gZmllbGROYW1lICE9PSBhbGlhc2VkRmllbGROYW1lO1xuICAgICAgICAgICAgICAgIGRlZmF1bHRSZXN1bHQgPSByb290VmFsdWVbYWxpYXNlZEZpZWxkTmFtZV0gfHwgcm9vdFZhbHVlW2ZpZWxkTmFtZV07XG4gICAgICAgICAgICAgICAgcmVzdWx0UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShkZWZhdWx0UmVzdWx0KTtcbiAgICAgICAgICAgICAgICBpZiAoIWV4ZWNDb250ZXh0Lm9ubHlSdW5Gb3JjZWRSZXNvbHZlcnMgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG91bGRGb3JjZVJlc29sdmVycyhmaWVsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZXJUeXBlID0gcm9vdFZhbHVlLl9fdHlwZW5hbWUgfHwgZXhlY0NvbnRleHQuZGVmYXVsdE9wZXJhdGlvblR5cGU7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVyTWFwID0gdGhpcy5yZXNvbHZlcnMgJiYgdGhpcy5yZXNvbHZlcnNbcmVzb2x2ZXJUeXBlXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc29sdmVyTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gcmVzb2x2ZXJNYXBbYWxpYXNVc2VkID8gZmllbGROYW1lIDogYWxpYXNlZEZpZWxkTmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY2FjaGVTbG90LndpdGhWYWx1ZSh0aGlzLmNhY2hlLCByZXNvbHZlLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzT2JqZWN0RnJvbUZpZWxkKGZpZWxkLCB2YXJpYWJsZXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGVjQ29udGV4dC5jb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGZpZWxkOiBmaWVsZCwgZnJhZ21lbnRNYXA6IGV4ZWNDb250ZXh0LmZyYWdtZW50TWFwIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiwgcmVzdWx0UHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsgcmVzdWx0ID0gZGVmYXVsdFJlc3VsdDsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLmRpcmVjdGl2ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5kaXJlY3RpdmVzLmZvckVhY2goZnVuY3Rpb24gKGRpcmVjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aXZlLm5hbWUudmFsdWUgPT09ICdleHBvcnQnICYmIGRpcmVjdGl2ZS5hcmd1bWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS5hcmd1bWVudHMuZm9yRWFjaChmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZy5uYW1lLnZhbHVlID09PSAnYXMnICYmIGFyZy52YWx1ZS5raW5kID09PSAnU3RyaW5nVmFsdWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWNDb250ZXh0LmV4cG9ydGVkVmFyaWFibGVzW2FyZy52YWx1ZS52YWx1ZV0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmllbGQuc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNDbGllbnRGaWVsZCA9IChfYiA9IChfYSA9IGZpZWxkLmRpcmVjdGl2ZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zb21lKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLm5hbWUudmFsdWUgPT09ICdjbGllbnQnOyB9KSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlc29sdmVTdWJTZWxlY3RlZEFycmF5KGZpZWxkLCBpc0NsaWVudEZpZWxkRGVzY2VuZGFudCB8fCBpc0NsaWVudEZpZWxkLCByZXN1bHQsIGV4ZWNDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC5zZWxlY3Rpb25TZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucmVzb2x2ZVNlbGVjdGlvblNldChmaWVsZC5zZWxlY3Rpb25TZXQsIGlzQ2xpZW50RmllbGREZXNjZW5kYW50IHx8IGlzQ2xpZW50RmllbGQsIHJlc3VsdCwgZXhlY0NvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMb2NhbFN0YXRlLnByb3RvdHlwZS5yZXNvbHZlU3ViU2VsZWN0ZWRBcnJheSA9IGZ1bmN0aW9uIChmaWVsZCwgaXNDbGllbnRGaWVsZERlc2NlbmRhbnQsIHJlc3VsdCwgZXhlY0NvbnRleHQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHJlc3VsdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGlmIChpdGVtID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZXNvbHZlU3ViU2VsZWN0ZWRBcnJheShmaWVsZCwgaXNDbGllbnRGaWVsZERlc2NlbmRhbnQsIGl0ZW0sIGV4ZWNDb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaWVsZC5zZWxlY3Rpb25TZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucmVzb2x2ZVNlbGVjdGlvblNldChmaWVsZC5zZWxlY3Rpb25TZXQsIGlzQ2xpZW50RmllbGREZXNjZW5kYW50LCBpdGVtLCBleGVjQ29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIExvY2FsU3RhdGUucHJvdG90eXBlLmNvbGxlY3RTZWxlY3Rpb25zVG9SZXNvbHZlID0gZnVuY3Rpb24gKG1haW5EZWZpbml0aW9uLCBmcmFnbWVudE1hcCkge1xuICAgICAgICB2YXIgaXNTaW5nbGVBU1ROb2RlID0gZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuICFBcnJheS5pc0FycmF5KG5vZGUpOyB9O1xuICAgICAgICB2YXIgc2VsZWN0aW9uc1RvUmVzb2x2ZUNhY2hlID0gdGhpcy5zZWxlY3Rpb25zVG9SZXNvbHZlQ2FjaGU7XG4gICAgICAgIGZ1bmN0aW9uIGNvbGxlY3RCeURlZmluaXRpb24oZGVmaW5pdGlvbk5vZGUpIHtcbiAgICAgICAgICAgIGlmICghc2VsZWN0aW9uc1RvUmVzb2x2ZUNhY2hlLmhhcyhkZWZpbml0aW9uTm9kZSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlc18xID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvbnNUb1Jlc29sdmVDYWNoZS5zZXQoZGVmaW5pdGlvbk5vZGUsIG1hdGNoZXNfMSk7XG4gICAgICAgICAgICAgICAgdmlzaXQoZGVmaW5pdGlvbk5vZGUsIHtcbiAgICAgICAgICAgICAgICAgICAgRGlyZWN0aXZlOiBmdW5jdGlvbiAobm9kZSwgXywgX18sIF9fXywgYW5jZXN0b3JzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5uYW1lLnZhbHVlID09PSAnY2xpZW50Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2VzdG9ycy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1NpbmdsZUFTVE5vZGUobm9kZSkgJiYgaXNTZWxlY3Rpb25Ob2RlKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVzXzEuYWRkKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIEZyYWdtZW50U3ByZWFkOiBmdW5jdGlvbiAoc3ByZWFkLCBfLCBfXywgX19fLCBhbmNlc3RvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcmFnbWVudCA9IGZyYWdtZW50TWFwW3NwcmVhZC5uYW1lLnZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9fREVWX18gPyBpbnZhcmlhbnQoZnJhZ21lbnQsIFwiTm8gZnJhZ21lbnQgbmFtZWQgXCIuY29uY2F0KHNwcmVhZC5uYW1lLnZhbHVlKSkgOiBpbnZhcmlhbnQoZnJhZ21lbnQsIDEyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcmFnbWVudFNlbGVjdGlvbnMgPSBjb2xsZWN0QnlEZWZpbml0aW9uKGZyYWdtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcmFnbWVudFNlbGVjdGlvbnMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNlc3RvcnMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTaW5nbGVBU1ROb2RlKG5vZGUpICYmIGlzU2VsZWN0aW9uTm9kZShub2RlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlc18xLmFkZChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXNfMS5hZGQoc3ByZWFkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFnbWVudFNlbGVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXNfMS5hZGQoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGlvbnNUb1Jlc29sdmVDYWNoZS5nZXQoZGVmaW5pdGlvbk5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xsZWN0QnlEZWZpbml0aW9uKG1haW5EZWZpbml0aW9uKTtcbiAgICB9O1xuICAgIHJldHVybiBMb2NhbFN0YXRlO1xufSgpKTtcbmV4cG9ydCB7IExvY2FsU3RhdGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxvY2FsU3RhdGUuanMubWFwIiwiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGVxdWFsIH0gZnJvbSBcIkB3cnkvZXF1YWxpdHlcIjtcbmltcG9ydCB7IERlZXBNZXJnZXIgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBtZXJnZUluY3JlbWVudGFsRGF0YSB9IGZyb20gXCIuLi91dGlsaXRpZXMvY29tbW9uL2luY3JlbWVudGFsUmVzdWx0LmpzXCI7XG5pbXBvcnQgeyByZW9ic2VydmVDYWNoZUZpcnN0IH0gZnJvbSBcIi4vT2JzZXJ2YWJsZVF1ZXJ5LmpzXCI7XG5pbXBvcnQgeyBpc05vbkVtcHR5QXJyYXksIGdyYXBoUUxSZXN1bHRIYXNFcnJvciwgY2FuVXNlV2Vha01hcCwgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBOZXR3b3JrU3RhdHVzLCBpc05ldHdvcmtSZXF1ZXN0SW5GbGlnaHQsIH0gZnJvbSBcIi4vbmV0d29ya1N0YXR1cy5qc1wiO1xuO1xudmFyIGRlc3RydWN0aXZlTWV0aG9kQ291bnRzID0gbmV3IChjYW5Vc2VXZWFrTWFwID8gV2Vha01hcCA6IE1hcCkoKTtcbmZ1bmN0aW9uIHdyYXBEZXN0cnVjdGl2ZUNhY2hlTWV0aG9kKGNhY2hlLCBtZXRob2ROYW1lKSB7XG4gICAgdmFyIG9yaWdpbmFsID0gY2FjaGVbbWV0aG9kTmFtZV07XG4gICAgaWYgKHR5cGVvZiBvcmlnaW5hbCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhY2hlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGVzdHJ1Y3RpdmVNZXRob2RDb3VudHMuc2V0KGNhY2hlLCAoZGVzdHJ1Y3RpdmVNZXRob2RDb3VudHMuZ2V0KGNhY2hlKSArIDEpICUgMWUxNSk7XG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5mdW5jdGlvbiBjYW5jZWxOb3RpZnlUaW1lb3V0KGluZm8pIHtcbiAgICBpZiAoaW5mb1tcIm5vdGlmeVRpbWVvdXRcIl0pIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGluZm9bXCJub3RpZnlUaW1lb3V0XCJdKTtcbiAgICAgICAgaW5mb1tcIm5vdGlmeVRpbWVvdXRcIl0gPSB2b2lkIDA7XG4gICAgfVxufVxudmFyIFF1ZXJ5SW5mbyA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUXVlcnlJbmZvKHF1ZXJ5TWFuYWdlciwgcXVlcnlJZCkge1xuICAgICAgICBpZiAocXVlcnlJZCA9PT0gdm9pZCAwKSB7IHF1ZXJ5SWQgPSBxdWVyeU1hbmFnZXIuZ2VuZXJhdGVRdWVyeUlkKCk7IH1cbiAgICAgICAgdGhpcy5xdWVyeUlkID0gcXVlcnlJZDtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RSZXF1ZXN0SWQgPSAxO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMuc3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZVF1ZXJ5ID0gbnVsbDtcbiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZSA9IHF1ZXJ5TWFuYWdlci5jYWNoZTtcbiAgICAgICAgaWYgKCFkZXN0cnVjdGl2ZU1ldGhvZENvdW50cy5oYXMoY2FjaGUpKSB7XG4gICAgICAgICAgICBkZXN0cnVjdGl2ZU1ldGhvZENvdW50cy5zZXQoY2FjaGUsIDApO1xuICAgICAgICAgICAgd3JhcERlc3RydWN0aXZlQ2FjaGVNZXRob2QoY2FjaGUsIFwiZXZpY3RcIik7XG4gICAgICAgICAgICB3cmFwRGVzdHJ1Y3RpdmVDYWNoZU1ldGhvZChjYWNoZSwgXCJtb2RpZnlcIik7XG4gICAgICAgICAgICB3cmFwRGVzdHJ1Y3RpdmVDYWNoZU1ldGhvZChjYWNoZSwgXCJyZXNldFwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBRdWVyeUluZm8ucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgICAgdmFyIG5ldHdvcmtTdGF0dXMgPSBxdWVyeS5uZXR3b3JrU3RhdHVzIHx8IE5ldHdvcmtTdGF0dXMubG9hZGluZztcbiAgICAgICAgaWYgKHRoaXMudmFyaWFibGVzICYmXG4gICAgICAgICAgICB0aGlzLm5ldHdvcmtTdGF0dXMgIT09IE5ldHdvcmtTdGF0dXMubG9hZGluZyAmJlxuICAgICAgICAgICAgIWVxdWFsKHRoaXMudmFyaWFibGVzLCBxdWVyeS52YXJpYWJsZXMpKSB7XG4gICAgICAgICAgICBuZXR3b3JrU3RhdHVzID0gTmV0d29ya1N0YXR1cy5zZXRWYXJpYWJsZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlcXVhbChxdWVyeS52YXJpYWJsZXMsIHRoaXMudmFyaWFibGVzKSkge1xuICAgICAgICAgICAgdGhpcy5sYXN0RGlmZiA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiBxdWVyeS5kb2N1bWVudCxcbiAgICAgICAgICAgIHZhcmlhYmxlczogcXVlcnkudmFyaWFibGVzLFxuICAgICAgICAgICAgbmV0d29ya0Vycm9yOiBudWxsLFxuICAgICAgICAgICAgZ3JhcGhRTEVycm9yczogdGhpcy5ncmFwaFFMRXJyb3JzIHx8IFtdLFxuICAgICAgICAgICAgbmV0d29ya1N0YXR1czogbmV0d29ya1N0YXR1cyxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChxdWVyeS5vYnNlcnZhYmxlUXVlcnkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0T2JzZXJ2YWJsZVF1ZXJ5KHF1ZXJ5Lm9ic2VydmFibGVRdWVyeSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHF1ZXJ5Lmxhc3RSZXF1ZXN0SWQpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFJlcXVlc3RJZCA9IHF1ZXJ5Lmxhc3RSZXF1ZXN0SWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBRdWVyeUluZm8ucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjYW5jZWxOb3RpZnlUaW1lb3V0KHRoaXMpO1xuICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgfTtcbiAgICBRdWVyeUluZm8ucHJvdG90eXBlLmdldERpZmYgPSBmdW5jdGlvbiAodmFyaWFibGVzKSB7XG4gICAgICAgIGlmICh2YXJpYWJsZXMgPT09IHZvaWQgMCkgeyB2YXJpYWJsZXMgPSB0aGlzLnZhcmlhYmxlczsgfVxuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuZ2V0RGlmZk9wdGlvbnModmFyaWFibGVzKTtcbiAgICAgICAgaWYgKHRoaXMubGFzdERpZmYgJiYgZXF1YWwob3B0aW9ucywgdGhpcy5sYXN0RGlmZi5vcHRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGFzdERpZmYuZGlmZjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVdhdGNoKHRoaXMudmFyaWFibGVzID0gdmFyaWFibGVzKTtcbiAgICAgICAgdmFyIG9xID0gdGhpcy5vYnNlcnZhYmxlUXVlcnk7XG4gICAgICAgIGlmIChvcSAmJiBvcS5vcHRpb25zLmZldGNoUG9saWN5ID09PSBcIm5vLWNhY2hlXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGNvbXBsZXRlOiBmYWxzZSB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBkaWZmID0gdGhpcy5jYWNoZS5kaWZmKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnVwZGF0ZUxhc3REaWZmKGRpZmYsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gZGlmZjtcbiAgICB9O1xuICAgIFF1ZXJ5SW5mby5wcm90b3R5cGUudXBkYXRlTGFzdERpZmYgPSBmdW5jdGlvbiAoZGlmZiwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLmxhc3REaWZmID0gZGlmZiA/IHtcbiAgICAgICAgICAgIGRpZmY6IGRpZmYsXG4gICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zIHx8IHRoaXMuZ2V0RGlmZk9wdGlvbnMoKSxcbiAgICAgICAgfSA6IHZvaWQgMDtcbiAgICB9O1xuICAgIFF1ZXJ5SW5mby5wcm90b3R5cGUuZ2V0RGlmZk9wdGlvbnMgPSBmdW5jdGlvbiAodmFyaWFibGVzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHZhcmlhYmxlcyA9PT0gdm9pZCAwKSB7IHZhcmlhYmxlcyA9IHRoaXMudmFyaWFibGVzOyB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBxdWVyeTogdGhpcy5kb2N1bWVudCxcbiAgICAgICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICAgICAgcmV0dXJuUGFydGlhbERhdGE6IHRydWUsXG4gICAgICAgICAgICBvcHRpbWlzdGljOiB0cnVlLFxuICAgICAgICAgICAgY2Fub25pemVSZXN1bHRzOiAoX2EgPSB0aGlzLm9ic2VydmFibGVRdWVyeSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9wdGlvbnMuY2Fub25pemVSZXN1bHRzLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgUXVlcnlJbmZvLnByb3RvdHlwZS5zZXREaWZmID0gZnVuY3Rpb24gKGRpZmYpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9sZERpZmYgPSB0aGlzLmxhc3REaWZmICYmIHRoaXMubGFzdERpZmYuZGlmZjtcbiAgICAgICAgdGhpcy51cGRhdGVMYXN0RGlmZihkaWZmKTtcbiAgICAgICAgaWYgKCF0aGlzLmRpcnR5ICYmXG4gICAgICAgICAgICAhZXF1YWwob2xkRGlmZiAmJiBvbGREaWZmLnJlc3VsdCwgZGlmZiAmJiBkaWZmLnJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm5vdGlmeVRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLm5vdGlmeSgpOyB9LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgUXVlcnlJbmZvLnByb3RvdHlwZS5zZXRPYnNlcnZhYmxlUXVlcnkgPSBmdW5jdGlvbiAob3EpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKG9xID09PSB0aGlzLm9ic2VydmFibGVRdWVyeSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMub3FMaXN0ZW5lcikge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMuZGVsZXRlKHRoaXMub3FMaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlUXVlcnkgPSBvcTtcbiAgICAgICAgaWYgKG9xKSB7XG4gICAgICAgICAgICBvcVtcInF1ZXJ5SW5mb1wiXSA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVycy5hZGQodGhpcy5vcUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBkaWZmID0gX3RoaXMuZ2V0RGlmZigpO1xuICAgICAgICAgICAgICAgIGlmIChkaWZmLmZyb21PcHRpbWlzdGljVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgb3FbXCJvYnNlcnZlXCJdKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZW9ic2VydmVDYWNoZUZpcnN0KG9xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm9xTGlzdGVuZXI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFF1ZXJ5SW5mby5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBjYW5jZWxOb3RpZnlUaW1lb3V0KHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5zaG91bGROb3RpZnkoKSkge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsgcmV0dXJuIGxpc3RlbmVyKF90aGlzKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICAgIH07XG4gICAgUXVlcnlJbmZvLnByb3RvdHlwZS5zaG91bGROb3RpZnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXJ0eSB8fCAhdGhpcy5saXN0ZW5lcnMuc2l6ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc05ldHdvcmtSZXF1ZXN0SW5GbGlnaHQodGhpcy5uZXR3b3JrU3RhdHVzKSAmJlxuICAgICAgICAgICAgdGhpcy5vYnNlcnZhYmxlUXVlcnkpIHtcbiAgICAgICAgICAgIHZhciBmZXRjaFBvbGljeSA9IHRoaXMub2JzZXJ2YWJsZVF1ZXJ5Lm9wdGlvbnMuZmV0Y2hQb2xpY3k7XG4gICAgICAgICAgICBpZiAoZmV0Y2hQb2xpY3kgIT09IFwiY2FjaGUtb25seVwiICYmXG4gICAgICAgICAgICAgICAgZmV0Y2hQb2xpY3kgIT09IFwiY2FjaGUtYW5kLW5ldHdvcmtcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFF1ZXJ5SW5mby5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgICAgICAgdGhpcy5jYW5jZWwgPSBRdWVyeUluZm8ucHJvdG90eXBlLmNhbmNlbDtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzdWIpIHsgcmV0dXJuIHN1Yi51bnN1YnNjcmliZSgpOyB9KTtcbiAgICAgICAgICAgIHZhciBvcSA9IHRoaXMub2JzZXJ2YWJsZVF1ZXJ5O1xuICAgICAgICAgICAgaWYgKG9xKVxuICAgICAgICAgICAgICAgIG9xLnN0b3BQb2xsaW5nKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFF1ZXJ5SW5mby5wcm90b3R5cGUuY2FuY2VsID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIFF1ZXJ5SW5mby5wcm90b3R5cGUudXBkYXRlV2F0Y2ggPSBmdW5jdGlvbiAodmFyaWFibGVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh2YXJpYWJsZXMgPT09IHZvaWQgMCkgeyB2YXJpYWJsZXMgPSB0aGlzLnZhcmlhYmxlczsgfVxuICAgICAgICB2YXIgb3EgPSB0aGlzLm9ic2VydmFibGVRdWVyeTtcbiAgICAgICAgaWYgKG9xICYmIG9xLm9wdGlvbnMuZmV0Y2hQb2xpY3kgPT09IFwibm8tY2FjaGVcIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB3YXRjaE9wdGlvbnMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5nZXREaWZmT3B0aW9ucyh2YXJpYWJsZXMpKSwgeyB3YXRjaGVyOiB0aGlzLCBjYWxsYmFjazogZnVuY3Rpb24gKGRpZmYpIHsgcmV0dXJuIF90aGlzLnNldERpZmYoZGlmZik7IH0gfSk7XG4gICAgICAgIGlmICghdGhpcy5sYXN0V2F0Y2ggfHxcbiAgICAgICAgICAgICFlcXVhbCh3YXRjaE9wdGlvbnMsIHRoaXMubGFzdFdhdGNoKSkge1xuICAgICAgICAgICAgdGhpcy5jYW5jZWwoKTtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsID0gdGhpcy5jYWNoZS53YXRjaCh0aGlzLmxhc3RXYXRjaCA9IHdhdGNoT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFF1ZXJ5SW5mby5wcm90b3R5cGUucmVzZXRMYXN0V3JpdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubGFzdFdyaXRlID0gdm9pZCAwO1xuICAgIH07XG4gICAgUXVlcnlJbmZvLnByb3RvdHlwZS5zaG91bGRXcml0ZSA9IGZ1bmN0aW9uIChyZXN1bHQsIHZhcmlhYmxlcykge1xuICAgICAgICB2YXIgbGFzdFdyaXRlID0gdGhpcy5sYXN0V3JpdGU7XG4gICAgICAgIHJldHVybiAhKGxhc3RXcml0ZSAmJlxuICAgICAgICAgICAgbGFzdFdyaXRlLmRtQ291bnQgPT09IGRlc3RydWN0aXZlTWV0aG9kQ291bnRzLmdldCh0aGlzLmNhY2hlKSAmJlxuICAgICAgICAgICAgZXF1YWwodmFyaWFibGVzLCBsYXN0V3JpdGUudmFyaWFibGVzKSAmJlxuICAgICAgICAgICAgZXF1YWwocmVzdWx0LmRhdGEsIGxhc3RXcml0ZS5yZXN1bHQuZGF0YSkpO1xuICAgIH07XG4gICAgUXVlcnlJbmZvLnByb3RvdHlwZS5tYXJrUmVzdWx0ID0gZnVuY3Rpb24gKHJlc3VsdCwgZG9jdW1lbnQsIG9wdGlvbnMsIGNhY2hlV3JpdGVCZWhhdmlvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgbWVyZ2VyID0gbmV3IERlZXBNZXJnZXIoKTtcbiAgICAgICAgdmFyIGdyYXBoUUxFcnJvcnMgPSBpc05vbkVtcHR5QXJyYXkocmVzdWx0LmVycm9ycylcbiAgICAgICAgICAgID8gcmVzdWx0LmVycm9ycy5zbGljZSgwKVxuICAgICAgICAgICAgOiBbXTtcbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICBpZiAoJ2luY3JlbWVudGFsJyBpbiByZXN1bHQgJiYgaXNOb25FbXB0eUFycmF5KHJlc3VsdC5pbmNyZW1lbnRhbCkpIHtcbiAgICAgICAgICAgIHZhciBtZXJnZWREYXRhID0gbWVyZ2VJbmNyZW1lbnRhbERhdGEodGhpcy5nZXREaWZmKCkucmVzdWx0LCByZXN1bHQpO1xuICAgICAgICAgICAgcmVzdWx0LmRhdGEgPSBtZXJnZWREYXRhO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCdoYXNOZXh0JyBpbiByZXN1bHQgJiYgcmVzdWx0Lmhhc05leHQpIHtcbiAgICAgICAgICAgIHZhciBkaWZmID0gdGhpcy5nZXREaWZmKCk7XG4gICAgICAgICAgICByZXN1bHQuZGF0YSA9IG1lcmdlci5tZXJnZShkaWZmLnJlc3VsdCwgcmVzdWx0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ3JhcGhRTEVycm9ycyA9IGdyYXBoUUxFcnJvcnM7XG4gICAgICAgIGlmIChvcHRpb25zLmZldGNoUG9saWN5ID09PSAnbm8tY2FjaGUnKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxhc3REaWZmKHsgcmVzdWx0OiByZXN1bHQuZGF0YSwgY29tcGxldGU6IHRydWUgfSwgdGhpcy5nZXREaWZmT3B0aW9ucyhvcHRpb25zLnZhcmlhYmxlcykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNhY2hlV3JpdGVCZWhhdmlvciAhPT0gMCkge1xuICAgICAgICAgICAgaWYgKHNob3VsZFdyaXRlUmVzdWx0KHJlc3VsdCwgb3B0aW9ucy5lcnJvclBvbGljeSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlLnBlcmZvcm1UcmFuc2FjdGlvbihmdW5jdGlvbiAoY2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnNob3VsZFdyaXRlKHJlc3VsdCwgb3B0aW9ucy52YXJpYWJsZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS53cml0ZVF1ZXJ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeTogZG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcmVzdWx0LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiBvcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyd3JpdGU6IGNhY2hlV3JpdGVCZWhhdmlvciA9PT0gMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubGFzdFdyaXRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogb3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG1Db3VudDogZGVzdHJ1Y3RpdmVNZXRob2RDb3VudHMuZ2V0KF90aGlzLmNhY2hlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMubGFzdERpZmYgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sYXN0RGlmZi5kaWZmLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRhdGEgPSBfdGhpcy5sYXN0RGlmZi5kaWZmLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpZmZPcHRpb25zID0gX3RoaXMuZ2V0RGlmZk9wdGlvbnMob3B0aW9ucy52YXJpYWJsZXMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IGNhY2hlLmRpZmYoZGlmZk9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZVdhdGNoKG9wdGlvbnMudmFyaWFibGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVMYXN0RGlmZihkaWZmLCBkaWZmT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkaWZmLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuZGF0YSA9IGRpZmYucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RXcml0ZSA9IHZvaWQgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgUXVlcnlJbmZvLnByb3RvdHlwZS5tYXJrUmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubmV0d29ya0Vycm9yID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV0d29ya1N0YXR1cyA9IE5ldHdvcmtTdGF0dXMucmVhZHk7XG4gICAgfTtcbiAgICBRdWVyeUluZm8ucHJvdG90eXBlLm1hcmtFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB0aGlzLm5ldHdvcmtTdGF0dXMgPSBOZXR3b3JrU3RhdHVzLmVycm9yO1xuICAgICAgICB0aGlzLmxhc3RXcml0ZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICBpZiAoZXJyb3IuZ3JhcGhRTEVycm9ycykge1xuICAgICAgICAgICAgdGhpcy5ncmFwaFFMRXJyb3JzID0gZXJyb3IuZ3JhcGhRTEVycm9ycztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IubmV0d29ya0Vycm9yKSB7XG4gICAgICAgICAgICB0aGlzLm5ldHdvcmtFcnJvciA9IGVycm9yLm5ldHdvcmtFcnJvcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgfTtcbiAgICByZXR1cm4gUXVlcnlJbmZvO1xufSgpKTtcbmV4cG9ydCB7IFF1ZXJ5SW5mbyB9O1xuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFdyaXRlUmVzdWx0KHJlc3VsdCwgZXJyb3JQb2xpY3kpIHtcbiAgICBpZiAoZXJyb3JQb2xpY3kgPT09IHZvaWQgMCkgeyBlcnJvclBvbGljeSA9IFwibm9uZVwiOyB9XG4gICAgdmFyIGlnbm9yZUVycm9ycyA9IGVycm9yUG9saWN5ID09PSBcImlnbm9yZVwiIHx8XG4gICAgICAgIGVycm9yUG9saWN5ID09PSBcImFsbFwiO1xuICAgIHZhciB3cml0ZVdpdGhFcnJvcnMgPSAhZ3JhcGhRTFJlc3VsdEhhc0Vycm9yKHJlc3VsdCk7XG4gICAgaWYgKCF3cml0ZVdpdGhFcnJvcnMgJiYgaWdub3JlRXJyb3JzICYmIHJlc3VsdC5kYXRhKSB7XG4gICAgICAgIHdyaXRlV2l0aEVycm9ycyA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZVdpdGhFcnJvcnM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1RdWVyeUluZm8uanMubWFwIiwiaW1wb3J0IHsgX19hc3NpZ24sIF9fYXdhaXRlciwgX19nZW5lcmF0b3IgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGludmFyaWFudCwgSW52YXJpYW50RXJyb3IgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2dsb2JhbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IGVxdWFsIH0gZnJvbSAnQHdyeS9lcXVhbGl0eSc7XG5pbXBvcnQgeyBleGVjdXRlIH0gZnJvbSBcIi4uL2xpbmsvY29yZS9pbmRleC5qc1wiO1xuaW1wb3J0IHsgaXNFeGVjdXRpb25QYXRjaEluY3JlbWVudGFsUmVzdWx0LCBpc0V4ZWN1dGlvblBhdGNoUmVzdWx0LCB9IGZyb20gXCIuLi91dGlsaXRpZXMvY29tbW9uL2luY3JlbWVudGFsUmVzdWx0LmpzXCI7XG5pbXBvcnQgeyBjYW5vbmljYWxTdHJpbmdpZnkgfSBmcm9tIFwiLi4vY2FjaGUvaW5kZXguanNcIjtcbmltcG9ydCB7IGdldERlZmF1bHRWYWx1ZXMsIGdldE9wZXJhdGlvbkRlZmluaXRpb24sIGdldE9wZXJhdGlvbk5hbWUsIGhhc0NsaWVudEV4cG9ydHMsIGdyYXBoUUxSZXN1bHRIYXNFcnJvciwgZ2V0R3JhcGhRTEVycm9yc0Zyb21SZXN1bHQsIHJlbW92ZUNvbm5lY3Rpb25EaXJlY3RpdmVGcm9tRG9jdW1lbnQsIGNhblVzZVdlYWtNYXAsIE9ic2VydmFibGUsIGFzeW5jTWFwLCBpc05vbkVtcHR5QXJyYXksIENvbmNhc3QsIG1ha2VVbmlxdWVJZCwgaXNEb2N1bWVudE5vZGUsIGlzTm9uTnVsbE9iamVjdCwgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBtZXJnZUluY3JlbWVudGFsRGF0YSB9IGZyb20gXCIuLi91dGlsaXRpZXMvY29tbW9uL2luY3JlbWVudGFsUmVzdWx0LmpzXCI7XG5pbXBvcnQgeyBBcG9sbG9FcnJvciwgaXNBcG9sbG9FcnJvciwgZ3JhcGhRTFJlc3VsdEhhc1Byb3RvY29sRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9ycy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZVF1ZXJ5LCBsb2dNaXNzaW5nRmllbGRFcnJvcnMgfSBmcm9tIFwiLi9PYnNlcnZhYmxlUXVlcnkuanNcIjtcbmltcG9ydCB7IE5ldHdvcmtTdGF0dXMsIGlzTmV0d29ya1JlcXVlc3RJbkZsaWdodCB9IGZyb20gXCIuL25ldHdvcmtTdGF0dXMuanNcIjtcbmltcG9ydCB7IExvY2FsU3RhdGUgfSBmcm9tIFwiLi9Mb2NhbFN0YXRlLmpzXCI7XG5pbXBvcnQgeyBRdWVyeUluZm8sIHNob3VsZFdyaXRlUmVzdWx0LCB9IGZyb20gXCIuL1F1ZXJ5SW5mby5qc1wiO1xuaW1wb3J0IHsgUFJPVE9DT0xfRVJST1JTX1NZTUJPTCB9IGZyb20gXCIuLi9lcnJvcnMvaW5kZXguanNcIjtcbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgUXVlcnlNYW5hZ2VyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBRdWVyeU1hbmFnZXIoX2EpIHtcbiAgICAgICAgdmFyIGNhY2hlID0gX2EuY2FjaGUsIGxpbmsgPSBfYS5saW5rLCBkZWZhdWx0T3B0aW9ucyA9IF9hLmRlZmF1bHRPcHRpb25zLCBfYiA9IF9hLnF1ZXJ5RGVkdXBsaWNhdGlvbiwgcXVlcnlEZWR1cGxpY2F0aW9uID0gX2IgPT09IHZvaWQgMCA/IGZhbHNlIDogX2IsIG9uQnJvYWRjYXN0ID0gX2Eub25Ccm9hZGNhc3QsIF9jID0gX2Euc3NyTW9kZSwgc3NyTW9kZSA9IF9jID09PSB2b2lkIDAgPyBmYWxzZSA6IF9jLCBfZCA9IF9hLmNsaWVudEF3YXJlbmVzcywgY2xpZW50QXdhcmVuZXNzID0gX2QgPT09IHZvaWQgMCA/IHt9IDogX2QsIGxvY2FsU3RhdGUgPSBfYS5sb2NhbFN0YXRlLCBhc3N1bWVJbW11dGFibGVSZXN1bHRzID0gX2EuYXNzdW1lSW1tdXRhYmxlUmVzdWx0cztcbiAgICAgICAgdGhpcy5jbGllbnRBd2FyZW5lc3MgPSB7fTtcbiAgICAgICAgdGhpcy5xdWVyaWVzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmZldGNoQ2FuY2VsRm5zID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybUNhY2hlID0gbmV3IChjYW5Vc2VXZWFrTWFwID8gV2Vha01hcCA6IE1hcCkoKTtcbiAgICAgICAgdGhpcy5xdWVyeUlkQ291bnRlciA9IDE7XG4gICAgICAgIHRoaXMucmVxdWVzdElkQ291bnRlciA9IDE7XG4gICAgICAgIHRoaXMubXV0YXRpb25JZENvdW50ZXIgPSAxO1xuICAgICAgICB0aGlzLmluRmxpZ2h0TGlua09ic2VydmFibGVzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgICAgIHRoaXMubGluayA9IGxpbms7XG4gICAgICAgIHRoaXMuZGVmYXVsdE9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucyB8fCBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLnF1ZXJ5RGVkdXBsaWNhdGlvbiA9IHF1ZXJ5RGVkdXBsaWNhdGlvbjtcbiAgICAgICAgdGhpcy5jbGllbnRBd2FyZW5lc3MgPSBjbGllbnRBd2FyZW5lc3M7XG4gICAgICAgIHRoaXMubG9jYWxTdGF0ZSA9IGxvY2FsU3RhdGUgfHwgbmV3IExvY2FsU3RhdGUoeyBjYWNoZTogY2FjaGUgfSk7XG4gICAgICAgIHRoaXMuc3NyTW9kZSA9IHNzck1vZGU7XG4gICAgICAgIHRoaXMuYXNzdW1lSW1tdXRhYmxlUmVzdWx0cyA9ICEhYXNzdW1lSW1tdXRhYmxlUmVzdWx0cztcbiAgICAgICAgaWYgKCh0aGlzLm9uQnJvYWRjYXN0ID0gb25Ccm9hZGNhc3QpKSB7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uU3RvcmUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5xdWVyaWVzLmZvckVhY2goZnVuY3Rpb24gKF9pbmZvLCBxdWVyeUlkKSB7XG4gICAgICAgICAgICBfdGhpcy5zdG9wUXVlcnlOb0Jyb2FkY2FzdChxdWVyeUlkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FuY2VsUGVuZGluZ0ZldGNoZXMoX19ERVZfXyA/IG5ldyBJbnZhcmlhbnRFcnJvcignUXVlcnlNYW5hZ2VyIHN0b3BwZWQgd2hpbGUgcXVlcnkgd2FzIGluIGZsaWdodCcpIDogbmV3IEludmFyaWFudEVycm9yKDE0KSk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLmNhbmNlbFBlbmRpbmdGZXRjaGVzID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRoaXMuZmV0Y2hDYW5jZWxGbnMuZm9yRWFjaChmdW5jdGlvbiAoY2FuY2VsKSB7IHJldHVybiBjYW5jZWwoZXJyb3IpOyB9KTtcbiAgICAgICAgdGhpcy5mZXRjaENhbmNlbEZucy5jbGVhcigpO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5tdXRhdGUgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIF9iLCBfYztcbiAgICAgICAgdmFyIG11dGF0aW9uID0gX2EubXV0YXRpb24sIHZhcmlhYmxlcyA9IF9hLnZhcmlhYmxlcywgb3B0aW1pc3RpY1Jlc3BvbnNlID0gX2Eub3B0aW1pc3RpY1Jlc3BvbnNlLCB1cGRhdGVRdWVyaWVzID0gX2EudXBkYXRlUXVlcmllcywgX2QgPSBfYS5yZWZldGNoUXVlcmllcywgcmVmZXRjaFF1ZXJpZXMgPSBfZCA9PT0gdm9pZCAwID8gW10gOiBfZCwgX2UgPSBfYS5hd2FpdFJlZmV0Y2hRdWVyaWVzLCBhd2FpdFJlZmV0Y2hRdWVyaWVzID0gX2UgPT09IHZvaWQgMCA/IGZhbHNlIDogX2UsIHVwZGF0ZVdpdGhQcm94eUZuID0gX2EudXBkYXRlLCBvblF1ZXJ5VXBkYXRlZCA9IF9hLm9uUXVlcnlVcGRhdGVkLCBfZiA9IF9hLmZldGNoUG9saWN5LCBmZXRjaFBvbGljeSA9IF9mID09PSB2b2lkIDAgPyAoKF9iID0gdGhpcy5kZWZhdWx0T3B0aW9ucy5tdXRhdGUpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5mZXRjaFBvbGljeSkgfHwgXCJuZXR3b3JrLW9ubHlcIiA6IF9mLCBfZyA9IF9hLmVycm9yUG9saWN5LCBlcnJvclBvbGljeSA9IF9nID09PSB2b2lkIDAgPyAoKF9jID0gdGhpcy5kZWZhdWx0T3B0aW9ucy5tdXRhdGUpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5lcnJvclBvbGljeSkgfHwgXCJub25lXCIgOiBfZywga2VlcFJvb3RGaWVsZHMgPSBfYS5rZWVwUm9vdEZpZWxkcywgY29udGV4dCA9IF9hLmNvbnRleHQ7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtdXRhdGlvbklkLCBfaCwgZG9jdW1lbnQsIGhhc0NsaWVudEV4cG9ydHMsIG11dGF0aW9uU3RvcmVWYWx1ZSwgc2VsZjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2opIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9qLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9fREVWX18gPyBpbnZhcmlhbnQobXV0YXRpb24sICdtdXRhdGlvbiBvcHRpb24gaXMgcmVxdWlyZWQuIFlvdSBtdXN0IHNwZWNpZnkgeW91ciBHcmFwaFFMIGRvY3VtZW50IGluIHRoZSBtdXRhdGlvbiBvcHRpb24uJykgOiBpbnZhcmlhbnQobXV0YXRpb24sIDE1KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9fREVWX18gPyBpbnZhcmlhbnQoZmV0Y2hQb2xpY3kgPT09ICduZXR3b3JrLW9ubHknIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hQb2xpY3kgPT09ICduby1jYWNoZScsIFwiTXV0YXRpb25zIHN1cHBvcnQgb25seSAnbmV0d29yay1vbmx5JyBvciAnbm8tY2FjaGUnIGZldGNoUG9saWN5IHN0cmluZ3MuIFRoZSBkZWZhdWx0IGBuZXR3b3JrLW9ubHlgIGJlaGF2aW9yIGF1dG9tYXRpY2FsbHkgd3JpdGVzIG11dGF0aW9uIHJlc3VsdHMgdG8gdGhlIGNhY2hlLiBQYXNzaW5nIGBuby1jYWNoZWAgc2tpcHMgdGhlIGNhY2hlIHdyaXRlLlwiKSA6IGludmFyaWFudChmZXRjaFBvbGljeSA9PT0gJ25ldHdvcmstb25seScgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaFBvbGljeSA9PT0gJ25vLWNhY2hlJywgMTYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25JZCA9IHRoaXMuZ2VuZXJhdGVNdXRhdGlvbklkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaCA9IHRoaXMudHJhbnNmb3JtKG11dGF0aW9uKSwgZG9jdW1lbnQgPSBfaC5kb2N1bWVudCwgaGFzQ2xpZW50RXhwb3J0cyA9IF9oLmhhc0NsaWVudEV4cG9ydHM7XG4gICAgICAgICAgICAgICAgICAgICAgICBtdXRhdGlvbiA9IHRoaXMuY2FjaGUudHJhbnNmb3JtRm9yTGluayhkb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXMgPSB0aGlzLmdldFZhcmlhYmxlcyhtdXRhdGlvbiwgdmFyaWFibGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGFzQ2xpZW50RXhwb3J0cykgcmV0dXJuIFszLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgdGhpcy5sb2NhbFN0YXRlLmFkZEV4cG9ydGVkVmFyaWFibGVzKG11dGF0aW9uLCB2YXJpYWJsZXMsIGNvbnRleHQpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzID0gKF9qLnNlbnQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfai5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9uU3RvcmVWYWx1ZSA9IHRoaXMubXV0YXRpb25TdG9yZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLm11dGF0aW9uU3RvcmVbbXV0YXRpb25JZF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9uOiBtdXRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGltaXN0aWNSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFya011dGF0aW9uT3B0aW1pc3RpYyhvcHRpbWlzdGljUmVzcG9uc2UsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25JZDogbXV0YXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQ6IG11dGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hQb2xpY3k6IGZldGNoUG9saWN5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvclBvbGljeTogZXJyb3JQb2xpY3ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVF1ZXJpZXM6IHVwZGF0ZVF1ZXJpZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZTogdXBkYXRlV2l0aFByb3h5Rm4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtlZXBSb290RmllbGRzOiBrZWVwUm9vdEZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIsIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFzeW5jTWFwKHNlbGYuZ2V0T2JzZXJ2YWJsZUZyb21MaW5rKG11dGF0aW9uLCBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY29udGV4dCksIHsgb3B0aW1pc3RpY1Jlc3BvbnNlOiBvcHRpbWlzdGljUmVzcG9uc2UgfSksIHZhcmlhYmxlcywgZmFsc2UpLCBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3JhcGhRTFJlc3VsdEhhc0Vycm9yKHJlc3VsdCkgJiYgZXJyb3JQb2xpY3kgPT09ICdub25lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcG9sbG9FcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyYXBoUUxFcnJvcnM6IGdldEdyYXBoUUxFcnJvcnNGcm9tUmVzdWx0KHJlc3VsdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobXV0YXRpb25TdG9yZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25TdG9yZVZhbHVlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdXRhdGlvblN0b3JlVmFsdWUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlUmVzdWx0ID0gX19hc3NpZ24oe30sIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlZmV0Y2hRdWVyaWVzID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZldGNoUXVlcmllcyA9IHJlZmV0Y2hRdWVyaWVzKHN0b3JlUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvclBvbGljeSA9PT0gJ2lnbm9yZScgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmFwaFFMUmVzdWx0SGFzRXJyb3Ioc3RvcmVSZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHN0b3JlUmVzdWx0LmVycm9ycztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLm1hcmtNdXRhdGlvblJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25JZDogbXV0YXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHN0b3JlUmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiBtdXRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaFBvbGljeTogZmV0Y2hQb2xpY3ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JQb2xpY3k6IGVycm9yUG9saWN5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlOiB1cGRhdGVXaXRoUHJveHlGbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVRdWVyaWVzOiB1cGRhdGVRdWVyaWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0UmVmZXRjaFF1ZXJpZXM6IGF3YWl0UmVmZXRjaFF1ZXJpZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXRjaFF1ZXJpZXM6IHJlZmV0Y2hRdWVyaWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU9wdGltaXN0aWM6IG9wdGltaXN0aWNSZXNwb25zZSA/IG11dGF0aW9uSWQgOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25RdWVyeVVwZGF0ZWQ6IG9uUXVlcnlVcGRhdGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtlZXBSb290RmllbGRzOiBrZWVwUm9vdEZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHN0b3JlUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5icm9hZGNhc3RRdWVyaWVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoJ2hhc05leHQnIGluIHN0b3JlUmVzdWx0KSB8fCBzdG9yZVJlc3VsdC5oYXNOZXh0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHN0b3JlUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobXV0YXRpb25TdG9yZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9uU3RvcmVWYWx1ZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9uU3RvcmVWYWx1ZS5lcnJvciA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGltaXN0aWNSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhY2hlLnJlbW92ZU9wdGltaXN0aWMobXV0YXRpb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIgaW5zdGFuY2VvZiBBcG9sbG9FcnJvciA/IGVyciA6IG5ldyBBcG9sbG9FcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtFcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLm1hcmtNdXRhdGlvblJlc3VsdCA9IGZ1bmN0aW9uIChtdXRhdGlvbiwgY2FjaGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGNhY2hlID09PSB2b2lkIDApIHsgY2FjaGUgPSB0aGlzLmNhY2hlOyB9XG4gICAgICAgIHZhciByZXN1bHQgPSBtdXRhdGlvbi5yZXN1bHQ7XG4gICAgICAgIHZhciBjYWNoZVdyaXRlcyA9IFtdO1xuICAgICAgICB2YXIgc2tpcENhY2hlID0gbXV0YXRpb24uZmV0Y2hQb2xpY3kgPT09IFwibm8tY2FjaGVcIjtcbiAgICAgICAgaWYgKCFza2lwQ2FjaGUgJiYgc2hvdWxkV3JpdGVSZXN1bHQocmVzdWx0LCBtdXRhdGlvbi5lcnJvclBvbGljeSkpIHtcbiAgICAgICAgICAgIGlmICghaXNFeGVjdXRpb25QYXRjaEluY3JlbWVudGFsUmVzdWx0KHJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICBjYWNoZVdyaXRlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiByZXN1bHQuZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YUlkOiAnUk9PVF9NVVRBVElPTicsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBtdXRhdGlvbi5kb2N1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiBtdXRhdGlvbi52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNFeGVjdXRpb25QYXRjaEluY3JlbWVudGFsUmVzdWx0KHJlc3VsdCkgJiYgaXNOb25FbXB0eUFycmF5KHJlc3VsdC5pbmNyZW1lbnRhbCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IGNhY2hlLmRpZmYoe1xuICAgICAgICAgICAgICAgICAgICBpZDogXCJST09UX01VVEFUSU9OXCIsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB0aGlzLnRyYW5zZm9ybShtdXRhdGlvbi5kb2N1bWVudCkuYXNRdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiBtdXRhdGlvbi52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgIG9wdGltaXN0aWM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICByZXR1cm5QYXJ0aWFsRGF0YTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgbWVyZ2VkRGF0YSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoZGlmZi5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VkRGF0YSA9IG1lcmdlSW5jcmVtZW50YWxEYXRhKGRpZmYucmVzdWx0LCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lcmdlZERhdGEgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5kYXRhID0gbWVyZ2VkRGF0YTtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVXcml0ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IG1lcmdlZERhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhSWQ6ICdST09UX01VVEFUSU9OJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBtdXRhdGlvbi5kb2N1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogbXV0YXRpb24udmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdXBkYXRlUXVlcmllc18xID0gbXV0YXRpb24udXBkYXRlUXVlcmllcztcbiAgICAgICAgICAgIGlmICh1cGRhdGVRdWVyaWVzXzEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJpZXMuZm9yRWFjaChmdW5jdGlvbiAoX2EsIHF1ZXJ5SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9ic2VydmFibGVRdWVyeSA9IF9hLm9ic2VydmFibGVRdWVyeTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHF1ZXJ5TmFtZSA9IG9ic2VydmFibGVRdWVyeSAmJiBvYnNlcnZhYmxlUXVlcnkucXVlcnlOYW1lO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXF1ZXJ5TmFtZSB8fCAhaGFzT3duUHJvcGVydHkuY2FsbCh1cGRhdGVRdWVyaWVzXzEsIHF1ZXJ5TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlciA9IHVwZGF0ZVF1ZXJpZXNfMVtxdWVyeU5hbWVdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2IgPSBfdGhpcy5xdWVyaWVzLmdldChxdWVyeUlkKSwgZG9jdW1lbnQgPSBfYi5kb2N1bWVudCwgdmFyaWFibGVzID0gX2IudmFyaWFibGVzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2MgPSBjYWNoZS5kaWZmKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBkb2N1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuUGFydGlhbERhdGE6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpbWlzdGljOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgfSksIGN1cnJlbnRRdWVyeVJlc3VsdCA9IF9jLnJlc3VsdCwgY29tcGxldGUgPSBfYy5jb21wbGV0ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXBsZXRlICYmIGN1cnJlbnRRdWVyeVJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRRdWVyeVJlc3VsdCA9IHVwZGF0ZXIoY3VycmVudFF1ZXJ5UmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25SZXN1bHQ6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeU5hbWU6IGRvY3VtZW50ICYmIGdldE9wZXJhdGlvbk5hbWUoZG9jdW1lbnQpIHx8IHZvaWQgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dFF1ZXJ5UmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVXcml0ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogbmV4dFF1ZXJ5UmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhSWQ6ICdST09UX1FVRVJZJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IGRvY3VtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjYWNoZVdyaXRlcy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICBtdXRhdGlvbi5yZWZldGNoUXVlcmllcyB8fFxuICAgICAgICAgICAgbXV0YXRpb24udXBkYXRlIHx8XG4gICAgICAgICAgICBtdXRhdGlvbi5vblF1ZXJ5VXBkYXRlZCB8fFxuICAgICAgICAgICAgbXV0YXRpb24ucmVtb3ZlT3B0aW1pc3RpYykge1xuICAgICAgICAgICAgdmFyIHJlc3VsdHNfMSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yZWZldGNoUXVlcmllcyh7XG4gICAgICAgICAgICAgICAgdXBkYXRlQ2FjaGU6IGZ1bmN0aW9uIChjYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNraXBDYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVXcml0ZXMuZm9yRWFjaChmdW5jdGlvbiAod3JpdGUpIHsgcmV0dXJuIGNhY2hlLndyaXRlKHdyaXRlKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZSA9IG11dGF0aW9uLnVwZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzRmluYWxSZXN1bHQgPSAhaXNFeGVjdXRpb25QYXRjaFJlc3VsdChyZXN1bHQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAoaXNFeGVjdXRpb25QYXRjaEluY3JlbWVudGFsUmVzdWx0KHJlc3VsdCkgJiYgIXJlc3VsdC5oYXNOZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFza2lwQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IGNhY2hlLmRpZmYoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJST09UX01VVEFUSU9OXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBfdGhpcy50cmFuc2Zvcm0obXV0YXRpb24uZG9jdW1lbnQpLmFzUXVlcnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogbXV0YXRpb24udmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpbWlzdGljOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuUGFydGlhbERhdGE6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYuY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHJlc3VsdCksIHsgZGF0YTogZGlmZi5yZXN1bHQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnaW5jcmVtZW50YWwnIGluIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdC5pbmNyZW1lbnRhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ2hhc05leHQnIGluIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdC5oYXNOZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRmluYWxSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUoY2FjaGUsIHJlc3VsdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBtdXRhdGlvbi5jb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IG11dGF0aW9uLnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNraXBDYWNoZSAmJiAhbXV0YXRpb24ua2VlcFJvb3RGaWVsZHMgJiYgaXNGaW5hbFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUubW9kaWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogJ1JPT1RfTVVUQVRJT04nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkczogZnVuY3Rpb24gKHZhbHVlLCBfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGROYW1lID0gX2EuZmllbGROYW1lLCBERUxFVEUgPSBfYS5ERUxFVEU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZE5hbWUgPT09IFwiX190eXBlbmFtZVwiID8gdmFsdWUgOiBERUxFVEU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBtdXRhdGlvbi5yZWZldGNoUXVlcmllcyxcbiAgICAgICAgICAgICAgICBvcHRpbWlzdGljOiBmYWxzZSxcbiAgICAgICAgICAgICAgICByZW1vdmVPcHRpbWlzdGljOiBtdXRhdGlvbi5yZW1vdmVPcHRpbWlzdGljLFxuICAgICAgICAgICAgICAgIG9uUXVlcnlVcGRhdGVkOiBtdXRhdGlvbi5vblF1ZXJ5VXBkYXRlZCB8fCBudWxsLFxuICAgICAgICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAocmVzdWx0KSB7IHJldHVybiByZXN1bHRzXzEucHVzaChyZXN1bHQpOyB9KTtcbiAgICAgICAgICAgIGlmIChtdXRhdGlvbi5hd2FpdFJlZmV0Y2hRdWVyaWVzIHx8IG11dGF0aW9uLm9uUXVlcnlVcGRhdGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHJlc3VsdHNfMSkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiByZXN1bHQ7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUubWFya011dGF0aW9uT3B0aW1pc3RpYyA9IGZ1bmN0aW9uIChvcHRpbWlzdGljUmVzcG9uc2UsIG11dGF0aW9uKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBkYXRhID0gdHlwZW9mIG9wdGltaXN0aWNSZXNwb25zZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICA/IG9wdGltaXN0aWNSZXNwb25zZShtdXRhdGlvbi52YXJpYWJsZXMpXG4gICAgICAgICAgICA6IG9wdGltaXN0aWNSZXNwb25zZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUucmVjb3JkT3B0aW1pc3RpY1RyYW5zYWN0aW9uKGZ1bmN0aW9uIChjYWNoZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBfdGhpcy5tYXJrTXV0YXRpb25SZXN1bHQoX19hc3NpZ24oX19hc3NpZ24oe30sIG11dGF0aW9uKSwgeyByZXN1bHQ6IHsgZGF0YTogZGF0YSB9IH0pLCBjYWNoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBfX0RFVl9fICYmIGludmFyaWFudC5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIG11dGF0aW9uLm11dGF0aW9uSWQpO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5mZXRjaFF1ZXJ5ID0gZnVuY3Rpb24gKHF1ZXJ5SWQsIG9wdGlvbnMsIG5ldHdvcmtTdGF0dXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hRdWVyeU9ic2VydmFibGUocXVlcnlJZCwgb3B0aW9ucywgbmV0d29ya1N0YXR1cykucHJvbWlzZTtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUuZ2V0UXVlcnlTdG9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0b3JlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5xdWVyaWVzLmZvckVhY2goZnVuY3Rpb24gKGluZm8sIHF1ZXJ5SWQpIHtcbiAgICAgICAgICAgIHN0b3JlW3F1ZXJ5SWRdID0ge1xuICAgICAgICAgICAgICAgIHZhcmlhYmxlczogaW5mby52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgbmV0d29ya1N0YXR1czogaW5mby5uZXR3b3JrU3RhdHVzLFxuICAgICAgICAgICAgICAgIG5ldHdvcmtFcnJvcjogaW5mby5uZXR3b3JrRXJyb3IsXG4gICAgICAgICAgICAgICAgZ3JhcGhRTEVycm9yczogaW5mby5ncmFwaFFMRXJyb3JzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzdG9yZTtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUucmVzZXRFcnJvcnMgPSBmdW5jdGlvbiAocXVlcnlJZCkge1xuICAgICAgICB2YXIgcXVlcnlJbmZvID0gdGhpcy5xdWVyaWVzLmdldChxdWVyeUlkKTtcbiAgICAgICAgaWYgKHF1ZXJ5SW5mbykge1xuICAgICAgICAgICAgcXVlcnlJbmZvLm5ldHdvcmtFcnJvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHF1ZXJ5SW5mby5ncmFwaFFMRXJyb3JzID0gW107XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gKGRvY3VtZW50KSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1DYWNoZSA9IHRoaXMudHJhbnNmb3JtQ2FjaGU7XG4gICAgICAgIGlmICghdHJhbnNmb3JtQ2FjaGUuaGFzKGRvY3VtZW50KSkge1xuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybWVkID0gdGhpcy5jYWNoZS50cmFuc2Zvcm1Eb2N1bWVudChkb2N1bWVudCk7XG4gICAgICAgICAgICB2YXIgbm9Db25uZWN0aW9uID0gcmVtb3ZlQ29ubmVjdGlvbkRpcmVjdGl2ZUZyb21Eb2N1bWVudCh0cmFuc2Zvcm1lZCk7XG4gICAgICAgICAgICB2YXIgY2xpZW50UXVlcnkgPSB0aGlzLmxvY2FsU3RhdGUuY2xpZW50UXVlcnkodHJhbnNmb3JtZWQpO1xuICAgICAgICAgICAgdmFyIHNlcnZlclF1ZXJ5ID0gbm9Db25uZWN0aW9uICYmIHRoaXMubG9jYWxTdGF0ZS5zZXJ2ZXJRdWVyeShub0Nvbm5lY3Rpb24pO1xuICAgICAgICAgICAgdmFyIGNhY2hlRW50cnlfMSA9IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudDogdHJhbnNmb3JtZWQsXG4gICAgICAgICAgICAgICAgaGFzQ2xpZW50RXhwb3J0czogaGFzQ2xpZW50RXhwb3J0cyh0cmFuc2Zvcm1lZCksXG4gICAgICAgICAgICAgICAgaGFzRm9yY2VkUmVzb2x2ZXJzOiB0aGlzLmxvY2FsU3RhdGUuc2hvdWxkRm9yY2VSZXNvbHZlcnModHJhbnNmb3JtZWQpLFxuICAgICAgICAgICAgICAgIGNsaWVudFF1ZXJ5OiBjbGllbnRRdWVyeSxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJRdWVyeTogc2VydmVyUXVlcnksXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhcnM6IGdldERlZmF1bHRWYWx1ZXMoZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbih0cmFuc2Zvcm1lZCkpLFxuICAgICAgICAgICAgICAgIGFzUXVlcnk6IF9fYXNzaWduKF9fYXNzaWduKHt9LCB0cmFuc2Zvcm1lZCksIHsgZGVmaW5pdGlvbnM6IHRyYW5zZm9ybWVkLmRlZmluaXRpb25zLm1hcChmdW5jdGlvbiAoZGVmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmLmtpbmQgPT09IFwiT3BlcmF0aW9uRGVmaW5pdGlvblwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmLm9wZXJhdGlvbiAhPT0gXCJxdWVyeVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBkZWYpLCB7IG9wZXJhdGlvbjogXCJxdWVyeVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZjtcbiAgICAgICAgICAgICAgICAgICAgfSkgfSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgYWRkID0gZnVuY3Rpb24gKGRvYykge1xuICAgICAgICAgICAgICAgIGlmIChkb2MgJiYgIXRyYW5zZm9ybUNhY2hlLmhhcyhkb2MpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybUNhY2hlLnNldChkb2MsIGNhY2hlRW50cnlfMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGFkZChkb2N1bWVudCk7XG4gICAgICAgICAgICBhZGQodHJhbnNmb3JtZWQpO1xuICAgICAgICAgICAgYWRkKGNsaWVudFF1ZXJ5KTtcbiAgICAgICAgICAgIGFkZChzZXJ2ZXJRdWVyeSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUNhY2hlLmdldChkb2N1bWVudCk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLmdldFZhcmlhYmxlcyA9IGZ1bmN0aW9uIChkb2N1bWVudCwgdmFyaWFibGVzKSB7XG4gICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy50cmFuc2Zvcm0oZG9jdW1lbnQpLmRlZmF1bHRWYXJzKSwgdmFyaWFibGVzKTtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUud2F0Y2hRdWVyeSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3B0aW9ucyksIHsgdmFyaWFibGVzOiB0aGlzLmdldFZhcmlhYmxlcyhvcHRpb25zLnF1ZXJ5LCBvcHRpb25zLnZhcmlhYmxlcykgfSk7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5ub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBvcHRpb25zLm5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBxdWVyeUluZm8gPSBuZXcgUXVlcnlJbmZvKHRoaXMpO1xuICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlUXVlcnkoe1xuICAgICAgICAgICAgcXVlcnlNYW5hZ2VyOiB0aGlzLFxuICAgICAgICAgICAgcXVlcnlJbmZvOiBxdWVyeUluZm8sXG4gICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWVyaWVzLnNldChvYnNlcnZhYmxlLnF1ZXJ5SWQsIHF1ZXJ5SW5mbyk7XG4gICAgICAgIHF1ZXJ5SW5mby5pbml0KHtcbiAgICAgICAgICAgIGRvY3VtZW50OiBvYnNlcnZhYmxlLnF1ZXJ5LFxuICAgICAgICAgICAgb2JzZXJ2YWJsZVF1ZXJ5OiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgdmFyaWFibGVzOiBvYnNlcnZhYmxlLnZhcmlhYmxlcyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uIChvcHRpb25zLCBxdWVyeUlkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChxdWVyeUlkID09PSB2b2lkIDApIHsgcXVlcnlJZCA9IHRoaXMuZ2VuZXJhdGVRdWVyeUlkKCk7IH1cbiAgICAgICAgX19ERVZfXyA/IGludmFyaWFudChvcHRpb25zLnF1ZXJ5LCAncXVlcnkgb3B0aW9uIGlzIHJlcXVpcmVkLiBZb3UgbXVzdCBzcGVjaWZ5IHlvdXIgR3JhcGhRTCBkb2N1bWVudCAnICtcbiAgICAgICAgICAgICdpbiB0aGUgcXVlcnkgb3B0aW9uLicpIDogaW52YXJpYW50KG9wdGlvbnMucXVlcnksIDE3KTtcbiAgICAgICAgX19ERVZfXyA/IGludmFyaWFudChvcHRpb25zLnF1ZXJ5LmtpbmQgPT09ICdEb2N1bWVudCcsICdZb3UgbXVzdCB3cmFwIHRoZSBxdWVyeSBzdHJpbmcgaW4gYSBcImdxbFwiIHRhZy4nKSA6IGludmFyaWFudChvcHRpb25zLnF1ZXJ5LmtpbmQgPT09ICdEb2N1bWVudCcsIDE4KTtcbiAgICAgICAgX19ERVZfXyA/IGludmFyaWFudCghb3B0aW9ucy5yZXR1cm5QYXJ0aWFsRGF0YSwgJ3JldHVyblBhcnRpYWxEYXRhIG9wdGlvbiBvbmx5IHN1cHBvcnRlZCBvbiB3YXRjaFF1ZXJ5LicpIDogaW52YXJpYW50KCFvcHRpb25zLnJldHVyblBhcnRpYWxEYXRhLCAxOSk7XG4gICAgICAgIF9fREVWX18gPyBpbnZhcmlhbnQoIW9wdGlvbnMucG9sbEludGVydmFsLCAncG9sbEludGVydmFsIG9wdGlvbiBvbmx5IHN1cHBvcnRlZCBvbiB3YXRjaFF1ZXJ5LicpIDogaW52YXJpYW50KCFvcHRpb25zLnBvbGxJbnRlcnZhbCwgMjApO1xuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaFF1ZXJ5KHF1ZXJ5SWQsIG9wdGlvbnMpLmZpbmFsbHkoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc3RvcFF1ZXJ5KHF1ZXJ5SWQpOyB9KTtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUuZ2VuZXJhdGVRdWVyeUlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gU3RyaW5nKHRoaXMucXVlcnlJZENvdW50ZXIrKyk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLmdlbmVyYXRlUmVxdWVzdElkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0SWRDb3VudGVyKys7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLmdlbmVyYXRlTXV0YXRpb25JZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyh0aGlzLm11dGF0aW9uSWRDb3VudGVyKyspO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5zdG9wUXVlcnlJblN0b3JlID0gZnVuY3Rpb24gKHF1ZXJ5SWQpIHtcbiAgICAgICAgdGhpcy5zdG9wUXVlcnlJblN0b3JlTm9Ccm9hZGNhc3QocXVlcnlJZCk7XG4gICAgICAgIHRoaXMuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5zdG9wUXVlcnlJblN0b3JlTm9Ccm9hZGNhc3QgPSBmdW5jdGlvbiAocXVlcnlJZCkge1xuICAgICAgICB2YXIgcXVlcnlJbmZvID0gdGhpcy5xdWVyaWVzLmdldChxdWVyeUlkKTtcbiAgICAgICAgaWYgKHF1ZXJ5SW5mbylcbiAgICAgICAgICAgIHF1ZXJ5SW5mby5zdG9wKCk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLmNsZWFyU3RvcmUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBkaXNjYXJkV2F0Y2hlczogdHJ1ZSxcbiAgICAgICAgfTsgfVxuICAgICAgICB0aGlzLmNhbmNlbFBlbmRpbmdGZXRjaGVzKF9fREVWX18gPyBuZXcgSW52YXJpYW50RXJyb3IoJ1N0b3JlIHJlc2V0IHdoaWxlIHF1ZXJ5IHdhcyBpbiBmbGlnaHQgKG5vdCBjb21wbGV0ZWQgaW4gbGluayBjaGFpbiknKSA6IG5ldyBJbnZhcmlhbnRFcnJvcigyMSkpO1xuICAgICAgICB0aGlzLnF1ZXJpZXMuZm9yRWFjaChmdW5jdGlvbiAocXVlcnlJbmZvKSB7XG4gICAgICAgICAgICBpZiAocXVlcnlJbmZvLm9ic2VydmFibGVRdWVyeSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5SW5mby5uZXR3b3JrU3RhdHVzID0gTmV0d29ya1N0YXR1cy5sb2FkaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcXVlcnlJbmZvLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLm11dGF0aW9uU3RvcmUpIHtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25TdG9yZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUucmVzZXQob3B0aW9ucyk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLmdldE9ic2VydmFibGVRdWVyaWVzID0gZnVuY3Rpb24gKGluY2x1ZGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGluY2x1ZGUgPT09IHZvaWQgMCkgeyBpbmNsdWRlID0gXCJhY3RpdmVcIjsgfVxuICAgICAgICB2YXIgcXVlcmllcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdmFyIHF1ZXJ5TmFtZXNBbmREb2NzID0gbmV3IE1hcCgpO1xuICAgICAgICB2YXIgbGVnYWN5UXVlcnlPcHRpb25zID0gbmV3IFNldCgpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbmNsdWRlKSkge1xuICAgICAgICAgICAgaW5jbHVkZS5mb3JFYWNoKGZ1bmN0aW9uIChkZXNjKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkZXNjID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5TmFtZXNBbmREb2NzLnNldChkZXNjLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzRG9jdW1lbnROb2RlKGRlc2MpKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5TmFtZXNBbmREb2NzLnNldChfdGhpcy50cmFuc2Zvcm0oZGVzYykuZG9jdW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNOb25OdWxsT2JqZWN0KGRlc2MpICYmIGRlc2MucXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVnYWN5UXVlcnlPcHRpb25zLmFkZChkZXNjKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXJpZXMuZm9yRWFjaChmdW5jdGlvbiAoX2EsIHF1ZXJ5SWQpIHtcbiAgICAgICAgICAgIHZhciBvcSA9IF9hLm9ic2VydmFibGVRdWVyeSwgZG9jdW1lbnQgPSBfYS5kb2N1bWVudDtcbiAgICAgICAgICAgIGlmIChvcSkge1xuICAgICAgICAgICAgICAgIGlmIChpbmNsdWRlID09PSBcImFsbFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJpZXMuc2V0KHF1ZXJ5SWQsIG9xKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcXVlcnlOYW1lID0gb3EucXVlcnlOYW1lLCBmZXRjaFBvbGljeSA9IG9xLm9wdGlvbnMuZmV0Y2hQb2xpY3k7XG4gICAgICAgICAgICAgICAgaWYgKGZldGNoUG9saWN5ID09PSBcInN0YW5kYnlcIiB8fFxuICAgICAgICAgICAgICAgICAgICAoaW5jbHVkZSA9PT0gXCJhY3RpdmVcIiAmJiAhb3EuaGFzT2JzZXJ2ZXJzKCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGluY2x1ZGUgPT09IFwiYWN0aXZlXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgKHF1ZXJ5TmFtZSAmJiBxdWVyeU5hbWVzQW5kRG9jcy5oYXMocXVlcnlOYW1lKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKGRvY3VtZW50ICYmIHF1ZXJ5TmFtZXNBbmREb2NzLmhhcyhkb2N1bWVudCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJpZXMuc2V0KHF1ZXJ5SWQsIG9xKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5TmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5TmFtZXNBbmREb2NzLnNldChxdWVyeU5hbWUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeU5hbWVzQW5kRG9jcy5zZXQoZG9jdW1lbnQsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChsZWdhY3lRdWVyeU9wdGlvbnMuc2l6ZSkge1xuICAgICAgICAgICAgbGVnYWN5UXVlcnlPcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnlJZCA9IG1ha2VVbmlxdWVJZChcImxlZ2FjeU9uZVRpbWVRdWVyeVwiKTtcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnlJbmZvID0gX3RoaXMuZ2V0UXVlcnkocXVlcnlJZCkuaW5pdCh7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiBvcHRpb25zLnF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IG9wdGlvbnMudmFyaWFibGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBvcSA9IG5ldyBPYnNlcnZhYmxlUXVlcnkoe1xuICAgICAgICAgICAgICAgICAgICBxdWVyeU1hbmFnZXI6IF90aGlzLFxuICAgICAgICAgICAgICAgICAgICBxdWVyeUluZm86IHF1ZXJ5SW5mbyxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IGZldGNoUG9saWN5OiBcIm5ldHdvcmstb25seVwiIH0pLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGludmFyaWFudChvcS5xdWVyeUlkID09PSBxdWVyeUlkKTtcbiAgICAgICAgICAgICAgICBxdWVyeUluZm8uc2V0T2JzZXJ2YWJsZVF1ZXJ5KG9xKTtcbiAgICAgICAgICAgICAgICBxdWVyaWVzLnNldChxdWVyeUlkLCBvcSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX19ERVZfXyAmJiBxdWVyeU5hbWVzQW5kRG9jcy5zaXplKSB7XG4gICAgICAgICAgICBxdWVyeU5hbWVzQW5kRG9jcy5mb3JFYWNoKGZ1bmN0aW9uIChpbmNsdWRlZCwgbmFtZU9yRG9jKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbmNsdWRlZCkge1xuICAgICAgICAgICAgICAgICAgICBfX0RFVl9fICYmIGludmFyaWFudC53YXJuKFwiVW5rbm93biBxdWVyeSBcIi5jb25jYXQodHlwZW9mIG5hbWVPckRvYyA9PT0gXCJzdHJpbmdcIiA/IFwibmFtZWQgXCIgOiBcIlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkobmFtZU9yRG9jLCBudWxsLCAyKSwgXCIgcmVxdWVzdGVkIGluIHJlZmV0Y2hRdWVyaWVzIG9wdGlvbnMuaW5jbHVkZSBhcnJheVwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHF1ZXJpZXM7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLnJlRmV0Y2hPYnNlcnZhYmxlUXVlcmllcyA9IGZ1bmN0aW9uIChpbmNsdWRlU3RhbmRieSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoaW5jbHVkZVN0YW5kYnkgPT09IHZvaWQgMCkgeyBpbmNsdWRlU3RhbmRieSA9IGZhbHNlOyB9XG4gICAgICAgIHZhciBvYnNlcnZhYmxlUXVlcnlQcm9taXNlcyA9IFtdO1xuICAgICAgICB0aGlzLmdldE9ic2VydmFibGVRdWVyaWVzKGluY2x1ZGVTdGFuZGJ5ID8gXCJhbGxcIiA6IFwiYWN0aXZlXCIpLmZvckVhY2goZnVuY3Rpb24gKG9ic2VydmFibGVRdWVyeSwgcXVlcnlJZCkge1xuICAgICAgICAgICAgdmFyIGZldGNoUG9saWN5ID0gb2JzZXJ2YWJsZVF1ZXJ5Lm9wdGlvbnMuZmV0Y2hQb2xpY3k7XG4gICAgICAgICAgICBvYnNlcnZhYmxlUXVlcnkucmVzZXRMYXN0UmVzdWx0cygpO1xuICAgICAgICAgICAgaWYgKGluY2x1ZGVTdGFuZGJ5IHx8XG4gICAgICAgICAgICAgICAgKGZldGNoUG9saWN5ICE9PSBcInN0YW5kYnlcIiAmJlxuICAgICAgICAgICAgICAgICAgICBmZXRjaFBvbGljeSAhPT0gXCJjYWNoZS1vbmx5XCIpKSB7XG4gICAgICAgICAgICAgICAgb2JzZXJ2YWJsZVF1ZXJ5UHJvbWlzZXMucHVzaChvYnNlcnZhYmxlUXVlcnkucmVmZXRjaCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLmdldFF1ZXJ5KHF1ZXJ5SWQpLnNldERpZmYobnVsbCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmJyb2FkY2FzdFF1ZXJpZXMoKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKG9ic2VydmFibGVRdWVyeVByb21pc2VzKTtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUuc2V0T2JzZXJ2YWJsZVF1ZXJ5ID0gZnVuY3Rpb24gKG9ic2VydmFibGVRdWVyeSkge1xuICAgICAgICB0aGlzLmdldFF1ZXJ5KG9ic2VydmFibGVRdWVyeS5xdWVyeUlkKS5zZXRPYnNlcnZhYmxlUXVlcnkob2JzZXJ2YWJsZVF1ZXJ5KTtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUuc3RhcnRHcmFwaFFMU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBxdWVyeSA9IF9hLnF1ZXJ5LCBmZXRjaFBvbGljeSA9IF9hLmZldGNoUG9saWN5LCBlcnJvclBvbGljeSA9IF9hLmVycm9yUG9saWN5LCB2YXJpYWJsZXMgPSBfYS52YXJpYWJsZXMsIF9iID0gX2EuY29udGV4dCwgY29udGV4dCA9IF9iID09PSB2b2lkIDAgPyB7fSA6IF9iO1xuICAgICAgICBxdWVyeSA9IHRoaXMudHJhbnNmb3JtKHF1ZXJ5KS5kb2N1bWVudDtcbiAgICAgICAgdmFyaWFibGVzID0gdGhpcy5nZXRWYXJpYWJsZXMocXVlcnksIHZhcmlhYmxlcyk7XG4gICAgICAgIHZhciBtYWtlT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uICh2YXJpYWJsZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRPYnNlcnZhYmxlRnJvbUxpbmsocXVlcnksIGNvbnRleHQsIHZhcmlhYmxlcykubWFwKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmV0Y2hQb2xpY3kgIT09ICduby1jYWNoZScpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZFdyaXRlUmVzdWx0KHJlc3VsdCwgZXJyb3JQb2xpY3kpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jYWNoZS53cml0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogcmVzdWx0LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUlkOiAnUk9PVF9TVUJTQ1JJUFRJT04nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaGFzRXJyb3JzID0gZ3JhcGhRTFJlc3VsdEhhc0Vycm9yKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgdmFyIGhhc1Byb3RvY29sRXJyb3JzID0gZ3JhcGhRTFJlc3VsdEhhc1Byb3RvY29sRXJyb3JzKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgaWYgKGhhc0Vycm9ycyB8fCBoYXNQcm90b2NvbEVycm9ycykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JzID0ge307XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNFcnJvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5ncmFwaFFMRXJyb3JzID0gcmVzdWx0LmVycm9ycztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzUHJvdG9jb2xFcnJvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wcm90b2NvbEVycm9ycyA9IHJlc3VsdC5leHRlbnNpb25zW1BST1RPQ09MX0VSUk9SU19TWU1CT0xdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcG9sbG9FcnJvcihlcnJvcnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLnRyYW5zZm9ybShxdWVyeSkuaGFzQ2xpZW50RXhwb3J0cykge1xuICAgICAgICAgICAgdmFyIG9ic2VydmFibGVQcm9taXNlXzEgPSB0aGlzLmxvY2FsU3RhdGUuYWRkRXhwb3J0ZWRWYXJpYWJsZXMocXVlcnksIHZhcmlhYmxlcywgY29udGV4dCkudGhlbihtYWtlT2JzZXJ2YWJsZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1YiA9IG51bGw7XG4gICAgICAgICAgICAgICAgb2JzZXJ2YWJsZVByb21pc2VfMS50aGVuKGZ1bmN0aW9uIChvYnNlcnZhYmxlKSB7IHJldHVybiBzdWIgPSBvYnNlcnZhYmxlLnN1YnNjcmliZShvYnNlcnZlcik7IH0sIG9ic2VydmVyLmVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gc3ViICYmIHN1Yi51bnN1YnNjcmliZSgpOyB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1ha2VPYnNlcnZhYmxlKHZhcmlhYmxlcyk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLnN0b3BRdWVyeSA9IGZ1bmN0aW9uIChxdWVyeUlkKSB7XG4gICAgICAgIHRoaXMuc3RvcFF1ZXJ5Tm9Ccm9hZGNhc3QocXVlcnlJZCk7XG4gICAgICAgIHRoaXMuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5zdG9wUXVlcnlOb0Jyb2FkY2FzdCA9IGZ1bmN0aW9uIChxdWVyeUlkKSB7XG4gICAgICAgIHRoaXMuc3RvcFF1ZXJ5SW5TdG9yZU5vQnJvYWRjYXN0KHF1ZXJ5SWQpO1xuICAgICAgICB0aGlzLnJlbW92ZVF1ZXJ5KHF1ZXJ5SWQpO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5yZW1vdmVRdWVyeSA9IGZ1bmN0aW9uIChxdWVyeUlkKSB7XG4gICAgICAgIHRoaXMuZmV0Y2hDYW5jZWxGbnMuZGVsZXRlKHF1ZXJ5SWQpO1xuICAgICAgICBpZiAodGhpcy5xdWVyaWVzLmhhcyhxdWVyeUlkKSkge1xuICAgICAgICAgICAgdGhpcy5nZXRRdWVyeShxdWVyeUlkKS5zdG9wKCk7XG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMuZGVsZXRlKHF1ZXJ5SWQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLmJyb2FkY2FzdFF1ZXJpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLm9uQnJvYWRjYXN0KVxuICAgICAgICAgICAgdGhpcy5vbkJyb2FkY2FzdCgpO1xuICAgICAgICB0aGlzLnF1ZXJpZXMuZm9yRWFjaChmdW5jdGlvbiAoaW5mbykgeyByZXR1cm4gaW5mby5ub3RpZnkoKTsgfSk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLmdldExvY2FsU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RhdGU7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLmdldE9ic2VydmFibGVGcm9tTGluayA9IGZ1bmN0aW9uIChxdWVyeSwgY29udGV4dCwgdmFyaWFibGVzLCBkZWR1cGxpY2F0aW9uKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKGRlZHVwbGljYXRpb24gPT09IHZvaWQgMCkgeyBkZWR1cGxpY2F0aW9uID0gKF9hID0gY29udGV4dCA9PT0gbnVsbCB8fCBjb250ZXh0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb250ZXh0LnF1ZXJ5RGVkdXBsaWNhdGlvbikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdGhpcy5xdWVyeURlZHVwbGljYXRpb247IH1cbiAgICAgICAgdmFyIG9ic2VydmFibGU7XG4gICAgICAgIHZhciBzZXJ2ZXJRdWVyeSA9IHRoaXMudHJhbnNmb3JtKHF1ZXJ5KS5zZXJ2ZXJRdWVyeTtcbiAgICAgICAgaWYgKHNlcnZlclF1ZXJ5KSB7XG4gICAgICAgICAgICB2YXIgX2IgPSB0aGlzLCBpbkZsaWdodExpbmtPYnNlcnZhYmxlc18xID0gX2IuaW5GbGlnaHRMaW5rT2JzZXJ2YWJsZXMsIGxpbmsgPSBfYi5saW5rO1xuICAgICAgICAgICAgdmFyIG9wZXJhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBxdWVyeTogc2VydmVyUXVlcnksXG4gICAgICAgICAgICAgICAgdmFyaWFibGVzOiB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uTmFtZTogZ2V0T3BlcmF0aW9uTmFtZShzZXJ2ZXJRdWVyeSkgfHwgdm9pZCAwLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMucHJlcGFyZUNvbnRleHQoX19hc3NpZ24oX19hc3NpZ24oe30sIGNvbnRleHQpLCB7IGZvcmNlRmV0Y2g6ICFkZWR1cGxpY2F0aW9uIH0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb250ZXh0ID0gb3BlcmF0aW9uLmNvbnRleHQ7XG4gICAgICAgICAgICBpZiAoZGVkdXBsaWNhdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBieVZhcmlhYmxlc18xID0gaW5GbGlnaHRMaW5rT2JzZXJ2YWJsZXNfMS5nZXQoc2VydmVyUXVlcnkpIHx8IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICBpbkZsaWdodExpbmtPYnNlcnZhYmxlc18xLnNldChzZXJ2ZXJRdWVyeSwgYnlWYXJpYWJsZXNfMSk7XG4gICAgICAgICAgICAgICAgdmFyIHZhckpzb25fMSA9IGNhbm9uaWNhbFN0cmluZ2lmeSh2YXJpYWJsZXMpO1xuICAgICAgICAgICAgICAgIG9ic2VydmFibGUgPSBieVZhcmlhYmxlc18xLmdldCh2YXJKc29uXzEpO1xuICAgICAgICAgICAgICAgIGlmICghb2JzZXJ2YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uY2FzdCA9IG5ldyBDb25jYXN0KFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWN1dGUobGluaywgb3BlcmF0aW9uKVxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgYnlWYXJpYWJsZXNfMS5zZXQodmFySnNvbl8xLCBvYnNlcnZhYmxlID0gY29uY2FzdCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbmNhc3QuYmVmb3JlTmV4dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnlWYXJpYWJsZXNfMS5kZWxldGUodmFySnNvbl8xKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5VmFyaWFibGVzXzEuc2l6ZSA8IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbkZsaWdodExpbmtPYnNlcnZhYmxlc18xLmRlbGV0ZShzZXJ2ZXJRdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG9ic2VydmFibGUgPSBuZXcgQ29uY2FzdChbXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGUobGluaywgb3BlcmF0aW9uKVxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JzZXJ2YWJsZSA9IG5ldyBDb25jYXN0KFtcbiAgICAgICAgICAgICAgICBPYnNlcnZhYmxlLm9mKHsgZGF0YToge30gfSlcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgY29udGV4dCA9IHRoaXMucHJlcGFyZUNvbnRleHQoY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNsaWVudFF1ZXJ5ID0gdGhpcy50cmFuc2Zvcm0ocXVlcnkpLmNsaWVudFF1ZXJ5O1xuICAgICAgICBpZiAoY2xpZW50UXVlcnkpIHtcbiAgICAgICAgICAgIG9ic2VydmFibGUgPSBhc3luY01hcChvYnNlcnZhYmxlLCBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvY2FsU3RhdGUucnVuUmVzb2x2ZXJzKHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQ6IGNsaWVudFF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICByZW1vdGVSZXN1bHQ6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZTtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUuZ2V0UmVzdWx0c0Zyb21MaW5rID0gZnVuY3Rpb24gKHF1ZXJ5SW5mbywgY2FjaGVXcml0ZUJlaGF2aW9yLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciByZXF1ZXN0SWQgPSBxdWVyeUluZm8ubGFzdFJlcXVlc3RJZCA9IHRoaXMuZ2VuZXJhdGVSZXF1ZXN0SWQoKTtcbiAgICAgICAgdmFyIGxpbmtEb2N1bWVudCA9IHRoaXMuY2FjaGUudHJhbnNmb3JtRm9yTGluayh0aGlzLnRyYW5zZm9ybShxdWVyeUluZm8uZG9jdW1lbnQpLmRvY3VtZW50KTtcbiAgICAgICAgcmV0dXJuIGFzeW5jTWFwKHRoaXMuZ2V0T2JzZXJ2YWJsZUZyb21MaW5rKGxpbmtEb2N1bWVudCwgb3B0aW9ucy5jb250ZXh0LCBvcHRpb25zLnZhcmlhYmxlcyksIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHZhciBncmFwaFFMRXJyb3JzID0gZ2V0R3JhcGhRTEVycm9yc0Zyb21SZXN1bHQocmVzdWx0KTtcbiAgICAgICAgICAgIHZhciBoYXNFcnJvcnMgPSBncmFwaFFMRXJyb3JzLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICBpZiAocmVxdWVzdElkID49IHF1ZXJ5SW5mby5sYXN0UmVxdWVzdElkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc0Vycm9ycyAmJiBvcHRpb25zLmVycm9yUG9saWN5ID09PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBxdWVyeUluZm8ubWFya0Vycm9yKG5ldyBBcG9sbG9FcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBncmFwaFFMRXJyb3JzOiBncmFwaFFMRXJyb3JzLFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHF1ZXJ5SW5mby5tYXJrUmVzdWx0KHJlc3VsdCwgbGlua0RvY3VtZW50LCBvcHRpb25zLCBjYWNoZVdyaXRlQmVoYXZpb3IpO1xuICAgICAgICAgICAgICAgIHF1ZXJ5SW5mby5tYXJrUmVhZHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcXIgPSB7XG4gICAgICAgICAgICAgICAgZGF0YTogcmVzdWx0LmRhdGEsXG4gICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgbmV0d29ya1N0YXR1czogTmV0d29ya1N0YXR1cy5yZWFkeSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoaGFzRXJyb3JzICYmIG9wdGlvbnMuZXJyb3JQb2xpY3kgIT09IFwiaWdub3JlXCIpIHtcbiAgICAgICAgICAgICAgICBhcXIuZXJyb3JzID0gZ3JhcGhRTEVycm9ycztcbiAgICAgICAgICAgICAgICBhcXIubmV0d29ya1N0YXR1cyA9IE5ldHdvcmtTdGF0dXMuZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXFyO1xuICAgICAgICB9LCBmdW5jdGlvbiAobmV0d29ya0Vycm9yKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSBpc0Fwb2xsb0Vycm9yKG5ldHdvcmtFcnJvcilcbiAgICAgICAgICAgICAgICA/IG5ldHdvcmtFcnJvclxuICAgICAgICAgICAgICAgIDogbmV3IEFwb2xsb0Vycm9yKHsgbmV0d29ya0Vycm9yOiBuZXR3b3JrRXJyb3IgfSk7XG4gICAgICAgICAgICBpZiAocmVxdWVzdElkID49IHF1ZXJ5SW5mby5sYXN0UmVxdWVzdElkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlJbmZvLm1hcmtFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLmZldGNoUXVlcnlPYnNlcnZhYmxlID0gZnVuY3Rpb24gKHF1ZXJ5SWQsIG9wdGlvbnMsIG5ldHdvcmtTdGF0dXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hDb25jYXN0V2l0aEluZm8ocXVlcnlJZCwgb3B0aW9ucywgbmV0d29ya1N0YXR1cykuY29uY2FzdDtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUuZmV0Y2hDb25jYXN0V2l0aEluZm8gPSBmdW5jdGlvbiAocXVlcnlJZCwgb3B0aW9ucywgbmV0d29ya1N0YXR1cykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAobmV0d29ya1N0YXR1cyA9PT0gdm9pZCAwKSB7IG5ldHdvcmtTdGF0dXMgPSBOZXR3b3JrU3RhdHVzLmxvYWRpbmc7IH1cbiAgICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy50cmFuc2Zvcm0ob3B0aW9ucy5xdWVyeSkuZG9jdW1lbnQ7XG4gICAgICAgIHZhciB2YXJpYWJsZXMgPSB0aGlzLmdldFZhcmlhYmxlcyhxdWVyeSwgb3B0aW9ucy52YXJpYWJsZXMpO1xuICAgICAgICB2YXIgcXVlcnlJbmZvID0gdGhpcy5nZXRRdWVyeShxdWVyeUlkKTtcbiAgICAgICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0T3B0aW9ucy53YXRjaFF1ZXJ5O1xuICAgICAgICB2YXIgX2EgPSBvcHRpb25zLmZldGNoUG9saWN5LCBmZXRjaFBvbGljeSA9IF9hID09PSB2b2lkIDAgPyBkZWZhdWx0cyAmJiBkZWZhdWx0cy5mZXRjaFBvbGljeSB8fCBcImNhY2hlLWZpcnN0XCIgOiBfYSwgX2IgPSBvcHRpb25zLmVycm9yUG9saWN5LCBlcnJvclBvbGljeSA9IF9iID09PSB2b2lkIDAgPyBkZWZhdWx0cyAmJiBkZWZhdWx0cy5lcnJvclBvbGljeSB8fCBcIm5vbmVcIiA6IF9iLCBfYyA9IG9wdGlvbnMucmV0dXJuUGFydGlhbERhdGEsIHJldHVyblBhcnRpYWxEYXRhID0gX2MgPT09IHZvaWQgMCA/IGZhbHNlIDogX2MsIF9kID0gb3B0aW9ucy5ub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2UsIG5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZSA9IF9kID09PSB2b2lkIDAgPyBmYWxzZSA6IF9kLCBfZSA9IG9wdGlvbnMuY29udGV4dCwgY29udGV4dCA9IF9lID09PSB2b2lkIDAgPyB7fSA6IF9lO1xuICAgICAgICB2YXIgbm9ybWFsaXplZCA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMsIHtcbiAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICAgICAgZmV0Y2hQb2xpY3k6IGZldGNoUG9saWN5LFxuICAgICAgICAgICAgZXJyb3JQb2xpY3k6IGVycm9yUG9saWN5LFxuICAgICAgICAgICAgcmV0dXJuUGFydGlhbERhdGE6IHJldHVyblBhcnRpYWxEYXRhLFxuICAgICAgICAgICAgbm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlOiBub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2UsXG4gICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGZyb21WYXJpYWJsZXMgPSBmdW5jdGlvbiAodmFyaWFibGVzKSB7XG4gICAgICAgICAgICBub3JtYWxpemVkLnZhcmlhYmxlcyA9IHZhcmlhYmxlcztcbiAgICAgICAgICAgIHZhciBzb3VyY2VzV2l0aEluZm8gPSBfdGhpcy5mZXRjaFF1ZXJ5QnlQb2xpY3kocXVlcnlJbmZvLCBub3JtYWxpemVkLCBuZXR3b3JrU3RhdHVzKTtcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkLmZldGNoUG9saWN5ICE9PSBcInN0YW5kYnlcIiAmJlxuICAgICAgICAgICAgICAgIHNvdXJjZXNXaXRoSW5mby5zb3VyY2VzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICBxdWVyeUluZm8ub2JzZXJ2YWJsZVF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlJbmZvLm9ic2VydmFibGVRdWVyeVtcImFwcGx5TmV4dEZldGNoUG9saWN5XCJdKFwiYWZ0ZXItZmV0Y2hcIiwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc291cmNlc1dpdGhJbmZvO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgY2xlYW51cENhbmNlbEZuID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZmV0Y2hDYW5jZWxGbnMuZGVsZXRlKHF1ZXJ5SWQpOyB9O1xuICAgICAgICB0aGlzLmZldGNoQ2FuY2VsRm5zLnNldChxdWVyeUlkLCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICBjbGVhbnVwQ2FuY2VsRm4oKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY29uY2FzdC5jYW5jZWwocmVhc29uKTsgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgY29uY2FzdCwgY29udGFpbnNEYXRhRnJvbUxpbms7XG4gICAgICAgIGlmICh0aGlzLnRyYW5zZm9ybShub3JtYWxpemVkLnF1ZXJ5KS5oYXNDbGllbnRFeHBvcnRzKSB7XG4gICAgICAgICAgICBjb25jYXN0ID0gbmV3IENvbmNhc3QodGhpcy5sb2NhbFN0YXRlXG4gICAgICAgICAgICAgICAgLmFkZEV4cG9ydGVkVmFyaWFibGVzKG5vcm1hbGl6ZWQucXVlcnksIG5vcm1hbGl6ZWQudmFyaWFibGVzLCBub3JtYWxpemVkLmNvbnRleHQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnJvbVZhcmlhYmxlcykudGhlbihmdW5jdGlvbiAoc291cmNlc1dpdGhJbmZvKSB7IHJldHVybiBzb3VyY2VzV2l0aEluZm8uc291cmNlczsgfSkpO1xuICAgICAgICAgICAgY29udGFpbnNEYXRhRnJvbUxpbmsgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHNvdXJjZXNXaXRoSW5mbyA9IGZyb21WYXJpYWJsZXMobm9ybWFsaXplZC52YXJpYWJsZXMpO1xuICAgICAgICAgICAgY29udGFpbnNEYXRhRnJvbUxpbmsgPSBzb3VyY2VzV2l0aEluZm8uZnJvbUxpbms7XG4gICAgICAgICAgICBjb25jYXN0ID0gbmV3IENvbmNhc3Qoc291cmNlc1dpdGhJbmZvLnNvdXJjZXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbmNhc3QucHJvbWlzZS50aGVuKGNsZWFudXBDYW5jZWxGbiwgY2xlYW51cENhbmNlbEZuKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbmNhc3Q6IGNvbmNhc3QsXG4gICAgICAgICAgICBmcm9tTGluazogY29udGFpbnNEYXRhRnJvbUxpbmssXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLnJlZmV0Y2hRdWVyaWVzID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciB1cGRhdGVDYWNoZSA9IF9hLnVwZGF0ZUNhY2hlLCBpbmNsdWRlID0gX2EuaW5jbHVkZSwgX2IgPSBfYS5vcHRpbWlzdGljLCBvcHRpbWlzdGljID0gX2IgPT09IHZvaWQgMCA/IGZhbHNlIDogX2IsIF9jID0gX2EucmVtb3ZlT3B0aW1pc3RpYywgcmVtb3ZlT3B0aW1pc3RpYyA9IF9jID09PSB2b2lkIDAgPyBvcHRpbWlzdGljID8gbWFrZVVuaXF1ZUlkKFwicmVmZXRjaFF1ZXJpZXNcIikgOiB2b2lkIDAgOiBfYywgb25RdWVyeVVwZGF0ZWQgPSBfYS5vblF1ZXJ5VXBkYXRlZDtcbiAgICAgICAgdmFyIGluY2x1ZGVkUXVlcmllc0J5SWQgPSBuZXcgTWFwKCk7XG4gICAgICAgIGlmIChpbmNsdWRlKSB7XG4gICAgICAgICAgICB0aGlzLmdldE9ic2VydmFibGVRdWVyaWVzKGluY2x1ZGUpLmZvckVhY2goZnVuY3Rpb24gKG9xLCBxdWVyeUlkKSB7XG4gICAgICAgICAgICAgICAgaW5jbHVkZWRRdWVyaWVzQnlJZC5zZXQocXVlcnlJZCwge1xuICAgICAgICAgICAgICAgICAgICBvcTogb3EsXG4gICAgICAgICAgICAgICAgICAgIGxhc3REaWZmOiBfdGhpcy5nZXRRdWVyeShxdWVyeUlkKS5nZXREaWZmKCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzdWx0cyA9IG5ldyBNYXA7XG4gICAgICAgIGlmICh1cGRhdGVDYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5jYWNoZS5iYXRjaCh7XG4gICAgICAgICAgICAgICAgdXBkYXRlOiB1cGRhdGVDYWNoZSxcbiAgICAgICAgICAgICAgICBvcHRpbWlzdGljOiBvcHRpbWlzdGljICYmIHJlbW92ZU9wdGltaXN0aWMgfHwgZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVtb3ZlT3B0aW1pc3RpYzogcmVtb3ZlT3B0aW1pc3RpYyxcbiAgICAgICAgICAgICAgICBvbldhdGNoVXBkYXRlZDogZnVuY3Rpb24gKHdhdGNoLCBkaWZmLCBsYXN0RGlmZikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3EgPSB3YXRjaC53YXRjaGVyIGluc3RhbmNlb2YgUXVlcnlJbmZvICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXRjaC53YXRjaGVyLm9ic2VydmFibGVRdWVyeTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob25RdWVyeVVwZGF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZFF1ZXJpZXNCeUlkLmRlbGV0ZShvcS5xdWVyeUlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gb25RdWVyeVVwZGF0ZWQob3EsIGRpZmYsIGxhc3REaWZmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG9xLnJlZmV0Y2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5zZXQob3EsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob25RdWVyeVVwZGF0ZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZFF1ZXJpZXNCeUlkLnNldChvcS5xdWVyeUlkLCB7IG9xOiBvcSwgbGFzdERpZmY6IGxhc3REaWZmLCBkaWZmOiBkaWZmIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNsdWRlZFF1ZXJpZXNCeUlkLnNpemUpIHtcbiAgICAgICAgICAgIGluY2x1ZGVkUXVlcmllc0J5SWQuZm9yRWFjaChmdW5jdGlvbiAoX2EsIHF1ZXJ5SWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3EgPSBfYS5vcSwgbGFzdERpZmYgPSBfYS5sYXN0RGlmZiwgZGlmZiA9IF9hLmRpZmY7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAob25RdWVyeVVwZGF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkaWZmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mbyA9IG9xW1wicXVlcnlJbmZvXCJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlmZiA9IGluZm8uZ2V0RGlmZigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG9uUXVlcnlVcGRhdGVkKG9xLCBkaWZmLCBsYXN0RGlmZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghb25RdWVyeVVwZGF0ZWQgfHwgcmVzdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG9xLnJlZmV0Y2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5zZXQob3EsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChxdWVyeUlkLmluZGV4T2YoXCJsZWdhY3lPbmVUaW1lUXVlcnlcIikgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdG9wUXVlcnlOb0Jyb2FkY2FzdChxdWVyeUlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVtb3ZlT3B0aW1pc3RpYykge1xuICAgICAgICAgICAgdGhpcy5jYWNoZS5yZW1vdmVPcHRpbWlzdGljKHJlbW92ZU9wdGltaXN0aWMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5mZXRjaFF1ZXJ5QnlQb2xpY3kgPSBmdW5jdGlvbiAocXVlcnlJbmZvLCBfYSwgbmV0d29ya1N0YXR1cykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcXVlcnkgPSBfYS5xdWVyeSwgdmFyaWFibGVzID0gX2EudmFyaWFibGVzLCBmZXRjaFBvbGljeSA9IF9hLmZldGNoUG9saWN5LCByZWZldGNoV3JpdGVQb2xpY3kgPSBfYS5yZWZldGNoV3JpdGVQb2xpY3ksIGVycm9yUG9saWN5ID0gX2EuZXJyb3JQb2xpY3ksIHJldHVyblBhcnRpYWxEYXRhID0gX2EucmV0dXJuUGFydGlhbERhdGEsIGNvbnRleHQgPSBfYS5jb250ZXh0LCBub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2UgPSBfYS5ub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2U7XG4gICAgICAgIHZhciBvbGROZXR3b3JrU3RhdHVzID0gcXVlcnlJbmZvLm5ldHdvcmtTdGF0dXM7XG4gICAgICAgIHF1ZXJ5SW5mby5pbml0KHtcbiAgICAgICAgICAgIGRvY3VtZW50OiB0aGlzLnRyYW5zZm9ybShxdWVyeSkuZG9jdW1lbnQsXG4gICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgICAgIG5ldHdvcmtTdGF0dXM6IG5ldHdvcmtTdGF0dXMsXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgcmVhZENhY2hlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcXVlcnlJbmZvLmdldERpZmYodmFyaWFibGVzKTsgfTtcbiAgICAgICAgdmFyIHJlc3VsdHNGcm9tQ2FjaGUgPSBmdW5jdGlvbiAoZGlmZiwgbmV0d29ya1N0YXR1cykge1xuICAgICAgICAgICAgaWYgKG5ldHdvcmtTdGF0dXMgPT09IHZvaWQgMCkgeyBuZXR3b3JrU3RhdHVzID0gcXVlcnlJbmZvLm5ldHdvcmtTdGF0dXMgfHwgTmV0d29ya1N0YXR1cy5sb2FkaW5nOyB9XG4gICAgICAgICAgICB2YXIgZGF0YSA9IGRpZmYucmVzdWx0O1xuICAgICAgICAgICAgaWYgKF9fREVWX18gJiZcbiAgICAgICAgICAgICAgICAhcmV0dXJuUGFydGlhbERhdGEgJiZcbiAgICAgICAgICAgICAgICAhZXF1YWwoZGF0YSwge30pKSB7XG4gICAgICAgICAgICAgICAgbG9nTWlzc2luZ0ZpZWxkRXJyb3JzKGRpZmYubWlzc2luZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZnJvbURhdGEgPSBmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gT2JzZXJ2YWJsZS5vZihfX2Fzc2lnbih7IGRhdGE6IGRhdGEsIGxvYWRpbmc6IGlzTmV0d29ya1JlcXVlc3RJbkZsaWdodChuZXR3b3JrU3RhdHVzKSwgbmV0d29ya1N0YXR1czogbmV0d29ya1N0YXR1cyB9LCAoZGlmZi5jb21wbGV0ZSA/IG51bGwgOiB7IHBhcnRpYWw6IHRydWUgfSkpKTsgfTtcbiAgICAgICAgICAgIGlmIChkYXRhICYmIF90aGlzLnRyYW5zZm9ybShxdWVyeSkuaGFzRm9yY2VkUmVzb2x2ZXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvY2FsU3RhdGUucnVuUmVzb2x2ZXJzKHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICByZW1vdGVSZXN1bHQ6IHsgZGF0YTogZGF0YSB9LFxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgb25seVJ1bkZvcmNlZFJlc29sdmVyczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNvbHZlZCkgeyByZXR1cm4gZnJvbURhdGEocmVzb2x2ZWQuZGF0YSB8fCB2b2lkIDApOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlcnJvclBvbGljeSA9PT0gJ25vbmUnICYmXG4gICAgICAgICAgICAgICAgbmV0d29ya1N0YXR1cyA9PT0gTmV0d29ya1N0YXR1cy5yZWZldGNoICYmXG4gICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShkaWZmLm1pc3NpbmcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZyb21EYXRhKHZvaWQgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZnJvbURhdGEoZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBjYWNoZVdyaXRlQmVoYXZpb3IgPSBmZXRjaFBvbGljeSA9PT0gXCJuby1jYWNoZVwiID8gMCA6XG4gICAgICAgICAgICAobmV0d29ya1N0YXR1cyA9PT0gTmV0d29ya1N0YXR1cy5yZWZldGNoICYmXG4gICAgICAgICAgICAgICAgcmVmZXRjaFdyaXRlUG9saWN5ICE9PSBcIm1lcmdlXCIpID8gMVxuICAgICAgICAgICAgICAgIDogMjtcbiAgICAgICAgdmFyIHJlc3VsdHNGcm9tTGluayA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmdldFJlc3VsdHNGcm9tTGluayhxdWVyeUluZm8sIGNhY2hlV3JpdGVCZWhhdmlvciwge1xuICAgICAgICAgICAgdmFyaWFibGVzOiB2YXJpYWJsZXMsXG4gICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICAgICAgZmV0Y2hQb2xpY3k6IGZldGNoUG9saWN5LFxuICAgICAgICAgICAgZXJyb3JQb2xpY3k6IGVycm9yUG9saWN5LFxuICAgICAgICB9KTsgfTtcbiAgICAgICAgdmFyIHNob3VsZE5vdGlmeSA9IG5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZSAmJlxuICAgICAgICAgICAgdHlwZW9mIG9sZE5ldHdvcmtTdGF0dXMgPT09IFwibnVtYmVyXCIgJiZcbiAgICAgICAgICAgIG9sZE5ldHdvcmtTdGF0dXMgIT09IG5ldHdvcmtTdGF0dXMgJiZcbiAgICAgICAgICAgIGlzTmV0d29ya1JlcXVlc3RJbkZsaWdodChuZXR3b3JrU3RhdHVzKTtcbiAgICAgICAgc3dpdGNoIChmZXRjaFBvbGljeSkge1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNhc2UgXCJjYWNoZS1maXJzdFwiOiB7XG4gICAgICAgICAgICAgICAgdmFyIGRpZmYgPSByZWFkQ2FjaGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGlmZi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBmcm9tTGluazogZmFsc2UsIHNvdXJjZXM6IFtyZXN1bHRzRnJvbUNhY2hlKGRpZmYsIHF1ZXJ5SW5mby5tYXJrUmVhZHkoKSldIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXR1cm5QYXJ0aWFsRGF0YSB8fCBzaG91bGROb3RpZnkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZnJvbUxpbms6IHRydWUsIHNvdXJjZXM6IFtyZXN1bHRzRnJvbUNhY2hlKGRpZmYpLCByZXN1bHRzRnJvbUxpbmsoKV0gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZnJvbUxpbms6IHRydWUsIHNvdXJjZXM6IFtyZXN1bHRzRnJvbUxpbmsoKV0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJjYWNoZS1hbmQtbmV0d29ya1wiOiB7XG4gICAgICAgICAgICAgICAgdmFyIGRpZmYgPSByZWFkQ2FjaGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGlmZi5jb21wbGV0ZSB8fCByZXR1cm5QYXJ0aWFsRGF0YSB8fCBzaG91bGROb3RpZnkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZnJvbUxpbms6IHRydWUsIHNvdXJjZXM6IFtyZXN1bHRzRnJvbUNhY2hlKGRpZmYpLCByZXN1bHRzRnJvbUxpbmsoKV0gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZnJvbUxpbms6IHRydWUsIHNvdXJjZXM6IFtyZXN1bHRzRnJvbUxpbmsoKV0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJjYWNoZS1vbmx5XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZnJvbUxpbms6IGZhbHNlLCBzb3VyY2VzOiBbcmVzdWx0c0Zyb21DYWNoZShyZWFkQ2FjaGUoKSwgcXVlcnlJbmZvLm1hcmtSZWFkeSgpKV0gfTtcbiAgICAgICAgICAgIGNhc2UgXCJuZXR3b3JrLW9ubHlcIjpcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkTm90aWZ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGZyb21MaW5rOiB0cnVlLCBzb3VyY2VzOiBbcmVzdWx0c0Zyb21DYWNoZShyZWFkQ2FjaGUoKSksIHJlc3VsdHNGcm9tTGluaygpXSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBmcm9tTGluazogdHJ1ZSwgc291cmNlczogW3Jlc3VsdHNGcm9tTGluaygpXSB9O1xuICAgICAgICAgICAgY2FzZSBcIm5vLWNhY2hlXCI6XG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZE5vdGlmeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUxpbms6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c0Zyb21DYWNoZShxdWVyeUluZm8uZ2V0RGlmZigpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzRnJvbUxpbmsoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IGZyb21MaW5rOiB0cnVlLCBzb3VyY2VzOiBbcmVzdWx0c0Zyb21MaW5rKCldIH07XG4gICAgICAgICAgICBjYXNlIFwic3RhbmRieVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7IGZyb21MaW5rOiBmYWxzZSwgc291cmNlczogW10gfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5nZXRRdWVyeSA9IGZ1bmN0aW9uIChxdWVyeUlkKSB7XG4gICAgICAgIGlmIChxdWVyeUlkICYmICF0aGlzLnF1ZXJpZXMuaGFzKHF1ZXJ5SWQpKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMuc2V0KHF1ZXJ5SWQsIG5ldyBRdWVyeUluZm8odGhpcywgcXVlcnlJZCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJpZXMuZ2V0KHF1ZXJ5SWQpO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5wcmVwYXJlQ29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICAgIGlmIChjb250ZXh0ID09PSB2b2lkIDApIHsgY29udGV4dCA9IHt9OyB9XG4gICAgICAgIHZhciBuZXdDb250ZXh0ID0gdGhpcy5sb2NhbFN0YXRlLnByZXBhcmVDb250ZXh0KGNvbnRleHQpO1xuICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIG5ld0NvbnRleHQpLCB7IGNsaWVudEF3YXJlbmVzczogdGhpcy5jbGllbnRBd2FyZW5lc3MgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gUXVlcnlNYW5hZ2VyO1xufSgpKTtcbmV4cG9ydCB7IFF1ZXJ5TWFuYWdlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UXVlcnlNYW5hZ2VyLmpzLm1hcCIsImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQsIEludmFyaWFudEVycm9yIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9nbG9iYWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBBcG9sbG9MaW5rLCBleGVjdXRlIH0gZnJvbSBcIi4uL2xpbmsvY29yZS9pbmRleC5qc1wiO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gXCIuLi92ZXJzaW9uLmpzXCI7XG5pbXBvcnQgeyBIdHRwTGluayB9IGZyb20gXCIuLi9saW5rL2h0dHAvaW5kZXguanNcIjtcbmltcG9ydCB7IFF1ZXJ5TWFuYWdlciB9IGZyb20gXCIuL1F1ZXJ5TWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgTG9jYWxTdGF0ZSwgfSBmcm9tIFwiLi9Mb2NhbFN0YXRlLmpzXCI7XG52YXIgaGFzU3VnZ2VzdGVkRGV2dG9vbHMgPSBmYWxzZTtcbmltcG9ydCB7IG1lcmdlT3B0aW9ucyB9IGZyb20gXCIuLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmV4cG9ydCB7IG1lcmdlT3B0aW9ucyB9O1xudmFyIEFwb2xsb0NsaWVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXBvbGxvQ2xpZW50KG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5yZXNldFN0b3JlQ2FsbGJhY2tzID0gW107XG4gICAgICAgIHRoaXMuY2xlYXJTdG9yZUNhbGxiYWNrcyA9IFtdO1xuICAgICAgICB2YXIgdXJpID0gb3B0aW9ucy51cmksIGNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscywgaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycywgY2FjaGUgPSBvcHRpb25zLmNhY2hlLCBfYSA9IG9wdGlvbnMuc3NyTW9kZSwgc3NyTW9kZSA9IF9hID09PSB2b2lkIDAgPyBmYWxzZSA6IF9hLCBfYiA9IG9wdGlvbnMuc3NyRm9yY2VGZXRjaERlbGF5LCBzc3JGb3JjZUZldGNoRGVsYXkgPSBfYiA9PT0gdm9pZCAwID8gMCA6IF9iLCBfYyA9IG9wdGlvbnMuY29ubmVjdFRvRGV2VG9vbHMsIGNvbm5lY3RUb0RldlRvb2xzID0gX2MgPT09IHZvaWQgMCA/IHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICAhd2luZG93Ll9fQVBPTExPX0NMSUVOVF9fICYmXG4gICAgICAgICAgICBfX0RFVl9fIDogX2MsIF9kID0gb3B0aW9ucy5xdWVyeURlZHVwbGljYXRpb24sIHF1ZXJ5RGVkdXBsaWNhdGlvbiA9IF9kID09PSB2b2lkIDAgPyB0cnVlIDogX2QsIGRlZmF1bHRPcHRpb25zID0gb3B0aW9ucy5kZWZhdWx0T3B0aW9ucywgX2UgPSBvcHRpb25zLmFzc3VtZUltbXV0YWJsZVJlc3VsdHMsIGFzc3VtZUltbXV0YWJsZVJlc3VsdHMgPSBfZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfZSwgcmVzb2x2ZXJzID0gb3B0aW9ucy5yZXNvbHZlcnMsIHR5cGVEZWZzID0gb3B0aW9ucy50eXBlRGVmcywgZnJhZ21lbnRNYXRjaGVyID0gb3B0aW9ucy5mcmFnbWVudE1hdGNoZXIsIGNsaWVudEF3YXJlbmVzc05hbWUgPSBvcHRpb25zLm5hbWUsIGNsaWVudEF3YXJlbmVzc1ZlcnNpb24gPSBvcHRpb25zLnZlcnNpb247XG4gICAgICAgIHZhciBsaW5rID0gb3B0aW9ucy5saW5rO1xuICAgICAgICBpZiAoIWxpbmspIHtcbiAgICAgICAgICAgIGxpbmsgPSB1cmlcbiAgICAgICAgICAgICAgICA/IG5ldyBIdHRwTGluayh7IHVyaTogdXJpLCBjcmVkZW50aWFsczogY3JlZGVudGlhbHMsIGhlYWRlcnM6IGhlYWRlcnMgfSlcbiAgICAgICAgICAgICAgICA6IEFwb2xsb0xpbmsuZW1wdHkoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNhY2hlKSB7XG4gICAgICAgICAgICB0aHJvdyBfX0RFVl9fID8gbmV3IEludmFyaWFudEVycm9yKFwiVG8gaW5pdGlhbGl6ZSBBcG9sbG8gQ2xpZW50LCB5b3UgbXVzdCBzcGVjaWZ5IGEgJ2NhY2hlJyBwcm9wZXJ0eSBcIiArXG4gICAgICAgICAgICAgICAgXCJpbiB0aGUgb3B0aW9ucyBvYmplY3QuIFxcblwiICtcbiAgICAgICAgICAgICAgICBcIkZvciBtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2UgdmlzaXQ6IGh0dHBzOi8vZ28uYXBvbGxvLmRldi9jL2RvY3NcIikgOiBuZXcgSW52YXJpYW50RXJyb3IoOSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saW5rID0gbGluaztcbiAgICAgICAgdGhpcy5jYWNoZSA9IGNhY2hlO1xuICAgICAgICB0aGlzLmRpc2FibGVOZXR3b3JrRmV0Y2hlcyA9IHNzck1vZGUgfHwgc3NyRm9yY2VGZXRjaERlbGF5ID4gMDtcbiAgICAgICAgdGhpcy5xdWVyeURlZHVwbGljYXRpb24gPSBxdWVyeURlZHVwbGljYXRpb247XG4gICAgICAgIHRoaXMuZGVmYXVsdE9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucyB8fCBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLnR5cGVEZWZzID0gdHlwZURlZnM7XG4gICAgICAgIGlmIChzc3JGb3JjZUZldGNoRGVsYXkpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gKF90aGlzLmRpc2FibGVOZXR3b3JrRmV0Y2hlcyA9IGZhbHNlKTsgfSwgc3NyRm9yY2VGZXRjaERlbGF5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndhdGNoUXVlcnkgPSB0aGlzLndhdGNoUXVlcnkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHRoaXMucXVlcnkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5tdXRhdGUgPSB0aGlzLm11dGF0ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlc2V0U3RvcmUgPSB0aGlzLnJlc2V0U3RvcmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZUZldGNoT2JzZXJ2YWJsZVF1ZXJpZXMgPSB0aGlzLnJlRmV0Y2hPYnNlcnZhYmxlUXVlcmllcy5iaW5kKHRoaXMpO1xuICAgICAgICBpZiAoY29ubmVjdFRvRGV2VG9vbHMgJiYgdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHdpbmRvdy5fX0FQT0xMT19DTElFTlRfXyA9IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFoYXNTdWdnZXN0ZWREZXZ0b29scyAmJiBjb25uZWN0VG9EZXZUb29scyAmJiBfX0RFVl9fKSB7XG4gICAgICAgICAgICBoYXNTdWdnZXN0ZWREZXZ0b29scyA9IHRydWU7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQgJiZcbiAgICAgICAgICAgICAgICB3aW5kb3cudG9wID09PSB3aW5kb3cuc2VsZiAmJlxuICAgICAgICAgICAgICAgICF3aW5kb3cuX19BUE9MTE9fREVWVE9PTFNfR0xPQkFMX0hPT0tfXykge1xuICAgICAgICAgICAgICAgIHZhciBuYXYgPSB3aW5kb3cubmF2aWdhdG9yO1xuICAgICAgICAgICAgICAgIHZhciB1YSA9IG5hdiAmJiBuYXYudXNlckFnZW50O1xuICAgICAgICAgICAgICAgIHZhciB1cmwgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1YSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodWEuaW5kZXhPZihcIkNocm9tZS9cIikgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gXCJodHRwczovL2Nocm9tZS5nb29nbGUuY29tL3dlYnN0b3JlL2RldGFpbC9cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhcG9sbG8tY2xpZW50LWRldmVsb3Blci10L2pka2tua2tiZWJiYXBpbGdvZWNjY2lnbGtmYm1ibmZtXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodWEuaW5kZXhPZihcIkZpcmVmb3gvXCIpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IFwiaHR0cHM6Ly9hZGRvbnMubW96aWxsYS5vcmcvZW4tVVMvZmlyZWZveC9hZGRvbi9hcG9sbG8tZGV2ZWxvcGVyLXRvb2xzL1wiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgX19ERVZfXyAmJiBpbnZhcmlhbnQubG9nKFwiRG93bmxvYWQgdGhlIEFwb2xsbyBEZXZUb29scyBmb3IgYSBiZXR0ZXIgZGV2ZWxvcG1lbnQgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJleHBlcmllbmNlOiBcIiArIHVybCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICAgIHRoaXMubG9jYWxTdGF0ZSA9IG5ldyBMb2NhbFN0YXRlKHtcbiAgICAgICAgICAgIGNhY2hlOiBjYWNoZSxcbiAgICAgICAgICAgIGNsaWVudDogdGhpcyxcbiAgICAgICAgICAgIHJlc29sdmVyczogcmVzb2x2ZXJzLFxuICAgICAgICAgICAgZnJhZ21lbnRNYXRjaGVyOiBmcmFnbWVudE1hdGNoZXIsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnF1ZXJ5TWFuYWdlciA9IG5ldyBRdWVyeU1hbmFnZXIoe1xuICAgICAgICAgICAgY2FjaGU6IHRoaXMuY2FjaGUsXG4gICAgICAgICAgICBsaW5rOiB0aGlzLmxpbmssXG4gICAgICAgICAgICBkZWZhdWx0T3B0aW9uczogdGhpcy5kZWZhdWx0T3B0aW9ucyxcbiAgICAgICAgICAgIHF1ZXJ5RGVkdXBsaWNhdGlvbjogcXVlcnlEZWR1cGxpY2F0aW9uLFxuICAgICAgICAgICAgc3NyTW9kZTogc3NyTW9kZSxcbiAgICAgICAgICAgIGNsaWVudEF3YXJlbmVzczoge1xuICAgICAgICAgICAgICAgIG5hbWU6IGNsaWVudEF3YXJlbmVzc05hbWUsXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogY2xpZW50QXdhcmVuZXNzVmVyc2lvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsb2NhbFN0YXRlOiB0aGlzLmxvY2FsU3RhdGUsXG4gICAgICAgICAgICBhc3N1bWVJbW11dGFibGVSZXN1bHRzOiBhc3N1bWVJbW11dGFibGVSZXN1bHRzLFxuICAgICAgICAgICAgb25Ccm9hZGNhc3Q6IGNvbm5lY3RUb0RldlRvb2xzID8gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5kZXZUb29sc0hvb2tDYikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZXZUb29sc0hvb2tDYih7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyaWVzOiBfdGhpcy5xdWVyeU1hbmFnZXIuZ2V0UXVlcnlTdG9yZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9uczogX3RoaXMucXVlcnlNYW5hZ2VyLm11dGF0aW9uU3RvcmUgfHwge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVdpdGhPcHRpbWlzdGljUmVzdWx0czogX3RoaXMuY2FjaGUuZXh0cmFjdCh0cnVlKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSA6IHZvaWQgMCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5xdWVyeU1hbmFnZXIuc3RvcCgpO1xuICAgIH07XG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS53YXRjaFF1ZXJ5ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVmYXVsdE9wdGlvbnMud2F0Y2hRdWVyeSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh0aGlzLmRlZmF1bHRPcHRpb25zLndhdGNoUXVlcnksIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVOZXR3b3JrRmV0Y2hlcyAmJlxuICAgICAgICAgICAgKG9wdGlvbnMuZmV0Y2hQb2xpY3kgPT09ICduZXR3b3JrLW9ubHknIHx8XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5mZXRjaFBvbGljeSA9PT0gJ2NhY2hlLWFuZC1uZXR3b3JrJykpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3B0aW9ucyksIHsgZmV0Y2hQb2xpY3k6ICdjYWNoZS1maXJzdCcgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlNYW5hZ2VyLndhdGNoUXVlcnkob3B0aW9ucyk7XG4gICAgfTtcbiAgICBBcG9sbG9DbGllbnQucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVmYXVsdE9wdGlvbnMucXVlcnkpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5kZWZhdWx0T3B0aW9ucy5xdWVyeSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgX19ERVZfXyA/IGludmFyaWFudChvcHRpb25zLmZldGNoUG9saWN5ICE9PSAnY2FjaGUtYW5kLW5ldHdvcmsnLCAnVGhlIGNhY2hlLWFuZC1uZXR3b3JrIGZldGNoUG9saWN5IGRvZXMgbm90IHdvcmsgd2l0aCBjbGllbnQucXVlcnksIGJlY2F1c2UgJyArXG4gICAgICAgICAgICAnY2xpZW50LnF1ZXJ5IGNhbiBvbmx5IHJldHVybiBhIHNpbmdsZSByZXN1bHQuIFBsZWFzZSB1c2UgY2xpZW50LndhdGNoUXVlcnkgJyArXG4gICAgICAgICAgICAndG8gcmVjZWl2ZSBtdWx0aXBsZSByZXN1bHRzIGZyb20gdGhlIGNhY2hlIGFuZCB0aGUgbmV0d29yaywgb3IgY29uc2lkZXIgJyArXG4gICAgICAgICAgICAndXNpbmcgYSBkaWZmZXJlbnQgZmV0Y2hQb2xpY3ksIHN1Y2ggYXMgY2FjaGUtZmlyc3Qgb3IgbmV0d29yay1vbmx5LicpIDogaW52YXJpYW50KG9wdGlvbnMuZmV0Y2hQb2xpY3kgIT09ICdjYWNoZS1hbmQtbmV0d29yaycsIDEwKTtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZU5ldHdvcmtGZXRjaGVzICYmIG9wdGlvbnMuZmV0Y2hQb2xpY3kgPT09ICduZXR3b3JrLW9ubHknKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IGZldGNoUG9saWN5OiAnY2FjaGUtZmlyc3QnIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5TWFuYWdlci5xdWVyeShvcHRpb25zKTtcbiAgICB9O1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUubXV0YXRlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVmYXVsdE9wdGlvbnMubXV0YXRlKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMuZGVmYXVsdE9wdGlvbnMubXV0YXRlLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeU1hbmFnZXIubXV0YXRlKG9wdGlvbnMpO1xuICAgIH07XG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeU1hbmFnZXIuc3RhcnRHcmFwaFFMU3Vic2NyaXB0aW9uKG9wdGlvbnMpO1xuICAgIH07XG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5yZWFkUXVlcnkgPSBmdW5jdGlvbiAob3B0aW9ucywgb3B0aW1pc3RpYykge1xuICAgICAgICBpZiAob3B0aW1pc3RpYyA9PT0gdm9pZCAwKSB7IG9wdGltaXN0aWMgPSBmYWxzZTsgfVxuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZS5yZWFkUXVlcnkob3B0aW9ucywgb3B0aW1pc3RpYyk7XG4gICAgfTtcbiAgICBBcG9sbG9DbGllbnQucHJvdG90eXBlLnJlYWRGcmFnbWVudCA9IGZ1bmN0aW9uIChvcHRpb25zLCBvcHRpbWlzdGljKSB7XG4gICAgICAgIGlmIChvcHRpbWlzdGljID09PSB2b2lkIDApIHsgb3B0aW1pc3RpYyA9IGZhbHNlOyB9XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlLnJlYWRGcmFnbWVudChvcHRpb25zLCBvcHRpbWlzdGljKTtcbiAgICB9O1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUud3JpdGVRdWVyeSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciByZWYgPSB0aGlzLmNhY2hlLndyaXRlUXVlcnkob3B0aW9ucyk7XG4gICAgICAgIGlmIChvcHRpb25zLmJyb2FkY2FzdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMucXVlcnlNYW5hZ2VyLmJyb2FkY2FzdFF1ZXJpZXMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVmO1xuICAgIH07XG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS53cml0ZUZyYWdtZW50ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHJlZiA9IHRoaXMuY2FjaGUud3JpdGVGcmFnbWVudChvcHRpb25zKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYnJvYWRjYXN0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5xdWVyeU1hbmFnZXIuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWY7XG4gICAgfTtcbiAgICBBcG9sbG9DbGllbnQucHJvdG90eXBlLl9fYWN0aW9uSG9va0ZvckRldlRvb2xzID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgIHRoaXMuZGV2VG9vbHNIb29rQ2IgPSBjYjtcbiAgICB9O1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUuX19yZXF1ZXN0UmF3ID0gZnVuY3Rpb24gKHBheWxvYWQpIHtcbiAgICAgICAgcmV0dXJuIGV4ZWN1dGUodGhpcy5saW5rLCBwYXlsb2FkKTtcbiAgICB9O1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUucmVzZXRTdG9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5xdWVyeU1hbmFnZXIuY2xlYXJTdG9yZSh7XG4gICAgICAgICAgICBkaXNjYXJkV2F0Y2hlczogZmFsc2UsXG4gICAgICAgIH0pOyB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gUHJvbWlzZS5hbGwoX3RoaXMucmVzZXRTdG9yZUNhbGxiYWNrcy5tYXAoZnVuY3Rpb24gKGZuKSB7IHJldHVybiBmbigpOyB9KSk7IH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5yZUZldGNoT2JzZXJ2YWJsZVF1ZXJpZXMoKTsgfSk7XG4gICAgfTtcbiAgICBBcG9sbG9DbGllbnQucHJvdG90eXBlLmNsZWFyU3RvcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucXVlcnlNYW5hZ2VyLmNsZWFyU3RvcmUoe1xuICAgICAgICAgICAgZGlzY2FyZFdhdGNoZXM6IHRydWUsXG4gICAgICAgIH0pOyB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gUHJvbWlzZS5hbGwoX3RoaXMuY2xlYXJTdG9yZUNhbGxiYWNrcy5tYXAoZnVuY3Rpb24gKGZuKSB7IHJldHVybiBmbigpOyB9KSk7IH0pO1xuICAgIH07XG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5vblJlc2V0U3RvcmUgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5yZXNldFN0b3JlQ2FsbGJhY2tzLnB1c2goY2IpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucmVzZXRTdG9yZUNhbGxiYWNrcyA9IF90aGlzLnJlc2V0U3RvcmVDYWxsYmFja3MuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjICE9PSBjYjsgfSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBBcG9sbG9DbGllbnQucHJvdG90eXBlLm9uQ2xlYXJTdG9yZSA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmNsZWFyU3RvcmVDYWxsYmFja3MucHVzaChjYik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5jbGVhclN0b3JlQ2FsbGJhY2tzID0gX3RoaXMuY2xlYXJTdG9yZUNhbGxiYWNrcy5maWx0ZXIoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMgIT09IGNiOyB9KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUucmVGZXRjaE9ic2VydmFibGVRdWVyaWVzID0gZnVuY3Rpb24gKGluY2x1ZGVTdGFuZGJ5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5TWFuYWdlci5yZUZldGNoT2JzZXJ2YWJsZVF1ZXJpZXMoaW5jbHVkZVN0YW5kYnkpO1xuICAgIH07XG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5yZWZldGNoUXVlcmllcyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLnF1ZXJ5TWFuYWdlci5yZWZldGNoUXVlcmllcyhvcHRpb25zKTtcbiAgICAgICAgdmFyIHF1ZXJpZXMgPSBbXTtcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgbWFwLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCwgb2JzUXVlcnkpIHtcbiAgICAgICAgICAgIHF1ZXJpZXMucHVzaChvYnNRdWVyeSk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciByZXN1bHQgPSBQcm9taXNlLmFsbChyZXN1bHRzKTtcbiAgICAgICAgcmVzdWx0LnF1ZXJpZXMgPSBxdWVyaWVzO1xuICAgICAgICByZXN1bHQucmVzdWx0cyA9IHJlc3VsdHM7XG4gICAgICAgIHJlc3VsdC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIF9fREVWX18gJiYgaW52YXJpYW50LmRlYnVnKFwiSW4gY2xpZW50LnJlZmV0Y2hRdWVyaWVzLCBQcm9taXNlLmFsbCBwcm9taXNlIHJlamVjdGVkIHdpdGggZXJyb3IgXCIuY29uY2F0KGVycm9yKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5nZXRPYnNlcnZhYmxlUXVlcmllcyA9IGZ1bmN0aW9uIChpbmNsdWRlKSB7XG4gICAgICAgIGlmIChpbmNsdWRlID09PSB2b2lkIDApIHsgaW5jbHVkZSA9IFwiYWN0aXZlXCI7IH1cbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlNYW5hZ2VyLmdldE9ic2VydmFibGVRdWVyaWVzKGluY2x1ZGUpO1xuICAgIH07XG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5leHRyYWN0ID0gZnVuY3Rpb24gKG9wdGltaXN0aWMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUuZXh0cmFjdChvcHRpbWlzdGljKTtcbiAgICB9O1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUucmVzdG9yZSA9IGZ1bmN0aW9uIChzZXJpYWxpemVkU3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUucmVzdG9yZShzZXJpYWxpemVkU3RhdGUpO1xuICAgIH07XG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5hZGRSZXNvbHZlcnMgPSBmdW5jdGlvbiAocmVzb2x2ZXJzKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdGF0ZS5hZGRSZXNvbHZlcnMocmVzb2x2ZXJzKTtcbiAgICB9O1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUuc2V0UmVzb2x2ZXJzID0gZnVuY3Rpb24gKHJlc29sdmVycykge1xuICAgICAgICB0aGlzLmxvY2FsU3RhdGUuc2V0UmVzb2x2ZXJzKHJlc29sdmVycyk7XG4gICAgfTtcbiAgICBBcG9sbG9DbGllbnQucHJvdG90eXBlLmdldFJlc29sdmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdGF0ZS5nZXRSZXNvbHZlcnMoKTtcbiAgICB9O1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUuc2V0TG9jYWxTdGF0ZUZyYWdtZW50TWF0Y2hlciA9IGZ1bmN0aW9uIChmcmFnbWVudE1hdGNoZXIpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0YXRlLnNldEZyYWdtZW50TWF0Y2hlcihmcmFnbWVudE1hdGNoZXIpO1xuICAgIH07XG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5zZXRMaW5rID0gZnVuY3Rpb24gKG5ld0xpbmspIHtcbiAgICAgICAgdGhpcy5saW5rID0gdGhpcy5xdWVyeU1hbmFnZXIubGluayA9IG5ld0xpbms7XG4gICAgfTtcbiAgICByZXR1cm4gQXBvbGxvQ2xpZW50O1xufSgpKTtcbmV4cG9ydCB7IEFwb2xsb0NsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXBvbGxvQ2xpZW50LmpzLm1hcCIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmaW5lZCxuby1wYXJhbS1yZWFzc2lnbixuby1zaGFkb3cgKi9cblxuLyoqXG4gKiBUaHJvdHRsZSBleGVjdXRpb24gb2YgYSBmdW5jdGlvbi4gRXNwZWNpYWxseSB1c2VmdWwgZm9yIHJhdGUgbGltaXRpbmdcbiAqIGV4ZWN1dGlvbiBvZiBoYW5kbGVycyBvbiBldmVudHMgbGlrZSByZXNpemUgYW5kIHNjcm9sbC5cbiAqXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICAgIGRlbGF5IC0gICAgICAgICAgQSB6ZXJvLW9yLWdyZWF0ZXIgZGVsYXkgaW4gbWlsbGlzZWNvbmRzLiBGb3IgZXZlbnQgY2FsbGJhY2tzLCB2YWx1ZXMgYXJvdW5kIDEwMCBvciAyNTAgKG9yIGV2ZW4gaGlnaGVyKSBhcmUgbW9zdCB1c2VmdWwuXG4gKiBAcGFyYW0gIHtib29sZWFufSAgIFtub1RyYWlsaW5nXSAtICAgT3B0aW9uYWwsIGRlZmF1bHRzIHRvIGZhbHNlLiBJZiBub1RyYWlsaW5nIGlzIHRydWUsIGNhbGxiYWNrIHdpbGwgb25seSBleGVjdXRlIGV2ZXJ5IGBkZWxheWAgbWlsbGlzZWNvbmRzIHdoaWxlIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdHRsZWQtZnVuY3Rpb24gaXMgYmVpbmcgY2FsbGVkLiBJZiBub1RyYWlsaW5nIGlzIGZhbHNlIG9yIHVuc3BlY2lmaWVkLCBjYWxsYmFjayB3aWxsIGJlIGV4ZWN1dGVkIG9uZSBmaW5hbCB0aW1lXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyIHRoZSBsYXN0IHRocm90dGxlZC1mdW5jdGlvbiBjYWxsLiAoQWZ0ZXIgdGhlIHRocm90dGxlZC1mdW5jdGlvbiBoYXMgbm90IGJlZW4gY2FsbGVkIGZvciBgZGVsYXlgIG1pbGxpc2Vjb25kcyxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGludGVybmFsIGNvdW50ZXIgaXMgcmVzZXQpLlxuICogQHBhcmFtICB7RnVuY3Rpb259ICBjYWxsYmFjayAtICAgICAgIEEgZnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgZGVsYXkgbWlsbGlzZWNvbmRzLiBUaGUgYHRoaXNgIGNvbnRleHQgYW5kIGFsbCBhcmd1bWVudHMgYXJlIHBhc3NlZCB0aHJvdWdoLCBhcy1pcyxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYGNhbGxiYWNrYCB3aGVuIHRoZSB0aHJvdHRsZWQtZnVuY3Rpb24gaXMgZXhlY3V0ZWQuXG4gKiBAcGFyYW0gIHtib29sZWFufSAgIFtkZWJvdW5jZU1vZGVdIC0gSWYgYGRlYm91bmNlTW9kZWAgaXMgdHJ1ZSAoYXQgYmVnaW4pLCBzY2hlZHVsZSBgY2xlYXJgIHRvIGV4ZWN1dGUgYWZ0ZXIgYGRlbGF5YCBtcy4gSWYgYGRlYm91bmNlTW9kZWAgaXMgZmFsc2UgKGF0IGVuZCksXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlIGBjYWxsYmFja2AgdG8gZXhlY3V0ZSBhZnRlciBgZGVsYXlgIG1zLlxuICpcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gIEEgbmV3LCB0aHJvdHRsZWQsIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiB0aHJvdHRsZSAoZGVsYXksIG5vVHJhaWxpbmcsIGNhbGxiYWNrLCBkZWJvdW5jZU1vZGUpIHtcbiAgLypcbiAgICogQWZ0ZXIgd3JhcHBlciBoYXMgc3RvcHBlZCBiZWluZyBjYWxsZWQsIHRoaXMgdGltZW91dCBlbnN1cmVzIHRoYXRcbiAgICogYGNhbGxiYWNrYCBpcyBleGVjdXRlZCBhdCB0aGUgcHJvcGVyIHRpbWVzIGluIGB0aHJvdHRsZWAgYW5kIGBlbmRgXG4gICAqIGRlYm91bmNlIG1vZGVzLlxuICAgKi9cbiAgdmFyIHRpbWVvdXRJRDtcbiAgdmFyIGNhbmNlbGxlZCA9IGZhbHNlOyAvLyBLZWVwIHRyYWNrIG9mIHRoZSBsYXN0IHRpbWUgYGNhbGxiYWNrYCB3YXMgZXhlY3V0ZWQuXG5cbiAgdmFyIGxhc3RFeGVjID0gMDsgLy8gRnVuY3Rpb24gdG8gY2xlYXIgZXhpc3RpbmcgdGltZW91dFxuXG4gIGZ1bmN0aW9uIGNsZWFyRXhpc3RpbmdUaW1lb3V0KCkge1xuICAgIGlmICh0aW1lb3V0SUQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SUQpO1xuICAgIH1cbiAgfSAvLyBGdW5jdGlvbiB0byBjYW5jZWwgbmV4dCBleGVjXG5cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgY2xlYXJFeGlzdGluZ1RpbWVvdXQoKTtcbiAgICBjYW5jZWxsZWQgPSB0cnVlO1xuICB9IC8vIGBub1RyYWlsaW5nYCBkZWZhdWx0cyB0byBmYWxzeS5cblxuXG4gIGlmICh0eXBlb2Ygbm9UcmFpbGluZyAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgZGVib3VuY2VNb2RlID0gY2FsbGJhY2s7XG4gICAgY2FsbGJhY2sgPSBub1RyYWlsaW5nO1xuICAgIG5vVHJhaWxpbmcgPSB1bmRlZmluZWQ7XG4gIH1cbiAgLypcbiAgICogVGhlIGB3cmFwcGVyYCBmdW5jdGlvbiBlbmNhcHN1bGF0ZXMgYWxsIG9mIHRoZSB0aHJvdHRsaW5nIC8gZGVib3VuY2luZ1xuICAgKiBmdW5jdGlvbmFsaXR5IGFuZCB3aGVuIGV4ZWN1dGVkIHdpbGwgbGltaXQgdGhlIHJhdGUgYXQgd2hpY2ggYGNhbGxiYWNrYFxuICAgKiBpcyBleGVjdXRlZC5cbiAgICovXG5cblxuICBmdW5jdGlvbiB3cmFwcGVyKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmd1bWVudHNfID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJndW1lbnRzX1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVsYXBzZWQgPSBEYXRlLm5vdygpIC0gbGFzdEV4ZWM7XG5cbiAgICBpZiAoY2FuY2VsbGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBFeGVjdXRlIGBjYWxsYmFja2AgYW5kIHVwZGF0ZSB0aGUgYGxhc3RFeGVjYCB0aW1lc3RhbXAuXG5cblxuICAgIGZ1bmN0aW9uIGV4ZWMoKSB7XG4gICAgICBsYXN0RXhlYyA9IERhdGUubm93KCk7XG4gICAgICBjYWxsYmFjay5hcHBseShzZWxmLCBhcmd1bWVudHNfKTtcbiAgICB9XG4gICAgLypcbiAgICAgKiBJZiBgZGVib3VuY2VNb2RlYCBpcyB0cnVlIChhdCBiZWdpbikgdGhpcyBpcyB1c2VkIHRvIGNsZWFyIHRoZSBmbGFnXG4gICAgICogdG8gYWxsb3cgZnV0dXJlIGBjYWxsYmFja2AgZXhlY3V0aW9ucy5cbiAgICAgKi9cblxuXG4gICAgZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICB0aW1lb3V0SUQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKGRlYm91bmNlTW9kZSAmJiAhdGltZW91dElEKSB7XG4gICAgICAvKlxuICAgICAgICogU2luY2UgYHdyYXBwZXJgIGlzIGJlaW5nIGNhbGxlZCBmb3IgdGhlIGZpcnN0IHRpbWUgYW5kXG4gICAgICAgKiBgZGVib3VuY2VNb2RlYCBpcyB0cnVlIChhdCBiZWdpbiksIGV4ZWN1dGUgYGNhbGxiYWNrYC5cbiAgICAgICAqL1xuICAgICAgZXhlYygpO1xuICAgIH1cblxuICAgIGNsZWFyRXhpc3RpbmdUaW1lb3V0KCk7XG5cbiAgICBpZiAoZGVib3VuY2VNb2RlID09PSB1bmRlZmluZWQgJiYgZWxhcHNlZCA+IGRlbGF5KSB7XG4gICAgICAvKlxuICAgICAgICogSW4gdGhyb3R0bGUgbW9kZSwgaWYgYGRlbGF5YCB0aW1lIGhhcyBiZWVuIGV4Y2VlZGVkLCBleGVjdXRlXG4gICAgICAgKiBgY2FsbGJhY2tgLlxuICAgICAgICovXG4gICAgICBleGVjKCk7XG4gICAgfSBlbHNlIGlmIChub1RyYWlsaW5nICE9PSB0cnVlKSB7XG4gICAgICAvKlxuICAgICAgICogSW4gdHJhaWxpbmcgdGhyb3R0bGUgbW9kZSwgc2luY2UgYGRlbGF5YCB0aW1lIGhhcyBub3QgYmVlblxuICAgICAgICogZXhjZWVkZWQsIHNjaGVkdWxlIGBjYWxsYmFja2AgdG8gZXhlY3V0ZSBgZGVsYXlgIG1zIGFmdGVyIG1vc3RcbiAgICAgICAqIHJlY2VudCBleGVjdXRpb24uXG4gICAgICAgKlxuICAgICAgICogSWYgYGRlYm91bmNlTW9kZWAgaXMgdHJ1ZSAoYXQgYmVnaW4pLCBzY2hlZHVsZSBgY2xlYXJgIHRvIGV4ZWN1dGVcbiAgICAgICAqIGFmdGVyIGBkZWxheWAgbXMuXG4gICAgICAgKlxuICAgICAgICogSWYgYGRlYm91bmNlTW9kZWAgaXMgZmFsc2UgKGF0IGVuZCksIHNjaGVkdWxlIGBjYWxsYmFja2AgdG9cbiAgICAgICAqIGV4ZWN1dGUgYWZ0ZXIgYGRlbGF5YCBtcy5cbiAgICAgICAqL1xuICAgICAgdGltZW91dElEID0gc2V0VGltZW91dChkZWJvdW5jZU1vZGUgPyBjbGVhciA6IGV4ZWMsIGRlYm91bmNlTW9kZSA9PT0gdW5kZWZpbmVkID8gZGVsYXkgLSBlbGFwc2VkIDogZGVsYXkpO1xuICAgIH1cbiAgfVxuXG4gIHdyYXBwZXIuY2FuY2VsID0gY2FuY2VsOyAvLyBSZXR1cm4gdGhlIHdyYXBwZXIgZnVuY3Rpb24uXG5cbiAgcmV0dXJuIHdyYXBwZXI7XG59XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmaW5lZCAqL1xuLyoqXG4gKiBEZWJvdW5jZSBleGVjdXRpb24gb2YgYSBmdW5jdGlvbi4gRGVib3VuY2luZywgdW5saWtlIHRocm90dGxpbmcsXG4gKiBndWFyYW50ZWVzIHRoYXQgYSBmdW5jdGlvbiBpcyBvbmx5IGV4ZWN1dGVkIGEgc2luZ2xlIHRpbWUsIGVpdGhlciBhdCB0aGVcbiAqIHZlcnkgYmVnaW5uaW5nIG9mIGEgc2VyaWVzIG9mIGNhbGxzLCBvciBhdCB0aGUgdmVyeSBlbmQuXG4gKlxuICogQHBhcmFtICB7bnVtYmVyfSAgIGRlbGF5IC0gICAgICAgICBBIHplcm8tb3ItZ3JlYXRlciBkZWxheSBpbiBtaWxsaXNlY29uZHMuIEZvciBldmVudCBjYWxsYmFja3MsIHZhbHVlcyBhcm91bmQgMTAwIG9yIDI1MCAob3IgZXZlbiBoaWdoZXIpIGFyZSBtb3N0IHVzZWZ1bC5cbiAqIEBwYXJhbSAge2Jvb2xlYW59ICBbYXRCZWdpbl0gLSAgICAgT3B0aW9uYWwsIGRlZmF1bHRzIHRvIGZhbHNlLiBJZiBhdEJlZ2luIGlzIGZhbHNlIG9yIHVuc3BlY2lmaWVkLCBjYWxsYmFjayB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgYGRlbGF5YCBtaWxsaXNlY29uZHNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyIHRoZSBsYXN0IGRlYm91bmNlZC1mdW5jdGlvbiBjYWxsLiBJZiBhdEJlZ2luIGlzIHRydWUsIGNhbGxiYWNrIHdpbGwgYmUgZXhlY3V0ZWQgb25seSBhdCB0aGUgZmlyc3QgZGVib3VuY2VkLWZ1bmN0aW9uIGNhbGwuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoQWZ0ZXIgdGhlIHRocm90dGxlZC1mdW5jdGlvbiBoYXMgbm90IGJlZW4gY2FsbGVkIGZvciBgZGVsYXlgIG1pbGxpc2Vjb25kcywgdGhlIGludGVybmFsIGNvdW50ZXIgaXMgcmVzZXQpLlxuICogQHBhcmFtICB7RnVuY3Rpb259IGNhbGxiYWNrIC0gICAgICBBIGZ1bmN0aW9uIHRvIGJlIGV4ZWN1dGVkIGFmdGVyIGRlbGF5IG1pbGxpc2Vjb25kcy4gVGhlIGB0aGlzYCBjb250ZXh0IGFuZCBhbGwgYXJndW1lbnRzIGFyZSBwYXNzZWQgdGhyb3VnaCwgYXMtaXMsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0byBgY2FsbGJhY2tgIHdoZW4gdGhlIGRlYm91bmNlZC1mdW5jdGlvbiBpcyBleGVjdXRlZC5cbiAqXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgbmV3LCBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKi9cblxuZnVuY3Rpb24gZGVib3VuY2UgKGRlbGF5LCBhdEJlZ2luLCBjYWxsYmFjaykge1xuICByZXR1cm4gY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IHRocm90dGxlKGRlbGF5LCBhdEJlZ2luLCBmYWxzZSkgOiB0aHJvdHRsZShkZWxheSwgY2FsbGJhY2ssIGF0QmVnaW4gIT09IGZhbHNlKTtcbn1cblxuZXhwb3J0IHsgZGVib3VuY2UsIHRocm90dGxlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiIsIi8vIHNyYy91c2VRdWVyeS50c1xuaW1wb3J0IHtcbiAgcmVmIGFzIHJlZjMsXG4gIHVucmVmLFxuICBjb21wdXRlZCBhcyBjb21wdXRlZDMsXG4gIHdhdGNoIGFzIHdhdGNoMixcbiAgb25TZXJ2ZXJQcmVmZXRjaCxcbiAgZ2V0Q3VycmVudEluc3RhbmNlIGFzIGdldEN1cnJlbnRJbnN0YW5jZTMsXG4gIG9uQmVmb3JlVW5tb3VudCBhcyBvbkJlZm9yZVVubW91bnQyLFxuICBuZXh0VGlja1xufSBmcm9tIFwidnVlLWRlbWlcIjtcbmltcG9ydCB7dGhyb3R0bGUsIGRlYm91bmNlfSBmcm9tIFwidGhyb3R0bGUtZGVib3VuY2VcIjtcblxuLy8gc3JjL3VzZUFwb2xsb0NsaWVudC50c1xuaW1wb3J0IHtnZXRDdXJyZW50SW5zdGFuY2UsIGluamVjdH0gZnJvbSBcInZ1ZS1kZW1pXCI7XG52YXIgRGVmYXVsdEFwb2xsb0NsaWVudCA9IFN5bWJvbChcImRlZmF1bHQtYXBvbGxvLWNsaWVudFwiKTtcbnZhciBBcG9sbG9DbGllbnRzID0gU3ltYm9sKFwiYXBvbGxvLWNsaWVudHNcIik7XG5mdW5jdGlvbiByZXNvbHZlRGVmYXVsdENsaWVudChwcm92aWRlZEFwb2xsb0NsaWVudHMsIHByb3ZpZGVkQXBvbGxvQ2xpZW50KSB7XG4gIGNvbnN0IHJlc29sdmVkQ2xpZW50ID0gcHJvdmlkZWRBcG9sbG9DbGllbnRzID8gcHJvdmlkZWRBcG9sbG9DbGllbnRzLmRlZmF1bHQgOiBwcm92aWRlZEFwb2xsb0NsaWVudCAhPSBudWxsID8gcHJvdmlkZWRBcG9sbG9DbGllbnQgOiB2b2lkIDA7XG4gIHJldHVybiByZXNvbHZlZENsaWVudDtcbn1cbmZ1bmN0aW9uIHJlc29sdmVDbGllbnRXaXRoSWQocHJvdmlkZWRBcG9sbG9DbGllbnRzLCBjbGllbnRJZCkge1xuICBpZiAoIXByb3ZpZGVkQXBvbGxvQ2xpZW50cykge1xuICAgIHRocm93IG5ldyBFcnJvcihgTm8gYXBvbGxvQ2xpZW50cyBpbmplY3Rpb24gZm91bmQsIHRyaWVkIHRvIHJlc29sdmUgJyR7Y2xpZW50SWR9JyBjbGllbnRJZGApO1xuICB9XG4gIHJldHVybiBwcm92aWRlZEFwb2xsb0NsaWVudHNbY2xpZW50SWRdO1xufVxuZnVuY3Rpb24gdXNlQXBvbGxvQ2xpZW50KGNsaWVudElkKSB7XG4gIGxldCByZXNvbHZlSW1wbDtcbiAgY29uc3Qgc2F2ZWRDdXJyZW50Q2xpZW50cyA9IGN1cnJlbnRBcG9sbG9DbGllbnRzO1xuICBpZiAoIWdldEN1cnJlbnRJbnN0YW5jZSgpKSB7XG4gICAgcmVzb2x2ZUltcGwgPSAoaWQpID0+IHtcbiAgICAgIGlmIChpZCkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZUNsaWVudFdpdGhJZChzYXZlZEN1cnJlbnRDbGllbnRzLCBpZCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzb2x2ZURlZmF1bHRDbGllbnQoc2F2ZWRDdXJyZW50Q2xpZW50cywgc2F2ZWRDdXJyZW50Q2xpZW50cy5kZWZhdWx0KTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHByb3ZpZGVkQXBvbGxvQ2xpZW50cyA9IGluamVjdChBcG9sbG9DbGllbnRzLCBudWxsKTtcbiAgICBjb25zdCBwcm92aWRlZEFwb2xsb0NsaWVudCA9IGluamVjdChEZWZhdWx0QXBvbGxvQ2xpZW50LCBudWxsKTtcbiAgICByZXNvbHZlSW1wbCA9IChpZCkgPT4ge1xuICAgICAgaWYgKGlkKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudDIgPSByZXNvbHZlQ2xpZW50V2l0aElkKHByb3ZpZGVkQXBvbGxvQ2xpZW50cywgaWQpO1xuICAgICAgICBpZiAoY2xpZW50Mikge1xuICAgICAgICAgIHJldHVybiBjbGllbnQyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNvbHZlQ2xpZW50V2l0aElkKHNhdmVkQ3VycmVudENsaWVudHMsIGlkKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNsaWVudCA9IHJlc29sdmVEZWZhdWx0Q2xpZW50KHByb3ZpZGVkQXBvbGxvQ2xpZW50cywgcHJvdmlkZWRBcG9sbG9DbGllbnQpO1xuICAgICAgaWYgKGNsaWVudCkge1xuICAgICAgICByZXR1cm4gY2xpZW50O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc29sdmVEZWZhdWx0Q2xpZW50KHNhdmVkQ3VycmVudENsaWVudHMsIHNhdmVkQ3VycmVudENsaWVudHMuZGVmYXVsdCk7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiByZXNvbHZlQ2xpZW50KGlkID0gY2xpZW50SWQpIHtcbiAgICBjb25zdCBjbGllbnQgPSByZXNvbHZlSW1wbChpZCk7XG4gICAgaWYgKCFjbGllbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQXBvbGxvIGNsaWVudCB3aXRoIGlkICR7aWQgIT0gbnVsbCA/IGlkIDogXCJkZWZhdWx0XCJ9IG5vdCBmb3VuZC4gVXNlIHByb3ZpZGVBcG9sbG9DbGllbnQoKSBpZiB5b3UgYXJlIG91dHNpZGUgb2YgYSBjb21wb25lbnQgc2V0dXAuYCk7XG4gICAgfVxuICAgIHJldHVybiBjbGllbnQ7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICByZXNvbHZlQ2xpZW50LFxuICAgIGdldCBjbGllbnQoKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZUNsaWVudCgpO1xuICAgIH1cbiAgfTtcbn1cbnZhciBjdXJyZW50QXBvbGxvQ2xpZW50cyA9IHt9O1xuZnVuY3Rpb24gcHJvdmlkZUFwb2xsb0NsaWVudChjbGllbnQpIHtcbiAgY3VycmVudEFwb2xsb0NsaWVudHMgPSB7XG4gICAgZGVmYXVsdDogY2xpZW50XG4gIH07XG4gIHJldHVybiBmdW5jdGlvbihmbikge1xuICAgIGNvbnN0IHJlc3VsdCA9IGZuKCk7XG4gICAgY3VycmVudEFwb2xsb0NsaWVudHMgPSB7fTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuZnVuY3Rpb24gcHJvdmlkZUFwb2xsb0NsaWVudHMoY2xpZW50cykge1xuICBjdXJyZW50QXBvbGxvQ2xpZW50cyA9IGNsaWVudHM7XG4gIHJldHVybiBmdW5jdGlvbihmbikge1xuICAgIGNvbnN0IHJlc3VsdCA9IGZuKCk7XG4gICAgY3VycmVudEFwb2xsb0NsaWVudHMgPSB7fTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuXG4vLyBzcmMvdXRpbC9wYXJhbVRvUmVmLnRzXG5pbXBvcnQge2lzUmVmLCBjb21wdXRlZCwgcmVmfSBmcm9tIFwidnVlLWRlbWlcIjtcbmZ1bmN0aW9uIHBhcmFtVG9SZWYocGFyYW0pIHtcbiAgaWYgKGlzUmVmKHBhcmFtKSkge1xuICAgIHJldHVybiBwYXJhbTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgcGFyYW0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiBjb21wdXRlZChwYXJhbSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJlZihwYXJhbSk7XG4gIH1cbn1cblxuLy8gc3JjL3V0aWwvcGFyYW1Ub1JlYWN0aXZlLnRzXG5pbXBvcnQge2lzUmVmIGFzIGlzUmVmMiwgcmVhY3RpdmUsIGNvbXB1dGVkIGFzIGNvbXB1dGVkMn0gZnJvbSBcInZ1ZS1kZW1pXCI7XG5mdW5jdGlvbiBwYXJhbVRvUmVhY3RpdmUocGFyYW0pIHtcbiAgaWYgKGlzUmVmMihwYXJhbSkpIHtcbiAgICByZXR1cm4gcGFyYW07XG4gIH0gZWxzZSBpZiAodHlwZW9mIHBhcmFtID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gY29tcHV0ZWQyKHBhcmFtKTtcbiAgfSBlbHNlIGlmIChwYXJhbSkge1xuICAgIHJldHVybiByZWFjdGl2ZShwYXJhbSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhcmFtO1xuICB9XG59XG5cbi8vIHNyYy91dGlsL3VzZUV2ZW50SG9vay50c1xuZnVuY3Rpb24gdXNlRXZlbnRIb29rKCkge1xuICBjb25zdCBmbnMgPSBbXTtcbiAgZnVuY3Rpb24gb24oZm4pIHtcbiAgICBmbnMucHVzaChmbik7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9mZjogKCkgPT4gb2ZmKGZuKVxuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gb2ZmKGZuKSB7XG4gICAgY29uc3QgaW5kZXggPSBmbnMuaW5kZXhPZihmbik7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgZm5zLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHRyaWdnZXIocGFyYW0pIHtcbiAgICBmb3IgKGNvbnN0IGZuIG9mIGZucykge1xuICAgICAgZm4ocGFyYW0pO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBnZXRDb3VudCgpIHtcbiAgICByZXR1cm4gZm5zLmxlbmd0aDtcbiAgfVxuICByZXR1cm4ge1xuICAgIG9uLFxuICAgIG9mZixcbiAgICB0cmlnZ2VyLFxuICAgIGdldENvdW50XG4gIH07XG59XG5cbi8vIHNyYy91dGlsL2xvYWRpbmdUcmFja2luZy50c1xuaW1wb3J0IHt3YXRjaCwgb25Vbm1vdW50ZWQsIHJlZiBhcyByZWYyLCBnZXRDdXJyZW50SW5zdGFuY2UgYXMgZ2V0Q3VycmVudEluc3RhbmNlMiwgb25CZWZvcmVVbm1vdW50fSBmcm9tIFwidnVlLWRlbWlcIjtcbmZ1bmN0aW9uIGdldEFwcFRyYWNraW5nKCkge1xuICB2YXIgX2EsIF9iLCBfYztcbiAgY29uc3Qgdm0gPSBnZXRDdXJyZW50SW5zdGFuY2UyKCk7XG4gIGNvbnN0IHJvb3QgPSAoX2MgPSAoX2EgPSB2bSA9PSBudWxsID8gdm9pZCAwIDogdm0uJHJvb3QpICE9IG51bGwgPyBfYSA6IHZtID09IG51bGwgPyB2b2lkIDAgOiB2bS5yb290KSAhPSBudWxsID8gX2MgOiAoX2IgPSB2bSA9PSBudWxsID8gdm9pZCAwIDogdm0ucHJveHkpID09IG51bGwgPyB2b2lkIDAgOiBfYi4kcm9vdDtcbiAgaWYgKCFyb290KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW5zdGFuY2UgJHJvb3Qgbm90IGZvdW5kXCIpO1xuICB9XG4gIGxldCBhcHBUcmFja2luZztcbiAgaWYgKCFyb290Ll9hcG9sbG9BcHBUcmFja2luZykge1xuICAgIGFwcFRyYWNraW5nID0gcm9vdC5fYXBvbGxvQXBwVHJhY2tpbmcgPSB7XG4gICAgICBxdWVyaWVzOiByZWYyKDApLFxuICAgICAgbXV0YXRpb25zOiByZWYyKDApLFxuICAgICAgc3Vic2NyaXB0aW9uczogcmVmMigwKSxcbiAgICAgIGNvbXBvbmVudHM6IG5ldyBNYXAoKVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgYXBwVHJhY2tpbmcgPSByb290Ll9hcG9sbG9BcHBUcmFja2luZztcbiAgfVxuICByZXR1cm4ge1xuICAgIGFwcFRyYWNraW5nXG4gIH07XG59XG5mdW5jdGlvbiBnZXRDdXJyZW50VHJhY2tpbmcoKSB7XG4gIGNvbnN0IHZtID0gZ2V0Q3VycmVudEluc3RhbmNlMigpO1xuICBpZiAoIXZtKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZ2V0Q3VycmVudFRyYWNraW5nIG11c3QgYmUgdXNlZCBkdXJpbmcgYSBjb21wb25lbnQgc2V0dXBcIik7XG4gIH1cbiAgY29uc3Qge2FwcFRyYWNraW5nfSA9IGdldEFwcFRyYWNraW5nKCk7XG4gIGxldCB0cmFja2luZztcbiAgaWYgKCFhcHBUcmFja2luZy5jb21wb25lbnRzLmhhcyh2bSkpIHtcbiAgICBhcHBUcmFja2luZy5jb21wb25lbnRzLnNldCh2bSwgdHJhY2tpbmcgPSB7XG4gICAgICBxdWVyaWVzOiByZWYyKDApLFxuICAgICAgbXV0YXRpb25zOiByZWYyKDApLFxuICAgICAgc3Vic2NyaXB0aW9uczogcmVmMigwKVxuICAgIH0pO1xuICAgIG9uVW5tb3VudGVkKCgpID0+IHtcbiAgICAgIGFwcFRyYWNraW5nLmNvbXBvbmVudHMuZGVsZXRlKHZtKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICB0cmFja2luZyA9IGFwcFRyYWNraW5nLmNvbXBvbmVudHMuZ2V0KHZtKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGFwcFRyYWNraW5nLFxuICAgIHRyYWNraW5nXG4gIH07XG59XG5mdW5jdGlvbiB0cmFjayhsb2FkaW5nLCB0eXBlKSB7XG4gIGNvbnN0IHthcHBUcmFja2luZywgdHJhY2tpbmd9ID0gZ2V0Q3VycmVudFRyYWNraW5nKCk7XG4gIHdhdGNoKGxvYWRpbmcsICh2YWx1ZSwgb2xkVmFsdWUpID0+IHtcbiAgICBpZiAob2xkVmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgIGNvbnN0IG1vZCA9IHZhbHVlID8gMSA6IC0xO1xuICAgICAgdHJhY2tpbmdbdHlwZV0udmFsdWUgKz0gbW9kO1xuICAgICAgYXBwVHJhY2tpbmdbdHlwZV0udmFsdWUgKz0gbW9kO1xuICAgIH1cbiAgfSwge1xuICAgIGltbWVkaWF0ZTogdHJ1ZVxuICB9KTtcbiAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgICBpZiAobG9hZGluZy52YWx1ZSkge1xuICAgICAgdHJhY2tpbmdbdHlwZV0udmFsdWUtLTtcbiAgICAgIGFwcFRyYWNraW5nW3R5cGVdLnZhbHVlLS07XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIHRyYWNrUXVlcnkobG9hZGluZykge1xuICB0cmFjayhsb2FkaW5nLCBcInF1ZXJpZXNcIik7XG59XG5mdW5jdGlvbiB0cmFja011dGF0aW9uKGxvYWRpbmcpIHtcbiAgdHJhY2sobG9hZGluZywgXCJtdXRhdGlvbnNcIik7XG59XG5mdW5jdGlvbiB0cmFja1N1YnNjcmlwdGlvbihsb2FkaW5nKSB7XG4gIHRyYWNrKGxvYWRpbmcsIFwic3Vic2NyaXB0aW9uc1wiKTtcbn1cblxuLy8gc3JjL3V0aWwvdG9BcG9sbG9FcnJvci50c1xuaW1wb3J0IHtBcG9sbG9FcnJvciwgaXNBcG9sbG9FcnJvcn0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L2NvcmUvaW5kZXguanNcIjtcbmZ1bmN0aW9uIHRvQXBvbGxvRXJyb3IoZXJyb3IpIHtcbiAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikpIHtcbiAgICByZXR1cm4gbmV3IEFwb2xsb0Vycm9yKHtcbiAgICAgIG5ldHdvcmtFcnJvcjogT2JqZWN0LmFzc2lnbihuZXcgRXJyb3IoKSwge29yaWdpbmFsRXJyb3I6IGVycm9yfSksXG4gICAgICBlcnJvck1lc3NhZ2U6IFN0cmluZyhlcnJvcilcbiAgICB9KTtcbiAgfVxuICBpZiAoaXNBcG9sbG9FcnJvcihlcnJvcikpIHtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cbiAgcmV0dXJuIG5ldyBBcG9sbG9FcnJvcih7bmV0d29ya0Vycm9yOiBlcnJvciwgZXJyb3JNZXNzYWdlOiBlcnJvci5tZXNzYWdlfSk7XG59XG5mdW5jdGlvbiByZXN1bHRFcnJvcnNUb0Fwb2xsb0Vycm9yKGVycm9ycykge1xuICByZXR1cm4gbmV3IEFwb2xsb0Vycm9yKHtcbiAgICBncmFwaFFMRXJyb3JzOiBlcnJvcnMsXG4gICAgZXJyb3JNZXNzYWdlOiBgR3JhcGhRTCByZXNwb25zZSBjb250YWlucyBlcnJvcnM6ICR7ZXJyb3JzLm1hcCgoZSkgPT4gZS5tZXNzYWdlKS5qb2luKFwiIHwgXCIpfWBcbiAgfSk7XG59XG5cbi8vIHNyYy91dGlsL2Vudi50c1xudmFyIGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIjtcblxuLy8gc3JjL3VzZVF1ZXJ5LnRzXG5mdW5jdGlvbiB1c2VRdWVyeShkb2N1bWVudCwgdmFyaWFibGVzLCBvcHRpb25zKSB7XG4gIHJldHVybiB1c2VRdWVyeUltcGwoZG9jdW1lbnQsIHZhcmlhYmxlcywgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiB1c2VRdWVyeUltcGwoZG9jdW1lbnQsIHZhcmlhYmxlcywgb3B0aW9ucyA9IHt9LCBsYXp5ID0gZmFsc2UpIHtcbiAgdmFyIF9hO1xuICBjb25zdCB2bSA9IGdldEN1cnJlbnRJbnN0YW5jZTMoKTtcbiAgY29uc3QgY3VycmVudE9wdGlvbnMgPSByZWYzKCk7XG4gIGNvbnN0IGRvY3VtZW50UmVmID0gcGFyYW1Ub1JlZihkb2N1bWVudCk7XG4gIGNvbnN0IHZhcmlhYmxlc1JlZiA9IHBhcmFtVG9SZWYodmFyaWFibGVzKTtcbiAgY29uc3Qgb3B0aW9uc1JlZiA9IHBhcmFtVG9SZWFjdGl2ZShvcHRpb25zKTtcbiAgY29uc3QgcmVzdWx0ID0gcmVmMygpO1xuICBjb25zdCByZXN1bHRFdmVudCA9IHVzZUV2ZW50SG9vaygpO1xuICBjb25zdCBlcnJvciA9IHJlZjMobnVsbCk7XG4gIGNvbnN0IGVycm9yRXZlbnQgPSB1c2VFdmVudEhvb2soKTtcbiAgY29uc3QgbG9hZGluZyA9IHJlZjMoZmFsc2UpO1xuICB2bSAmJiB0cmFja1F1ZXJ5KGxvYWRpbmcpO1xuICBjb25zdCBuZXR3b3JrU3RhdHVzID0gcmVmMygpO1xuICBsZXQgZmlyc3RSZXNvbHZlO1xuICBsZXQgZmlyc3RSZWplY3Q7XG4gIHZtICYmICgoX2EgPSBvblNlcnZlclByZWZldGNoKSA9PSBudWxsID8gdm9pZCAwIDogX2EoKCkgPT4ge1xuICAgIHZhciBfYTI7XG4gICAgaWYgKCFpc0VuYWJsZWQudmFsdWUgfHwgaXNTZXJ2ZXIgJiYgKChfYTIgPSBjdXJyZW50T3B0aW9ucy52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5wcmVmZXRjaCkgPT09IGZhbHNlKVxuICAgICAgcmV0dXJuO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBmaXJzdFJlc29sdmUgPSAoKSA9PiB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgZmlyc3RSZXNvbHZlID0gdm9pZCAwO1xuICAgICAgICBmaXJzdFJlamVjdCA9IHZvaWQgMDtcbiAgICAgIH07XG4gICAgICBmaXJzdFJlamVjdCA9IChhcG9sbG9FcnJvcikgPT4ge1xuICAgICAgICByZWplY3QoYXBvbGxvRXJyb3IpO1xuICAgICAgICBmaXJzdFJlc29sdmUgPSB2b2lkIDA7XG4gICAgICAgIGZpcnN0UmVqZWN0ID0gdm9pZCAwO1xuICAgICAgfTtcbiAgICB9KS5maW5hbGx5KHN0b3ApO1xuICB9KSk7XG4gIGNvbnN0IHtyZXNvbHZlQ2xpZW50fSA9IHVzZUFwb2xsb0NsaWVudCgpO1xuICBjb25zdCBxdWVyeSA9IHJlZjMoKTtcbiAgbGV0IG9ic2VydmVyO1xuICBsZXQgc3RhcnRlZCA9IGZhbHNlO1xuICBsZXQgaWdub3JlTmV4dFJlc3VsdCA9IGZhbHNlO1xuICBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICB2YXIgX2EyLCBfYiwgX2MsIF9kLCBfZTtcbiAgICBpZiAoc3RhcnRlZCB8fCAhaXNFbmFibGVkLnZhbHVlIHx8IGlzU2VydmVyICYmICgoX2EyID0gY3VycmVudE9wdGlvbnMudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfYTIucHJlZmV0Y2gpID09PSBmYWxzZSkge1xuICAgICAgaWYgKGZpcnN0UmVzb2x2ZSlcbiAgICAgICAgZmlyc3RSZXNvbHZlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgIGVycm9yLnZhbHVlID0gbnVsbDtcbiAgICBsb2FkaW5nLnZhbHVlID0gdHJ1ZTtcbiAgICBjb25zdCBjbGllbnQgPSByZXNvbHZlQ2xpZW50KChfYiA9IGN1cnJlbnRPcHRpb25zLnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2IuY2xpZW50SWQpO1xuICAgIHF1ZXJ5LnZhbHVlID0gY2xpZW50LndhdGNoUXVlcnkoe1xuICAgICAgcXVlcnk6IGN1cnJlbnREb2N1bWVudCxcbiAgICAgIHZhcmlhYmxlczogY3VycmVudFZhcmlhYmxlcyxcbiAgICAgIC4uLmN1cnJlbnRPcHRpb25zLnZhbHVlLFxuICAgICAgLi4uaXNTZXJ2ZXIgJiYgKChfYyA9IGN1cnJlbnRPcHRpb25zLnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2MuZmV0Y2hQb2xpY3kpICE9PSBcIm5vLWNhY2hlXCIgPyB7XG4gICAgICAgIGZldGNoUG9saWN5OiBcIm5ldHdvcmstb25seVwiXG4gICAgICB9IDoge31cbiAgICB9KTtcbiAgICBzdGFydFF1ZXJ5U3Vic2NyaXB0aW9uKCk7XG4gICAgaWYgKCFpc1NlcnZlciAmJiAoKChfZCA9IGN1cnJlbnRPcHRpb25zLnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2QuZmV0Y2hQb2xpY3kpICE9PSBcIm5vLWNhY2hlXCIgfHwgY3VycmVudE9wdGlvbnMudmFsdWUubm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlKSkge1xuICAgICAgY29uc3QgY3VycmVudFJlc3VsdCA9IHF1ZXJ5LnZhbHVlLmdldEN1cnJlbnRSZXN1bHQoZmFsc2UpO1xuICAgICAgaWYgKCFjdXJyZW50UmVzdWx0LmxvYWRpbmcgfHwgY3VycmVudFJlc3VsdC5wYXJ0aWFsIHx8ICgoX2UgPSBjdXJyZW50T3B0aW9ucy52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLm5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZSkpIHtcbiAgICAgICAgb25OZXh0UmVzdWx0KGN1cnJlbnRSZXN1bHQpO1xuICAgICAgICBpZ25vcmVOZXh0UmVzdWx0ID0gIWN1cnJlbnRSZXN1bHQubG9hZGluZztcbiAgICAgIH0gZWxzZSBpZiAoY3VycmVudFJlc3VsdC5lcnJvcikge1xuICAgICAgICBvbkVycm9yKGN1cnJlbnRSZXN1bHQuZXJyb3IpO1xuICAgICAgICBpZ25vcmVOZXh0UmVzdWx0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFpc1NlcnZlcikge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHN1YnNjcmliZVRvTW9yZUl0ZW1zKSB7XG4gICAgICAgIGFkZFN1YnNjcmliZVRvTW9yZShpdGVtKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gc3RhcnRRdWVyeVN1YnNjcmlwdGlvbigpIHtcbiAgICBpZiAob2JzZXJ2ZXIgJiYgIW9ic2VydmVyLmNsb3NlZClcbiAgICAgIHJldHVybjtcbiAgICBpZiAoIXF1ZXJ5LnZhbHVlKVxuICAgICAgcmV0dXJuO1xuICAgIGlnbm9yZU5leHRSZXN1bHQgPSBmYWxzZTtcbiAgICBvYnNlcnZlciA9IHF1ZXJ5LnZhbHVlLnN1YnNjcmliZSh7XG4gICAgICBuZXh0OiBvbk5leHRSZXN1bHQsXG4gICAgICBlcnJvcjogb25FcnJvclxuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIG9uTmV4dFJlc3VsdChxdWVyeVJlc3VsdCkge1xuICAgIHZhciBfYTI7XG4gICAgaWYgKGlnbm9yZU5leHRSZXN1bHQpIHtcbiAgICAgIGlnbm9yZU5leHRSZXN1bHQgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZXJyb3IudmFsdWUgPSBudWxsO1xuICAgIHByb2Nlc3NOZXh0UmVzdWx0KHF1ZXJ5UmVzdWx0KTtcbiAgICBpZiAoIXF1ZXJ5UmVzdWx0LmVycm9yICYmICgoX2EyID0gcXVlcnlSZXN1bHQuZXJyb3JzKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmxlbmd0aCkpIHtcbiAgICAgIHByb2Nlc3NFcnJvcihyZXN1bHRFcnJvcnNUb0Fwb2xsb0Vycm9yKHF1ZXJ5UmVzdWx0LmVycm9ycykpO1xuICAgIH1cbiAgICBpZiAoZmlyc3RSZXNvbHZlKSB7XG4gICAgICBmaXJzdFJlc29sdmUoKTtcbiAgICAgIHN0b3AoKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gcHJvY2Vzc05leHRSZXN1bHQocXVlcnlSZXN1bHQpIHtcbiAgICByZXN1bHQudmFsdWUgPSBxdWVyeVJlc3VsdC5kYXRhICYmIE9iamVjdC5rZXlzKHF1ZXJ5UmVzdWx0LmRhdGEpLmxlbmd0aCA9PT0gMCA/IHZvaWQgMCA6IHF1ZXJ5UmVzdWx0LmRhdGE7XG4gICAgbG9hZGluZy52YWx1ZSA9IHF1ZXJ5UmVzdWx0LmxvYWRpbmc7XG4gICAgbmV0d29ya1N0YXR1cy52YWx1ZSA9IHF1ZXJ5UmVzdWx0Lm5ldHdvcmtTdGF0dXM7XG4gICAgcmVzdWx0RXZlbnQudHJpZ2dlcihxdWVyeVJlc3VsdCk7XG4gIH1cbiAgZnVuY3Rpb24gb25FcnJvcihxdWVyeUVycm9yKSB7XG4gICAgdmFyIF9hMiwgX2IsIF9jLCBfZDtcbiAgICBpZiAoaWdub3JlTmV4dFJlc3VsdCkge1xuICAgICAgaWdub3JlTmV4dFJlc3VsdCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhcG9sbG9FcnJvciA9IHRvQXBvbGxvRXJyb3IocXVlcnlFcnJvcik7XG4gICAgY29uc3QgY2xpZW50ID0gcmVzb2x2ZUNsaWVudCgoX2EyID0gY3VycmVudE9wdGlvbnMudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfYTIuY2xpZW50SWQpO1xuICAgIGNvbnN0IGVycm9yUG9saWN5ID0gKChfYiA9IGN1cnJlbnRPcHRpb25zLnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2IuZXJyb3JQb2xpY3kpIHx8ICgoX2QgPSAoX2MgPSBjbGllbnQuZGVmYXVsdE9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYy53YXRjaFF1ZXJ5KSA9PSBudWxsID8gdm9pZCAwIDogX2QuZXJyb3JQb2xpY3kpO1xuICAgIGlmIChlcnJvclBvbGljeSAmJiBlcnJvclBvbGljeSAhPT0gXCJub25lXCIpIHtcbiAgICAgIHByb2Nlc3NOZXh0UmVzdWx0KHF1ZXJ5LnZhbHVlLmdldEN1cnJlbnRSZXN1bHQoKSk7XG4gICAgfVxuICAgIHByb2Nlc3NFcnJvcihhcG9sbG9FcnJvcik7XG4gICAgaWYgKGZpcnN0UmVqZWN0KSB7XG4gICAgICBmaXJzdFJlamVjdChhcG9sbG9FcnJvcik7XG4gICAgICBzdG9wKCk7XG4gICAgfVxuICAgIHJlc3Vic2NyaWJlVG9RdWVyeSgpO1xuICB9XG4gIGZ1bmN0aW9uIHByb2Nlc3NFcnJvcihhcG9sbG9FcnJvcikge1xuICAgIGVycm9yLnZhbHVlID0gYXBvbGxvRXJyb3I7XG4gICAgbG9hZGluZy52YWx1ZSA9IGZhbHNlO1xuICAgIG5ldHdvcmtTdGF0dXMudmFsdWUgPSA4O1xuICAgIGVycm9yRXZlbnQudHJpZ2dlcihhcG9sbG9FcnJvcik7XG4gIH1cbiAgZnVuY3Rpb24gcmVzdWJzY3JpYmVUb1F1ZXJ5KCkge1xuICAgIGlmICghcXVlcnkudmFsdWUpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgbGFzdEVycm9yID0gcXVlcnkudmFsdWUuZ2V0TGFzdEVycm9yKCk7XG4gICAgY29uc3QgbGFzdFJlc3VsdCA9IHF1ZXJ5LnZhbHVlLmdldExhc3RSZXN1bHQoKTtcbiAgICBxdWVyeS52YWx1ZS5yZXNldExhc3RSZXN1bHRzKCk7XG4gICAgc3RhcnRRdWVyeVN1YnNjcmlwdGlvbigpO1xuICAgIE9iamVjdC5hc3NpZ24ocXVlcnkudmFsdWUsIHtsYXN0RXJyb3IsIGxhc3RSZXN1bHR9KTtcbiAgfVxuICBsZXQgb25TdG9wSGFuZGxlcnMgPSBbXTtcbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBpZiAoZmlyc3RSZXNvbHZlKVxuICAgICAgZmlyc3RSZXNvbHZlKCk7XG4gICAgaWYgKCFzdGFydGVkKVxuICAgICAgcmV0dXJuO1xuICAgIHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICBsb2FkaW5nLnZhbHVlID0gZmFsc2U7XG4gICAgb25TdG9wSGFuZGxlcnMuZm9yRWFjaCgoaGFuZGxlcikgPT4gaGFuZGxlcigpKTtcbiAgICBvblN0b3BIYW5kbGVycyA9IFtdO1xuICAgIGlmIChxdWVyeS52YWx1ZSkge1xuICAgICAgcXVlcnkudmFsdWUuc3RvcFBvbGxpbmcoKTtcbiAgICAgIHF1ZXJ5LnZhbHVlID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKG9ic2VydmVyKSB7XG4gICAgICBvYnNlcnZlci51bnN1YnNjcmliZSgpO1xuICAgICAgb2JzZXJ2ZXIgPSB2b2lkIDA7XG4gICAgfVxuICB9XG4gIGxldCByZXN0YXJ0aW5nID0gZmFsc2U7XG4gIGZ1bmN0aW9uIGJhc2VSZXN0YXJ0KCkge1xuICAgIGlmICghc3RhcnRlZCB8fCByZXN0YXJ0aW5nKVxuICAgICAgcmV0dXJuO1xuICAgIHJlc3RhcnRpbmcgPSB0cnVlO1xuICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgIGlmIChzdGFydGVkKSB7XG4gICAgICAgIHN0b3AoKTtcbiAgICAgICAgc3RhcnQoKTtcbiAgICAgIH1cbiAgICAgIHJlc3RhcnRpbmcgPSBmYWxzZTtcbiAgICB9KTtcbiAgfVxuICBsZXQgZGVib3VuY2VkUmVzdGFydDtcbiAgbGV0IGlzUmVzdGFydERlYm91bmNlU2V0dXAgPSBmYWxzZTtcbiAgZnVuY3Rpb24gdXBkYXRlUmVzdGFydEZuKCkge1xuICAgIHZhciBfYTIsIF9iO1xuICAgIGlmICghY3VycmVudE9wdGlvbnMudmFsdWUpIHtcbiAgICAgIGRlYm91bmNlZFJlc3RhcnQgPSBiYXNlUmVzdGFydDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKChfYTIgPSBjdXJyZW50T3B0aW9ucy52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi50aHJvdHRsZSkge1xuICAgICAgICBkZWJvdW5jZWRSZXN0YXJ0ID0gdGhyb3R0bGUoY3VycmVudE9wdGlvbnMudmFsdWUudGhyb3R0bGUsIGJhc2VSZXN0YXJ0KTtcbiAgICAgIH0gZWxzZSBpZiAoKF9iID0gY3VycmVudE9wdGlvbnMudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfYi5kZWJvdW5jZSkge1xuICAgICAgICBkZWJvdW5jZWRSZXN0YXJ0ID0gZGVib3VuY2UoY3VycmVudE9wdGlvbnMudmFsdWUuZGVib3VuY2UsIGJhc2VSZXN0YXJ0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYm91bmNlZFJlc3RhcnQgPSBiYXNlUmVzdGFydDtcbiAgICAgIH1cbiAgICAgIGlzUmVzdGFydERlYm91bmNlU2V0dXAgPSB0cnVlO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiByZXN0YXJ0KCkge1xuICAgIGlmICghaXNSZXN0YXJ0RGVib3VuY2VTZXR1cClcbiAgICAgIHVwZGF0ZVJlc3RhcnRGbigpO1xuICAgIGRlYm91bmNlZFJlc3RhcnQoKTtcbiAgfVxuICBsZXQgY3VycmVudERvY3VtZW50O1xuICB3YXRjaDIoZG9jdW1lbnRSZWYsICh2YWx1ZSkgPT4ge1xuICAgIGN1cnJlbnREb2N1bWVudCA9IHZhbHVlO1xuICAgIHJlc3RhcnQoKTtcbiAgfSwge1xuICAgIGltbWVkaWF0ZTogdHJ1ZVxuICB9KTtcbiAgbGV0IGN1cnJlbnRWYXJpYWJsZXM7XG4gIGxldCBjdXJyZW50VmFyaWFibGVzU2VyaWFsaXplZDtcbiAgd2F0Y2gyKHZhcmlhYmxlc1JlZiwgKHZhbHVlLCBvbGRWYWx1ZSkgPT4ge1xuICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgaWYgKHNlcmlhbGl6ZWQgIT09IGN1cnJlbnRWYXJpYWJsZXNTZXJpYWxpemVkKSB7XG4gICAgICBjdXJyZW50VmFyaWFibGVzID0gdmFsdWU7XG4gICAgICByZXN0YXJ0KCk7XG4gICAgfVxuICAgIGN1cnJlbnRWYXJpYWJsZXNTZXJpYWxpemVkID0gc2VyaWFsaXplZDtcbiAgfSwge1xuICAgIGRlZXA6IHRydWUsXG4gICAgaW1tZWRpYXRlOiB0cnVlXG4gIH0pO1xuICB3YXRjaDIoKCkgPT4gdW5yZWYob3B0aW9uc1JlZiksICh2YWx1ZSkgPT4ge1xuICAgIGlmIChjdXJyZW50T3B0aW9ucy52YWx1ZSAmJiAoY3VycmVudE9wdGlvbnMudmFsdWUudGhyb3R0bGUgIT09IHZhbHVlLnRocm90dGxlIHx8IGN1cnJlbnRPcHRpb25zLnZhbHVlLmRlYm91bmNlICE9PSB2YWx1ZS5kZWJvdW5jZSkpIHtcbiAgICAgIHVwZGF0ZVJlc3RhcnRGbigpO1xuICAgIH1cbiAgICBjdXJyZW50T3B0aW9ucy52YWx1ZSA9IHZhbHVlO1xuICAgIHJlc3RhcnQoKTtcbiAgfSwge1xuICAgIGRlZXA6IHRydWUsXG4gICAgaW1tZWRpYXRlOiB0cnVlXG4gIH0pO1xuICBmdW5jdGlvbiByZWZldGNoKHZhcmlhYmxlczIgPSB2b2lkIDApIHtcbiAgICBpZiAocXVlcnkudmFsdWUpIHtcbiAgICAgIGlmICh2YXJpYWJsZXMyKSB7XG4gICAgICAgIGN1cnJlbnRWYXJpYWJsZXMgPSB2YXJpYWJsZXMyO1xuICAgICAgfVxuICAgICAgZXJyb3IudmFsdWUgPSBudWxsO1xuICAgICAgbG9hZGluZy52YWx1ZSA9IHRydWU7XG4gICAgICByZXR1cm4gcXVlcnkudmFsdWUucmVmZXRjaCh2YXJpYWJsZXMyKS50aGVuKChyZWZldGNoUmVzdWx0KSA9PiB7XG4gICAgICAgIHZhciBfYTI7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRSZXN1bHQgPSAoX2EyID0gcXVlcnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfYTIuZ2V0Q3VycmVudFJlc3VsdCgpO1xuICAgICAgICBjdXJyZW50UmVzdWx0ICYmIHByb2Nlc3NOZXh0UmVzdWx0KGN1cnJlbnRSZXN1bHQpO1xuICAgICAgICByZXR1cm4gcmVmZXRjaFJlc3VsdDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBmZXRjaE1vcmUob3B0aW9uczIpIHtcbiAgICBpZiAocXVlcnkudmFsdWUpIHtcbiAgICAgIGVycm9yLnZhbHVlID0gbnVsbDtcbiAgICAgIGxvYWRpbmcudmFsdWUgPSB0cnVlO1xuICAgICAgcmV0dXJuIHF1ZXJ5LnZhbHVlLmZldGNoTW9yZShvcHRpb25zMikudGhlbigoZmV0Y2hNb3JlUmVzdWx0KSA9PiB7XG4gICAgICAgIHZhciBfYTI7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRSZXN1bHQgPSAoX2EyID0gcXVlcnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfYTIuZ2V0Q3VycmVudFJlc3VsdCgpO1xuICAgICAgICBjdXJyZW50UmVzdWx0ICYmIHByb2Nlc3NOZXh0UmVzdWx0KGN1cnJlbnRSZXN1bHQpO1xuICAgICAgICByZXR1cm4gZmV0Y2hNb3JlUmVzdWx0O1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGNvbnN0IHN1YnNjcmliZVRvTW9yZUl0ZW1zID0gW107XG4gIGZ1bmN0aW9uIHN1YnNjcmliZVRvTW9yZShvcHRpb25zMikge1xuICAgIGlmIChpc1NlcnZlcilcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBvcHRpb25zUmVmMiA9IHBhcmFtVG9SZWYob3B0aW9uczIpO1xuICAgIHdhdGNoMihvcHRpb25zUmVmMiwgKHZhbHVlLCBvbGRWYWx1ZSwgb25DbGVhbnVwKSA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHN1YnNjcmliZVRvTW9yZUl0ZW1zLmZpbmRJbmRleCgoaXRlbTIpID0+IGl0ZW0yLm9wdGlvbnMgPT09IG9sZFZhbHVlKTtcbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgc3Vic2NyaWJlVG9Nb3JlSXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGl0ZW0gPSB7XG4gICAgICAgIG9wdGlvbnM6IHZhbHVlLFxuICAgICAgICB1bnN1YnNjcmliZUZuczogW11cbiAgICAgIH07XG4gICAgICBzdWJzY3JpYmVUb01vcmVJdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgYWRkU3Vic2NyaWJlVG9Nb3JlKGl0ZW0pO1xuICAgICAgb25DbGVhbnVwKCgpID0+IHtcbiAgICAgICAgaXRlbS51bnN1YnNjcmliZUZucy5mb3JFYWNoKChmbikgPT4gZm4oKSk7XG4gICAgICAgIGl0ZW0udW5zdWJzY3JpYmVGbnMgPSBbXTtcbiAgICAgIH0pO1xuICAgIH0sIHtcbiAgICAgIGltbWVkaWF0ZTogdHJ1ZVxuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIGFkZFN1YnNjcmliZVRvTW9yZShpdGVtKSB7XG4gICAgaWYgKCFzdGFydGVkKVxuICAgICAgcmV0dXJuO1xuICAgIGlmICghcXVlcnkudmFsdWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlF1ZXJ5IGlzIG5vdCBkZWZpbmVkXCIpO1xuICAgIH1cbiAgICBjb25zdCB1bnN1YnNjcmliZSA9IHF1ZXJ5LnZhbHVlLnN1YnNjcmliZVRvTW9yZShpdGVtLm9wdGlvbnMpO1xuICAgIG9uU3RvcEhhbmRsZXJzLnB1c2godW5zdWJzY3JpYmUpO1xuICAgIGl0ZW0udW5zdWJzY3JpYmVGbnMucHVzaCh1bnN1YnNjcmliZSk7XG4gIH1cbiAgY29uc3QgZm9yY2VEaXNhYmxlZCA9IHJlZjMobGF6eSk7XG4gIGNvbnN0IGVuYWJsZWRPcHRpb24gPSBjb21wdXRlZDMoKCkgPT4gIWN1cnJlbnRPcHRpb25zLnZhbHVlIHx8IGN1cnJlbnRPcHRpb25zLnZhbHVlLmVuYWJsZWQgPT0gbnVsbCB8fCBjdXJyZW50T3B0aW9ucy52YWx1ZS5lbmFibGVkKTtcbiAgY29uc3QgaXNFbmFibGVkID0gY29tcHV0ZWQzKCgpID0+IGVuYWJsZWRPcHRpb24udmFsdWUgJiYgIWZvcmNlRGlzYWJsZWQudmFsdWUpO1xuICB3YXRjaDIoaXNFbmFibGVkLCAodmFsdWUpID0+IHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHN0YXJ0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0b3AoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBpbW1lZGlhdGU6IHRydWVcbiAgfSk7XG4gIHZtICYmIG9uQmVmb3JlVW5tb3VudDIoKCkgPT4ge1xuICAgIHN0b3AoKTtcbiAgICBzdWJzY3JpYmVUb01vcmVJdGVtcy5sZW5ndGggPSAwO1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICByZXN1bHQsXG4gICAgbG9hZGluZyxcbiAgICBuZXR3b3JrU3RhdHVzLFxuICAgIGVycm9yLFxuICAgIHN0YXJ0LFxuICAgIHN0b3AsXG4gICAgcmVzdGFydCxcbiAgICBmb3JjZURpc2FibGVkLFxuICAgIGRvY3VtZW50OiBkb2N1bWVudFJlZixcbiAgICB2YXJpYWJsZXM6IHZhcmlhYmxlc1JlZixcbiAgICBvcHRpb25zOiBvcHRpb25zUmVmLFxuICAgIHF1ZXJ5LFxuICAgIHJlZmV0Y2gsXG4gICAgZmV0Y2hNb3JlLFxuICAgIHN1YnNjcmliZVRvTW9yZSxcbiAgICBvblJlc3VsdDogcmVzdWx0RXZlbnQub24sXG4gICAgb25FcnJvcjogZXJyb3JFdmVudC5vblxuICB9O1xufVxuXG4vLyBzcmMvdXNlTGF6eVF1ZXJ5LnRzXG5pbXBvcnQge2lzUmVmIGFzIGlzUmVmM30gZnJvbSBcInZ1ZS1kZW1pXCI7XG5mdW5jdGlvbiB1c2VMYXp5UXVlcnkoZG9jdW1lbnQsIHZhcmlhYmxlcywgb3B0aW9ucykge1xuICBjb25zdCBxdWVyeSA9IHVzZVF1ZXJ5SW1wbChkb2N1bWVudCwgdmFyaWFibGVzLCBvcHRpb25zLCB0cnVlKTtcbiAgZnVuY3Rpb24gbG9hZChkb2N1bWVudDIsIHZhcmlhYmxlczIsIG9wdGlvbnMyKSB7XG4gICAgaWYgKGRvY3VtZW50Mikge1xuICAgICAgcXVlcnkuZG9jdW1lbnQudmFsdWUgPSBkb2N1bWVudDI7XG4gICAgfVxuICAgIGlmICh2YXJpYWJsZXMyKSB7XG4gICAgICBxdWVyeS52YXJpYWJsZXMudmFsdWUgPSB2YXJpYWJsZXMyO1xuICAgIH1cbiAgICBpZiAob3B0aW9uczIpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24oaXNSZWYzKHF1ZXJ5Lm9wdGlvbnMpID8gcXVlcnkub3B0aW9ucy52YWx1ZSA6IHF1ZXJ5Lm9wdGlvbnMsIG9wdGlvbnMyKTtcbiAgICB9XG4gICAgcXVlcnkuZm9yY2VEaXNhYmxlZC52YWx1ZSA9IGZhbHNlO1xuICB9XG4gIHJldHVybiB7XG4gICAgLi4ucXVlcnksXG4gICAgbG9hZFxuICB9O1xufVxuXG4vLyBzcmMvdXNlTXV0YXRpb24udHNcbmltcG9ydCB7cmVmIGFzIHJlZjQsIG9uQmVmb3JlVW5tb3VudCBhcyBvbkJlZm9yZVVubW91bnQzLCBpc1JlZiBhcyBpc1JlZjQsIGdldEN1cnJlbnRJbnN0YW5jZSBhcyBnZXRDdXJyZW50SW5zdGFuY2U0fSBmcm9tIFwidnVlLWRlbWlcIjtcbmZ1bmN0aW9uIHVzZU11dGF0aW9uKGRvY3VtZW50LCBvcHRpb25zID0ge30pIHtcbiAgY29uc3Qgdm0gPSBnZXRDdXJyZW50SW5zdGFuY2U0KCk7XG4gIGNvbnN0IGxvYWRpbmcgPSByZWY0KGZhbHNlKTtcbiAgdm0gJiYgdHJhY2tNdXRhdGlvbihsb2FkaW5nKTtcbiAgY29uc3QgZXJyb3IgPSByZWY0KG51bGwpO1xuICBjb25zdCBjYWxsZWQgPSByZWY0KGZhbHNlKTtcbiAgY29uc3QgZG9uZUV2ZW50ID0gdXNlRXZlbnRIb29rKCk7XG4gIGNvbnN0IGVycm9yRXZlbnQgPSB1c2VFdmVudEhvb2soKTtcbiAgY29uc3Qge3Jlc29sdmVDbGllbnR9ID0gdXNlQXBvbGxvQ2xpZW50KCk7XG4gIGFzeW5jIGZ1bmN0aW9uIG11dGF0ZSh2YXJpYWJsZXMsIG92ZXJyaWRlT3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IGN1cnJlbnREb2N1bWVudDtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGN1cnJlbnREb2N1bWVudCA9IGRvY3VtZW50KCk7XG4gICAgfSBlbHNlIGlmIChpc1JlZjQoZG9jdW1lbnQpKSB7XG4gICAgICBjdXJyZW50RG9jdW1lbnQgPSBkb2N1bWVudC52YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudERvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgfVxuICAgIGxldCBjdXJyZW50T3B0aW9ucztcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgY3VycmVudE9wdGlvbnMgPSBvcHRpb25zKCk7XG4gICAgfSBlbHNlIGlmIChpc1JlZjQob3B0aW9ucykpIHtcbiAgICAgIGN1cnJlbnRPcHRpb25zID0gb3B0aW9ucy52YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudE9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cbiAgICBjb25zdCBjbGllbnQgPSByZXNvbHZlQ2xpZW50KGN1cnJlbnRPcHRpb25zLmNsaWVudElkKTtcbiAgICBlcnJvci52YWx1ZSA9IG51bGw7XG4gICAgbG9hZGluZy52YWx1ZSA9IHRydWU7XG4gICAgY2FsbGVkLnZhbHVlID0gdHJ1ZTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50Lm11dGF0ZSh7XG4gICAgICAgIG11dGF0aW9uOiBjdXJyZW50RG9jdW1lbnQsXG4gICAgICAgIC4uLmN1cnJlbnRPcHRpb25zLFxuICAgICAgICAuLi5vdmVycmlkZU9wdGlvbnMsXG4gICAgICAgIHZhcmlhYmxlczogKHZhcmlhYmxlcyAhPSBudWxsID8gdmFyaWFibGVzIDogY3VycmVudE9wdGlvbnMudmFyaWFibGVzKSA/IHtcbiAgICAgICAgICAuLi5jdXJyZW50T3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgICAgLi4udmFyaWFibGVzXG4gICAgICAgIH0gOiB2b2lkIDBcbiAgICAgIH0pO1xuICAgICAgbG9hZGluZy52YWx1ZSA9IGZhbHNlO1xuICAgICAgZG9uZUV2ZW50LnRyaWdnZXIocmVzdWx0KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc3QgYXBvbGxvRXJyb3IgPSB0b0Fwb2xsb0Vycm9yKGUpO1xuICAgICAgZXJyb3IudmFsdWUgPSBhcG9sbG9FcnJvcjtcbiAgICAgIGxvYWRpbmcudmFsdWUgPSBmYWxzZTtcbiAgICAgIGVycm9yRXZlbnQudHJpZ2dlcihhcG9sbG9FcnJvcik7XG4gICAgICBpZiAoY3VycmVudE9wdGlvbnMudGhyb3dzID09PSBcImFsd2F5c1wiIHx8IGN1cnJlbnRPcHRpb25zLnRocm93cyAhPT0gXCJuZXZlclwiICYmICFlcnJvckV2ZW50LmdldENvdW50KCkpIHtcbiAgICAgICAgdGhyb3cgYXBvbGxvRXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHZtICYmIG9uQmVmb3JlVW5tb3VudDMoKCkgPT4ge1xuICAgIGxvYWRpbmcudmFsdWUgPSBmYWxzZTtcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgbXV0YXRlLFxuICAgIGxvYWRpbmcsXG4gICAgZXJyb3IsXG4gICAgY2FsbGVkLFxuICAgIG9uRG9uZTogZG9uZUV2ZW50Lm9uLFxuICAgIG9uRXJyb3I6IGVycm9yRXZlbnQub25cbiAgfTtcbn1cblxuLy8gc3JjL3VzZVN1YnNjcmlwdGlvbi50c1xuaW1wb3J0IHtcbiAgcmVmIGFzIHJlZjUsXG4gIHdhdGNoIGFzIHdhdGNoMyxcbiAgaXNSZWYgYXMgaXNSZWY1LFxuICBjb21wdXRlZCBhcyBjb21wdXRlZDQsXG4gIGdldEN1cnJlbnRJbnN0YW5jZSBhcyBnZXRDdXJyZW50SW5zdGFuY2U1LFxuICBvbkJlZm9yZVVubW91bnQgYXMgb25CZWZvcmVVbm1vdW50NCxcbiAgbmV4dFRpY2sgYXMgbmV4dFRpY2syXG59IGZyb20gXCJ2dWUtZGVtaVwiO1xuaW1wb3J0IHt0aHJvdHRsZSBhcyB0aHJvdHRsZTIsIGRlYm91bmNlIGFzIGRlYm91bmNlMn0gZnJvbSBcInRocm90dGxlLWRlYm91bmNlXCI7XG5mdW5jdGlvbiB1c2VTdWJzY3JpcHRpb24oZG9jdW1lbnQsIHZhcmlhYmxlcyA9IHZvaWQgMCwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHZtID0gZ2V0Q3VycmVudEluc3RhbmNlNSgpO1xuICBjb25zdCBkb2N1bWVudFJlZiA9IHBhcmFtVG9SZWYoZG9jdW1lbnQpO1xuICBjb25zdCB2YXJpYWJsZXNSZWYgPSBwYXJhbVRvUmVmKHZhcmlhYmxlcyk7XG4gIGNvbnN0IG9wdGlvbnNSZWYgPSBwYXJhbVRvUmVhY3RpdmUob3B0aW9ucyk7XG4gIGNvbnN0IHJlc3VsdCA9IHJlZjUoKTtcbiAgY29uc3QgcmVzdWx0RXZlbnQgPSB1c2VFdmVudEhvb2soKTtcbiAgY29uc3QgZXJyb3IgPSByZWY1KG51bGwpO1xuICBjb25zdCBlcnJvckV2ZW50ID0gdXNlRXZlbnRIb29rKCk7XG4gIGNvbnN0IGxvYWRpbmcgPSByZWY1KGZhbHNlKTtcbiAgdm0gJiYgdHJhY2tTdWJzY3JpcHRpb24obG9hZGluZyk7XG4gIGNvbnN0IHtyZXNvbHZlQ2xpZW50fSA9IHVzZUFwb2xsb0NsaWVudCgpO1xuICBjb25zdCBzdWJzY3JpcHRpb24gPSByZWY1KG51bGwpO1xuICBsZXQgb2JzZXJ2ZXIgPSBudWxsO1xuICBsZXQgc3RhcnRlZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKHN0YXJ0ZWQgfHwgIWlzRW5hYmxlZC52YWx1ZSB8fCBpc1NlcnZlcilcbiAgICAgIHJldHVybjtcbiAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICBsb2FkaW5nLnZhbHVlID0gdHJ1ZTtcbiAgICBjb25zdCBjbGllbnQgPSByZXNvbHZlQ2xpZW50KChfYSA9IGN1cnJlbnRPcHRpb25zLnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2xpZW50SWQpO1xuICAgIHN1YnNjcmlwdGlvbi52YWx1ZSA9IGNsaWVudC5zdWJzY3JpYmUoe1xuICAgICAgcXVlcnk6IGN1cnJlbnREb2N1bWVudCxcbiAgICAgIHZhcmlhYmxlczogY3VycmVudFZhcmlhYmxlcyxcbiAgICAgIC4uLmN1cnJlbnRPcHRpb25zLnZhbHVlXG4gICAgfSk7XG4gICAgb2JzZXJ2ZXIgPSBzdWJzY3JpcHRpb24udmFsdWUuc3Vic2NyaWJlKHtcbiAgICAgIG5leHQ6IG9uTmV4dFJlc3VsdCxcbiAgICAgIGVycm9yOiBvbkVycm9yXG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gb25OZXh0UmVzdWx0KGZldGNoUmVzdWx0KSB7XG4gICAgcmVzdWx0LnZhbHVlID0gZmV0Y2hSZXN1bHQuZGF0YTtcbiAgICBsb2FkaW5nLnZhbHVlID0gZmFsc2U7XG4gICAgcmVzdWx0RXZlbnQudHJpZ2dlcihmZXRjaFJlc3VsdCk7XG4gIH1cbiAgZnVuY3Rpb24gb25FcnJvcihmZXRjaEVycm9yKSB7XG4gICAgY29uc3QgYXBvbGxvRXJyb3IgPSB0b0Fwb2xsb0Vycm9yKGZldGNoRXJyb3IpO1xuICAgIGVycm9yLnZhbHVlID0gYXBvbGxvRXJyb3I7XG4gICAgbG9hZGluZy52YWx1ZSA9IGZhbHNlO1xuICAgIGVycm9yRXZlbnQudHJpZ2dlcihhcG9sbG9FcnJvcik7XG4gIH1cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBpZiAoIXN0YXJ0ZWQpXG4gICAgICByZXR1cm47XG4gICAgc3RhcnRlZCA9IGZhbHNlO1xuICAgIGxvYWRpbmcudmFsdWUgPSBmYWxzZTtcbiAgICBpZiAoc3Vic2NyaXB0aW9uLnZhbHVlKSB7XG4gICAgICBzdWJzY3JpcHRpb24udmFsdWUgPSBudWxsO1xuICAgIH1cbiAgICBpZiAob2JzZXJ2ZXIpIHtcbiAgICAgIG9ic2VydmVyLnVuc3Vic2NyaWJlKCk7XG4gICAgICBvYnNlcnZlciA9IG51bGw7XG4gICAgfVxuICB9XG4gIGxldCByZXN0YXJ0aW5nID0gZmFsc2U7XG4gIGZ1bmN0aW9uIGJhc2VSZXN0YXJ0KCkge1xuICAgIGlmICghc3RhcnRlZCB8fCByZXN0YXJ0aW5nKVxuICAgICAgcmV0dXJuO1xuICAgIHJlc3RhcnRpbmcgPSB0cnVlO1xuICAgIG5leHRUaWNrMigoKSA9PiB7XG4gICAgICBpZiAoc3RhcnRlZCkge1xuICAgICAgICBzdG9wKCk7XG4gICAgICAgIHN0YXJ0KCk7XG4gICAgICB9XG4gICAgICByZXN0YXJ0aW5nID0gZmFsc2U7XG4gICAgfSk7XG4gIH1cbiAgbGV0IGRlYm91bmNlZFJlc3RhcnQ7XG4gIGZ1bmN0aW9uIHVwZGF0ZVJlc3RhcnRGbigpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGlmICgoX2EgPSBjdXJyZW50T3B0aW9ucy52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnRocm90dGxlKSB7XG4gICAgICBkZWJvdW5jZWRSZXN0YXJ0ID0gdGhyb3R0bGUyKGN1cnJlbnRPcHRpb25zLnZhbHVlLnRocm90dGxlLCBiYXNlUmVzdGFydCk7XG4gICAgfSBlbHNlIGlmICgoX2IgPSBjdXJyZW50T3B0aW9ucy52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmRlYm91bmNlKSB7XG4gICAgICBkZWJvdW5jZWRSZXN0YXJ0ID0gZGVib3VuY2UyKGN1cnJlbnRPcHRpb25zLnZhbHVlLmRlYm91bmNlLCBiYXNlUmVzdGFydCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYm91bmNlZFJlc3RhcnQgPSBiYXNlUmVzdGFydDtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gcmVzdGFydCgpIHtcbiAgICBpZiAoIWRlYm91bmNlZFJlc3RhcnQpXG4gICAgICB1cGRhdGVSZXN0YXJ0Rm4oKTtcbiAgICBkZWJvdW5jZWRSZXN0YXJ0KCk7XG4gIH1cbiAgY29uc3QgY3VycmVudE9wdGlvbnMgPSByZWY1KCk7XG4gIHdhdGNoMygoKSA9PiBpc1JlZjUob3B0aW9uc1JlZikgPyBvcHRpb25zUmVmLnZhbHVlIDogb3B0aW9uc1JlZiwgKHZhbHVlKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRPcHRpb25zLnZhbHVlICYmIChjdXJyZW50T3B0aW9ucy52YWx1ZS50aHJvdHRsZSAhPT0gdmFsdWUudGhyb3R0bGUgfHwgY3VycmVudE9wdGlvbnMudmFsdWUuZGVib3VuY2UgIT09IHZhbHVlLmRlYm91bmNlKSkge1xuICAgICAgdXBkYXRlUmVzdGFydEZuKCk7XG4gICAgfVxuICAgIGN1cnJlbnRPcHRpb25zLnZhbHVlID0gdmFsdWU7XG4gICAgcmVzdGFydCgpO1xuICB9LCB7XG4gICAgZGVlcDogdHJ1ZSxcbiAgICBpbW1lZGlhdGU6IHRydWVcbiAgfSk7XG4gIGxldCBjdXJyZW50RG9jdW1lbnQ7XG4gIHdhdGNoMyhkb2N1bWVudFJlZiwgKHZhbHVlKSA9PiB7XG4gICAgY3VycmVudERvY3VtZW50ID0gdmFsdWU7XG4gICAgcmVzdGFydCgpO1xuICB9LCB7XG4gICAgaW1tZWRpYXRlOiB0cnVlXG4gIH0pO1xuICBsZXQgY3VycmVudFZhcmlhYmxlcztcbiAgbGV0IGN1cnJlbnRWYXJpYWJsZXNTZXJpYWxpemVkO1xuICB3YXRjaDModmFyaWFibGVzUmVmLCAodmFsdWUsIG9sZFZhbHVlKSA9PiB7XG4gICAgY29uc3Qgc2VyaWFsaXplZCA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICBpZiAoc2VyaWFsaXplZCAhPT0gY3VycmVudFZhcmlhYmxlc1NlcmlhbGl6ZWQpIHtcbiAgICAgIGN1cnJlbnRWYXJpYWJsZXMgPSB2YWx1ZTtcbiAgICAgIHJlc3RhcnQoKTtcbiAgICB9XG4gICAgY3VycmVudFZhcmlhYmxlc1NlcmlhbGl6ZWQgPSBzZXJpYWxpemVkO1xuICB9LCB7XG4gICAgZGVlcDogdHJ1ZSxcbiAgICBpbW1lZGlhdGU6IHRydWVcbiAgfSk7XG4gIGNvbnN0IGVuYWJsZWRPcHRpb24gPSBjb21wdXRlZDQoKCkgPT4gIWN1cnJlbnRPcHRpb25zLnZhbHVlIHx8IGN1cnJlbnRPcHRpb25zLnZhbHVlLmVuYWJsZWQgPT0gbnVsbCB8fCBjdXJyZW50T3B0aW9ucy52YWx1ZS5lbmFibGVkKTtcbiAgY29uc3QgaXNFbmFibGVkID0gZW5hYmxlZE9wdGlvbjtcbiAgd2F0Y2gzKGlzRW5hYmxlZCwgKHZhbHVlKSA9PiB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBzdGFydCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdG9wKCk7XG4gICAgfVxuICB9LCB7XG4gICAgaW1tZWRpYXRlOiB0cnVlXG4gIH0pO1xuICB2bSAmJiBvbkJlZm9yZVVubW91bnQ0KHN0b3ApO1xuICByZXR1cm4ge1xuICAgIHJlc3VsdCxcbiAgICBsb2FkaW5nLFxuICAgIGVycm9yLFxuICAgIHN0YXJ0LFxuICAgIHN0b3AsXG4gICAgcmVzdGFydCxcbiAgICBkb2N1bWVudDogZG9jdW1lbnRSZWYsXG4gICAgdmFyaWFibGVzOiB2YXJpYWJsZXNSZWYsXG4gICAgb3B0aW9uczogb3B0aW9uc1JlZixcbiAgICBzdWJzY3JpcHRpb24sXG4gICAgb25SZXN1bHQ6IHJlc3VsdEV2ZW50Lm9uLFxuICAgIG9uRXJyb3I6IGVycm9yRXZlbnQub25cbiAgfTtcbn1cblxuLy8gc3JjL3VzZVJlc3VsdC50c1xuaW1wb3J0IHtjb21wdXRlZCBhcyBjb21wdXRlZDV9IGZyb20gXCJ2dWUtZGVtaVwiO1xuZnVuY3Rpb24gdXNlUmVzdWx0KHJlc3VsdCwgZGVmYXVsdFZhbHVlLCBwaWNrKSB7XG4gIGNvbnNvbGUud2FybihgJ3VzZVJlc3VsdCcgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIHNvb24uIFBsZWFzZSB1c2UgJ2NvbXB1dGVkJyBpbnN0ZWFkLlxuQmVmb3JlOlxuY29uc3QgaXRlbXMgPSB1c2VSZXN1bHQocmVzdWx0LCBbXSwgZGF0YSA9PiBkYXRhLnNvbWVGaWVsZC5teUl0ZW1zKVxuQWZ0ZXI6XG5jb25zdCBpdGVtcyA9IGNvbXB1dGVkKCgpID0+IHJlc3VsdC52YWx1ZT8uc29tZUZpZWxkLm15SXRlbXMgPz8gW10pYCk7XG4gIHJldHVybiBjb21wdXRlZDUoKCkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgaWYgKHBpY2spIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gcGljayh2YWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcbiAgICAgICAgaWYgKGtleXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlW2tleXNbMF1dO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICB9KTtcbn1cblxuLy8gc3JjL3VzZUxvYWRpbmcudHNcbmltcG9ydCB7Y29tcHV0ZWQgYXMgY29tcHV0ZWQ2fSBmcm9tIFwidnVlLWRlbWlcIjtcbmZ1bmN0aW9uIHVzZVF1ZXJ5TG9hZGluZygpIHtcbiAgY29uc3Qge3RyYWNraW5nfSA9IGdldEN1cnJlbnRUcmFja2luZygpO1xuICByZXR1cm4gY29tcHV0ZWQ2KCgpID0+IHRyYWNraW5nLnF1ZXJpZXMudmFsdWUgPiAwKTtcbn1cbmZ1bmN0aW9uIHVzZU11dGF0aW9uTG9hZGluZygpIHtcbiAgY29uc3Qge3RyYWNraW5nfSA9IGdldEN1cnJlbnRUcmFja2luZygpO1xuICByZXR1cm4gY29tcHV0ZWQ2KCgpID0+IHRyYWNraW5nLm11dGF0aW9ucy52YWx1ZSA+IDApO1xufVxuZnVuY3Rpb24gdXNlU3Vic2NyaXB0aW9uTG9hZGluZygpIHtcbiAgY29uc3Qge3RyYWNraW5nfSA9IGdldEN1cnJlbnRUcmFja2luZygpO1xuICByZXR1cm4gY29tcHV0ZWQ2KCgpID0+IHRyYWNraW5nLnN1YnNjcmlwdGlvbnMudmFsdWUgPiAwKTtcbn1cbmZ1bmN0aW9uIHVzZUdsb2JhbFF1ZXJ5TG9hZGluZygpIHtcbiAgY29uc3Qge2FwcFRyYWNraW5nfSA9IGdldEFwcFRyYWNraW5nKCk7XG4gIHJldHVybiBjb21wdXRlZDYoKCkgPT4gYXBwVHJhY2tpbmcucXVlcmllcy52YWx1ZSA+IDApO1xufVxuZnVuY3Rpb24gdXNlR2xvYmFsTXV0YXRpb25Mb2FkaW5nKCkge1xuICBjb25zdCB7YXBwVHJhY2tpbmd9ID0gZ2V0QXBwVHJhY2tpbmcoKTtcbiAgcmV0dXJuIGNvbXB1dGVkNigoKSA9PiBhcHBUcmFja2luZy5tdXRhdGlvbnMudmFsdWUgPiAwKTtcbn1cbmZ1bmN0aW9uIHVzZUdsb2JhbFN1YnNjcmlwdGlvbkxvYWRpbmcoKSB7XG4gIGNvbnN0IHthcHBUcmFja2luZ30gPSBnZXRBcHBUcmFja2luZygpO1xuICByZXR1cm4gY29tcHV0ZWQ2KCgpID0+IGFwcFRyYWNraW5nLnN1YnNjcmlwdGlvbnMudmFsdWUgPiAwKTtcbn1cbmV4cG9ydCB7XG4gIEFwb2xsb0NsaWVudHMsXG4gIERlZmF1bHRBcG9sbG9DbGllbnQsXG4gIHByb3ZpZGVBcG9sbG9DbGllbnQsXG4gIHByb3ZpZGVBcG9sbG9DbGllbnRzLFxuICB1c2VBcG9sbG9DbGllbnQsXG4gIHVzZUdsb2JhbE11dGF0aW9uTG9hZGluZyxcbiAgdXNlR2xvYmFsUXVlcnlMb2FkaW5nLFxuICB1c2VHbG9iYWxTdWJzY3JpcHRpb25Mb2FkaW5nLFxuICB1c2VMYXp5UXVlcnksXG4gIHVzZU11dGF0aW9uLFxuICB1c2VNdXRhdGlvbkxvYWRpbmcsXG4gIHVzZVF1ZXJ5LFxuICB1c2VRdWVyeUxvYWRpbmcsXG4gIHVzZVJlc3VsdCxcbiAgdXNlU3Vic2NyaXB0aW9uLFxuICB1c2VTdWJzY3JpcHRpb25Mb2FkaW5nXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiaW1wb3J0IHsgX19hc3NpZ24sIF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgcHJpbnQgfSBmcm9tIFwiZ3JhcGhxbFwiO1xuaW1wb3J0IHsgQXBvbGxvTGluayB9IGZyb20gXCIuLi9jb3JlL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBpc05vbk51bGxPYmplY3QsIE9ic2VydmFibGUgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBBcG9sbG9FcnJvciB9IGZyb20gXCIuLi8uLi9lcnJvcnMvaW5kZXguanNcIjtcbmZ1bmN0aW9uIGlzTGlrZUNsb3NlRXZlbnQodmFsKSB7XG4gICAgcmV0dXJuIGlzTm9uTnVsbE9iamVjdCh2YWwpICYmIFwiY29kZVwiIGluIHZhbCAmJiBcInJlYXNvblwiIGluIHZhbDtcbn1cbmZ1bmN0aW9uIGlzTGlrZUVycm9yRXZlbnQoZXJyKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiBpc05vbk51bGxPYmplY3QoZXJyKSAmJiAoKF9hID0gZXJyLnRhcmdldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlYWR5U3RhdGUpID09PSBXZWJTb2NrZXQuQ0xPU0VEO1xufVxudmFyIEdyYXBoUUxXc0xpbmsgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhHcmFwaFFMV3NMaW5rLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEdyYXBoUUxXc0xpbmsoY2xpZW50KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmNsaWVudCA9IGNsaWVudDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBHcmFwaFFMV3NMaW5rLnByb3RvdHlwZS5yZXF1ZXN0ID0gZnVuY3Rpb24gKG9wZXJhdGlvbikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuY2xpZW50LnN1YnNjcmliZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3BlcmF0aW9uKSwgeyBxdWVyeTogcHJpbnQob3BlcmF0aW9uLnF1ZXJ5KSB9KSwge1xuICAgICAgICAgICAgICAgIG5leHQ6IG9ic2VydmVyLm5leHQuYmluZChvYnNlcnZlciksXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IG9ic2VydmVyLmNvbXBsZXRlLmJpbmQob2JzZXJ2ZXIpLFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpa2VDbG9zZSA9IGlzTGlrZUNsb3NlRXZlbnQoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpa2VDbG9zZSB8fCBpc0xpa2VFcnJvckV2ZW50KGVycikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5lcnJvcihuZXcgRXJyb3IoXCJTb2NrZXQgY2xvc2VkXCIuY29uY2F0KGxpa2VDbG9zZSA/IFwiIHdpdGggZXZlbnQgXCIuY29uY2F0KGVyci5jb2RlKSA6IFwiXCIpLmNvbmNhdChsaWtlQ2xvc2UgPyBcIiBcIi5jb25jYXQoZXJyLnJlYXNvbikgOiBcIlwiKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5lcnJvcihuZXcgQXBvbGxvRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JhcGhRTEVycm9yczogQXJyYXkuaXNBcnJheShlcnIpID8gZXJyIDogW2Vycl0sXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIEdyYXBoUUxXc0xpbms7XG59KEFwb2xsb0xpbmspKTtcbmV4cG9ydCB7IEdyYXBoUUxXc0xpbmsgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsIi8qKiBAcHJpdmF0ZSAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZGVkVHlwZW9mKHZhbCkge1xuICAgIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuICdudWxsJztcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgICByZXR1cm4gJ2FycmF5JztcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVvZiB2YWw7XG59XG4vKiogQHByaXZhdGUgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2YWwpIHtcbiAgICByZXR1cm4gZXh0ZW5kZWRUeXBlb2YodmFsKSA9PT0gJ29iamVjdCc7XG59XG4vKiogQHByaXZhdGUgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FzeW5jSXRlcmFibGUodmFsKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBPYmplY3QodmFsKVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPT09ICdmdW5jdGlvbic7XG59XG4vKiogQHByaXZhdGUgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FzeW5jR2VuZXJhdG9yKHZhbCkge1xuICAgIHJldHVybiAoaXNPYmplY3QodmFsKSAmJlxuICAgICAgICB0eXBlb2YgT2JqZWN0KHZhbClbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgIHR5cGVvZiB2YWwucmV0dXJuID09PSAnZnVuY3Rpb24nXG4gICAgLy8gZm9yIGxhenkgb25lcywgd2Ugb25seSBuZWVkIHRoZSByZXR1cm4gYW55d2F5XG4gICAgLy8gdHlwZW9mIHZhbC50aHJvdyA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIC8vIHR5cGVvZiB2YWwubmV4dCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICk7XG59XG4vKiogQHByaXZhdGUgKi9cbmV4cG9ydCBmdW5jdGlvbiBhcmVHcmFwaFFMRXJyb3JzKG9iaikge1xuICAgIHJldHVybiAoQXJyYXkuaXNBcnJheShvYmopICYmXG4gICAgICAgIC8vIG11c3QgYmUgYXQgbGVhc3Qgb25lIGVycm9yXG4gICAgICAgIG9iai5sZW5ndGggPiAwICYmXG4gICAgICAgIC8vIGVycm9yIGhhcyBhdCBsZWFzdCBhIG1lc3NhZ2VcbiAgICAgICAgb2JqLmV2ZXJ5KChvYikgPT4gJ21lc3NhZ2UnIGluIG9iKSk7XG59XG4vKipcbiAqIExpbWl0cyB0aGUgV2ViU29ja2V0IGNsb3NlIGV2ZW50IHJlYXNvbiB0byBub3QgZXhjZWVkIGEgbGVuZ3RoIG9mIG9uZSBmcmFtZS5cbiAqIFJlZmVyZW5jZTogaHR0cHM6Ly9kYXRhdHJhY2tlci5pZXRmLm9yZy9kb2MvaHRtbC9yZmM2NDU1I3NlY3Rpb24tNS4yLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW1pdENsb3NlUmVhc29uKHJlYXNvbiwgd2hlblRvb0xvbmcpIHtcbiAgICByZXR1cm4gcmVhc29uLmxlbmd0aCA8IDEyNCA/IHJlYXNvbiA6IHdoZW5Ub29Mb25nO1xufVxuIiwiLyoqXG4gKlxuICogY29tbW9uXG4gKlxuICovXG5pbXBvcnQgeyBhcmVHcmFwaFFMRXJyb3JzLCBleHRlbmRlZFR5cGVvZiwgaXNPYmplY3QgfSBmcm9tICcuL3V0aWxzLm1qcyc7XG4vKipcbiAqIFRoZSBXZWJTb2NrZXQgc3ViLXByb3RvY29sIHVzZWQgZm9yIHRoZSBbR3JhcGhRTCBvdmVyIFdlYlNvY2tldCBQcm90b2NvbF0oL1BST1RPQ09MLm1kKS5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29tbW9uXG4gKi9cbmV4cG9ydCBjb25zdCBHUkFQSFFMX1RSQU5TUE9SVF9XU19QUk9UT0NPTCA9ICdncmFwaHFsLXRyYW5zcG9ydC13cyc7XG4vKipcbiAqIFRoZSBkZXByZWNhdGVkIHN1YnByb3RvY29sIHVzZWQgYnkgW3N1YnNjcmlwdGlvbnMtdHJhbnNwb3J0LXdzXShodHRwczovL2dpdGh1Yi5jb20vYXBvbGxvZ3JhcGhxbC9zdWJzY3JpcHRpb25zLXRyYW5zcG9ydC13cykuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IERFUFJFQ0FURURfR1JBUEhRTF9XU19QUk9UT0NPTCA9ICdncmFwaHFsLXdzJztcbi8qKlxuICogYGdyYXBocWwtd3NgIGV4cGVjdGVkIGFuZCBzdGFuZGFyZCBjbG9zZSBjb2RlcyBvZiB0aGUgW0dyYXBoUUwgb3ZlciBXZWJTb2NrZXQgUHJvdG9jb2xdKC9QUk9UT0NPTC5tZCkuXG4gKlxuICogQGNhdGVnb3J5IENvbW1vblxuICovXG5leHBvcnQgdmFyIENsb3NlQ29kZTtcbihmdW5jdGlvbiAoQ2xvc2VDb2RlKSB7XG4gICAgQ2xvc2VDb2RlW0Nsb3NlQ29kZVtcIkludGVybmFsU2VydmVyRXJyb3JcIl0gPSA0NTAwXSA9IFwiSW50ZXJuYWxTZXJ2ZXJFcnJvclwiO1xuICAgIENsb3NlQ29kZVtDbG9zZUNvZGVbXCJJbnRlcm5hbENsaWVudEVycm9yXCJdID0gNDAwNV0gPSBcIkludGVybmFsQ2xpZW50RXJyb3JcIjtcbiAgICBDbG9zZUNvZGVbQ2xvc2VDb2RlW1wiQmFkUmVxdWVzdFwiXSA9IDQ0MDBdID0gXCJCYWRSZXF1ZXN0XCI7XG4gICAgQ2xvc2VDb2RlW0Nsb3NlQ29kZVtcIkJhZFJlc3BvbnNlXCJdID0gNDAwNF0gPSBcIkJhZFJlc3BvbnNlXCI7XG4gICAgLyoqIFRyaWVkIHN1YnNjcmliaW5nIGJlZm9yZSBjb25uZWN0IGFjayAqL1xuICAgIENsb3NlQ29kZVtDbG9zZUNvZGVbXCJVbmF1dGhvcml6ZWRcIl0gPSA0NDAxXSA9IFwiVW5hdXRob3JpemVkXCI7XG4gICAgQ2xvc2VDb2RlW0Nsb3NlQ29kZVtcIkZvcmJpZGRlblwiXSA9IDQ0MDNdID0gXCJGb3JiaWRkZW5cIjtcbiAgICBDbG9zZUNvZGVbQ2xvc2VDb2RlW1wiU3VicHJvdG9jb2xOb3RBY2NlcHRhYmxlXCJdID0gNDQwNl0gPSBcIlN1YnByb3RvY29sTm90QWNjZXB0YWJsZVwiO1xuICAgIENsb3NlQ29kZVtDbG9zZUNvZGVbXCJDb25uZWN0aW9uSW5pdGlhbGlzYXRpb25UaW1lb3V0XCJdID0gNDQwOF0gPSBcIkNvbm5lY3Rpb25Jbml0aWFsaXNhdGlvblRpbWVvdXRcIjtcbiAgICBDbG9zZUNvZGVbQ2xvc2VDb2RlW1wiQ29ubmVjdGlvbkFja25vd2xlZGdlbWVudFRpbWVvdXRcIl0gPSA0NTA0XSA9IFwiQ29ubmVjdGlvbkFja25vd2xlZGdlbWVudFRpbWVvdXRcIjtcbiAgICAvKiogU3Vic2NyaWJlciBkaXN0aW5jdGlvbiBpcyB2ZXJ5IGltcG9ydGFudCAqL1xuICAgIENsb3NlQ29kZVtDbG9zZUNvZGVbXCJTdWJzY3JpYmVyQWxyZWFkeUV4aXN0c1wiXSA9IDQ0MDldID0gXCJTdWJzY3JpYmVyQWxyZWFkeUV4aXN0c1wiO1xuICAgIENsb3NlQ29kZVtDbG9zZUNvZGVbXCJUb29NYW55SW5pdGlhbGlzYXRpb25SZXF1ZXN0c1wiXSA9IDQ0MjldID0gXCJUb29NYW55SW5pdGlhbGlzYXRpb25SZXF1ZXN0c1wiO1xufSkoQ2xvc2VDb2RlIHx8IChDbG9zZUNvZGUgPSB7fSkpO1xuLyoqXG4gKiBUeXBlcyBvZiBtZXNzYWdlcyBhbGxvd2VkIHRvIGJlIHNlbnQgYnkgdGhlIGNsaWVudC9zZXJ2ZXIgb3ZlciB0aGUgV1MgcHJvdG9jb2wuXG4gKlxuICogQGNhdGVnb3J5IENvbW1vblxuICovXG5leHBvcnQgdmFyIE1lc3NhZ2VUeXBlO1xuKGZ1bmN0aW9uIChNZXNzYWdlVHlwZSkge1xuICAgIE1lc3NhZ2VUeXBlW1wiQ29ubmVjdGlvbkluaXRcIl0gPSBcImNvbm5lY3Rpb25faW5pdFwiO1xuICAgIE1lc3NhZ2VUeXBlW1wiQ29ubmVjdGlvbkFja1wiXSA9IFwiY29ubmVjdGlvbl9hY2tcIjtcbiAgICBNZXNzYWdlVHlwZVtcIlBpbmdcIl0gPSBcInBpbmdcIjtcbiAgICBNZXNzYWdlVHlwZVtcIlBvbmdcIl0gPSBcInBvbmdcIjtcbiAgICBNZXNzYWdlVHlwZVtcIlN1YnNjcmliZVwiXSA9IFwic3Vic2NyaWJlXCI7XG4gICAgTWVzc2FnZVR5cGVbXCJOZXh0XCJdID0gXCJuZXh0XCI7XG4gICAgTWVzc2FnZVR5cGVbXCJFcnJvclwiXSA9IFwiZXJyb3JcIjtcbiAgICBNZXNzYWdlVHlwZVtcIkNvbXBsZXRlXCJdID0gXCJjb21wbGV0ZVwiO1xufSkoTWVzc2FnZVR5cGUgfHwgKE1lc3NhZ2VUeXBlID0ge30pKTtcbi8qKlxuICogVmFsaWRhdGVzIHRoZSBtZXNzYWdlIGFnYWluc3QgdGhlIEdyYXBoUUwgb3ZlciBXZWJTb2NrZXQgUHJvdG9jb2wuXG4gKlxuICogSW52YWxpZCBtZXNzYWdlcyB3aWxsIHRocm93IGRlc2NyaXB0aXZlIGVycm9ycy5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29tbW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZU1lc3NhZ2UodmFsKSB7XG4gICAgaWYgKCFpc09iamVjdCh2YWwpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTWVzc2FnZSBpcyBleHBlY3RlZCB0byBiZSBhbiBvYmplY3QsIGJ1dCBnb3QgJHtleHRlbmRlZFR5cGVvZih2YWwpfWApO1xuICAgIH1cbiAgICBpZiAoIXZhbC50eXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTWVzc2FnZSBpcyBtaXNzaW5nIHRoZSAndHlwZScgcHJvcGVydHlgKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWwudHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNZXNzYWdlIGlzIGV4cGVjdHMgdGhlICd0eXBlJyBwcm9wZXJ0eSB0byBiZSBhIHN0cmluZywgYnV0IGdvdCAke2V4dGVuZGVkVHlwZW9mKHZhbC50eXBlKX1gKTtcbiAgICB9XG4gICAgc3dpdGNoICh2YWwudHlwZSkge1xuICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLkNvbm5lY3Rpb25Jbml0OlxuICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLkNvbm5lY3Rpb25BY2s6XG4gICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuUGluZzpcbiAgICAgICAgY2FzZSBNZXNzYWdlVHlwZS5Qb25nOiB7XG4gICAgICAgICAgICBpZiAodmFsLnBheWxvYWQgIT0gbnVsbCAmJiAhaXNPYmplY3QodmFsLnBheWxvYWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcIiR7dmFsLnR5cGV9XCIgbWVzc2FnZSBleHBlY3RzIHRoZSAncGF5bG9hZCcgcHJvcGVydHkgdG8gYmUgYW4gb2JqZWN0IG9yIG51bGxpc2ggb3IgbWlzc2luZywgYnV0IGdvdCBcIiR7dmFsLnBheWxvYWR9XCJgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuU3Vic2NyaWJlOiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbC5pZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiJHt2YWwudHlwZX1cIiBtZXNzYWdlIGV4cGVjdHMgdGhlICdpZCcgcHJvcGVydHkgdG8gYmUgYSBzdHJpbmcsIGJ1dCBnb3QgJHtleHRlbmRlZFR5cGVvZih2YWwuaWQpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF2YWwuaWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiJHt2YWwudHlwZX1cIiBtZXNzYWdlIHJlcXVpcmVzIGEgbm9uLWVtcHR5ICdpZCcgcHJvcGVydHlgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNPYmplY3QodmFsLnBheWxvYWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcIiR7dmFsLnR5cGV9XCIgbWVzc2FnZSBleHBlY3RzIHRoZSAncGF5bG9hZCcgcHJvcGVydHkgdG8gYmUgYW4gb2JqZWN0LCBidXQgZ290ICR7ZXh0ZW5kZWRUeXBlb2YodmFsLnBheWxvYWQpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwucGF5bG9hZC5xdWVyeSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiJHt2YWwudHlwZX1cIiBtZXNzYWdlIHBheWxvYWQgZXhwZWN0cyB0aGUgJ3F1ZXJ5JyBwcm9wZXJ0eSB0byBiZSBhIHN0cmluZywgYnV0IGdvdCAke2V4dGVuZGVkVHlwZW9mKHZhbC5wYXlsb2FkLnF1ZXJ5KX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWwucGF5bG9hZC52YXJpYWJsZXMgIT0gbnVsbCAmJiAhaXNPYmplY3QodmFsLnBheWxvYWQudmFyaWFibGVzKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXCIke3ZhbC50eXBlfVwiIG1lc3NhZ2UgcGF5bG9hZCBleHBlY3RzIHRoZSAndmFyaWFibGVzJyBwcm9wZXJ0eSB0byBiZSBhIGFuIG9iamVjdCBvciBudWxsaXNoIG9yIG1pc3NpbmcsIGJ1dCBnb3QgJHtleHRlbmRlZFR5cGVvZih2YWwucGF5bG9hZC52YXJpYWJsZXMpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbC5wYXlsb2FkLm9wZXJhdGlvbk5hbWUgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIGV4dGVuZGVkVHlwZW9mKHZhbC5wYXlsb2FkLm9wZXJhdGlvbk5hbWUpICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXCIke3ZhbC50eXBlfVwiIG1lc3NhZ2UgcGF5bG9hZCBleHBlY3RzIHRoZSAnb3BlcmF0aW9uTmFtZScgcHJvcGVydHkgdG8gYmUgYSBzdHJpbmcgb3IgbnVsbGlzaCBvciBtaXNzaW5nLCBidXQgZ290ICR7ZXh0ZW5kZWRUeXBlb2YodmFsLnBheWxvYWQub3BlcmF0aW9uTmFtZSl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsLnBheWxvYWQuZXh0ZW5zaW9ucyAhPSBudWxsICYmICFpc09iamVjdCh2YWwucGF5bG9hZC5leHRlbnNpb25zKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXCIke3ZhbC50eXBlfVwiIG1lc3NhZ2UgcGF5bG9hZCBleHBlY3RzIHRoZSAnZXh0ZW5zaW9ucycgcHJvcGVydHkgdG8gYmUgYSBhbiBvYmplY3Qgb3IgbnVsbGlzaCBvciBtaXNzaW5nLCBidXQgZ290ICR7ZXh0ZW5kZWRUeXBlb2YodmFsLnBheWxvYWQuZXh0ZW5zaW9ucyl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLk5leHQ6IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsLmlkICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXCIke3ZhbC50eXBlfVwiIG1lc3NhZ2UgZXhwZWN0cyB0aGUgJ2lkJyBwcm9wZXJ0eSB0byBiZSBhIHN0cmluZywgYnV0IGdvdCAke2V4dGVuZGVkVHlwZW9mKHZhbC5pZCl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXZhbC5pZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXCIke3ZhbC50eXBlfVwiIG1lc3NhZ2UgcmVxdWlyZXMgYSBub24tZW1wdHkgJ2lkJyBwcm9wZXJ0eWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc09iamVjdCh2YWwucGF5bG9hZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiJHt2YWwudHlwZX1cIiBtZXNzYWdlIGV4cGVjdHMgdGhlICdwYXlsb2FkJyBwcm9wZXJ0eSB0byBiZSBhbiBvYmplY3QsIGJ1dCBnb3QgJHtleHRlbmRlZFR5cGVvZih2YWwucGF5bG9hZCl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLkVycm9yOiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbC5pZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiJHt2YWwudHlwZX1cIiBtZXNzYWdlIGV4cGVjdHMgdGhlICdpZCcgcHJvcGVydHkgdG8gYmUgYSBzdHJpbmcsIGJ1dCBnb3QgJHtleHRlbmRlZFR5cGVvZih2YWwuaWQpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF2YWwuaWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiJHt2YWwudHlwZX1cIiBtZXNzYWdlIHJlcXVpcmVzIGEgbm9uLWVtcHR5ICdpZCcgcHJvcGVydHlgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghYXJlR3JhcGhRTEVycm9ycyh2YWwucGF5bG9hZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiJHt2YWwudHlwZX1cIiBtZXNzYWdlIGV4cGVjdHMgdGhlICdwYXlsb2FkJyBwcm9wZXJ0eSB0byBiZSBhbiBhcnJheSBvZiBHcmFwaFFMIGVycm9ycywgYnV0IGdvdCAke0pTT04uc3RyaW5naWZ5KHZhbC5wYXlsb2FkKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuQ29tcGxldGU6IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsLmlkICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXCIke3ZhbC50eXBlfVwiIG1lc3NhZ2UgZXhwZWN0cyB0aGUgJ2lkJyBwcm9wZXJ0eSB0byBiZSBhIHN0cmluZywgYnV0IGdvdCAke2V4dGVuZGVkVHlwZW9mKHZhbC5pZCl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXZhbC5pZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXCIke3ZhbC50eXBlfVwiIG1lc3NhZ2UgcmVxdWlyZXMgYSBub24tZW1wdHkgJ2lkJyBwcm9wZXJ0eWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBtZXNzYWdlICd0eXBlJyBwcm9wZXJ0eSBcIiR7dmFsLnR5cGV9XCJgKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbn1cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBwcm92aWRlZCB2YWx1ZSBpcyBhIHZhbGlkIEdyYXBoUUwgb3ZlciBXZWJTb2NrZXQgbWVzc2FnZS5cbiAqXG4gKiBAZGVwcmVjYXRlZCBVc2UgYHZhbGlkYXRlTWVzc2FnZWAgaW5zdGVhZC5cbiAqXG4gKiBAY2F0ZWdvcnkgQ29tbW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc01lc3NhZ2UodmFsKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFsaWRhdGVNZXNzYWdlKHZhbCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbi8qKlxuICogUGFyc2VzIHRoZSByYXcgd2Vic29ja2V0IG1lc3NhZ2UgZGF0YSB0byBhIHZhbGlkIG1lc3NhZ2UuXG4gKlxuICogQGNhdGVnb3J5IENvbW1vblxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNZXNzYWdlKGRhdGEsIHJldml2ZXIpIHtcbiAgICByZXR1cm4gdmFsaWRhdGVNZXNzYWdlKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoZGF0YSwgcmV2aXZlcikgOiBkYXRhKTtcbn1cbi8qKlxuICogU3RyaW5naWZpZXMgYSB2YWxpZCBtZXNzYWdlIHJlYWR5IHRvIGJlIHNlbnQgdGhyb3VnaCB0aGUgc29ja2V0LlxuICpcbiAqIEBjYXRlZ29yeSBDb21tb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeU1lc3NhZ2UobXNnLCByZXBsYWNlcikge1xuICAgIHZhbGlkYXRlTWVzc2FnZShtc2cpO1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShtc2csIHJlcGxhY2VyKTtcbn1cbiIsIi8qKlxuICpcbiAqIGNsaWVudFxuICpcbiAqL1xuaW1wb3J0IHsgR1JBUEhRTF9UUkFOU1BPUlRfV1NfUFJPVE9DT0wsIENsb3NlQ29kZSwgTWVzc2FnZVR5cGUsIHBhcnNlTWVzc2FnZSwgc3RyaW5naWZ5TWVzc2FnZSwgfSBmcm9tICcuL2NvbW1vbi5tanMnO1xuaW1wb3J0IHsgaXNPYmplY3QsIGxpbWl0Q2xvc2VSZWFzb24gfSBmcm9tICcuL3V0aWxzLm1qcyc7XG4vKiogVGhpcyBmaWxlIGlzIHRoZSBlbnRyeSBwb2ludCBmb3IgYnJvd3NlcnMsIHJlLWV4cG9ydCBjb21tb24gZWxlbWVudHMuICovXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbi5tanMnO1xuLyoqXG4gKiBDcmVhdGVzIGEgZGlzcG9zYWJsZSBHcmFwaFFMIG92ZXIgV2ViU29ja2V0IGNsaWVudC5cbiAqXG4gKiBAY2F0ZWdvcnkgQ2xpZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDbGllbnQob3B0aW9ucykge1xuICAgIGNvbnN0IHsgdXJsLCBjb25uZWN0aW9uUGFyYW1zLCBsYXp5ID0gdHJ1ZSwgb25Ob25MYXp5RXJyb3IgPSBjb25zb2xlLmVycm9yLCBsYXp5Q2xvc2VUaW1lb3V0OiBsYXp5Q2xvc2VUaW1lb3V0TXMgPSAwLCBrZWVwQWxpdmUgPSAwLCBkaXNhYmxlUG9uZywgY29ubmVjdGlvbkFja1dhaXRUaW1lb3V0ID0gMCwgcmV0cnlBdHRlbXB0cyA9IDUsIHJldHJ5V2FpdCA9IGFzeW5jIGZ1bmN0aW9uIHJhbmRvbWlzZWRFeHBvbmVudGlhbEJhY2tvZmYocmV0cmllcykge1xuICAgICAgICBsZXQgcmV0cnlEZWxheSA9IDEwMDA7IC8vIHN0YXJ0IHdpdGggMXMgZGVsYXlcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXRyaWVzOyBpKyspIHtcbiAgICAgICAgICAgIHJldHJ5RGVsYXkgKj0gMjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCByZXRyeURlbGF5ICtcbiAgICAgICAgICAgIC8vIGFkZCByYW5kb20gdGltZW91dCBmcm9tIDMwMG1zIHRvIDNzXG4gICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoMzAwMCAtIDMwMCkgKyAzMDApKSk7XG4gICAgfSwgc2hvdWxkUmV0cnkgPSBpc0xpa2VDbG9zZUV2ZW50LCBpc0ZhdGFsQ29ubmVjdGlvblByb2JsZW0sIG9uLCB3ZWJTb2NrZXRJbXBsLCBcbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSB2NCBVVUlEIHRvIGJlIHVzZWQgYXMgdGhlIElEIHVzaW5nIGBNYXRoYFxuICAgICAqIGFzIHRoZSByYW5kb20gbnVtYmVyIGdlbmVyYXRvci4gU3VwcGx5IHlvdXIgb3duIGdlbmVyYXRvclxuICAgICAqIGluIGNhc2UgeW91IG5lZWQgbW9yZSB1bmlxdWVuZXNzLlxuICAgICAqXG4gICAgICogUmVmZXJlbmNlOiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9qZWQvOTgyODgzXG4gICAgICovXG4gICAgZ2VuZXJhdGVJRCA9IGZ1bmN0aW9uIGdlbmVyYXRlVVVJRCgpIHtcbiAgICAgICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgKGMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSAoTWF0aC5yYW5kb20oKSAqIDE2KSB8IDAsIHYgPSBjID09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XG4gICAgICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gICAgICAgIH0pO1xuICAgIH0sIGpzb25NZXNzYWdlUmVwbGFjZXI6IHJlcGxhY2VyLCBqc29uTWVzc2FnZVJldml2ZXI6IHJldml2ZXIsIH0gPSBvcHRpb25zO1xuICAgIGxldCB3cztcbiAgICBpZiAod2ViU29ja2V0SW1wbCkge1xuICAgICAgICBpZiAoIWlzV2ViU29ja2V0KHdlYlNvY2tldEltcGwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgV2ViU29ja2V0IGltcGxlbWVudGF0aW9uIHByb3ZpZGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgd3MgPSB3ZWJTb2NrZXRJbXBsO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgV2ViU29ja2V0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3cyA9IFdlYlNvY2tldDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgd3MgPVxuICAgICAgICAgICAgZ2xvYmFsLldlYlNvY2tldCB8fFxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IFN1cHBvcnQgbW9yZSBicm93c2Vyc1xuICAgICAgICAgICAgICAgIGdsb2JhbC5Nb3pXZWJTb2NrZXQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHdzID1cbiAgICAgICAgICAgIHdpbmRvdy5XZWJTb2NrZXQgfHxcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBTdXBwb3J0IG1vcmUgYnJvd3NlcnNcbiAgICAgICAgICAgICAgICB3aW5kb3cuTW96V2ViU29ja2V0O1xuICAgIH1cbiAgICBpZiAoIXdzKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXZWJTb2NrZXQgaW1wbGVtZW50YXRpb24gbWlzc2luZzsgb24gTm9kZSB5b3UgY2FuIGBpbXBvcnQgV2ViU29ja2V0IGZyb20gJ3dzJztgIGFuZCBwYXNzIGB3ZWJTb2NrZXRJbXBsOiBXZWJTb2NrZXRgIHRvIGBjcmVhdGVDbGllbnRgXCIpO1xuICAgIGNvbnN0IFdlYlNvY2tldEltcGwgPSB3cztcbiAgICAvLyB3ZWJzb2NrZXQgc3RhdHVzIGVtaXR0ZXIsIHN1YnNjcmlwdGlvbnMgYXJlIGhhbmRsZWQgZGlmZmVyZW50bHlcbiAgICBjb25zdCBlbWl0dGVyID0gKCgpID0+IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9ICgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgb24oaWQsIGxpc3RlbmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyc1tpZF0gPSBsaXN0ZW5lcjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBsaXN0ZW5lcnNbaWRdO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW1pdChtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCdpZCcgaW4gbWVzc2FnZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIChfYSA9IGxpc3RlbmVyc1ttZXNzYWdlLmlkXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwobGlzdGVuZXJzLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkoKTtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0ge1xuICAgICAgICAgICAgY29ubmVjdGluZzogKG9uID09PSBudWxsIHx8IG9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbi5jb25uZWN0aW5nKSA/IFtvbi5jb25uZWN0aW5nXSA6IFtdLFxuICAgICAgICAgICAgb3BlbmVkOiAob24gPT09IG51bGwgfHwgb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uLm9wZW5lZCkgPyBbb24ub3BlbmVkXSA6IFtdLFxuICAgICAgICAgICAgY29ubmVjdGVkOiAob24gPT09IG51bGwgfHwgb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uLmNvbm5lY3RlZCkgPyBbb24uY29ubmVjdGVkXSA6IFtdLFxuICAgICAgICAgICAgcGluZzogKG9uID09PSBudWxsIHx8IG9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbi5waW5nKSA/IFtvbi5waW5nXSA6IFtdLFxuICAgICAgICAgICAgcG9uZzogKG9uID09PSBudWxsIHx8IG9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbi5wb25nKSA/IFtvbi5wb25nXSA6IFtdLFxuICAgICAgICAgICAgbWVzc2FnZTogKG9uID09PSBudWxsIHx8IG9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbi5tZXNzYWdlKSA/IFttZXNzYWdlLmVtaXQsIG9uLm1lc3NhZ2VdIDogW21lc3NhZ2UuZW1pdF0sXG4gICAgICAgICAgICBjbG9zZWQ6IChvbiA9PT0gbnVsbCB8fCBvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb24uY2xvc2VkKSA/IFtvbi5jbG9zZWRdIDogW10sXG4gICAgICAgICAgICBlcnJvcjogKG9uID09PSBudWxsIHx8IG9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbi5lcnJvcikgPyBbb24uZXJyb3JdIDogW10sXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvbk1lc3NhZ2U6IG1lc3NhZ2Uub24sXG4gICAgICAgICAgICBvbihldmVudCwgbGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsID0gbGlzdGVuZXJzW2V2ZW50XTtcbiAgICAgICAgICAgICAgICBsLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGwuc3BsaWNlKGwuaW5kZXhPZihsaXN0ZW5lciksIDEpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW1pdChldmVudCwgLi4uYXJncykge1xuICAgICAgICAgICAgICAgIC8vIHdlIGNvcHkgdGhlIGxpc3RlbmVycyBzbyB0aGF0IHVubGlzdGVucyBkb250IFwicHVsbCB0aGUgcnVnIHVuZGVyIG91ciBmZWV0XCJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIFsuLi5saXN0ZW5lcnNbZXZlbnRdXSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBUaGUgYXJncyBzaG91bGQgZml0XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfSkoKTtcbiAgICAvLyBpbnZva2VzIHRoZSBjYWxsYmFjayBlaXRoZXIgd2hlbiBhbiBlcnJvciBvciBjbG9zZWQgZXZlbnQgaXMgZW1pdHRlZCxcbiAgICAvLyBmaXJzdCBvbmUgdGhhdCBnZXRzIGNhbGxlZCBwcmV2YWlscywgb3RoZXIgZW1pc3Npb25zIGFyZSBpZ25vcmVkXG4gICAgZnVuY3Rpb24gZXJyb3JPckNsb3NlZChjYikge1xuICAgICAgICBjb25zdCBsaXN0ZW5pbmcgPSBbXG4gICAgICAgICAgICAvLyBlcnJvcnMgYXJlIGZhdGFsIGFuZCBtb3JlIGNyaXRpY2FsIHRoYW4gY2xvc2UgZXZlbnRzLCB0aHJvdyB0aGVtIGZpcnN0XG4gICAgICAgICAgICBlbWl0dGVyLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5pbmcuZm9yRWFjaCgodW5saXN0ZW4pID0+IHVubGlzdGVuKCkpO1xuICAgICAgICAgICAgICAgIGNiKGVycik7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIC8vIGNsb3NlcyBjYW4gYmUgZ3JhY2VmdWwgYW5kIG5vdCBmYXRhbCwgdGhyb3cgdGhlbSBzZWNvbmQgKGlmIGVycm9yIGRpZG50IHRocm93KVxuICAgICAgICAgICAgZW1pdHRlci5vbignY2xvc2VkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbGlzdGVuaW5nLmZvckVhY2goKHVubGlzdGVuKSA9PiB1bmxpc3RlbigpKTtcbiAgICAgICAgICAgICAgICBjYihldmVudCk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgbGV0IGNvbm5lY3RpbmcsIGxvY2tzID0gMCwgbGF6eUNsb3NlVGltZW91dCwgcmV0cnlpbmcgPSBmYWxzZSwgcmV0cmllcyA9IDAsIGRpc3Bvc2VkID0gZmFsc2U7XG4gICAgYXN5bmMgZnVuY3Rpb24gY29ubmVjdCgpIHtcbiAgICAgICAgLy8gY2xlYXIgdGhlIGxhenkgY2xvc2UgdGltZW91dCBpbW1lZGlhdGVsbHkgc28gdGhhdCBjbG9zZSBnZXRzIGRlYm91bmNlZFxuICAgICAgICAvLyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbmlzZGVuam8vZ3JhcGhxbC13cy9pc3N1ZXMvMzg4XG4gICAgICAgIGNsZWFyVGltZW91dChsYXp5Q2xvc2VUaW1lb3V0KTtcbiAgICAgICAgY29uc3QgW3NvY2tldCwgdGhyb3dPbkNsb3NlXSA9IGF3YWl0IChjb25uZWN0aW5nICE9PSBudWxsICYmIGNvbm5lY3RpbmcgIT09IHZvaWQgMCA/IGNvbm5lY3RpbmcgOiAoY29ubmVjdGluZyA9IG5ldyBQcm9taXNlKChjb25uZWN0ZWQsIGRlbmllZCkgPT4gKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXRyeWluZykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHJldHJ5V2FpdChyZXRyaWVzKTtcbiAgICAgICAgICAgICAgICAvLyBzdWJzY3JpcHRpb25zIG1pZ2h0IGNvbXBsZXRlIHdoaWxlIHdhaXRpbmcgZm9yIHJldHJ5XG4gICAgICAgICAgICAgICAgaWYgKCFsb2Nrcykge1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW5nID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVuaWVkKHsgY29kZTogMTAwMCwgcmVhc29uOiAnQWxsIFN1YnNjcmlwdGlvbnMgR29uZScgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHJpZXMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVtaXR0ZXIuZW1pdCgnY29ubmVjdGluZycpO1xuICAgICAgICAgICAgY29uc3Qgc29ja2V0ID0gbmV3IFdlYlNvY2tldEltcGwodHlwZW9mIHVybCA9PT0gJ2Z1bmN0aW9uJyA/IGF3YWl0IHVybCgpIDogdXJsLCBHUkFQSFFMX1RSQU5TUE9SVF9XU19QUk9UT0NPTCk7XG4gICAgICAgICAgICBsZXQgY29ubmVjdGlvbkFja1RpbWVvdXQsIHF1ZXVlZFBpbmc7XG4gICAgICAgICAgICBmdW5jdGlvbiBlbnF1ZXVlUGluZygpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNGaW5pdGUoa2VlcEFsaXZlKSAmJiBrZWVwQWxpdmUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChxdWV1ZWRQaW5nKTsgLy8gaW4gY2FzZSB3aGVyZSBhIHBvbmcgd2FzIHJlY2VpdmVkIGJlZm9yZSBhIHBpbmcgKHRoaXMgaXMgdmFsaWQgYmVoYXZpb3VyKVxuICAgICAgICAgICAgICAgICAgICBxdWV1ZWRQaW5nID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldEltcGwuT1BFTikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldC5zZW5kKHN0cmluZ2lmeU1lc3NhZ2UoeyB0eXBlOiBNZXNzYWdlVHlwZS5QaW5nIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ3BpbmcnLCBmYWxzZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwga2VlcEFsaXZlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlcnJvck9yQ2xvc2VkKChlcnJPckV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGluZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoY29ubmVjdGlvbkFja1RpbWVvdXQpO1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChxdWV1ZWRQaW5nKTtcbiAgICAgICAgICAgICAgICBkZW5pZWQoZXJyT3JFdmVudCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTGlrZUNsb3NlRXZlbnQoZXJyT3JFdmVudCkgJiYgZXJyT3JFdmVudC5jb2RlID09PSA0NDk5KSB7XG4gICAgICAgICAgICAgICAgICAgIHNvY2tldC5jbG9zZSg0NDk5LCAnVGVybWluYXRlZCcpOyAvLyBjbG9zZSBldmVudCBpcyBhcnRpZmljaWFsIGFuZCBlbWl0dGVkIG1hbnVhbGx5LCBzZWUgYENsaWVudC50ZXJtaW5hdGUoKWAgYmVsb3dcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0Lm9uZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBzb2NrZXQub25jbG9zZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzb2NrZXQub25lcnJvciA9IChlcnIpID0+IGVtaXR0ZXIuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgc29ja2V0Lm9uY2xvc2UgPSAoZXZlbnQpID0+IGVtaXR0ZXIuZW1pdCgnY2xvc2VkJywgZXZlbnQpO1xuICAgICAgICAgICAgc29ja2V0Lm9ub3BlbiA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ29wZW5lZCcsIHNvY2tldCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB0eXBlb2YgY29ubmVjdGlvblBhcmFtcyA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBhd2FpdCBjb25uZWN0aW9uUGFyYW1zKClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY29ubmVjdGlvblBhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgLy8gY29ubmVjdGlvblBhcmFtcyBtaWdodCB0YWtlIHRvbyBsb25nIGNhdXNpbmcgdGhlIHNlcnZlciB0byBraWNrIG9mZiB0aGUgY2xpZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBuZWNlc3NhcnkgZXJyb3IvY2xvc2UgZXZlbnQgaXMgYWxyZWFkeSByZXBvcnRlZCAtIHNpbXBseSBzdG9wIGV4ZWN1dGlvblxuICAgICAgICAgICAgICAgICAgICBpZiAoc29ja2V0LnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldEltcGwuT1BFTilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0LnNlbmQoc3RyaW5naWZ5TWVzc2FnZShwYXlsb2FkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBNZXNzYWdlVHlwZS5Db25uZWN0aW9uSW5pdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogTWVzc2FnZVR5cGUuQ29ubmVjdGlvbkluaXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF5bG9hZCBpcyBjb21wbGV0ZWx5IGFic2VudCBpZiBub3QgcHJvdmlkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlcGxhY2VyKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0Zpbml0ZShjb25uZWN0aW9uQWNrV2FpdFRpbWVvdXQpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uQWNrV2FpdFRpbWVvdXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uQWNrVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldC5jbG9zZShDbG9zZUNvZGUuQ29ubmVjdGlvbkFja25vd2xlZGdlbWVudFRpbWVvdXQsICdDb25uZWN0aW9uIGFja25vd2xlZGdlbWVudCB0aW1lb3V0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBjb25uZWN0aW9uQWNrV2FpdFRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVucXVldWVQaW5nKCk7IC8vIGVucXVldWUgcGluZyAobm9vcCBpZiBkaXNhYmxlZClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0LmNsb3NlKENsb3NlQ29kZS5JbnRlcm5hbENsaWVudEVycm9yLCBsaW1pdENsb3NlUmVhc29uKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBuZXcgRXJyb3IoZXJyKS5tZXNzYWdlLCAnSW50ZXJuYWwgY2xpZW50IGVycm9yJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsZXQgYWNrbm93bGVkZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICBzb2NrZXQub25tZXNzYWdlID0gKHsgZGF0YSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHBhcnNlTWVzc2FnZShkYXRhLCByZXZpdmVyKTtcbiAgICAgICAgICAgICAgICAgICAgZW1pdHRlci5lbWl0KCdtZXNzYWdlJywgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09ICdwaW5nJyB8fCBtZXNzYWdlLnR5cGUgPT09ICdwb25nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1pdHRlci5lbWl0KG1lc3NhZ2UudHlwZSwgdHJ1ZSwgbWVzc2FnZS5wYXlsb2FkKTsgLy8gcmVjZWl2ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09ICdwb25nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVucXVldWVQaW5nKCk7IC8vIGVucXVldWUgbmV4dCBwaW5nIChub29wIGlmIGRpc2FibGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWRpc2FibGVQb25nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzcG9uZCB3aXRoIHBvbmcgb24gcGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldC5zZW5kKHN0cmluZ2lmeU1lc3NhZ2UobWVzc2FnZS5wYXlsb2FkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogTWVzc2FnZVR5cGUuUG9uZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IG1lc3NhZ2UucGF5bG9hZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IE1lc3NhZ2VUeXBlLlBvbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwYXlsb2FkIGlzIGNvbXBsZXRlbHkgYWJzZW50IGlmIG5vdCBwcm92aWRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1pdHRlci5lbWl0KCdwb25nJywgZmFsc2UsIG1lc3NhZ2UucGF5bG9hZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIHBpbmcgYW5kIHBvbmdzIGNhbiBiZSByZWNlaXZlZCB3aGVuZXZlclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChhY2tub3dsZWRnZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIGFscmVhZHkgY29ubmVjdGVkIGFuZCBhY2tub3dsZWRnZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSAhPT0gTWVzc2FnZVR5cGUuQ29ubmVjdGlvbkFjaylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmlyc3QgbWVzc2FnZSBjYW5ub3QgYmUgb2YgdHlwZSAke21lc3NhZ2UudHlwZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbm5lY3Rpb25BY2tUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgYWNrbm93bGVkZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZW1pdHRlci5lbWl0KCdjb25uZWN0ZWQnLCBzb2NrZXQsIG1lc3NhZ2UucGF5bG9hZCk7IC8vIGNvbm5lY3RlZCA9IHNvY2tldCBvcGVuZWQgKyBhY2tub3dsZWRnZWRcbiAgICAgICAgICAgICAgICAgICAgcmV0cnlpbmcgPSBmYWxzZTsgLy8gZnV0dXJlIGxhenkgY29ubmVjdHMgYXJlIG5vdCByZXRyaWVzXG4gICAgICAgICAgICAgICAgICAgIHJldHJpZXMgPSAwOyAvLyByZXNldCB0aGUgcmV0cmllcyBvbiBjb25uZWN0XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZChbXG4gICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiBlcnJvck9yQ2xvc2VkKHJlamVjdCkpLFxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBzb2NrZXQub25tZXNzYWdlID0gbnVsbDsgLy8gc3RvcCByZWFkaW5nIG1lc3NhZ2VzIGFzIHNvb24gYXMgcmVhZGluZyBicmVha3Mgb25jZVxuICAgICAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0LmNsb3NlKENsb3NlQ29kZS5CYWRSZXNwb25zZSwgbGltaXRDbG9zZVJlYXNvbihlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogbmV3IEVycm9yKGVycikubWVzc2FnZSwgJ0JhZCByZXNwb25zZScpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSgpKSkpO1xuICAgICAgICAvLyBpZiB0aGUgcHJvdmlkZWQgc29ja2V0IGlzIGluIGEgY2xvc2luZyBzdGF0ZSwgd2FpdCBmb3IgdGhlIHRocm93IG9uIGNsb3NlXG4gICAgICAgIGlmIChzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0SW1wbC5DTE9TSU5HKVxuICAgICAgICAgICAgYXdhaXQgdGhyb3dPbkNsb3NlO1xuICAgICAgICBsZXQgcmVsZWFzZSA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIHJlbGVhc2VzIHRoaXMgY29ubmVjdGlvblxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZWxlYXNlZCA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiAocmVsZWFzZSA9IHJlc29sdmUpKTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHNvY2tldCxcbiAgICAgICAgICAgIHJlbGVhc2UsXG4gICAgICAgICAgICBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgICAgICAgIC8vIHdhaXQgZm9yXG4gICAgICAgICAgICAgICAgcmVsZWFzZWQudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbG9ja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBpZiBubyBtb3JlIGxvY2tzIGFyZSBwcmVzZW50LCBjb21wbGV0ZSB0aGUgY29ubmVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGUgPSAoKSA9PiBzb2NrZXQuY2xvc2UoMTAwMCwgJ05vcm1hbCBDbG9zdXJlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNGaW5pdGUobGF6eUNsb3NlVGltZW91dE1zKSAmJiBsYXp5Q2xvc2VUaW1lb3V0TXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGtlZXBhbGl2ZSBpcyBzZXQsIGFsbG93IGZvciB0aGUgc3BlY2lmaWVkIGNhbG1kb3duIHRpbWUgYW5kXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlbiBjb21wbGV0ZSBpZiB0aGUgc29ja2V0IGlzIHN0aWxsIG9wZW4uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF6eUNsb3NlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldEltcGwuT1BFTilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgbGF6eUNsb3NlVGltZW91dE1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSBjb21wbGV0ZSBpbW1lZGlhdGVseVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAvLyBvclxuICAgICAgICAgICAgICAgIHRocm93T25DbG9zZSxcbiAgICAgICAgICAgIF0pLFxuICAgICAgICBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhlIGBjb25uZWN0YCBwcm9ibGVtIGFuZCBldmFsdWF0ZXMgaWYgdGhlIGNsaWVudCBzaG91bGQgcmV0cnkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2hvdWxkUmV0cnlDb25uZWN0T3JUaHJvdyhlcnJPckNsb3NlRXZlbnQpIHtcbiAgICAgICAgLy8gc29tZSBjbG9zZSBjb2RlcyBhcmUgd29ydGggcmVwb3J0aW5nIGltbWVkaWF0ZWx5XG4gICAgICAgIGlmIChpc0xpa2VDbG9zZUV2ZW50KGVyck9yQ2xvc2VFdmVudCkgJiZcbiAgICAgICAgICAgIChpc0ZhdGFsSW50ZXJuYWxDbG9zZUNvZGUoZXJyT3JDbG9zZUV2ZW50LmNvZGUpIHx8XG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICBDbG9zZUNvZGUuSW50ZXJuYWxTZXJ2ZXJFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgQ2xvc2VDb2RlLkludGVybmFsQ2xpZW50RXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIENsb3NlQ29kZS5CYWRSZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICBDbG9zZUNvZGUuQmFkUmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIENsb3NlQ29kZS5VbmF1dGhvcml6ZWQsXG4gICAgICAgICAgICAgICAgICAgIC8vIENsb3NlQ29kZS5Gb3JiaWRkZW4sIG1pZ2h0IGdyYW50IGFjY2VzcyBvdXQgYWZ0ZXIgcmV0cnlcbiAgICAgICAgICAgICAgICAgICAgQ2xvc2VDb2RlLlN1YnByb3RvY29sTm90QWNjZXB0YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2xvc2VDb2RlLkNvbm5lY3Rpb25Jbml0aWFsaXNhdGlvblRpbWVvdXQsIG1pZ2h0IG5vdCB0aW1lIG91dCBhZnRlciByZXRyeVxuICAgICAgICAgICAgICAgICAgICAvLyBDbG9zZUNvZGUuQ29ubmVjdGlvbkFja25vd2xlZGdlbWVudFRpbWVvdXQsIG1pZ2h0IG5vdCB0aW1lIG91dCBhZnRlciByZXRyeVxuICAgICAgICAgICAgICAgICAgICBDbG9zZUNvZGUuU3Vic2NyaWJlckFscmVhZHlFeGlzdHMsXG4gICAgICAgICAgICAgICAgICAgIENsb3NlQ29kZS5Ub29NYW55SW5pdGlhbGlzYXRpb25SZXF1ZXN0cyxcbiAgICAgICAgICAgICAgICAgICAgLy8gNDQ5OSwgLy8gVGVybWluYXRlZCwgcHJvYmFibHkgYmVjYXVzZSB0aGUgc29ja2V0IGZyb3plLCB3ZSB3YW50IHRvIHJldHJ5XG4gICAgICAgICAgICAgICAgXS5pbmNsdWRlcyhlcnJPckNsb3NlRXZlbnQuY29kZSkpKVxuICAgICAgICAgICAgdGhyb3cgZXJyT3JDbG9zZUV2ZW50O1xuICAgICAgICAvLyBjbGllbnQgd2FzIGRpc3Bvc2VkLCBubyByZXRyaWVzIHNob3VsZCBwcm9jZWVkIHJlZ2FyZGxlc3NcbiAgICAgICAgaWYgKGRpc3Bvc2VkKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAvLyBub3JtYWwgY2xvc3VyZSAocG9zc2libHkgYWxsIHN1YnNjcmlwdGlvbnMgaGF2ZSBjb21wbGV0ZWQpXG4gICAgICAgIC8vIGlmIG5vIGxvY2tzIHdlcmUgYWNxdWlyZWQgaW4gdGhlIG1lYW50aW1lLCBzaG91bGRudCB0cnkgYWdhaW5cbiAgICAgICAgaWYgKGlzTGlrZUNsb3NlRXZlbnQoZXJyT3JDbG9zZUV2ZW50KSAmJiBlcnJPckNsb3NlRXZlbnQuY29kZSA9PT0gMTAwMClcbiAgICAgICAgICAgIHJldHVybiBsb2NrcyA+IDA7XG4gICAgICAgIC8vIHJldHJpZXMgYXJlIG5vdCBhbGxvd2VkIG9yIHdlIHRyaWVkIHRvIG1hbnkgdGltZXMsIHJlcG9ydCBlcnJvclxuICAgICAgICBpZiAoIXJldHJ5QXR0ZW1wdHMgfHwgcmV0cmllcyA+PSByZXRyeUF0dGVtcHRzKVxuICAgICAgICAgICAgdGhyb3cgZXJyT3JDbG9zZUV2ZW50O1xuICAgICAgICAvLyB0aHJvdyBub24tcmV0cnlhYmxlIGNvbm5lY3Rpb24gcHJvYmxlbXNcbiAgICAgICAgaWYgKCFzaG91bGRSZXRyeShlcnJPckNsb3NlRXZlbnQpKVxuICAgICAgICAgICAgdGhyb3cgZXJyT3JDbG9zZUV2ZW50O1xuICAgICAgICAvLyBAZGVwcmVjYXRlZCB0aHJvdyBmYXRhbCBjb25uZWN0aW9uIHByb2JsZW1zIGltbWVkaWF0ZWx5XG4gICAgICAgIGlmIChpc0ZhdGFsQ29ubmVjdGlvblByb2JsZW0gPT09IG51bGwgfHwgaXNGYXRhbENvbm5lY3Rpb25Qcm9ibGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpc0ZhdGFsQ29ubmVjdGlvblByb2JsZW0oZXJyT3JDbG9zZUV2ZW50KSlcbiAgICAgICAgICAgIHRocm93IGVyck9yQ2xvc2VFdmVudDtcbiAgICAgICAgLy8gbG9va3MgZ29vZCwgc3RhcnQgcmV0cnlpbmdcbiAgICAgICAgcmV0dXJuIChyZXRyeWluZyA9IHRydWUpO1xuICAgIH1cbiAgICAvLyBpbiBub24tbGF6eSAoaG90PykgbW9kZSBhbHdheXMgaG9sZCBvbmUgY29ubmVjdGlvbiBsb2NrIHRvIHBlcnNpc3QgdGhlIHNvY2tldFxuICAgIGlmICghbGF6eSkge1xuICAgICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgbG9ja3MrKztcbiAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbLCAsIHRocm93T25DbG9zZV0gPSBhd2FpdCBjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRocm93T25DbG9zZTsgLy8gd2lsbCBhbHdheXMgdGhyb3cgYmVjYXVzZSByZWxlYXNlciBpcyBub3QgdXNlZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyT3JDbG9zZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNob3VsZFJldHJ5Q29ubmVjdE9yVGhyb3coZXJyT3JDbG9zZUV2ZW50KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVyck9yQ2xvc2VFdmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVwb3J0IHRocm93biBlcnJvciwgbm8gZnVydGhlciByZXRyaWVzXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25Ob25MYXp5RXJyb3IgPT09IG51bGwgfHwgb25Ob25MYXp5RXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uTm9uTGF6eUVycm9yKGVyck9yQ2xvc2VFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG9uOiBlbWl0dGVyLm9uLFxuICAgICAgICBzdWJzY3JpYmUocGF5bG9hZCwgc2luaykge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBnZW5lcmF0ZUlEKHBheWxvYWQpO1xuICAgICAgICAgICAgbGV0IGRvbmUgPSBmYWxzZSwgZXJyb3JlZCA9IGZhbHNlLCByZWxlYXNlciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBmb3IgaGFuZGxpbmcgY29tcGxldGlvbnMgYmVmb3JlIGNvbm5lY3RcbiAgICAgICAgICAgICAgICBsb2Nrcy0tO1xuICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9ja3MrKztcbiAgICAgICAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBbc29ja2V0LCByZWxlYXNlLCB3YWl0Rm9yUmVsZWFzZU9yVGhyb3dPbkNsb3NlXSA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGRvbmUgd2hpbGUgd2FpdGluZyBmb3IgY29ubmVjdCwgcmVsZWFzZSB0aGUgY29ubmVjdGlvbiBsb2NrIHJpZ2h0IGF3YXlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb25lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWxlYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1bmxpc3RlbiA9IGVtaXR0ZXIub25NZXNzYWdlKGlkLCAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuTmV4dDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgLS0gcGF5bG9hZCB3aWxsIGZpdCB0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW5rLm5leHQobWVzc2FnZS5wYXlsb2FkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLkVycm9yOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZXJyb3JlZCA9IHRydWUpLCAoZG9uZSA9IHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2luay5lcnJvcihtZXNzYWdlLnBheWxvYWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsZWFzZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLkNvbXBsZXRlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGVhc2VyKCk7IC8vIHJlbGVhc2UgY29tcGxldGVzIHRoZSBzaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldC5zZW5kKHN0cmluZ2lmeU1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IE1lc3NhZ2VUeXBlLlN1YnNjcmliZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcmVwbGFjZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGVhc2VyID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZG9uZSAmJiBzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0SW1wbC5PUEVOKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBub3QgY29tcGxldGVkIGFscmVhZHkgYW5kIHNvY2tldCBpcyBvcGVuLCBzZW5kIGNvbXBsZXRlIG1lc3NhZ2UgdG8gc2VydmVyIG9uIHJlbGVhc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0LnNlbmQoc3RyaW5naWZ5TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IE1lc3NhZ2VUeXBlLkNvbXBsZXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCByZXBsYWNlcikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2tzLS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsZWFzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVpdGhlciB0aGUgcmVsZWFzZXIgd2lsbCBiZSBjYWxsZWQsIGNvbm5lY3Rpb24gY29tcGxldGVkIGFuZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHByb21pc2UgcmVzb2x2ZWQgb3IgdGhlIHNvY2tldCBjbG9zZWQgYW5kIHRoZSBwcm9taXNlIHJlamVjdGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hhdGV2ZXIgaGFwcGVucyB0aG91Z2gsIHdlIHdhbnQgdG8gc3RvcCBsaXN0ZW5pbmcgZm9yIG1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB3YWl0Rm9yUmVsZWFzZU9yVGhyb3dPbkNsb3NlLmZpbmFsbHkodW5saXN0ZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBjb21wbGV0ZWQsIHNob3VsZG50IHRyeSBhZ2FpblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJPckNsb3NlRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2hvdWxkUmV0cnlDb25uZWN0T3JUaHJvdyhlcnJPckNsb3NlRXZlbnQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKClcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gZGVsaXZlcmluZyBlaXRoZXIgYW4gZXJyb3Igb3IgYSBjb21wbGV0ZSB0ZXJtaW5hdGVzIHRoZSBzZXF1ZW5jZVxuICAgICAgICAgICAgICAgIGlmICghZXJyb3JlZClcbiAgICAgICAgICAgICAgICAgICAgc2luay5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgfSkgLy8gcmVzb2x2ZXMgb24gcmVsZWFzZSBvciBub3JtYWwgY2xvc3VyZVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgc2luay5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfSk7IC8vIHJlamVjdHMgb24gY2xvc2UgZXZlbnRzIGFuZCBlcnJvcnNcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gZGlzcG9zZSBvbmx5IG9mIGFjdGl2ZSBzdWJzY3JpcHRpb25zXG4gICAgICAgICAgICAgICAgaWYgKCFkb25lKVxuICAgICAgICAgICAgICAgICAgICByZWxlYXNlcigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZGlzcG9zZSgpIHtcbiAgICAgICAgICAgIGRpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBjb25uZWN0aW9uLCBjbG9zZSBpdFxuICAgICAgICAgICAgICAgIGNvbnN0IFtzb2NrZXRdID0gYXdhaXQgY29ubmVjdGluZztcbiAgICAgICAgICAgICAgICBzb2NrZXQuY2xvc2UoMTAwMCwgJ05vcm1hbCBDbG9zdXJlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gb25seSBpZiB0aGVyZSBpcyBhIGNvbm5lY3Rpb25cbiAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ2Nsb3NlZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogNDQ5OSxcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiAnVGVybWluYXRlZCcsXG4gICAgICAgICAgICAgICAgICAgIHdhc0NsZWFuOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9O1xufVxuZnVuY3Rpb24gaXNMaWtlQ2xvc2VFdmVudCh2YWwpIHtcbiAgICByZXR1cm4gaXNPYmplY3QodmFsKSAmJiAnY29kZScgaW4gdmFsICYmICdyZWFzb24nIGluIHZhbDtcbn1cbmZ1bmN0aW9uIGlzRmF0YWxJbnRlcm5hbENsb3NlQ29kZShjb2RlKSB7XG4gICAgaWYgKFtcbiAgICAgICAgMTAwMCxcbiAgICAgICAgMTAwMSxcbiAgICAgICAgMTAwNixcbiAgICAgICAgMTAwNSxcbiAgICAgICAgMTAxMixcbiAgICAgICAgMTAxMyxcbiAgICAgICAgMTAxMywgLy8gQmFkIEdhdGV3YXlcbiAgICBdLmluY2x1ZGVzKGNvZGUpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gYWxsIG90aGVyIGludGVybmFsIGVycm9ycyBhcmUgZmF0YWxcbiAgICByZXR1cm4gY29kZSA+PSAxMDAwICYmIGNvZGUgPD0gMTk5OTtcbn1cbmZ1bmN0aW9uIGlzV2ViU29ja2V0KHZhbCkge1xuICAgIHJldHVybiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAnY29uc3RydWN0b3InIGluIHZhbCAmJlxuICAgICAgICAnQ0xPU0VEJyBpbiB2YWwgJiZcbiAgICAgICAgJ0NMT1NJTkcnIGluIHZhbCAmJlxuICAgICAgICAnQ09OTkVDVElORycgaW4gdmFsICYmXG4gICAgICAgICdPUEVOJyBpbiB2YWwpO1xufVxuIiwiLy8gaHR0cHM6Ly92NC5hcG9sbG8udnVlanMub3JnL2d1aWRlLW9wdGlvbi9zdWJzY3JpcHRpb25zLmh0bWwjdGhlLW5ldy1saWJyYXJ5LWdyYXBocWwtd3NcblxuaW1wb3J0IHsgY3JlYXRlSHR0cExpbmssIEluTWVtb3J5Q2FjaGUsc3BsaXQgfSBmcm9tICdAYXBvbGxvL2NsaWVudC9jb3JlJ1xuaW1wb3J0IHsgR3JhcGhRTFdzTGluayB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC9saW5rL3N1YnNjcmlwdGlvbnNcIlxuaW1wb3J0IHsgZ2V0TWFpbkRlZmluaXRpb24gfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzXCJcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gXCJncmFwaHFsLXdzXCI7XG5cblxuXG4vLyBpcCBhXG4gY29uc3QgSE9TVCA9ICcxOTIuMTY4LjAuMTE5Jztcbi8vY29uc3QgSE9TVCA9IHByb2Nlc3MuZW52LlNFUlZFUlxuLy/Qu9C40L3QuiDQvdCwINCy0LXQsdGB0L7QutC10YJcbmNvbnN0IHdzTGluayA9IG5ldyBHcmFwaFFMV3NMaW5rKFxuICBjcmVhdGVDbGllbnQoe1xuXG4gICAgdXJsOiBwcm9jZXNzLmVudi5XU19VUkkgfHxcbiAgICAgICAgYHdzOi8vJHtIT1NUfTo5MDAwL2dyYXBocWxgLFxuICB9KVxuKTtcbi8vINC70LjQvdC6INC90LAgaHR0cFxuY29uc3QgdXJpID0gcHJvY2Vzcy5lbnYuR1JBUEhRTF9VUkkgfHxcbmBodHRwOi8vJHtIT1NUfTo5MDAwL2dyYXBocWxgO1xuY29uc29sZS5sb2codXJpKVxuY29uc3QgaHR0cExpbmsgPSBuZXcgY3JlYXRlSHR0cExpbmsoe1xuICB1cmlcbn0pO1xuLy8g0L7QsdGJ0LjQuSDQu9C40L3QulxuLy8g0L/QtdGA0LLQsNGPINGB0YHRi9C70LrQsCDQuNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8sINC60L7Qs9C00LAg0YPRgdC70L7QstC40LUgdHJ1ZSwg0LjQvdCw0YfQtSDQstGC0L7RgNCw0Y9cbmNvbnN0IGxpbmsgPSBzcGxpdChcbiAgKHsgcXVlcnkgfSkgPT4ge1xuICAgIGNvbnN0IGRlZmluaXRpb24gPSBnZXRNYWluRGVmaW5pdGlvbihxdWVyeSk7XG4gICAgcmV0dXJuIChcbiAgICAgIGRlZmluaXRpb24ua2luZCA9PT0gJ09wZXJhdGlvbkRlZmluaXRpb24nICYmXG4gICAgICBkZWZpbml0aW9uLm9wZXJhdGlvbiA9PT0gJ3N1YnNjcmlwdGlvbidcbiAgICApO1xuICB9LFxuICB3c0xpbmssXG4gIGh0dHBMaW5rXG4pO1xuXG4vLyDRjdC60YHQv9C+0YDRgtC40YDRg9C10Lwg0L/QsNGA0LDRgtC80LXRgtGA0Ysg0LTQu9GPINC/0L7QtNC60LvRjtGH0LXQvdC40Y9cbmV4cG9ydCAvKiBhc3luYyAqLyBmdW5jdGlvbiBnZXRDbGllbnRPcHRpb25zKC8qIHthcHAsIHJvdXRlciwgLi4ufSAqLyBvcHRpb25zKSB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKFxuICAgIC8vIEdlbmVyYWwgb3B0aW9ucy5cbiAgICB7XG4gICAgICBsaW5rLFxuICAgICAgY2FjaGU6IG5ldyBJbk1lbW9yeUNhY2hlKCksXG4gICAgICBjb25uZWN0VG9EZXZUb29sczogdHJ1ZSxcbiAgICB9LFxuXG4gIClcbn1cbiIsImltcG9ydCB7IEFwb2xsb0NsaWVudCAvKiwgY3JlYXRlSHR0cExpbmsgKi8gfSBmcm9tICdAYXBvbGxvL2NsaWVudC9jb3JlJ1xuaW1wb3J0IHsgQXBvbGxvQ2xpZW50cyB9IGZyb20gJ0B2dWUvYXBvbGxvLWNvbXBvc2FibGUnXG5pbXBvcnQgeyBib290IH0gZnJvbSAncXVhc2FyL3dyYXBwZXJzJ1xuaW1wb3J0IHsgZ2V0Q2xpZW50T3B0aW9ucyB9IGZyb20gJ3NyYy9hcG9sbG8nXG5jb25zdCBvcHRpb25zID0gLyogYXdhaXQgKi8gZ2V0Q2xpZW50T3B0aW9ucygvKiB7YXBwLCByb3V0ZXIgLi4ufSAqLylcbmNvbnN0IGFwb2xsb0NsaWVudCA9IG5ldyBBcG9sbG9DbGllbnQob3B0aW9ucylcbmV4cG9ydCBkZWZhdWx0IGJvb3QoXG4gIC8qIGFzeW5jICovICh7IGFwcCB9KSA9PiB7XG4gICAgLy8gRGVmYXVsdCBjbGllbnQuXG4gICBcbiAgICAvLyAvLyBBZGRpdGlvbmFsIGNsaWVudCBgY2xpZW50QWBcbiAgICAvLyBjb25zdCBvcHRpb25zQSA9IHsgLi4ub3B0aW9ucyB9XG4gICAgLy8gLy8gTW9kaWZ5IG9wdGlvbnMgYXMgbmVlZGVkLlxuICAgIC8vIG9wdGlvbnNBLmxpbmsgPSBjcmVhdGVIdHRwTGluayh7IHVyaTogJ2h0dHA6Ly9jbGllbnRBLmV4YW1wbGUuY29tJyB9KVxuICAgIC8vIGNvbnN0IGNsaWVudEEgPSBuZXcgQXBvbGxvQ2xpZW50KG9wdGlvbnNBKVxuICAgIC8vIC8vIEFkZGl0aW9uYWwgY2xpZW50IGBjbGllbnRCYFxuICAgIC8vIGNvbnN0IG9wdGlvbnNCID0geyAuLi5vcHRpb25zIH1cbiAgICAvLyAvLyBNb2RpZnkgb3B0aW9ucyBhcyBuZWVkZWQuXG4gICAgLy8gb3B0aW9uc0IubGluayA9IGNyZWF0ZUh0dHBMaW5rKHsgdXJpOiAnaHR0cDovL2NsaWVudEIuZXhhbXBsZS5jb20nIH0pXG4gICAgLy8gY29uc3QgY2xpZW50QiA9IG5ldyBBcG9sbG9DbGllbnQob3B0aW9uc0IpXG4gICAgY29uc3QgYXBvbGxvQ2xpZW50cyA9IHtcbiAgICAgIGRlZmF1bHQ6IGFwb2xsb0NsaWVudCxcbiAgICAgIC8vIGNsaWVudEEsXG4gICAgICAvLyBjbGllbnRCLFxuICAgIH1cbiAgICBhcHAucHJvdmlkZShBcG9sbG9DbGllbnRzLCBhcG9sbG9DbGllbnRzKVxuICB9XG4pXG5leHBvcnQge2Fwb2xsb0NsaWVudH0iXSwibmFtZXMiOlsiZCIsImIiLCJfXyIsIl9fYXNzaWduIiwiX2EiLCJJbnZhcmlhbnRFcnJvciIsImludmFyaWFudCIsIm1heWJlIiwiZ2xvYmFsIiwibm9kZWpzQ3VzdG9tSW5zcGVjdFN5bWJvbCIsIkxvY2F0aW9uIiwiVG9rZW4iLCJfdHlwZW9mIiwib2JqIiwiaW5zdGFuY2VPZiIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwiX2NyZWF0ZUNsYXNzIiwiU291cmNlIiwiaW5kZW50Iiwicm9vdCIsIndyYXAiLCJoYXNPd25Qcm9wZXJ0eSIsIkRlZXBNZXJnZXIiLCJTdWJzY3JpcHRpb24iLCJTdWJzY3JpcHRpb25PYnNlcnZlciIsIk9ic2VydmFibGUiLCJmb3JFYWNoIiwidmFsdWUiLCJTeW1ib2wiLCJwb255ZmlsbCIsInRvU3RyaW5nIiwiZXJyb3IiLCJDb25jYXN0Iiwic291cmNlcyIsIm9wdGlvbnMiLCJsaW5rIiwiTGlua0Vycm9yIiwiQXBvbGxvTGluayIsImVyciIsIkFwb2xsb0Vycm9yIiwidXJpIiwicHJpbnQiLCJ2ZXJzaW9uIiwiX2IiLCJfYyIsInBhcnNlRXJyb3IiLCJIdHRwTGluayIsIlRyaWUiLCJTbG90IiwiQ2FjaGUiLCJFbnRyeSIsImRlcCIsImNhY2hlIiwiQXBvbGxvQ2FjaGUiLCJNaXNzaW5nRmllbGRFcnJvciIsIkVudGl0eVN0b3JlIiwicmVmIiwiQ2FjaGVHcm91cCIsIlJvb3QiLCJMYXllciIsIlN0dW1wIiwiaXNPYmplY3RPckFycmF5IiwiT2JqZWN0Q2Fub24iLCJTdG9yZVJlYWRlciIsInJlc3VsdCIsImNhY2hlcyIsIlBvbGljaWVzIiwiZXhpc3RpbmciLCJpbmNvbWluZyIsInN1cGVydHlwZVNldCIsIlN0b3JlV3JpdGVyIiwiZGF0YUlkIiwiY29udGV4dCIsInNlbGVjdGlvblNldCIsIkluTWVtb3J5Q2FjaGUiLCJ3YXRjaCIsIk5ldHdvcmtTdGF0dXMiLCJPYnNlcnZhYmxlUXVlcnkiLCJpbmZvIiwiTG9jYWxTdGF0ZSIsImV4ZWN1dGUiLCJub2RlIiwiUXVlcnlJbmZvIiwiZGlmZiIsIlF1ZXJ5TWFuYWdlciIsImRlZmF1bHRPcHRpb25zIiwiaGFzQ2xpZW50RXhwb3J0cyIsInNlbGYiLCJERUxFVEUiLCJ2YXJpYWJsZXMiLCJzb3VyY2VzV2l0aEluZm8iLCJuZXR3b3JrU3RhdHVzIiwiZGF0YSIsIkFwb2xsb0NsaWVudCIsImlzUmVmMiIsImNvbXB1dGVkMiIsImdldEN1cnJlbnRJbnN0YW5jZTIiLCJyZWYyIiwiZ2V0Q3VycmVudEluc3RhbmNlMyIsInJlZjMiLCJfYTIiLCJ3YXRjaDIiLCJvcHRpb25zMiIsImNvbXB1dGVkMyIsIm9uQmVmb3JlVW5tb3VudDIiLCJpc0xpa2VDbG9zZUV2ZW50IiwiR3JhcGhRTFdzTGluayIsIkNsb3NlQ29kZSIsIk1lc3NhZ2VUeXBlIiwicmV0cmllcyIsImxpc3RlbmVycyIsIm1lc3NhZ2UiLCJzb2NrZXQiLCJlcnJPckNsb3NlRXZlbnQiXSwibWFwcGluZ3MiOiI7QUFnQkEsSUFBSSxnQkFBZ0IsU0FBUyxHQUFHLEdBQUc7QUFDL0Isa0JBQWdCLE9BQU8sa0JBQ2xCLEVBQUUsV0FBVyxDQUFBLGVBQWdCLFNBQVMsU0FBVUEsSUFBR0MsSUFBRztBQUFFLElBQUFELEdBQUUsWUFBWUM7QUFBQSxFQUFFLEtBQ3pFLFNBQVVELElBQUdDLElBQUc7QUFBRSxhQUFTLEtBQUtBO0FBQUcsVUFBSSxPQUFPLFVBQVUsZUFBZSxLQUFLQSxJQUFHLENBQUM7QUFBRyxRQUFBRCxHQUFFLEtBQUtDLEdBQUU7QUFBQTtBQUNoRyxTQUFPLGNBQWMsR0FBRyxDQUFDO0FBQzdCO0FBRU8sU0FBUyxVQUFVLEdBQUcsR0FBRztBQUM1QixNQUFJLE9BQU8sTUFBTSxjQUFjLE1BQU07QUFDakMsVUFBTSxJQUFJLFVBQVUseUJBQXlCLE9BQU8sQ0FBQyxJQUFJLCtCQUErQjtBQUM1RixnQkFBYyxHQUFHLENBQUM7QUFDbEIsV0FBU0MsTUFBSztBQUFFLFNBQUssY0FBYztBQUFBLEVBQUk7QUFDdkMsSUFBRSxZQUFZLE1BQU0sT0FBTyxPQUFPLE9BQU8sQ0FBQyxLQUFLQSxJQUFHLFlBQVksRUFBRSxXQUFXLElBQUlBLElBQUk7QUFDdkY7QUFFVSxJQUFDLFdBQVcsV0FBVztBQUM3QixhQUFXLE9BQU8sVUFBVSxTQUFTQyxVQUFTLEdBQUc7QUFDN0MsYUFBUyxHQUFHLElBQUksR0FBRyxJQUFJLFVBQVUsUUFBUSxJQUFJLEdBQUcsS0FBSztBQUNqRCxVQUFJLFVBQVU7QUFDZCxlQUFTLEtBQUs7QUFBRyxZQUFJLE9BQU8sVUFBVSxlQUFl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
